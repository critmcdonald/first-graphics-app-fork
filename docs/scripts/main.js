!function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return i(n||t)},u,u.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){!function(){var t={version:"3.5.17"},n=[].slice,r=function(t){return n.call(t)},i=this.document;function o(t){return t&&(t.ownerDocument||t.document||t).documentElement}function a(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(i)try{r(i.documentElement.childNodes)[0].nodeType}catch(t){r=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),i)try{i.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var s=this.Element.prototype,l=s.setAttribute,c=s.setAttributeNS,u=this.CSSStyleDeclaration.prototype,d=u.setProperty;s.setAttribute=function(t,e){l.call(this,t,e+"")},s.setAttributeNS=function(t,e,n){c.call(this,t,e,n+"")},u.setProperty=function(t,e,n){d.call(this,t,e+"",n)}}function h(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function f(t){return null===t?NaN:+t}function p(t){return!isNaN(t)}function g(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}t.ascending=h,t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.min=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},t.max=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},t.extent=function(t,e){var n,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=t[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t[o])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e.call(t,t[o],o))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},t.sum=function(t,e){var n,r=0,i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)p(n=+t[o])&&(r+=n);else for(;++o<i;)p(n=+e.call(t,t[o],o))&&(r+=n);return r},t.mean=function(t,e){var n,r=0,i=t.length,o=-1,a=i;if(1===arguments.length)for(;++o<i;)p(n=f(t[o]))?r+=n:--a;else for(;++o<i;)p(n=f(e.call(t,t[o],o)))?r+=n:--a;if(a)return r/a},t.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i},t.median=function(e,n){var r,i=[],o=e.length,a=-1;if(1===arguments.length)for(;++a<o;)p(r=f(e[a]))&&i.push(r);else for(;++a<o;)p(r=f(n.call(e,e[a],a)))&&i.push(r);if(i.length)return t.quantile(i.sort(h),.5)},t.variance=function(t,e){var n,r,i=t.length,o=0,a=0,s=-1,l=0;if(1===arguments.length)for(;++s<i;)p(n=f(t[s]))&&(a+=(r=n-o)*(n-(o+=r/++l)));else for(;++s<i;)p(n=f(e.call(t,t[s],s)))&&(a+=(r=n-o)*(n-(o+=r/++l)));if(l>1)return a/(l-1)},t.deviation=function(){var e=t.variance.apply(this,arguments);return e?Math.sqrt(e):e};var m=g(h);function v(t){return t.length}t.bisectLeft=m.left,t.bisect=t.bisectRight=m.right,t.bisector=function(t){return g(1===t.length?function(e,n){return h(t(e),n)}:t)},t.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,o<2&&(e=0));for(var r,i,o=n-e;o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},t.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},t.pairs=function(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);e<n;)i[e]=[r,r=t[++e]];return i},t.transpose=function(e){if(!(o=e.length))return[];for(var n=-1,r=t.min(e,v),i=new Array(r);++n<r;)for(var o,a=-1,s=i[n]=new Array(o);++a<o;)s[a]=e[a][n];return i},t.zip=function(){return t.transpose(arguments)},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e},t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},t.merge=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n};var y=Math.abs;function _(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function x(){this._=Object.create(null)}t.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var r,i=[],o=function(t){var e=1;for(;t*e%1;)e*=10;return e}(y(n)),a=-1;if(t*=o,e*=o,(n*=o)<0)for(;(r=t+n*++a)>e;)i.push(r/o);else for(;(r=t+n*++a)<e;)i.push(r/o);return i},t.map=function(t,e){var n=new x;if(t instanceof x)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e.call(t,r=t[i],i),r)}else for(var a in t)n.set(a,t[a]);return n};var b="__proto__",w="\0";function k(t){return(t+="")===b||t[0]===w?w+t:t}function T(t){return(t+="")[0]===w?t.slice(1):t}function M(t){return k(t)in this._}function A(t){return(t=k(t))in this._&&delete this._[t]}function L(){var t=[];for(var e in this._)t.push(T(e));return t}function S(){var t=0;for(var e in this._)++t;return t}function C(){for(var t in this._)return!1;return!0}function P(){this._=Object.create(null)}function z(t){return t}function D(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function E(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=O.length;n<r;++n){var i=O[n]+e;if(i in t)return i}}_(x,{has:M,get:function(t){return this._[k(t)]},set:function(t,e){return this._[k(t)]=e},remove:A,keys:L,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:T(e),value:this._[e]});return t},size:S,empty:C,forEach:function(t){for(var e in this._)t.call(this,T(e),this._[e])}}),t.nest=function(){var e,n,r={},i=[],o=[];function a(t,o,s){if(s>=i.length)return n?n.call(r,o):e?o.sort(e):o;for(var l,c,u,d,h=-1,f=o.length,p=i[s++],g=new x;++h<f;)(d=g.get(l=p(c=o[h])))?d.push(c):g.set(l,[c]);return t?(c=t(),u=function(e,n){c.set(e,a(t,n,s))}):(c={},u=function(e,n){c[e]=a(t,n,s)}),g.forEach(u),c}return r.map=function(t,e){return a(e,t,0)},r.entries=function(e){return function t(e,n){if(n>=i.length)return e;var r=[],a=o[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),a?r.sort(function(t,e){return a(t.key,e.key)}):r}(a(t.map,e,0),0)},r.key=function(t){return i.push(t),r},r.sortKeys=function(t){return o[i.length-1]=t,r},r.sortValues=function(t){return e=t,r},r.rollup=function(t){return n=t,r},r},t.set=function(t){var e=new P;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e},_(P,{has:M,add:function(t){return this._[k(t+="")]=!0,t},remove:A,values:L,size:S,empty:C,forEach:function(t){for(var e in this._)t.call(this,T(e))}}),t.behavior={},t.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=D(t,e,e[n]);return t};var O=["webkit","ms","moz","Moz","o","O"];function I(){}function j(){}function N(t){var e=[],n=new x;function r(){for(var n,r=e,i=-1,o=r.length;++i<o;)(n=r[i].on)&&n.apply(this,arguments);return t}return r.on=function(r,i){var o,a=n.get(r);return arguments.length<2?a&&a.on:(a&&(a.on=null,e=e.slice(0,o=e.indexOf(a)).concat(e.slice(o+1)),n.remove(r)),i&&e.push(n.set(r,{on:i})),t)},r}function R(){t.event.preventDefault()}function B(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function F(e){for(var n=new j,r=0,i=arguments.length;++r<i;)n[arguments[r]]=N(n);return n.of=function(r,i){return function(o){try{var a=o.sourceEvent=t.event;o.target=e,t.event=o,n[o.type].apply(r,i)}finally{t.event=a}}},n}t.dispatch=function(){for(var t=new j,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=N(t);return t},j.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},t.event=null,t.requote=function(t){return t.replace(H,"\\$&")};var H=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,q={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function Z(t){return q(t,G),t}var V=function(t,e){return e.querySelector(t)},U=function(t,e){return e.querySelectorAll(t)},W=function(t,e){var n=t.matches||t[E(t,"matchesSelector")];return(W=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(V=function(t,e){return Sizzle(t,e)[0]||null},U=Sizzle,W=Sizzle.matchesSelector),t.selection=function(){return t.select(i.documentElement)};var G=t.selection.prototype=[];function X(t){return"function"==typeof t?t:function(){return V(t,this)}}function Y(t){return"function"==typeof t?t:function(){return U(t,this)}}G.select=function(t){var e,n,r,i,o=[];t=X(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var l=-1,c=r.length;++l<c;)(i=r[l])?(e.push(n=t.call(i,i.__data__,l,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return Z(o)},G.selectAll=function(t){var e,n,i=[];t=Y(t);for(var o=-1,a=this.length;++o<a;)for(var s=this[o],l=-1,c=s.length;++l<c;)(n=s[l])&&(i.push(e=r(t.call(n,n.__data__,l,o))),e.parentNode=n);return Z(i)};var $="http://www.w3.org/1999/xhtml",J={svg:"http://www.w3.org/2000/svg",xhtml:$,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Q(e,n){return e=t.ns.qualify(e),null==n?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof n?e.local?function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}:function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}:e.local?function(){this.setAttributeNS(e.space,e.local,n)}:function(){this.setAttribute(e,n)}}function K(t){return t.trim().replace(/\s+/g," ")}function tt(e){return new RegExp("(?:^|\\s+)"+t.requote(e)+"(?:\\s+|$)","g")}function et(t){return(t+"").trim().split(/^|\s+/)}function nt(t,e){var n=(t=et(t).map(rt)).length;return"function"==typeof e?function(){for(var r=-1,i=e.apply(this,arguments);++r<n;)t[r](this,i)}:function(){for(var r=-1;++r<n;)t[r](this,e)}}function rt(t){var e=tt(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",K(i+" "+t))):n.setAttribute("class",K(i.replace(e," ")))}}function it(t,e,n){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}:function(){this.style.setProperty(t,e,n)}}function ot(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}:function(){this[t]=e}}function at(e){return"function"==typeof e?e:(e=t.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,n=this.namespaceURI;return n===$&&t.documentElement.namespaceURI===$?t.createElement(e):t.createElementNS(n,e)}}function st(){var t=this.parentNode;t&&t.removeChild(this)}function lt(t){return{__data__:t}}function ct(t){return function(){return W(this,t)}}function ut(t,e){for(var n=0,r=t.length;n<r;n++)for(var i,o=t[n],a=0,s=o.length;a<s;a++)(i=o[a])&&e(i,a,n);return t}function dt(t){return q(t,ht),t}t.ns={prefix:J,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),J.hasOwnProperty(n)?{space:J[n],local:t}:t}},G.attr=function(e,n){if(arguments.length<2){if("string"==typeof e){var r=this.node();return(e=t.ns.qualify(e)).local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}for(n in e)this.each(Q(n,e[n]));return this}return this.each(Q(e,n))},G.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=et(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!tt(t[i]).test(e))return!1;return!0}for(e in t)this.each(nt(e,t[e]));return this}return this.each(nt(t,e))},G.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.each(it(n,t[n],e));return this}if(r<2){var i=this.node();return a(i).getComputedStyle(i,null).getPropertyValue(t)}n=""}return this.each(it(t,e,n))},G.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(ot(e,t[e]));return this}return this.each(ot(t,e))},G.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},G.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},G.append=function(t){return t=at(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},G.insert=function(t,e){return t=at(t),e=X(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},G.remove=function(){return this.each(st)},G.data=function(t,e){var n,r,i=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(n=this[0]).length);++i<o;)(r=n[i])&&(t[i]=r.__data__);return t}function a(t,n){var r,i,o,a=t.length,u=n.length,d=Math.min(a,u),h=new Array(u),f=new Array(u),p=new Array(a);if(e){var g,m=new x,v=new Array(a);for(r=-1;++r<a;)(i=t[r])&&(m.has(g=e.call(i,i.__data__,r))?p[r]=i:m.set(g,i),v[r]=g);for(r=-1;++r<u;)(i=m.get(g=e.call(n,o=n[r],r)))?!0!==i&&(h[r]=i,i.__data__=o):f[r]=lt(o),m.set(g,!0);for(r=-1;++r<a;)r in v&&!0!==m.get(v[r])&&(p[r]=t[r])}else{for(r=-1;++r<d;)i=t[r],o=n[r],i?(i.__data__=o,h[r]=i):f[r]=lt(o);for(;r<u;++r)f[r]=lt(n[r]);for(;r<a;++r)p[r]=t[r]}f.update=h,f.parentNode=h.parentNode=p.parentNode=t.parentNode,s.push(f),l.push(h),c.push(p)}var s=dt([]),l=Z([]),c=Z([]);if("function"==typeof t)for(;++i<o;)a(n=this[i],t.call(n,n.parentNode.__data__,i));else for(;++i<o;)a(n=this[i],t);return l.enter=function(){return s},l.exit=function(){return c},l},G.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},G.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=ct(t));for(var o=0,a=this.length;o<a;o++){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&t.call(r,r.__data__,s,o)&&e.push(r)}return Z(i)},G.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},G.sort=function(t){t=function(t){arguments.length||(t=h);return function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},G.each=function(t){return ut(this,function(e,n,r){t.call(e,e.__data__,n,r)})},G.call=function(t){var e=r(arguments);return t.apply(e[0]=this,e),this},G.empty=function(){return!this.node()},G.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,i=n.length;r<i;r++){var o=n[r];if(o)return o}return null},G.size=function(){var t=0;return ut(this,function(){++t}),t};var ht=[];function ft(e,n,i){var o="__on"+e,a=e.indexOf("."),s=gt;a>0&&(e=e.slice(0,a));var l=pt.get(e);function c(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}return l&&(e=l,s=mt),a?n?function(){var t=s(n,r(arguments));c.call(this),this.addEventListener(e,this[o]=t,t.$=i),t._=n}:c:n?I:function(){var n,r=new RegExp("^__on([^.]+)"+t.requote(e)+"$");for(var i in this)if(n=i.match(r)){var o=this[i];this.removeEventListener(n[1],o,o.$),delete this[i]}}}t.selection.enter=dt,t.selection.enter.prototype=ht,ht.append=G.append,ht.empty=G.empty,ht.node=G.node,ht.call=G.call,ht.size=G.size,ht.select=function(t){for(var e,n,r,i,o,a=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,a.push(e=[]),e.parentNode=i.parentNode;for(var c=-1,u=i.length;++c<u;)(o=i[c])?(e.push(r[c]=n=t.call(i.parentNode,o.__data__,c,s)),n.__data__=o.__data__):e.push(null)}return Z(a)},ht.insert=function(t,e){var n,r,i;return arguments.length<2&&(n=this,e=function(t,e,o){var a,s=n[o].update,l=s.length;for(o!=i&&(i=o,r=0),e>=r&&(r=e+1);!(a=s[r])&&++r<l;);return a}),G.insert.call(this,t,e)},t.select=function(t){var e;return"string"==typeof t?(e=[V(t,i)]).parentNode=i.documentElement:(e=[t]).parentNode=o(t),Z([e])},t.selectAll=function(t){var e;return"string"==typeof t?(e=r(U(t,i))).parentNode=i.documentElement:(e=r(t)).parentNode=null,Z([e])},G.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=!1),t)this.each(ft(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(ft(t,e,n))};var pt=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});function gt(e,n){return function(r){var i=t.event;t.event=r,n[0]=this.__data__;try{e.apply(this,n)}finally{t.event=i}}}function mt(t,e){var n=gt(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}i&&pt.forEach(function(t){"on"+t in i&&pt.remove(t)});var vt,yt=0;function _t(e){var n=".dragsuppress-"+ ++yt,r="click"+n,i=t.select(a(e)).on("touchmove"+n,R).on("dragstart"+n,R).on("selectstart"+n,R);if(null==vt&&(vt=!("onselectstart"in e)&&E(e.style,"userSelect")),vt){var s=o(e).style,l=s[vt];s[vt]="none"}return function(t){if(i.on(n,null),vt&&(s[vt]=l),t){var e=function(){i.on(r,null)};i.on(r,function(){R(),e()},!0),setTimeout(e,0)}}}t.mouse=function(t){return bt(t,B())};var xt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function bt(e,n){n.changedTouches&&(n=n.changedTouches[0]);var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();if(xt<0){var o=a(e);if(o.scrollX||o.scrollY){var s=(r=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();xt=!(s.f||s.e),r.remove()}}return xt?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}var l=e.getBoundingClientRect();return[n.clientX-l.left-e.clientLeft,n.clientY-l.top-e.clientTop]}function wt(){return t.event.changedTouches[0].identifier}t.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=B().changedTouches),e)for(var r,i=0,o=e.length;i<o;++i)if((r=e[i]).identifier===n)return bt(t,r)},t.behavior.drag=function(){var e=F(o,"drag","dragstart","dragend"),n=null,r=s(I,t.mouse,a,"mousemove","mouseup"),i=s(wt,t.touch,z,"touchmove","touchend");function o(){this.on("mousedown.drag",r).on("touchstart.drag",i)}function s(r,i,o,a,s){return function(){var l,c=t.event.target.correspondingElement||t.event.target,u=this.parentNode,d=e.of(this,arguments),h=0,f=r(),p=".drag"+(null==f?"":"-"+f),g=t.select(o(c)).on(a+p,function(){var t,e,n=i(u,f);if(!n)return;t=n[0]-v[0],e=n[1]-v[1],h|=t|e,v=n,d({type:"drag",x:n[0]+l[0],y:n[1]+l[1],dx:t,dy:e})}).on(s+p,function(){if(!i(u,f))return;g.on(a+p,null).on(s+p,null),m(h),d({type:"dragend"})}),m=_t(c),v=i(u,f);l=n?[(l=n.apply(this,arguments)).x-v[0],l.y-v[1]]:[0,0],d({type:"dragstart"})}}return o.origin=function(t){return arguments.length?(n=t,o):n},t.rebind(o,e,"on")},t.touches=function(t,e){return arguments.length<2&&(e=B().touches),e?r(e).map(function(e){var n=bt(t,e);return n.identifier=e.identifier,n}):[]};var kt=1e-6,Tt=kt*kt,Mt=Math.PI,At=2*Mt,Lt=At-kt,St=Mt/2,Ct=Mt/180,Pt=180/Mt;function zt(t){return t>0?1:t<0?-1:0}function Dt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Et(t){return t>1?0:t<-1?Mt:Math.acos(t)}function Ot(t){return t>1?St:t<-1?-St:Math.asin(t)}function It(t){return((t=Math.exp(t))+1/t)/2}function jt(t){return(t=Math.sin(t/2))*t}var Nt=Math.SQRT2;t.interpolateZoom=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[0],l=e[1],c=e[2],u=s-i,d=l-o,h=u*u+d*d;if(h<Tt)r=Math.log(c/a)/Nt,n=function(t){return[i+t*u,o+t*d,a*Math.exp(Nt*t*r)]};else{var f=Math.sqrt(h),p=(c*c-a*a+4*h)/(2*a*2*f),g=(c*c-a*a-4*h)/(2*c*2*f),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);r=(v-m)/Nt,n=function(t){var e,n,s=t*r,l=It(m),c=a/(2*f)*(l*(n=Nt*s+m,((n=Math.exp(2*n))-1)/(n+1))-(e=m,((e=Math.exp(e))-1/e)/2));return[i+c*u,o+c*d,a*l/It(Nt*s+m)]}}return n.duration=1e3*r,n},t.behavior.zoom=function(){var e,n,r,o,s,l,c,u,d,h={x:0,y:0,k:1},f=[960,500],p=Ft,g=250,m=0,v="mousedown.zoom",y="mousemove.zoom",_="mouseup.zoom",x="touchstart.zoom",b=F(w,"zoomstart","zoom","zoomend");function w(t){t.on(v,z).on(Bt+".zoom",E).on("dblclick.zoom",O).on(x,D)}function k(t){return[(t[0]-h.x)/h.k,(t[1]-h.y)/h.k]}function T(t){h.k=Math.max(p[0],Math.min(p[1],t))}function M(t,e){var n;e=[(n=e)[0]*h.k+h.x,n[1]*h.k+h.y],h.x+=t[0]-e[0],h.y+=t[1]-e[1]}function A(e,r,i,o){e.__chart__={x:h.x,y:h.y,k:h.k},T(Math.pow(2,o)),M(n=r,i),e=t.select(e),g>0&&(e=e.transition().duration(g)),e.call(w.event)}function L(){c&&c.domain(l.range().map(function(t){return(t-h.x)/h.k}).map(l.invert)),d&&d.domain(u.range().map(function(t){return(t-h.y)/h.k}).map(u.invert))}function S(t){m++||t({type:"zoomstart"})}function C(t){L(),t({type:"zoom",scale:h.k,translate:[h.x,h.y]})}function P(t){--m||(t({type:"zoomend"}),n=null)}function z(){var e=this,n=b.of(e,arguments),r=0,i=t.select(a(e)).on(y,function(){r=1,M(t.mouse(e),o),C(n)}).on(_,function(){i.on(y,null).on(_,null),s(r),P(n)}),o=k(t.mouse(e)),s=_t(e);as.call(e),S(n)}function D(){var e,n=this,r=b.of(n,arguments),i={},o=0,a=".zoom-"+t.event.changedTouches[0].identifier,l="touchmove"+a,c="touchend"+a,u=[],d=t.select(n),f=_t(n);function p(){var r=t.touches(n);return e=h.k,r.forEach(function(t){t.identifier in i&&(i[t.identifier]=k(t))}),r}function g(){var e=t.event.target;t.select(e).on(l,m).on(c,y),u.push(e);for(var r=t.event.changedTouches,a=0,d=r.length;a<d;++a)i[r[a].identifier]=null;var f=p(),g=Date.now();if(1===f.length){if(g-s<500){var v=f[0];A(n,v,i[v.identifier],Math.floor(Math.log(h.k)/Math.LN2)+1),R()}s=g}else if(f.length>1){v=f[0];var _=f[1],x=v[0]-_[0],b=v[1]-_[1];o=x*x+b*b}}function m(){var a,l,c,u,d=t.touches(n);as.call(n);for(var h=0,f=d.length;h<f;++h,u=null)if(c=d[h],u=i[c.identifier]){if(l)break;a=c,l=u}if(u){var p=(p=c[0]-a[0])*p+(p=c[1]-a[1])*p,g=o&&Math.sqrt(p/o);a=[(a[0]+c[0])/2,(a[1]+c[1])/2],l=[(l[0]+u[0])/2,(l[1]+u[1])/2],T(g*e)}s=null,M(a,l),C(r)}function y(){if(t.event.touches.length){for(var e=t.event.changedTouches,n=0,o=e.length;n<o;++n)delete i[e[n].identifier];for(var s in i)return void p()}t.selectAll(u).on(a,null),d.on(v,z).on(x,D),f(),P(r)}g(),S(r),d.on(v,null).on(x,g)}function E(){var i=b.of(this,arguments);o?clearTimeout(o):(as.call(this),e=k(n=r||t.mouse(this)),S(i)),o=setTimeout(function(){o=null,P(i)},50),R(),T(Math.pow(2,.002*Rt())*h.k),M(n,e),C(i)}function O(){var e=t.mouse(this),n=Math.log(h.k)/Math.LN2;A(this,e,k(e),t.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}return Bt||(Bt="onwheel"in i?(Rt=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?(Rt=function(){return t.event.wheelDelta},"mousewheel"):(Rt=function(){return-t.event.detail},"MozMousePixelScroll")),w.event=function(e){e.each(function(){var e=b.of(this,arguments),r=h;cs?t.select(this).transition().each("start.zoom",function(){h=this.__chart__||{x:0,y:0,k:1},S(e)}).tween("zoom:zoom",function(){var i=f[0],o=f[1],a=n?n[0]:i/2,s=n?n[1]:o/2,l=t.interpolateZoom([(a-h.x)/h.k,(s-h.y)/h.k,i/h.k],[(a-r.x)/r.k,(s-r.y)/r.k,i/r.k]);return function(t){var n=l(t),r=i/n[2];this.__chart__=h={x:a-n[0]*r,y:s-n[1]*r,k:r},C(e)}}).each("interrupt.zoom",function(){P(e)}).each("end.zoom",function(){P(e)}):(this.__chart__=h,S(e),C(e),P(e))})},w.translate=function(t){return arguments.length?(h={x:+t[0],y:+t[1],k:h.k},L(),w):[h.x,h.y]},w.scale=function(t){return arguments.length?(h={x:h.x,y:h.y,k:null},T(+t),L(),w):h.k},w.scaleExtent=function(t){return arguments.length?(p=null==t?Ft:[+t[0],+t[1]],w):p},w.center=function(t){return arguments.length?(r=t&&[+t[0],+t[1]],w):r},w.size=function(t){return arguments.length?(f=t&&[+t[0],+t[1]],w):f},w.duration=function(t){return arguments.length?(g=+t,w):g},w.x=function(t){return arguments.length?(c=t,l=t.copy(),h={x:0,y:0,k:1},w):c},w.y=function(t){return arguments.length?(d=t,u=t.copy(),h={x:0,y:0,k:1},w):d},t.rebind(w,b,"on")};var Rt,Bt,Ft=[0,1/0];function Ht(){}function qt(t,e,n){return this instanceof qt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof qt?new qt(t.h,t.s,t.l):ue(""+t,de,qt):new qt(t,e,n)}t.color=Ht,Ht.prototype.toString=function(){return this.rgb()+""},t.hsl=qt;var Zt=qt.prototype=new Ht;function Vt(t,e,n){var r,i;function o(t){return Math.round(255*((e=t)>360?e-=360:e<0&&(e+=360),e<60?r+(i-r)*e/60:e<180?i:e<240?r+(i-r)*(240-e)/60:r));var e}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,r=2*(n=n<0?0:n>1?1:n)-(i=n<=.5?n*(1+e):n+e-n*e),new oe(o(t+120),o(t),o(t-120))}function Ut(e,n,r){return this instanceof Ut?(this.h=+e,this.c=+n,void(this.l=+r)):arguments.length<2?e instanceof Ut?new Ut(e.h,e.c,e.l):ee(e instanceof Xt?e.l:(e=he((e=t.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Ut(e,n,r)}Zt.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new qt(this.h,this.s,this.l/t)},Zt.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new qt(this.h,this.s,t*this.l)},Zt.rgb=function(){return Vt(this.h,this.s,this.l)},t.hcl=Ut;var Wt=Ut.prototype=new Ht;function Gt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new Xt(n,Math.cos(t*=Ct)*e,Math.sin(t)*e)}function Xt(t,e,n){return this instanceof Xt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof Xt?new Xt(t.l,t.a,t.b):t instanceof Ut?Gt(t.h,t.c,t.l):he((t=oe(t)).r,t.g,t.b):new Xt(t,e,n)}Wt.brighter=function(t){return new Ut(this.h,this.c,Math.min(100,this.l+Yt*(arguments.length?t:1)))},Wt.darker=function(t){return new Ut(this.h,this.c,Math.max(0,this.l-Yt*(arguments.length?t:1)))},Wt.rgb=function(){return Gt(this.h,this.c,this.l).rgb()},t.lab=Xt;var Yt=18,$t=.95047,Jt=1,Qt=1.08883,Kt=Xt.prototype=new Ht;function te(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return new oe(ie(3.2404542*(i=ne(i)*$t)-1.5371385*(r=ne(r)*Jt)-.4985314*(o=ne(o)*Qt)),ie(-.969266*i+1.8760108*r+.041556*o),ie(.0556434*i-.2040259*r+1.0572252*o))}function ee(t,e,n){return t>0?new Ut(Math.atan2(n,e)*Pt,Math.sqrt(e*e+n*n),t):new Ut(NaN,NaN,t)}function ne(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function re(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ie(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function oe(t,e,n){return this instanceof oe?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof oe?new oe(t.r,t.g,t.b):ue(""+t,oe,Vt):new oe(t,e,n)}function ae(t){return new oe(t>>16,t>>8&255,255&t)}function se(t){return ae(t)+""}Kt.brighter=function(t){return new Xt(Math.min(100,this.l+Yt*(arguments.length?t:1)),this.a,this.b)},Kt.darker=function(t){return new Xt(Math.max(0,this.l-Yt*(arguments.length?t:1)),this.a,this.b)},Kt.rgb=function(){return te(this.l,this.a,this.b)},t.rgb=oe;var le=oe.prototype=new Ht;function ce(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function ue(t,e,n){var r,i,o,a=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(pe(i[0]),pe(i[1]),pe(i[2]))}return(o=ge.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a|=a>>4,s=240&o,s|=s>>4,l=15&o,l|=l<<4):7===t.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,l=255&o)),e(a,s,l))}function de(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-o,l=(a+o)/2;return s?(i=l<.5?s/(a+o):s/(2-a-o),r=t==a?(e-n)/s+(e<n?6:0):e==a?(n-t)/s+2:(t-e)/s+4,r*=60):(r=NaN,i=l>0&&l<1?0:r),new qt(r,i,l)}function he(t,e,n){var r=re((.4124564*(t=fe(t))+.3575761*(e=fe(e))+.1804375*(n=fe(n)))/$t),i=re((.2126729*t+.7151522*e+.072175*n)/Jt);return Xt(116*i-16,500*(r-i),200*(i-re((.0193339*t+.119192*e+.9503041*n)/Qt)))}function fe(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function pe(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}le.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b;return e||n||r?(e&&e<30&&(e=30),n&&n<30&&(n=30),r&&r<30&&(r=30),new oe(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new oe(30,30,30)},le.darker=function(t){return new oe((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},le.hsl=function(){return de(this.r,this.g,this.b)},le.toString=function(){return"#"+ce(this.r)+ce(this.g)+ce(this.b)};var ge=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function me(t){return"function"==typeof t?t:function(){return t}}function ve(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),ye(e,n,t,r)}}function ye(e,n,i,o){var a,s={},l=t.dispatch("beforesend","progress","load","error"),c={},u=new XMLHttpRequest,d=null;function h(){var t,e,n,r=u.status;if(!r&&((n=(e=u).responseType)&&"text"!==n?e.response:e.responseText)||r>=200&&r<300||304===r){try{t=i.call(s,u)}catch(t){return void l.error.call(s,t)}l.load.call(s,t)}else l.error.call(s,u)}return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(e)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=h:u.onreadystatechange=function(){u.readyState>3&&h()},u.onprogress=function(e){var n=t.event;t.event=e;try{l.progress.call(s,u)}finally{t.event=n}},s.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?c[t]:(null==e?delete c[t]:c[t]=e+"",s)},s.mimeType=function(t){return arguments.length?(n=null==t?null:t+"",s):n},s.responseType=function(t){return arguments.length?(d=t,s):d},s.response=function(t){return i=t,s},["get","post"].forEach(function(t){s[t]=function(){return s.send.apply(s,[t].concat(r(arguments)))}}),s.send=function(t,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),u.open(t,e,!0),null==n||"accept"in c||(c.accept=n+",*/*"),u.setRequestHeader)for(var o in c)u.setRequestHeader(o,c[o]);return null!=n&&u.overrideMimeType&&u.overrideMimeType(n),null!=d&&(u.responseType=d),null!=i&&s.on("error",i).on("load",function(t){i(null,t)}),l.beforesend.call(s,u),u.send(null==r?null:r),s},s.abort=function(){return u.abort(),s},t.rebind(s,l,"on"),null==o?s:s.get(1===(a=o).length?function(t,e){a(null==t?e:null)}:a)}ge.forEach(function(t,e){ge.set(t,ae(e))}),t.functor=me,t.xhr=ve(z),t.dsv=function(t,e){var n=new RegExp('["'+t+"\n]"),r=t.charCodeAt(0);function i(t,n,r){arguments.length<3&&(r=n,n=null);var i=ye(t,e,null==n?o:a(n),r);return i.row=function(t){return arguments.length?i.response(null==(n=t)?o:a(t)):n},i}function o(t){return i.parse(t.responseText)}function a(t){return function(e){return i.parse(e.responseText,t)}}function s(e){return e.map(l).join(t)}function l(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return i.parse=function(t,e){var n;return i.parseRows(t,function(t,r){if(n)return n(t,r-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");n=e?function(t,n){return e(i(t),n)}:i})},i.parseRows=function(t,e){var n,i,o={},a={},s=[],l=t.length,c=0,u=0;function d(){if(c>=l)return a;if(i)return i=!1,o;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<l;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}return c=n+2,13===(s=t.charCodeAt(n+1))?(i=!0,10===t.charCodeAt(n+2)&&++c):10===s&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;c<l;){var s,u=1;if(10===(s=t.charCodeAt(c++)))i=!0;else if(13===s)i=!0,10===t.charCodeAt(c)&&(++c,++u);else if(s!==r)continue;return t.slice(e,c-u)}return t.slice(e)}for(;(n=d())!==a;){for(var h=[];n!==o&&n!==a;)h.push(n),n=d();e&&null==(h=e(h,u++))||s.push(h)}return s},i.format=function(e){if(Array.isArray(e[0]))return i.formatRows(e);var n=new P,r=[];return e.forEach(function(t){for(var e in t)n.has(e)||r.push(n.add(e))}),[r.map(l).join(t)].concat(e.map(function(e){return r.map(function(t){return l(e[t])}).join(t)})).join("\n")},i.formatRows=function(t){return t.map(s).join("\n")},i},t.csv=t.dsv(",","text/csv"),t.tsv=t.dsv("\t","text/tab-separated-values");var _e,xe,be,we,ke=this[E(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function Te(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());var i={c:t,t:n+e,n:null};return xe?xe.n=i:_e=i,xe=i,be||(we=clearTimeout(we),be=1,ke(Me)),i}function Me(){var t=Ae(),e=Le()-t;e>24?(isFinite(e)&&(clearTimeout(we),we=setTimeout(Me,e)),be=0):(be=1,ke(Me))}function Ae(){for(var t=Date.now(),e=_e;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Le(){for(var t,e=_e,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:_e=e.n;return xe=t,n}function Se(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}t.timer=function(){Te.apply(this,arguments)},t.timer.flush=function(){Ae(),Le()},t.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Ce=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*y(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}});t.formatPrefix=function(e,n){var r=0;return(e=+e)&&(e<0&&(e*=-1),n&&(e=t.round(e,Se(e,n))),r=1+Math.floor(1e-12+Math.log(e)/Math.LN10),r=Math.max(-24,Math.min(24,3*Math.floor((r-1)/3)))),Ce[8+r/3]};var Pe=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ze=t.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(e,n){return(e=t.round(e,Se(e,n))).toFixed(Math.max(0,Math.min(20,Se(e*(1+1e-15),n))))}});function De(t){return t+""}var Ee=t.time={},Oe=Date;function Ie(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Ie.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){je.setUTCDate.apply(this._,arguments)},setDay:function(){je.setUTCDay.apply(this._,arguments)},setFullYear:function(){je.setUTCFullYear.apply(this._,arguments)},setHours:function(){je.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){je.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){je.setUTCMinutes.apply(this._,arguments)},setMonth:function(){je.setUTCMonth.apply(this._,arguments)},setSeconds:function(){je.setUTCSeconds.apply(this._,arguments)},setTime:function(){je.setTime.apply(this._,arguments)}};var je=Date.prototype;function Ne(t,e,n){function r(e){var n=t(e),r=o(n,1);return e-n<r-e?n:r}function i(n){return e(n=t(new Oe(n-1)),1),n}function o(t,n){return e(t=new Oe(+t),n),t}function a(t,r,o){var a=i(t),s=[];if(o>1)for(;a<r;)n(a)%o||s.push(new Date(+a)),e(a,1);else for(;a<r;)s.push(new Date(+a)),e(a,1);return s}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var s=t.utc=Re(t);return s.floor=s,s.round=Re(r),s.ceil=Re(i),s.offset=Re(o),s.range=function(t,e,n){try{Oe=Ie;var r=new Ie;return r._=t,a(r,e,n)}finally{Oe=Date}},t}function Re(t){return function(e,n){try{Oe=Ie;var r=new Ie;return r._=e,t(r,n)._}finally{Oe=Date}}}Ee.year=Ne(function(t){return(t=Ee.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Ee.years=Ee.year.range,Ee.years.utc=Ee.year.utc.range,Ee.day=Ne(function(t){var e=new Oe(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Ee.days=Ee.day.range,Ee.days.utc=Ee.day.utc.range,Ee.dayOfYear=function(t){var e=Ee.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=Ee[t]=Ne(function(t){return(t=Ee.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=Ee.year(t).getDay();return Math.floor((Ee.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});Ee[t+"s"]=n.range,Ee[t+"s"].utc=n.utc.range,Ee[t+"OfYear"]=function(t){var n=Ee.year(t).getDay();return Math.floor((Ee.dayOfYear(t)+(n+e)%7)/7)}}),Ee.week=Ee.sunday,Ee.weeks=Ee.sunday.range,Ee.weeks.utc=Ee.sunday.utc.range,Ee.weekOfYear=Ee.sundayOfYear;var Be={"-":"",_:" ",0:"0"},Fe=/^\s*\d+/,He=/^%/;function qe(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Ze(e){return new RegExp("^(?:"+e.map(t.requote).join("|")+")","i")}function Ve(t){for(var e=new x,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Ue(t,e,n){Fe.lastIndex=0;var r=Fe.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function We(t,e,n){Fe.lastIndex=0;var r=Fe.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Ge(t,e,n){Fe.lastIndex=0;var r=Fe.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function Xe(t,e,n){Fe.lastIndex=0;var r=Fe.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Ye(t,e,n){Fe.lastIndex=0;var r,i=Fe.exec(e.slice(n,n+2));return i?(t.y=(r=+i[0])+(r>68?1900:2e3),n+i[0].length):-1}function $e(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Je(t,e,n){Fe.lastIndex=0;var r=Fe.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Qe(t,e,n){Fe.lastIndex=0;var r=Fe.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Ke(t,e,n){Fe.lastIndex=0;var r=Fe.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function tn(t,e,n){Fe.lastIndex=0;var r=Fe.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function en(t,e,n){Fe.lastIndex=0;var r=Fe.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function nn(t,e,n){Fe.lastIndex=0;var r=Fe.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function rn(t,e,n){Fe.lastIndex=0;var r=Fe.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function on(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=y(e)/60|0,i=y(e)%60;return n+qe(r,"0",2)+qe(i,"0",2)}function an(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function sn(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}t.locale=function(e){return{numberFormat:(n=e,r=n.decimal,i=n.thousands,o=n.grouping,a=n.currency,s=o&&i?function(t,e){for(var n=t.length,r=[],a=0,s=o[0],l=0;n>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),r.push(t.substring(n-=s,n+s)),!((l+=s+1)>e));)s=o[a=(a+1)%o.length];return r.reverse().join(i)}:z,function(e){var n=Pe.exec(e),i=n[1]||" ",o=n[2]||">",l=n[3]||"-",c=n[4]||"",u=n[5],d=+n[6],h=n[7],f=n[8],p=n[9],g=1,m="",v="",y=!1,_=!0;switch(f&&(f=+f.substring(1)),(u||"0"===i&&"="===o)&&(u=i="0",o="="),p){case"n":h=!0,p="g";break;case"%":g=100,v="%",p="f";break;case"p":g=100,v="%",p="r";break;case"b":case"o":case"x":case"X":"#"===c&&(m="0"+p.toLowerCase());case"c":_=!1;case"d":y=!0,f=0;break;case"s":g=-1,p="r"}"$"===c&&(m=a[0],v=a[1]),"r"!=p||f||(p="g"),null!=f&&("g"==p?f=Math.max(1,Math.min(21,f)):"e"!=p&&"f"!=p||(f=Math.max(0,Math.min(20,f)))),p=ze.get(p)||De;var x=u&&h;return function(e){var n=v;if(y&&e%1)return"";var a=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===l?"":l;if(g<0){var c=t.formatPrefix(e,f);e=c.scale(e),n=c.symbol+v}else e*=g;var b,w,k=(e=p(e,f)).lastIndexOf(".");if(k<0){var T=_?e.lastIndexOf("e"):-1;T<0?(b=e,w=""):(b=e.substring(0,T),w=e.substring(T))}else b=e.substring(0,k),w=r+e.substring(k+1);!u&&h&&(b=s(b,1/0));var M=m.length+b.length+w.length+(x?0:a.length),A=M<d?new Array(M=d-M+1).join(i):"";return x&&(b=s(A+b,A.length?d-w.length:1/0)),a+=m,e=b+w,("<"===o?a+e+A:">"===o?A+a+e:"^"===o?A.substring(0,M>>=1)+a+e+A.substring(M):a+(x?e:A+e))+n}}),timeFormat:function(e){var n=e.dateTime,r=e.date,i=e.time,o=e.periods,a=e.days,s=e.shortDays,l=e.months,c=e.shortMonths;function u(t){var e=t.length;function n(n){for(var r,i,o,a=[],s=-1,l=0;++s<e;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(i=Be[r=t.charAt(++s)])&&(r=t.charAt(++s)),(o=b[r])&&(r=o(n,null==i?"e"===r?" ":"0":i)),a.push(r),l=s+1);return a.push(t.slice(l,s)),a.join("")}return n.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(d(n,t,e,0)!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=null!=n.Z&&Oe!==Ie,i=new(r?Ie:Oe);return"j"in n?i.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),i.setFullYear(n.y,0,1),i.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(i.getDay()+5)%7:n.w+7*n.U-(i.getDay()+6)%7)):i.setFullYear(n.y,n.m,n.d),i.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),r?i._:i},n.toString=function(){return t},n}function d(t,e,n,r){for(var i,o,a,s=0,l=e.length,c=n.length;s<l;){if(r>=c)return-1;if(37===(i=e.charCodeAt(s++))){if(a=e.charAt(s++),!(o=w[a in Be?e.charAt(s++):a])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}u.multi=(u.utc=function(t){var e=u(t);function n(t){try{var n=new(Oe=Ie);return n._=t,e(n)}finally{Oe=Date}}return n.parse=function(t){try{Oe=Ie;var n=e.parse(t);return n&&n._}finally{Oe=Date}},n.toString=e.toString,n}).multi=sn;var h=t.map(),f=Ze(a),p=Ve(a),g=Ze(s),m=Ve(s),v=Ze(l),y=Ve(l),_=Ze(c),x=Ve(c);o.forEach(function(t,e){h.set(t.toLowerCase(),e)});var b={a:function(t){return s[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:u(n),d:function(t,e){return qe(t.getDate(),e,2)},e:function(t,e){return qe(t.getDate(),e,2)},H:function(t,e){return qe(t.getHours(),e,2)},I:function(t,e){return qe(t.getHours()%12||12,e,2)},j:function(t,e){return qe(1+Ee.dayOfYear(t),e,3)},L:function(t,e){return qe(t.getMilliseconds(),e,3)},m:function(t,e){return qe(t.getMonth()+1,e,2)},M:function(t,e){return qe(t.getMinutes(),e,2)},p:function(t){return o[+(t.getHours()>=12)]},S:function(t,e){return qe(t.getSeconds(),e,2)},U:function(t,e){return qe(Ee.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return qe(Ee.mondayOfYear(t),e,2)},x:u(r),X:u(i),y:function(t,e){return qe(t.getFullYear()%100,e,2)},Y:function(t,e){return qe(t.getFullYear()%1e4,e,4)},Z:on,"%":function(){return"%"}},w={a:function(t,e,n){g.lastIndex=0;var r=g.exec(e.slice(n));return r?(t.w=m.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){f.lastIndex=0;var r=f.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){_.lastIndex=0;var r=_.exec(e.slice(n));return r?(t.m=x.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){v.lastIndex=0;var r=v.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,e,n){return d(t,b.c.toString(),e,n)},d:Qe,e:Qe,H:tn,I:tn,j:Ke,L:rn,m:Je,M:en,p:function(t,e,n){var r=h.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)},S:nn,U:We,w:Ue,W:Ge,x:function(t,e,n){return d(t,b.x.toString(),e,n)},X:function(t,e,n){return d(t,b.X.toString(),e,n)},y:Ye,Y:Xe,Z:$e,"%":an};return u}(e)};var n,r,i,o,a,s};var ln=t.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function cn(){}t.format=ln.numberFormat,t.geo={},cn.prototype={s:0,t:0,add:function(t){dn(t,this.t,un),dn(un.s,this.s,this),this.s?this.t+=un.t:this.s=un.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var un=new cn;function dn(t,e,n){var r=n.s=t+e,i=r-t,o=r-i;n.t=t-o+(e-i)}function hn(t,e){t&&pn.hasOwnProperty(t.type)&&pn[t.type](t,e)}t.geo.stream=function(t,e){t&&fn.hasOwnProperty(t.type)?fn[t.type](t,e):hn(t,e)};var fn={Feature:function(t,e){hn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)hn(n[r].geometry,e)}},pn={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){gn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)gn(n[r],e,0)},Polygon:function(t,e){mn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)mn(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)hn(n[r],e)}};function gn(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function mn(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)gn(t[n],e,1);e.polygonEnd()}t.geo.area=function(e){return vn=0,t.geo.stream(e,Pn),vn};var vn,yn,_n,xn,bn,wn,kn,Tn,Mn,An,Ln,Sn,Cn=new cn,Pn={sphere:function(){vn+=4*Mt},point:I,lineStart:I,lineEnd:I,polygonStart:function(){Cn.reset(),Pn.lineStart=zn},polygonEnd:function(){var t=2*Cn;vn+=t<0?4*Mt+t:t,Pn.lineStart=Pn.lineEnd=Pn.point=I}};function zn(){var t,e,n,r,i;function o(t,e){e=e*Ct/2+Mt/4;var o=(t*=Ct)-n,a=o>=0?1:-1,s=a*o,l=Math.cos(e),c=Math.sin(e),u=i*c,d=r*l+u*Math.cos(s),h=u*a*Math.sin(s);Cn.add(Math.atan2(h,d)),n=t,r=l,i=c}Pn.point=function(a,s){Pn.point=o,n=(t=a)*Ct,r=Math.cos(s=(e=s)*Ct/2+Mt/4),i=Math.sin(s)},Pn.lineEnd=function(){o(t,e)}}function Dn(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function En(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function On(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function In(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function jn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Nn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Rn(t){return[Math.atan2(t[1],t[0]),Ot(t[2])]}function Bn(t,e){return y(t[0]-e[0])<kt&&y(t[1]-e[1])<kt}t.geo.bounds=function(){var e,n,r,i,o,a,s,l,c,u,d,h={point:f,lineStart:g,lineEnd:m,polygonStart:function(){h.point=v,h.lineStart=_,h.lineEnd=x,c=0,Pn.polygonStart()},polygonEnd:function(){Pn.polygonEnd(),h.point=f,h.lineStart=g,h.lineEnd=m,Cn<0?(e=-(r=180),n=-(i=90)):c>kt?i=90:c<-kt&&(n=-90),d[0]=e,d[1]=r}};function f(t,o){u.push(d=[e=t,r=t]),o<n&&(n=o),o>i&&(i=o)}function p(t,a){var s=Dn([t*Ct,a*Ct]);if(l){var c=On(l,s),u=On([c[1],-c[0],0],c);Nn(u),u=Rn(u);var d=t-o,h=d>0?1:-1,p=u[0]*Pt*h,g=y(d)>180;if(g^(h*o<p&&p<h*t))(m=u[1]*Pt)>i&&(i=m);else if(g^(h*o<(p=(p+360)%360-180)&&p<h*t)){var m;(m=-u[1]*Pt)<n&&(n=m)}else a<n&&(n=a),a>i&&(i=a);g?t<o?b(e,t)>b(e,r)&&(r=t):b(t,r)>b(e,r)&&(e=t):r>=e?(t<e&&(e=t),t>r&&(r=t)):t>o?b(e,t)>b(e,r)&&(r=t):b(t,r)>b(e,r)&&(e=t)}else f(t,a);l=s,o=t}function g(){h.point=p}function m(){d[0]=e,d[1]=r,h.point=f,l=null}function v(t,e){if(l){var n=t-o;c+=y(n)>180?n+(n>0?360:-360):n}else a=t,s=e;Pn.point(t,e),p(t,e)}function _(){Pn.lineStart()}function x(){v(a,s),Pn.lineEnd(),y(c)>kt&&(e=-(r=180)),d[0]=e,d[1]=r,l=null}function b(t,e){return(e-=t)<0?e+360:e}function w(t,e){return t[0]-e[0]}function k(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(o){if(i=r=-(e=n=1/0),u=[],t.geo.stream(o,h),c=u.length){u.sort(w);for(var a=1,s=[g=u[0]];a<c;++a)k((f=u[a])[0],g)||k(f[1],g)?(b(g[0],f[1])>b(g[0],g[1])&&(g[1]=f[1]),b(f[0],g[1])>b(g[0],g[1])&&(g[0]=f[0])):s.push(g=f);for(var l,c,f,p=-1/0,g=(a=0,s[c=s.length-1]);a<=c;g=f,++a)f=s[a],(l=b(g[1],f[0]))>p&&(p=l,e=f[0],r=g[1])}return u=d=null,e===1/0||n===1/0?[[NaN,NaN],[NaN,NaN]]:[[e,n],[r,i]]}}(),t.geo.centroid=function(e){yn=_n=xn=bn=wn=kn=Tn=Mn=An=Ln=Sn=0,t.geo.stream(e,Fn);var n=An,r=Ln,i=Sn,o=n*n+r*r+i*i;return o<Tt&&(n=kn,r=Tn,i=Mn,_n<kt&&(n=xn,r=bn,i=wn),(o=n*n+r*r+i*i)<Tt)?[NaN,NaN]:[Math.atan2(r,n)*Pt,Ot(i/Math.sqrt(o))*Pt]};var Fn={sphere:I,point:Hn,lineStart:Zn,lineEnd:Vn,polygonStart:function(){Fn.lineStart=Un},polygonEnd:function(){Fn.lineStart=Zn}};function Hn(t,e){t*=Ct;var n=Math.cos(e*=Ct);qn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function qn(t,e,n){xn+=(t-xn)/++yn,bn+=(e-bn)/yn,wn+=(n-wn)/yn}function Zn(){var t,e,n;function r(r,i){r*=Ct;var o=Math.cos(i*=Ct),a=o*Math.cos(r),s=o*Math.sin(r),l=Math.sin(i),c=Math.atan2(Math.sqrt((c=e*l-n*s)*c+(c=n*a-t*l)*c+(c=t*s-e*a)*c),t*a+e*s+n*l);_n+=c,kn+=c*(t+(t=a)),Tn+=c*(e+(e=s)),Mn+=c*(n+(n=l)),qn(t,e,n)}Fn.point=function(i,o){i*=Ct;var a=Math.cos(o*=Ct);t=a*Math.cos(i),e=a*Math.sin(i),n=Math.sin(o),Fn.point=r,qn(t,e,n)}}function Vn(){Fn.point=Hn}function Un(){var t,e,n,r,i;function o(t,e){t*=Ct;var o=Math.cos(e*=Ct),a=o*Math.cos(t),s=o*Math.sin(t),l=Math.sin(e),c=r*l-i*s,u=i*a-n*l,d=n*s-r*a,h=Math.sqrt(c*c+u*u+d*d),f=n*a+r*s+i*l,p=h&&-Et(f)/h,g=Math.atan2(h,f);An+=p*c,Ln+=p*u,Sn+=p*d,_n+=g,kn+=g*(n+(n=a)),Tn+=g*(r+(r=s)),Mn+=g*(i+(i=l)),qn(n,r,i)}Fn.point=function(a,s){t=a,e=s,Fn.point=o,a*=Ct;var l=Math.cos(s*=Ct);n=l*Math.cos(a),r=l*Math.sin(a),i=Math.sin(s),qn(n,r,i)},Fn.lineEnd=function(){o(t,e),Fn.lineEnd=Vn,Fn.point=Hn}}function Wn(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Gn(){return!0}function Xn(t,e,n,r,i){var o=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(Bn(n,r)){i.lineStart();for(var s=0;s<e;++s)i.point((n=t[s])[0],n[1]);i.lineEnd()}else{var l=new $n(n,t,null,!0),c=new $n(n,null,l,!1);l.o=c,o.push(l),a.push(c),c=new $n(r,null,l=new $n(r,t,null,!1),!0),l.o=c,o.push(l),a.push(c)}}}),a.sort(e),Yn(o),Yn(a),o.length){for(var s=0,l=n,c=a.length;s<c;++s)a[s].e=l=!l;for(var u,d,h=o[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;u=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(s=0,c=u.length;s<c;++s)i.point((d=u[s])[0],d[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(p)for(s=(u=f.p.z).length-1;s>=0;--s)i.point((d=u[s])[0],d[1]);else r(f.x,f.p.x,-1,i);f=f.p}u=(f=f.o).z,p=!p}while(!f.v);i.lineEnd()}}}function Yn(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function $n(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Jn(e,n,r,i){return function(o,a){var s,l=n(a),c=o.invert(i[0],i[1]),u={point:d,lineStart:f,lineEnd:p,polygonStart:function(){u.point=x,u.lineStart=b,u.lineEnd=w,s=[],g=[]},polygonEnd:function(){u.point=d,u.lineStart=f,u.lineEnd=p,s=t.merge(s);var e=function(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;Cn.reset();for(var s=0,l=e.length;s<l;++s){var c=e[s],u=c.length;if(u)for(var d=c[0],h=d[0],f=d[1]/2+Mt/4,p=Math.sin(f),g=Math.cos(f),m=1;;){m===u&&(m=0);var v=(t=c[m])[0],y=t[1]/2+Mt/4,_=Math.sin(y),x=Math.cos(y),b=v-h,w=b>=0?1:-1,k=w*b,T=k>Mt,M=p*_;if(Cn.add(Math.atan2(M*w*Math.sin(k),g*x+M*Math.cos(k))),o+=T?b+w*At:b,T^h>=n^v>=n){var A=On(Dn(d),Dn(t));Nn(A);var L=On(i,A);Nn(L);var S=(T^b>=0?-1:1)*Ot(L[2]);(r>S||r===S&&(A[0]||A[1]))&&(a+=T^b>=0?1:-1)}if(!m++)break;h=v,p=_,g=x,d=t}}return(o<-kt||o<kt&&Cn<-kt)^1&a}(c,g);s.length?(_||(a.polygonStart(),_=!0),Xn(s,tr,e,r,a)):e&&(_||(a.polygonStart(),_=!0),a.lineStart(),r(null,null,1,a),a.lineEnd()),_&&(a.polygonEnd(),_=!1),s=g=null},sphere:function(){a.polygonStart(),a.lineStart(),r(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function d(t,n){var r=o(t,n);e(t=r[0],n=r[1])&&a.point(t,n)}function h(t,e){var n=o(t,e);l.point(n[0],n[1])}function f(){u.point=h,l.lineStart()}function p(){u.point=d,l.lineEnd()}var g,m,v=Kn(),y=n(v),_=!1;function x(t,e){m.push([t,e]);var n=o(t,e);y.point(n[0],n[1])}function b(){y.lineStart(),m=[]}function w(){x(m[0][0],m[0][1]),y.lineEnd();var t,e=y.clean(),n=v.buffer(),r=n.length;if(m.pop(),g.push(m),m=null,r)if(1&e){var i,o=-1;if((r=(t=n[0]).length-1)>0){for(_||(a.polygonStart(),_=!0),a.lineStart();++o<r;)a.point((i=t[o])[0],i[1]);a.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),s.push(n.filter(Qn))}return u}}function Qn(t){return t.length>1}function Kn(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:I,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function tr(t,e){return((t=t.x)[0]<0?t[1]-St-kt:St-t[1])-((e=e.x)[0]<0?e[1]-St-kt:St-e[1])}var er=Jn(Gn,function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s,l,c,u,d,h,f,p=o>0?Mt:-Mt,g=y(o-n);y(g-Mt)<kt?(t.point(n,r=(r+a)/2>0?St:-St),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(p,r),t.point(o,r),e=0):i!==p&&g>=Mt&&(y(n-i)<kt&&(n-=i*kt),y(o-p)<kt&&(o-=p*kt),s=n,l=r,c=o,u=a,f=Math.sin(s-c),r=y(f)>kt?Math.atan((Math.sin(l)*(h=Math.cos(u))*Math.sin(c)-Math.sin(u)*(d=Math.cos(l))*Math.sin(s))/(d*h*f)):(l+u)/2,t.point(i,r),t.lineEnd(),t.lineStart(),t.point(p,r),e=0),t.point(n=o,r=a),i=p},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*St,r.point(-Mt,i),r.point(0,i),r.point(Mt,i),r.point(Mt,0),r.point(Mt,-i),r.point(0,-i),r.point(-Mt,-i),r.point(-Mt,0),r.point(-Mt,i);else if(y(t[0]-e[0])>kt){var o=t[0]<e[0]?Mt:-Mt;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-Mt,-Mt/2]);function nr(t,e,n,r){return function(i){var o,a=i.a,s=i.b,l=a.x,c=a.y,u=0,d=1,h=s.x-l,f=s.y-c;if(o=t-l,h||!(o>0)){if(o/=h,h<0){if(o<u)return;o<d&&(d=o)}else if(h>0){if(o>d)return;o>u&&(u=o)}if(o=n-l,h||!(o<0)){if(o/=h,h<0){if(o>d)return;o>u&&(u=o)}else if(h>0){if(o<u)return;o<d&&(d=o)}if(o=e-c,f||!(o>0)){if(o/=f,f<0){if(o<u)return;o<d&&(d=o)}else if(f>0){if(o>d)return;o>u&&(u=o)}if(o=r-c,f||!(o<0)){if(o/=f,f<0){if(o>d)return;o>u&&(u=o)}else if(f>0){if(o<u)return;o<d&&(d=o)}return u>0&&(i.a={x:l+u*h,y:c+u*f}),d<1&&(i.b={x:l+d*h,y:c+d*f}),i}}}}}}var rr=1e9;function ir(e,n,r,i){return function(l){var c,u,d,h,f,p,g,m,v,y,_,x=l,b=Kn(),w=nr(e,n,r,i),k={point:A,lineStart:function(){k.point=L,u&&u.push(d=[]);y=!0,v=!1,g=m=NaN},lineEnd:function(){c&&(L(h,f),p&&v&&b.rejoin(),c.push(b.buffer()));k.point=A,v&&l.lineEnd()},polygonStart:function(){l=b,c=[],u=[],_=!0},polygonEnd:function(){l=x,c=t.merge(c);var n=function(t){for(var e=0,n=u.length,r=t[1],i=0;i<n;++i)for(var o,a=1,s=u[i],l=s.length,c=s[0];a<l;++a)o=s[a],c[1]<=r?o[1]>r&&Dt(c,o,t)>0&&++e:o[1]<=r&&Dt(c,o,t)<0&&--e,c=o;return 0!==e}([e,i]),r=_&&n,o=c.length;(r||o)&&(l.polygonStart(),r&&(l.lineStart(),T(null,null,1,l),l.lineEnd()),o&&Xn(c,a,n,T,l),l.polygonEnd()),c=u=d=null}};function T(t,a,l,c){var u=0,d=0;if(null==t||(u=o(t,l))!==(d=o(a,l))||s(t,a)<0^l>0)for(;c.point(0===u||3===u?e:r,u>1?i:n),(u=(u+l+4)%4)!==d;);else c.point(a[0],a[1])}function M(t,o){return e<=t&&t<=r&&n<=o&&o<=i}function A(t,e){M(t,e)&&l.point(t,e)}function L(t,e){var n=M(t=Math.max(-rr,Math.min(rr,t)),e=Math.max(-rr,Math.min(rr,e)));if(u&&d.push([t,e]),y)h=t,f=e,p=n,y=!1,n&&(l.lineStart(),l.point(t,e));else if(n&&v)l.point(t,e);else{var r={a:{x:g,y:m},b:{x:t,y:e}};w(r)?(v||(l.lineStart(),l.point(r.a.x,r.a.y)),l.point(r.b.x,r.b.y),n||l.lineEnd(),_=!1):n&&(l.lineStart(),l.point(t,e),_=!1)}g=t,m=e,v=n}return k};function o(t,i){return y(t[0]-e)<kt?i>0?0:3:y(t[0]-r)<kt?i>0?2:1:y(t[1]-n)<kt?i>0?1:0:i>0?3:2}function a(t,e){return s(t.x,e.x)}function s(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function or(t){var e=0,n=Mt/3,r=Lr(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Mt/180,n=t[1]*Mt/180):[e/Mt*180,n/Mt*180]},i}function ar(t,e){var n=Math.sin(t),r=(n+Math.sin(e))/2,i=1+n*(2*r-n),o=Math.sqrt(i)/r;function a(t,e){var n=Math.sqrt(i-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),o-n*Math.cos(t)]}return a.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,Ot((i-(t*t+n*n)*r*r)/(2*r))]},a}t.geo.clipExtent=function(){var t,e,n,r,i,o,a={stream:function(t){return i&&(i.valid=!1),(i=o(t)).valid=!0,i},extent:function(s){return arguments.length?(o=ir(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),a):[[t,e],[n,r]]}};return a.extent([[0,0],[960,500]])},(t.geo.conicEqualArea=function(){return or(ar)}).raw=ar,t.geo.albers=function(){return t.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},t.geo.albersUsa=function(){var e,n,r,i,o=t.geo.albers(),a=t.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=t.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){e=[t,n]}};function c(t){var o=t[0],a=t[1];return e=null,n(o,a),e||(r(o,a),e)||i(o,a),e}return c.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?a:i>=.166&&i<.234&&r>=-.214&&r<-.115?s:o).invert(t)},c.stream=function(t){var e=o.stream(t),n=a.stream(t),r=s.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},c.precision=function(t){return arguments.length?(o.precision(t),a.precision(t),s.precision(t),c):o.precision()},c.scale=function(t){return arguments.length?(o.scale(t),a.scale(.35*t),s.scale(t),c.translate(o.translate())):o.scale()},c.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),u=+t[0],d=+t[1];return n=o.translate(t).clipExtent([[u-.455*e,d-.238*e],[u+.455*e,d+.238*e]]).stream(l).point,r=a.translate([u-.307*e,d+.201*e]).clipExtent([[u-.425*e+kt,d+.12*e+kt],[u-.214*e-kt,d+.234*e-kt]]).stream(l).point,i=s.translate([u-.205*e,d+.212*e]).clipExtent([[u-.214*e+kt,d+.166*e+kt],[u-.115*e-kt,d+.234*e-kt]]).stream(l).point,c},c.scale(1070)};var sr,lr,cr,ur,dr,hr,fr={point:I,lineStart:I,lineEnd:I,polygonStart:function(){lr=0,fr.lineStart=pr},polygonEnd:function(){fr.lineStart=fr.lineEnd=fr.point=I,sr+=y(lr/2)}};function pr(){var t,e,n,r;function i(t,e){lr+=r*t-n*e,n=t,r=e}fr.point=function(o,a){fr.point=i,t=n=o,e=r=a},fr.lineEnd=function(){i(t,e)}}var gr={point:function(t,e){t<cr&&(cr=t);t>dr&&(dr=t);e<ur&&(ur=e);e>hr&&(hr=e)},lineStart:I,lineEnd:I,polygonStart:I,polygonEnd:I};function mr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var vr,yr={point:_r,lineStart:xr,lineEnd:br,polygonStart:function(){yr.lineStart=wr},polygonEnd:function(){yr.point=_r,yr.lineStart=xr,yr.lineEnd=br}};function _r(t,e){xn+=t,bn+=e,++wn}function xr(){var t,e;function n(n,r){var i=n-t,o=r-e,a=Math.sqrt(i*i+o*o);kn+=a*(t+n)/2,Tn+=a*(e+r)/2,Mn+=a,_r(t=n,e=r)}yr.point=function(r,i){yr.point=n,_r(t=r,e=i)}}function br(){yr.point=_r}function wr(){var t,e,n,r;function i(t,e){var i=t-n,o=e-r,a=Math.sqrt(i*i+o*o);kn+=a*(n+t)/2,Tn+=a*(r+e)/2,Mn+=a,An+=(a=r*t-n*e)*(n+t),Ln+=a*(r+e),Sn+=3*a,_r(n=t,r=e)}yr.point=function(o,a){yr.point=i,_r(t=n=o,e=r=a)},yr.lineEnd=function(){i(t,e)}}function kr(t){var e=.5,n=Math.cos(30*Ct),r=16;function i(e){return(r?function(e){var n,i,a,s,l,c,u,d,h,f,p,g,m={point:v,lineStart:y,lineEnd:x,polygonStart:function(){e.polygonStart(),m.lineStart=b},polygonEnd:function(){e.polygonEnd(),m.lineStart=y}};function v(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){d=NaN,m.point=_,e.lineStart()}function _(n,i){var a=Dn([n,i]),s=t(n,i);o(d,h,u,f,p,g,d=s[0],h=s[1],u=n,f=a[0],p=a[1],g=a[2],r,e),e.point(d,h)}function x(){m.point=v,e.lineEnd()}function b(){y(),m.point=w,m.lineEnd=k}function w(t,e){_(n=t,e),i=d,a=h,s=f,l=p,c=g,m.point=_}function k(){o(d,h,u,f,p,g,i,a,n,s,l,c,r,e),m.lineEnd=x,x()}return m}:function(e){return Mr(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})})(e)}function o(r,i,a,s,l,c,u,d,h,f,p,g,m,v){var _=u-r,x=d-i,b=_*_+x*x;if(b>4*e&&m--){var w=s+f,k=l+p,T=c+g,M=Math.sqrt(w*w+k*k+T*T),A=Math.asin(T/=M),L=y(y(T)-1)<kt||y(a-h)<kt?(a+h)/2:Math.atan2(k,w),S=t(L,A),C=S[0],P=S[1],z=C-r,D=P-i,E=x*z-_*D;(E*E/b>e||y((_*z+x*D)/b-.5)>.3||s*f+l*p+c*g<n)&&(o(r,i,a,s,l,c,C,P,L,w/=M,k/=M,T,m,v),v.point(C,P),o(C,P,L,w,k,T,u,d,h,f,p,g,m,v))}}return i.precision=function(t){return arguments.length?(r=(e=t*t)>0&&16,i):Math.sqrt(e)},i}function Tr(t){this.stream=t}function Mr(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Ar(t){return Lr(function(){return t})()}function Lr(e){var n,r,i,o,a,s,l=kr(function(t,e){return[(t=n(t,e))[0]*c+o,a-t[1]*c]}),c=150,u=480,d=250,h=0,f=0,p=0,g=0,m=0,v=er,_=z,x=null,b=null;function w(t){return[(t=i(t[0]*Ct,t[1]*Ct))[0]*c+o,a-t[1]*c]}function k(t){return(t=i.invert((t[0]-o)/c,(a-t[1])/c))&&[t[0]*Pt,t[1]*Pt]}function T(){i=Wn(r=zr(p,g,m),n);var t=n(h,f);return o=u-t[0]*c,a=d+t[1]*c,M()}function M(){return s&&(s.valid=!1,s=null),w}return w.stream=function(t){return s&&(s.valid=!1),(s=Sr(v(r,l(_(t))))).valid=!0,s},w.clipAngle=function(t){return arguments.length?(v=null==t?(x=t,er):function(t){var e=Math.cos(t),n=e>0,r=y(e)>kt;return Jn(i,function(t){var e,s,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(d,h){var f,p=[d,h],g=i(d,h),m=n?g?0:a(d,h):g?a(d+(d<0?Mt:-Mt),h):0;if(!e&&(c=l=g)&&t.lineStart(),g!==l&&(f=o(e,p),(Bn(e,f)||Bn(p,f))&&(p[0]+=kt,p[1]+=kt,g=i(p[0],p[1]))),g!==l)u=0,g?(t.lineStart(),f=o(p,e),t.point(f[0],f[1])):(f=o(e,p),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(r&&e&&n^g){var v;m&s||!(v=o(p,e,!0))||(u=0,n?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||e&&Bn(e,p)||t.point(p[0],p[1]),e=p,l=g,s=m},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return u|(c&&l)<<1}}},Ir(t,6*Ct),n?[0,-t]:[-Mt,t-Mt]);function i(t,n){return Math.cos(t)*Math.cos(n)>e}function o(t,n,r){var i=[1,0,0],o=On(Dn(t),Dn(n)),a=En(o,o),s=o[0],l=a-s*s;if(!l)return!r&&t;var c=e*a/l,u=-e*s/l,d=On(i,o),h=jn(i,c);In(h,jn(o,u));var f=d,p=En(h,f),g=En(f,f),m=p*p-g*(En(h,h)-1);if(!(m<0)){var v=Math.sqrt(m),_=jn(f,(-p-v)/g);if(In(_,h),_=Rn(_),!r)return _;var x,b=t[0],w=n[0],k=t[1],T=n[1];w<b&&(x=b,b=w,w=x);var M=w-b,A=y(M-Mt)<kt;if(!A&&T<k&&(x=k,k=T,T=x),A||M<kt?A?k+T>0^_[1]<(y(_[0]-b)<kt?k:T):k<=_[1]&&_[1]<=T:M>Mt^(b<=_[0]&&_[0]<=w)){var L=jn(f,(-p+v)/g);return In(L,h),[_,Rn(L)]}}}function a(e,r){var i=n?t:Mt-t,o=0;return e<-i?o|=1:e>i&&(o|=2),r<-i?o|=4:r>i&&(o|=8),o}}((x=+t)*Ct),M()):x},w.clipExtent=function(t){return arguments.length?(b=t,_=t?ir(t[0][0],t[0][1],t[1][0],t[1][1]):z,M()):b},w.scale=function(t){return arguments.length?(c=+t,T()):c},w.translate=function(t){return arguments.length?(u=+t[0],d=+t[1],T()):[u,d]},w.center=function(t){return arguments.length?(h=t[0]%360*Ct,f=t[1]%360*Ct,T()):[h*Pt,f*Pt]},w.rotate=function(t){return arguments.length?(p=t[0]%360*Ct,g=t[1]%360*Ct,m=t.length>2?t[2]%360*Ct:0,T()):[p*Pt,g*Pt,m*Pt]},t.rebind(w,l,"precision"),function(){return n=e.apply(this,arguments),w.invert=n.invert&&k,T()}}function Sr(t){return Mr(t,function(e,n){t.point(e*Ct,n*Ct)})}function Cr(t,e){return[t,e]}function Pr(t,e){return[t>Mt?t-At:t<-Mt?t+At:t,e]}function zr(t,e,n){return t?e||n?Wn(Er(t),Or(e,n)):Er(t):e||n?Or(e,n):Pr}function Dr(t){return function(e,n){return[(e+=t)>Mt?e-At:e<-Mt?e+At:e,n]}}function Er(t){var e=Dr(t);return e.invert=Dr(-t),e}function Or(t,e){var n=Math.cos(t),r=Math.sin(t),i=Math.cos(e),o=Math.sin(e);function a(t,e){var a=Math.cos(e),s=Math.cos(t)*a,l=Math.sin(t)*a,c=Math.sin(e),u=c*n+s*r;return[Math.atan2(l*i-u*o,s*n-c*r),Ot(u*i+l*o)]}return a.invert=function(t,e){var a=Math.cos(e),s=Math.cos(t)*a,l=Math.sin(t)*a,c=Math.sin(e),u=c*i-l*o;return[Math.atan2(l*i+c*o,s*n+u*r),Ot(u*n-s*r)]},a}function Ir(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,o,a,s){var l=a*e;null!=i?(i=jr(n,i),o=jr(n,o),(a>0?i<o:i>o)&&(i+=a*At)):(i=t+a*At,o=t-.5*l);for(var c,u=i;a>0?u>o:u<o;u-=l)s.point((c=Rn([n,-r*Math.cos(u),-r*Math.sin(u)]))[0],c[1])}}function jr(t,e){var n=Dn(e);n[0]-=t,Nn(n);var r=Et(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-kt)%(2*Math.PI)}function Nr(e,n,r){var i=t.range(e,n-kt,r).concat(n);return function(t){return i.map(function(e){return[t,e]})}}function Rr(e,n,r){var i=t.range(e,n-kt,r).concat(n);return function(t){return i.map(function(e){return[e,t]})}}function Br(t){return t.source}function Fr(t){return t.target}t.geo.path=function(){var e,n,r,i,o,a=4.5;function s(e){return e&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=r(i)),t.geo.stream(e,o)),i.result()}function l(){return o=null,s}return s.area=function(e){return sr=0,t.geo.stream(e,r(fr)),sr},s.centroid=function(e){return xn=bn=wn=kn=Tn=Mn=An=Ln=Sn=0,t.geo.stream(e,r(yr)),Sn?[An/Sn,Ln/Sn]:Mn?[kn/Mn,Tn/Mn]:wn?[xn/wn,bn/wn]:[NaN,NaN]},s.bounds=function(e){return dr=hr=-(cr=ur=1/0),t.geo.stream(e,r(gr)),[[cr,ur],[dr,hr]]},s.projection=function(t){return arguments.length?(r=(e=t)?t.stream||(n=t,i=kr(function(t,e){return n([t*Pt,e*Pt])}),function(t){return Sr(i(t))}):z,l()):e;var n,i},s.context=function(t){return arguments.length?(i=null==(n=t)?new function(){var t=mr(4.5),e=[],n={point:r,lineStart:function(){n.point=i},lineEnd:a,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=a,n.point=r},pointRadius:function(e){return t=mr(e),n},result:function(){if(e.length){var t=e.join("");return e=[],t}}};function r(n,r){e.push("M",n,",",r,t)}function i(t,r){e.push("M",t,",",r),n.point=o}function o(t,n){e.push("L",t,",",n)}function a(){n.point=r}function s(){e.push("Z")}return n}:new function(t){var e=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:a,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=a,n.point=r},pointRadius:function(t){return e=t,n},result:I};function r(n,r){t.moveTo(n+e,r),t.arc(n,r,e,0,At)}function i(e,r){t.moveTo(e,r),n.point=o}function o(e,n){t.lineTo(e,n)}function a(){n.point=r}function s(){t.closePath()}return n}(t),"function"!=typeof a&&i.pointRadius(a),l()):n},s.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),s):a},s.projection(t.geo.albersUsa()).context(null)},t.geo.transform=function(t){return{stream:function(e){var n=new Tr(e);for(var r in t)n[r]=t[r];return n}}},Tr.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},t.geo.projection=Ar,t.geo.projectionMutator=Lr,(t.geo.equirectangular=function(){return Ar(Cr)}).raw=Cr.invert=Cr,t.geo.rotation=function(t){function e(e){return(e=t(e[0]*Ct,e[1]*Ct))[0]*=Pt,e[1]*=Pt,e}return t=zr(t[0]%360*Ct,t[1]*Ct,t.length>2?t[2]*Ct:0),e.invert=function(e){return(e=t.invert(e[0]*Ct,e[1]*Ct))[0]*=Pt,e[1]*=Pt,e},e},Pr.invert=Cr,t.geo.circle=function(){var t,e,n=[0,0],r=6;function i(){var t="function"==typeof n?n.apply(this,arguments):n,r=zr(-t[0]*Ct,-t[1]*Ct,0).invert,i=[];return e(null,null,1,{point:function(t,e){i.push(t=r(t,e)),t[0]*=Pt,t[1]*=Pt}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(t){return arguments.length?(n=t,i):n},i.angle=function(n){return arguments.length?(e=Ir((t=+n)*Ct,r*Ct),i):t},i.precision=function(n){return arguments.length?(e=Ir(t*Ct,(r=+n)*Ct),i):r},i.angle(90)},t.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Ct,i=t[1]*Ct,o=e[1]*Ct,a=Math.sin(r),s=Math.cos(r),l=Math.sin(i),c=Math.cos(i),u=Math.sin(o),d=Math.cos(o);return Math.atan2(Math.sqrt((n=d*a)*n+(n=c*u-l*d*s)*n),l*u+c*d*s)},t.geo.graticule=function(){var e,n,r,i,o,a,s,l,c,u,d,h,f=10,p=f,g=90,m=360,v=2.5;function _(){return{type:"MultiLineString",coordinates:x()}}function x(){return t.range(Math.ceil(i/g)*g,r,g).map(d).concat(t.range(Math.ceil(l/m)*m,s,m).map(h)).concat(t.range(Math.ceil(n/f)*f,e,f).filter(function(t){return y(t%g)>kt}).map(c)).concat(t.range(Math.ceil(a/p)*p,o,p).filter(function(t){return y(t%m)>kt}).map(u))}return _.lines=function(){return x().map(function(t){return{type:"LineString",coordinates:t}})},_.outline=function(){return{type:"Polygon",coordinates:[d(i).concat(h(s).slice(1),d(r).reverse().slice(1),h(l).reverse().slice(1))]}},_.extent=function(t){return arguments.length?_.majorExtent(t).minorExtent(t):_.minorExtent()},_.majorExtent=function(t){return arguments.length?(i=+t[0][0],r=+t[1][0],l=+t[0][1],s=+t[1][1],i>r&&(t=i,i=r,r=t),l>s&&(t=l,l=s,s=t),_.precision(v)):[[i,l],[r,s]]},_.minorExtent=function(t){return arguments.length?(n=+t[0][0],e=+t[1][0],a=+t[0][1],o=+t[1][1],n>e&&(t=n,n=e,e=t),a>o&&(t=a,a=o,o=t),_.precision(v)):[[n,a],[e,o]]},_.step=function(t){return arguments.length?_.majorStep(t).minorStep(t):_.minorStep()},_.majorStep=function(t){return arguments.length?(g=+t[0],m=+t[1],_):[g,m]},_.minorStep=function(t){return arguments.length?(f=+t[0],p=+t[1],_):[f,p]},_.precision=function(t){return arguments.length?(v=+t,c=Nr(a,o,90),u=Rr(n,e,v),d=Nr(l,s,90),h=Rr(i,r,v),_):v},_.majorExtent([[-180,-90+kt],[180,90-kt]]).minorExtent([[-180,-80-kt],[180,80+kt]])},t.geo.greatArc=function(){var e,n,r=Br,i=Fr;function o(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}return o.distance=function(){return t.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},o.source=function(t){return arguments.length?(r=t,e="function"==typeof t?null:t,o):r},o.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,o):i},o.precision=function(){return arguments.length?o:0},o},t.geo.interpolate=function(t,e){return n=t[0]*Ct,r=t[1]*Ct,i=e[0]*Ct,o=e[1]*Ct,a=Math.cos(r),s=Math.sin(r),l=Math.cos(o),c=Math.sin(o),u=a*Math.cos(n),d=a*Math.sin(n),h=l*Math.cos(i),f=l*Math.sin(i),p=2*Math.asin(Math.sqrt(jt(o-r)+a*l*jt(i-n))),g=1/Math.sin(p),(m=p?function(t){var e=Math.sin(t*=p)*g,n=Math.sin(p-t)*g,r=n*u+e*h,i=n*d+e*f,o=n*s+e*c;return[Math.atan2(i,r)*Pt,Math.atan2(o,Math.sqrt(r*r+i*i))*Pt]}:function(){return[n*Pt,r*Pt]}).distance=p,m;var n,r,i,o,a,s,l,c,u,d,h,f,p,g,m},t.geo.length=function(e){return vr=0,t.geo.stream(e,Hr),vr};var Hr={sphere:I,point:I,lineStart:function(){var t,e,n;function r(r,i){var o=Math.sin(i*=Ct),a=Math.cos(i),s=y((r*=Ct)-t),l=Math.cos(s);vr+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=n*o-e*a*l)*s),e*o+n*a*l),t=r,e=o,n=a}Hr.point=function(i,o){t=i*Ct,e=Math.sin(o*=Ct),n=Math.cos(o),Hr.point=r},Hr.lineEnd=function(){Hr.point=Hr.lineEnd=I}},lineEnd:I,polygonStart:I,polygonEnd:I};function qr(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),o=t(r*i);return[o*i*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&n*o/r)]},n}var Zr=qr(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(t.geo.azimuthalEqualArea=function(){return Ar(Zr)}).raw=Zr;var Vr=qr(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},z);function Ur(t,e){var n=Math.cos(t),r=function(t){return Math.tan(Mt/4+t/2)},i=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(r(e)/r(t)),o=n*Math.pow(r(t),i)/i;if(!i)return Xr;function a(t,e){o>0?e<-St+kt&&(e=-St+kt):e>St-kt&&(e=St-kt);var n=o/Math.pow(r(e),i);return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}return a.invert=function(t,e){var n=o-e,r=zt(i)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/i,2*Math.atan(Math.pow(o/r,1/i))-St]},a}function Wr(t,e){var n=Math.cos(t),r=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),i=n/r+t;if(y(r)<kt)return Cr;function o(t,e){var n=i-e;return[n*Math.sin(r*t),i-n*Math.cos(r*t)]}return o.invert=function(t,e){var n=i-e;return[Math.atan2(t,n)/r,i-zt(r)*Math.sqrt(t*t+n*n)]},o}(t.geo.azimuthalEquidistant=function(){return Ar(Vr)}).raw=Vr,(t.geo.conicConformal=function(){return or(Ur)}).raw=Ur,(t.geo.conicEquidistant=function(){return or(Wr)}).raw=Wr;var Gr=qr(function(t){return 1/t},Math.atan);function Xr(t,e){return[t,Math.log(Math.tan(Mt/4+e/2))]}function Yr(t){var e,n=Ar(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=o.apply(n,arguments);if(a===n){if(e=null==t){var s=Mt*r(),l=i();o([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(a=null);return a},n.clipExtent(null)}(t.geo.gnomonic=function(){return Ar(Gr)}).raw=Gr,Xr.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-St]},(t.geo.mercator=function(){return Yr(Xr)}).raw=Xr;var $r=qr(function(){return 1},Math.asin);(t.geo.orthographic=function(){return Ar($r)}).raw=$r;var Jr=qr(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function Qr(t,e){return[Math.log(Math.tan(Mt/4+e/2)),-t]}function Kr(t){return t[0]}function ti(t){return t[1]}function ei(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;i++){for(;r>1&&Dt(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function ni(t,e){return t[0]-e[0]||t[1]-e[1]}(t.geo.stereographic=function(){return Ar(Jr)}).raw=Jr,Qr.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-St]},(t.geo.transverseMercator=function(){var t=Yr(Qr),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=Qr,t.geom={},t.geom.hull=function(t){var e=Kr,n=ti;if(arguments.length)return r(t);function r(t){if(t.length<3)return[];var r,i=me(e),o=me(n),a=t.length,s=[],l=[];for(r=0;r<a;r++)s.push([+i.call(this,t[r],r),+o.call(this,t[r],r),r]);for(s.sort(ni),r=0;r<a;r++)l.push([s[r][0],-s[r][1]]);var c=ei(s),u=ei(l),d=u[0]===c[0],h=u[u.length-1]===c[c.length-1],f=[];for(r=c.length-1;r>=0;--r)f.push(t[s[c[r]][2]]);for(r=+d;r<u.length-h;++r)f.push(t[s[u[r]][2]]);return f}return r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(t){return arguments.length?(n=t,r):n},r},t.geom.polygon=function(t){return q(t,ri),t};var ri=t.geom.polygon.prototype=[];function ii(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function oi(t,e,n,r){var i=t[0],o=n[0],a=e[0]-i,s=r[0]-o,l=t[1],c=n[1],u=e[1]-l,d=r[1]-c,h=(s*(l-c)-d*(i-o))/(d*a-s*u);return[i+h*a,l+h*u]}function ai(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}ri.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},ri.centroid=function(t){var e,n,r=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=s,s=this[r],n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o*t,a*t]},ri.clip=function(t){for(var e,n,r,i,o,a,s=ai(t),l=-1,c=this.length-ai(this),u=this[c-1];++l<c;){for(e=t.slice(),t.length=0,i=this[l],o=e[(r=e.length-s)-1],n=-1;++n<r;)ii(a=e[n],u,i)?(ii(o,u,i)||t.push(oi(o,a,u,i)),t.push(a)):ii(o,u,i)&&t.push(oi(o,a,u,i)),o=a;s&&t.push(t[0]),u=i}return t};var si,li,ci,ui,di,hi=[],fi=[];function pi(t){var e=hi.pop()||new function(){Pi(this),this.edge=this.site=this.circle=null};return e.site=t,e}function gi(t){ki(t),ci.remove(t),hi.push(t),Pi(t)}function mi(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},o=t.P,a=t.N,s=[t];gi(t);for(var l=o;l.circle&&y(n-l.circle.x)<kt&&y(r-l.circle.cy)<kt;)o=l.P,s.unshift(l),gi(l),l=o;s.unshift(l),ki(l);for(var c=a;c.circle&&y(n-c.circle.x)<kt&&y(r-c.circle.cy)<kt;)a=c.N,s.push(c),gi(c),c=a;s.push(c),ki(c);var u,d=s.length;for(u=1;u<d;++u)c=s[u],l=s[u-1],Li(c.edge,l.site,c.site,i);l=s[0],(c=s[d-1]).edge=Ai(l.site,c.site,null,i),wi(l),wi(c)}function vi(t){for(var e,n,r,i,o=t.x,a=t.y,s=ci._;s;)if((r=yi(s,a)-o)>kt)s=s.L;else{if(!((i=o-_i(s,a))>kt)){r>-kt?(e=s.P,n=s):i>-kt?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=pi(t);if(ci.insert(e,l),e||n){if(e===n)return ki(e),n=pi(e.site),ci.insert(l,n),l.edge=n.edge=Ai(e.site,l.site),wi(e),void wi(n);if(n){ki(e),ki(n);var c=e.site,u=c.x,d=c.y,h=t.x-u,f=t.y-d,p=n.site,g=p.x-u,m=p.y-d,v=2*(h*m-f*g),y=h*h+f*f,_=g*g+m*m,x={x:(m*y-f*_)/v+u,y:(h*_-g*y)/v+d};Li(n.edge,c,p,x),l.edge=Ai(c,t,null,x),n.edge=Ai(t,p,null,x),wi(e),wi(n)}else l.edge=Ai(e.site,l.site)}}function yi(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site).x,l=n.y,c=l-e;if(!c)return s;var u=s-r,d=1/o-1/c,h=u/c;return d?(-h+Math.sqrt(h*h-2*d*(u*u/(-2*c)-l+c/2+i-o/2)))/d+r:(r+s)/2}function _i(t,e){var n=t.N;if(n)return yi(n,e);var r=t.site;return r.y===e?r.x:1/0}function xi(t){this.site=t,this.edges=[]}function bi(t,e){return e.angle-t.angle}function wi(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i.x,s=i.y,l=r.x-a,c=r.y-s,u=o.x-a,d=2*(l*(m=o.y-s)-c*u);if(!(d>=-Tt)){var h=l*l+c*c,f=u*u+m*m,p=(m*h-c*f)/d,g=(l*f-u*h)/d,m=g+s,v=fi.pop()||new function(){Pi(this),this.x=this.y=this.arc=this.site=this.cy=null};v.arc=t,v.site=i,v.x=p+a,v.y=m+Math.sqrt(p*p+g*g),v.cy=m,t.circle=v;for(var y=null,_=di._;_;)if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(!_.L){y=_.P;break}_=_.L}else{if(!_.R){y=_;break}_=_.R}di.insert(y,v),y||(ui=v)}}}}function ki(t){var e=t.circle;e&&(e.P||(ui=e.N),di.remove(e),fi.push(e),Pi(e),t.circle=null)}function Ti(t,e){var n=t.b;if(n)return!0;var r,i,o=t.a,a=e[0][0],s=e[1][0],l=e[0][1],c=e[1][1],u=t.l,d=t.r,h=u.x,f=u.y,p=d.x,g=d.y,m=(h+p)/2,v=(f+g)/2;if(g===f){if(m<a||m>=s)return;if(h>p){if(o){if(o.y>=c)return}else o={x:m,y:l};n={x:m,y:c}}else{if(o){if(o.y<l)return}else o={x:m,y:c};n={x:m,y:l}}}else if(i=v-(r=(h-p)/(g-f))*m,r<-1||r>1)if(h>p){if(o){if(o.y>=c)return}else o={x:(l-i)/r,y:l};n={x:(c-i)/r,y:c}}else{if(o){if(o.y<l)return}else o={x:(c-i)/r,y:c};n={x:(l-i)/r,y:l}}else if(f<g){if(o){if(o.x>=s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}else{if(o){if(o.x<a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}return t.a=o,t.b=n,!0}function Mi(t,e){this.l=t,this.r=e,this.a=this.b=null}function Ai(t,e,n,r){var i=new Mi(t,e);return si.push(i),n&&Li(i,t,e,n),r&&Li(i,e,t,r),li[t.i].edges.push(new Si(i,t,e)),li[e.i].edges.push(new Si(i,e,t)),i}function Li(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function Si(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Ci(){this._=null}function Pi(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function zi(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Di(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Ei(t){for(;t.L;)t=t.L;return t}function Oi(t,e){var n,r,i,o=t.sort(Ii).pop();for(si=[],li=new Array(t.length),ci=new Ci,di=new Ci;;)if(i=ui,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===n&&o.y===r||(li[o.i]=new xi(o),vi(o),n=o.x,r=o.y),o=t.pop();else{if(!i)break;mi(i.arc)}e&&(function(t){for(var e,n=si,r=nr(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)(!Ti(e=n[i],t)||!r(e)||y(e.a.x-e.b.x)<kt&&y(e.a.y-e.b.y)<kt)&&(e.a=e.b=null,n.splice(i,1))}(e),function(t){for(var e,n,r,i,o,a,s,l,c,u,d=t[0][0],h=t[1][0],f=t[0][1],p=t[1][1],g=li,m=g.length;m--;)if((o=g[m])&&o.prepare())for(l=(s=o.edges).length,a=0;a<l;)r=(u=s[a].end()).x,i=u.y,e=(c=s[++a%l].start()).x,n=c.y,(y(r-e)>kt||y(i-n)>kt)&&(s.splice(a,0,new Si((v=o.site,_=u,x=y(r-d)<kt&&p-i>kt?{x:d,y:y(e-d)<kt?n:p}:y(i-p)<kt&&h-r>kt?{x:y(n-p)<kt?e:h,y:p}:y(r-h)<kt&&i-f>kt?{x:h,y:y(e-h)<kt?n:f}:y(i-f)<kt&&r-d>kt?{x:y(n-f)<kt?e:d,y:f}:null,b=void 0,b=new Mi(v,null),b.a=_,b.b=x,si.push(b),b),o.site,null)),++l);var v,_,x,b}(e));var a={cells:li,edges:si};return ci=di=si=li=null,a}function Ii(t,e){return e.y-t.y||e.x-t.x}xi.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(bi),e.length},Si.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Ci.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Ei(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(zi(this,n),n=(t=n).U),n.C=!1,r.C=!0,Di(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Di(this,n),n=(t=n).U),n.C=!1,r.C=!0,zi(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Ei(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,zi(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Di(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,zi(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Di(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,zi(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Di(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},t.geom.voronoi=function(t){var e=Kr,n=ti,r=e,i=n,o=ji;if(t)return a(t);function a(t){var e=new Array(t.length),n=o[0][0],r=o[0][1],i=o[1][0],a=o[1][1];return Oi(s(t),o).cells.forEach(function(o,s){var l=o.edges,c=o.site;(e[s]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):c.x>=n&&c.x<=i&&c.y>=r&&c.y<=a?[[n,a],[i,a],[i,r],[n,r]]:[]).point=t[s]}),e}function s(t){return t.map(function(t,e){return{x:Math.round(r(t,e)/kt)*kt,y:Math.round(i(t,e)/kt)*kt,i:e}})}return a.links=function(t){return Oi(s(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},a.triangles=function(t){var e=[];return Oi(s(t)).cells.forEach(function(n,r){for(var i,o,a,s,l=n.site,c=n.edges.sort(bi),u=-1,d=c.length,h=c[d-1].edge,f=h.l===l?h.r:h.l;++u<d;)h,i=f,f=(h=c[u].edge).l===l?h.r:h.l,r<i.i&&r<f.i&&(a=i,s=f,((o=l).x-s.x)*(a.y-o.y)-(o.x-a.x)*(s.y-o.y)<0)&&e.push([t[r],t[i.i],t[f.i]])}),e},a.x=function(t){return arguments.length?(r=me(e=t),a):e},a.y=function(t){return arguments.length?(i=me(n=t),a):n},a.clipExtent=function(t){return arguments.length?(o=null==t?ji:t,a):o===ji?null:o},a.size=function(t){return arguments.length?a.clipExtent(t&&[[0,0],t]):o===ji?null:o&&o[1]},a};var ji=[[-1e6,-1e6],[1e6,1e6]];function Ni(t){return t.x}function Ri(t){return t.y}function Bi(e,n){e=t.rgb(e),n=t.rgb(n);var r=e.r,i=e.g,o=e.b,a=n.r-r,s=n.g-i,l=n.b-o;return function(t){return"#"+ce(Math.round(r+a*t))+ce(Math.round(i+s*t))+ce(Math.round(o+l*t))}}function Fi(t,e){var n,r={},i={};for(n in t)n in e?r[n]=Ui(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function Hi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function qi(t,e){var n,r,i,o=Zi.lastIndex=Vi.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=Zi.exec(t))&&(r=Vi.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:Hi(n,r)})),o=Vi.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}t.geom.delaunay=function(e){return t.geom.voronoi().triangles(e)},t.geom.quadtree=function(t,e,n,r,i){var o,a=Kr,s=ti;if(o=arguments.length)return a=Ni,s=Ri,3===o&&(i=n,r=e,n=e=0),l(t);function l(t){var l,c,u,d,h,f,p,g,m,v=me(a),_=me(s);if(null!=e)f=e,p=n,g=r,m=i;else if(g=m=-(f=p=1/0),c=[],u=[],h=t.length,o)for(d=0;d<h;++d)(l=t[d]).x<f&&(f=l.x),l.y<p&&(p=l.y),l.x>g&&(g=l.x),l.y>m&&(m=l.y),c.push(l.x),u.push(l.y);else for(d=0;d<h;++d){var x=+v(l=t[d],d),b=+_(l,d);x<f&&(f=x),b<p&&(p=b),x>g&&(g=x),b>m&&(m=b),c.push(x),u.push(b)}var w=g-f,k=m-p;function T(t,e,n,r,i,o,a,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(y(l-n)+y(c-r)<.01)M(t,e,n,r,i,o,a,s);else{var u=t.point;t.x=t.y=t.point=null,M(t,u,l,c,i,o,a,s),M(t,e,n,r,i,o,a,s)}else t.x=n,t.y=r,t.point=e}else M(t,e,n,r,i,o,a,s)}function M(t,e,n,r,i,o,a,s){var l=.5*(i+a),c=.5*(o+s),u=n>=l,d=r>=c,h=d<<1|u;t.leaf=!1,u?i=l:a=l,d?o=c:s=c,T(t=t.nodes[h]||(t.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){T(A,t,+v(t,++d),+_(t,d),f,p,g,m)}}),e,n,r,i,o,a,s)}w>k?m=p+w:g=f+k;var A={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){T(A,t,+v(t,++d),+_(t,d),f,p,g,m)}};if(A.visit=function(t){!function t(e,n,r,i,o,a){if(!e(n,r,i,o,a)){var s=.5*(r+o),l=.5*(i+a),c=n.nodes;c[0]&&t(e,c[0],r,i,s,l),c[1]&&t(e,c[1],s,i,o,l),c[2]&&t(e,c[2],r,l,s,a),c[3]&&t(e,c[3],s,l,o,a)}}(t,A,f,p,g,m)},A.find=function(t){return e=A,n=t[0],r=t[1],c=1/0,function t(e,u,d,h,f){if(!(u>a||d>s||h<i||f<o)){if(p=e.point){var p,g=n-e.x,m=r-e.y,v=g*g+m*m;if(v<c){var y=Math.sqrt(c=v);i=n-y,o=r-y,a=n+y,s=r+y,l=p}}for(var _=e.nodes,x=.5*(u+h),b=.5*(d+f),w=(r>=b)<<1|n>=x,k=w+4;w<k;++w)if(e=_[3&w])switch(3&w){case 0:t(e,u,d,x,b);break;case 1:t(e,x,d,h,b);break;case 2:t(e,u,b,x,f);break;case 3:t(e,x,b,h,f)}}}(e,i=f,o=p,a=g,s=m),l;var e,n,r,i,o,a,s,l,c},d=-1,null==e){for(;++d<h;)T(A,t[d],c[d],u[d],f,p,g,m);--d}else t.forEach(A.add);return c=u=t=l=null,A}return l.x=function(t){return arguments.length?(a=t,l):a},l.y=function(t){return arguments.length?(s=t,l):s},l.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),l):null==e?null:[[e,n],[r,i]]},l.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),l):null==e?null:[r-e,i-n]},l},t.interpolateRgb=Bi,t.interpolateObject=Fi,t.interpolateNumber=Hi,t.interpolateString=qi;var Zi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vi=new RegExp(Zi.source,"g");function Ui(e,n){for(var r,i=t.interpolators.length;--i>=0&&!(r=t.interpolators[i](e,n)););return r}function Wi(t,e){var n,r=[],i=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;n<s;++n)r.push(Ui(t[n],e[n]));for(;n<o;++n)i[n]=t[n];for(;n<a;++n)i[n]=e[n];return function(t){for(n=0;n<s;++n)i[n]=r[n](t);return i}}t.interpolate=Ui,t.interpolators=[function(t,e){var n=typeof e;return("string"===n?ge.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Bi:qi:e instanceof Ht?Bi:Array.isArray(e)?Wi:"object"===n&&isNaN(e)?Fi:Hi)(t,e)}],t.interpolateArray=Wi;var Gi=function(){return z},Xi=t.map({linear:Gi,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return Qi},cubic:function(){return Ki},sin:function(){return eo},exp:function(){return no},circle:function(){return ro},elastic:function(t,e){var n;arguments.length<2&&(e=.45);arguments.length?n=e/At*Math.asin(1/t):(t=1,n=e/4);return function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*At/e)}},back:function(t){t||(t=1.70158);return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return io}}),Yi=t.map({in:z,out:$i,"in-out":Ji,"out-in":function(t){return Ji($i(t))}});function $i(t){return function(e){return 1-t(1-e)}}function Ji(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function Qi(t){return t*t}function Ki(t){return t*t*t}function to(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function eo(t){return 1-Math.cos(t*St)}function no(t){return Math.pow(2,10*(t-1))}function ro(t){return 1-Math.sqrt(1-t*t)}function io(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function oo(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function ao(t){var e,n,r,i=[t.a,t.b],o=[t.c,t.d],a=lo(i),s=so(i,o),l=lo(((e=o)[0]+=(r=-s)*(n=i)[0],e[1]+=r*n[1],e))||0;i[0]*o[1]<o[0]*i[1]&&(i[0]*=-1,i[1]*=-1,a*=-1,s*=-1),this.rotate=(a?Math.atan2(i[1],i[0]):Math.atan2(-o[0],o[1]))*Pt,this.translate=[t.e,t.f],this.scale=[a,l],this.skew=l?Math.atan2(s,l)*Pt:0}function so(t,e){return t[0]*e[0]+t[1]*e[1]}function lo(t){var e=Math.sqrt(so(t,t));return e&&(t[0]/=e,t[1]/=e),e}t.ease=function(t){var e,r=t.indexOf("-"),i=r>=0?t.slice(0,r):t,o=r>=0?t.slice(r+1):"in";return i=Xi.get(i)||Gi,o=Yi.get(o)||z,e=o(i.apply(null,n.call(arguments,1))),function(t){return t<=0?0:t>=1?1:e(t)}},t.interpolateHcl=function(e,n){e=t.hcl(e),n=t.hcl(n);var r=e.h,i=e.c,o=e.l,a=n.h-r,s=n.c-i,l=n.l-o;isNaN(s)&&(s=0,i=isNaN(i)?n.c:i);isNaN(a)?(a=0,r=isNaN(r)?n.h:r):a>180?a-=360:a<-180&&(a+=360);return function(t){return Gt(r+a*t,i+s*t,o+l*t)+""}},t.interpolateHsl=function(e,n){e=t.hsl(e),n=t.hsl(n);var r=e.h,i=e.s,o=e.l,a=n.h-r,s=n.s-i,l=n.l-o;isNaN(s)&&(s=0,i=isNaN(i)?n.s:i);isNaN(a)?(a=0,r=isNaN(r)?n.h:r):a>180?a-=360:a<-180&&(a+=360);return function(t){return Vt(r+a*t,i+s*t,o+l*t)+""}},t.interpolateLab=function(e,n){e=t.lab(e),n=t.lab(n);var r=e.l,i=e.a,o=e.b,a=n.l-r,s=n.a-i,l=n.b-o;return function(t){return te(r+a*t,i+s*t,o+l*t)+""}},t.interpolateRound=oo,t.transform=function(e){var n=i.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new ao(e?e.matrix:co)})(e)},ao.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var co={a:1,b:0,c:0,d:1,e:0,f:0};function uo(t){return t.length?t.pop()+",":""}function ho(e,n){var r,i,o,a,s,l,c,u,d=[],h=[];return e=t.transform(e),n=t.transform(n),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:Hi(t[0],e[0])},{i:i-2,x:Hi(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(e.translate,n.translate,d,h),r=e.rotate,i=n.rotate,o=d,a=h,r!==i?(r-i>180?i+=360:i-r>180&&(r+=360),a.push({i:o.push(uo(o)+"rotate(",null,")")-2,x:Hi(r,i)})):i&&o.push(uo(o)+"rotate("+i+")"),s=e.skew,l=n.skew,c=d,u=h,s!==l?u.push({i:c.push(uo(c)+"skewX(",null,")")-2,x:Hi(s,l)}):l&&c.push(uo(c)+"skewX("+l+")"),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(uo(n)+"scale(",null,",",null,")");r.push({i:i-4,x:Hi(t[0],e[0])},{i:i-2,x:Hi(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(uo(n)+"scale("+e+")")}(e.scale,n.scale,d,h),e=n=null,function(t){for(var e,n=-1,r=h.length;++n<r;)d[(e=h[n]).i]=e.x(t);return d.join("")}}function fo(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function po(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function go(t){for(var e=t.source,n=t.target,r=function(t,e){if(t===e)return t;var n=mo(t),r=mo(e),i=n.pop(),o=r.pop(),a=null;for(;i===o;)a=i,i=n.pop(),o=r.pop();return a}(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function mo(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function vo(t){t.fixed|=2}function yo(t){t.fixed&=-7}function _o(t){t.fixed|=4,t.px=t.x,t.py=t.y}function xo(t){t.fixed&=-5}t.interpolateTransform=ho,t.layout={},t.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(go(t[n]));return e}},t.layout.chord=function(){var e,n,r,i,o,a,s,l={},c=0;function u(){var l,u,h,f,p,g={},m=[],v=t.range(i),y=[];for(e=[],n=[],l=0,f=-1;++f<i;){for(u=0,p=-1;++p<i;)u+=r[f][p];m.push(u),y.push(t.range(i)),l+=u}for(o&&v.sort(function(t,e){return o(m[t],m[e])}),a&&y.forEach(function(t,e){t.sort(function(t,n){return a(r[e][t],r[e][n])})}),l=(At-c*i)/l,u=0,f=-1;++f<i;){for(h=u,p=-1;++p<i;){var _=v[f],x=y[_][p],b=r[_][x],w=u,k=u+=b*l;g[_+"-"+x]={index:_,subindex:x,startAngle:w,endAngle:k,value:b}}n[_]={index:_,startAngle:h,endAngle:u,value:m[_]},u+=c}for(f=-1;++f<i;)for(p=f-1;++p<i;){var T=g[f+"-"+p],M=g[p+"-"+f];(T.value||M.value)&&e.push(T.value<M.value?{source:M,target:T}:{source:T,target:M})}s&&d()}function d(){e.sort(function(t,e){return s((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return l.matrix=function(t){return arguments.length?(i=(r=t)&&r.length,e=n=null,l):r},l.padding=function(t){return arguments.length?(c=t,e=n=null,l):c},l.sortGroups=function(t){return arguments.length?(o=t,e=n=null,l):o},l.sortSubgroups=function(t){return arguments.length?(a=t,e=null,l):a},l.sortChords=function(t){return arguments.length?(s=t,e&&d(),l):s},l.chords=function(){return e||u(),e},l.groups=function(){return n||u(),n},l},t.layout.force=function(){var e,n,r,i,o,a,s={},l=t.dispatch("start","tick","end"),c=[1,1],u=.9,d=bo,h=wo,f=-30,p=ko,g=.1,m=.64,v=[],y=[];function _(t){return function(e,n,r,i){if(e.point!==t){var o=e.cx-t.x,a=e.cy-t.y,s=i-n,l=o*o+a*a;if(s*s/m<l){if(l<p){var c=e.charge/l;t.px-=o*c,t.py-=a*c}return!0}if(e.point&&l&&l<p){c=e.pointCharge/l;t.px-=o*c,t.py-=a*c}}return!e.charge}}function x(e){e.px=t.event.x,e.py=t.event.y,s.resume()}return s.tick=function(){if((r*=.99)<.005)return e=null,l.end({type:"end",alpha:r=0}),!0;var n,s,d,h,p,m,x,b,w,k=v.length,T=y.length;for(s=0;s<T;++s)h=(d=y[s]).source,(m=(b=(p=d.target).x-h.x)*b+(w=p.y-h.y)*w)&&(b*=m=r*o[s]*((m=Math.sqrt(m))-i[s])/m,w*=m,p.x-=b*(x=h.weight+p.weight?h.weight/(h.weight+p.weight):.5),p.y-=w*x,h.x+=b*(x=1-x),h.y+=w*x);if((x=r*g)&&(b=c[0]/2,w=c[1]/2,s=-1,x))for(;++s<k;)(d=v[s]).x+=(b-d.x)*x,d.y+=(w-d.y)*x;if(f)for(!function t(e,n,r){var i=0,o=0;e.charge=0;if(!e.leaf)for(var a,s=e.nodes,l=s.length,c=-1;++c<l;)null!=(a=s[c])&&(t(a,n,r),e.charge+=a.charge,i+=a.charge*a.cx,o+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var u=n*r[e.point.index];e.charge+=e.pointCharge=u,i+=u*e.point.x,o+=u*e.point.y}e.cx=i/e.charge;e.cy=o/e.charge}(n=t.geom.quadtree(v),r,a),s=-1;++s<k;)(d=v[s]).fixed||n.visit(_(d));for(s=-1;++s<k;)(d=v[s]).fixed?(d.x=d.px,d.y=d.py):(d.x-=(d.px-(d.px=d.x))*u,d.y-=(d.py-(d.py=d.y))*u);l.tick({type:"tick",alpha:r})},s.nodes=function(t){return arguments.length?(v=t,s):v},s.links=function(t){return arguments.length?(y=t,s):y},s.size=function(t){return arguments.length?(c=t,s):c},s.linkDistance=function(t){return arguments.length?(d="function"==typeof t?t:+t,s):d},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(h="function"==typeof t?t:+t,s):h},s.friction=function(t){return arguments.length?(u=+t,s):u},s.charge=function(t){return arguments.length?(f="function"==typeof t?t:+t,s):f},s.chargeDistance=function(t){return arguments.length?(p=t*t,s):Math.sqrt(p)},s.gravity=function(t){return arguments.length?(g=+t,s):g},s.theta=function(t){return arguments.length?(m=t*t,s):Math.sqrt(m)},s.alpha=function(t){return arguments.length?(t=+t,r?t>0?r=t:(e.c=null,e.t=NaN,e=null,l.end({type:"end",alpha:r=0})):t>0&&(l.start({type:"start",alpha:r=t}),e=Te(s.tick)),s):r},s.start=function(){var t,e,n,r=v.length,l=y.length,u=c[0],p=c[1];for(t=0;t<r;++t)(n=v[t]).index=t,n.weight=0;for(t=0;t<l;++t)"number"==typeof(n=y[t]).source&&(n.source=v[n.source]),"number"==typeof n.target&&(n.target=v[n.target]),++n.source.weight,++n.target.weight;for(t=0;t<r;++t)n=v[t],isNaN(n.x)&&(n.x=g("x",u)),isNaN(n.y)&&(n.y=g("y",p)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(i=[],"function"==typeof d)for(t=0;t<l;++t)i[t]=+d.call(this,y[t],t);else for(t=0;t<l;++t)i[t]=d;if(o=[],"function"==typeof h)for(t=0;t<l;++t)o[t]=+h.call(this,y[t],t);else for(t=0;t<l;++t)o[t]=h;if(a=[],"function"==typeof f)for(t=0;t<r;++t)a[t]=+f.call(this,v[t],t);else for(t=0;t<r;++t)a[t]=f;function g(n,i){if(!e){for(e=new Array(r),c=0;c<r;++c)e[c]=[];for(c=0;c<l;++c){var o=y[c];e[o.source.index].push(o.target),e[o.target.index].push(o.source)}}for(var a,s=e[t],c=-1,u=s.length;++c<u;)if(!isNaN(a=s[c][n]))return a;return Math.random()*i}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(n||(n=t.behavior.drag().origin(z).on("dragstart.force",vo).on("drag.force",x).on("dragend.force",yo)),!arguments.length)return n;this.on("mouseover.force",_o).on("mouseout.force",xo).call(n)},t.rebind(s,l,"on")};var bo=20,wo=1,ko=1/0;function To(e,n){return t.rebind(e,n,"sort","children","value"),e.nodes=e,e.links=Po,e}function Mo(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function Ao(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(t=r.pop());)e(t)}function Lo(t){return t.children}function So(t){return t.value}function Co(t,e){return e.value-t.value}function Po(e){return t.merge(e.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}t.layout.hierarchy=function(){var t=Co,e=Lo,n=So;function r(i){var o,a=[i],s=[];for(i.depth=0;null!=(o=a.pop());)if(s.push(o),(c=e.call(r,o,o.depth))&&(l=c.length)){for(var l,c,u;--l>=0;)a.push(u=c[l]),u.parent=o,u.depth=o.depth+1;n&&(o.value=0),o.children=c}else n&&(o.value=+n.call(r,o,o.depth)||0),delete o.children;return Ao(i,function(e){var r,i;t&&(r=e.children)&&r.sort(t),n&&(i=e.parent)&&(i.value+=e.value)}),s}return r.sort=function(e){return arguments.length?(t=e,r):t},r.children=function(t){return arguments.length?(e=t,r):e},r.value=function(t){return arguments.length?(n=t,r):n},r.revalue=function(t){return n&&(Mo(t,function(t){t.children&&(t.value=0)}),Ao(t,function(t){var e;t.children||(t.value=+n.call(r,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},r},t.layout.partition=function(){var e=t.layout.hierarchy(),n=[1,1];function r(t,r){var i=e.call(this,t,r);return function t(e,n,r,i){var o=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,o&&(a=o.length)){var a,s,l,c=-1;for(r=e.value?r/e.value:0;++c<a;)t(s=o[c],n,l=s.value*r,i),n+=l}}(i[0],0,n[0],n[1]/function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,t(n[o]));return 1+r}(i[0])),i}return r.size=function(t){return arguments.length?(n=t,r):n},To(r,e)},t.layout.pie=function(){var e=Number,n=zo,r=0,i=At,o=0;function a(s){var l,c=s.length,u=s.map(function(t,n){return+e.call(a,t,n)}),d=+("function"==typeof r?r.apply(this,arguments):r),h=("function"==typeof i?i.apply(this,arguments):i)-d,f=Math.min(Math.abs(h)/c,+("function"==typeof o?o.apply(this,arguments):o)),p=f*(h<0?-1:1),g=t.sum(u),m=g?(h-c*p)/g:0,v=t.range(c),y=[];return null!=n&&v.sort(n===zo?function(t,e){return u[e]-u[t]}:function(t,e){return n(s[t],s[e])}),v.forEach(function(t){y[t]={data:s[t],value:l=u[t],startAngle:d,endAngle:d+=l*m+p,padAngle:f}}),y}return a.value=function(t){return arguments.length?(e=t,a):e},a.sort=function(t){return arguments.length?(n=t,a):n},a.startAngle=function(t){return arguments.length?(r=t,a):r},a.endAngle=function(t){return arguments.length?(i=t,a):i},a.padAngle=function(t){return arguments.length?(o=t,a):o},a};var zo={};function Do(t){return t.x}function Eo(t){return t.y}function Oo(t,e,n){t.y0=e,t.y=n}t.layout.stack=function(){var e=z,n=No,r=Ro,i=Oo,o=Do,a=Eo;function s(l,c){if(!(f=l.length))return l;var u=l.map(function(t,n){return e.call(s,t,n)}),d=u.map(function(t){return t.map(function(t,e){return[o.call(s,t,e),a.call(s,t,e)]})}),h=n.call(s,d,c);u=t.permute(u,h),d=t.permute(d,h);var f,p,g,m,v=r.call(s,d,c),y=u[0].length;for(g=0;g<y;++g)for(i.call(s,u[0][g],m=v[g],d[0][g][1]),p=1;p<f;++p)i.call(s,u[p][g],m+=d[p-1][g][1],d[p][g][1]);return l}return s.values=function(t){return arguments.length?(e=t,s):e},s.order=function(t){return arguments.length?(n="function"==typeof t?t:Io.get(t)||No,s):n},s.offset=function(t){return arguments.length?(r="function"==typeof t?t:jo.get(t)||Ro,s):r},s.x=function(t){return arguments.length?(o=t,s):o},s.y=function(t){return arguments.length?(a=t,s):a},s.out=function(t){return arguments.length?(i=t,s):i},s};var Io=t.map({"inside-out":function(e){var n,r,i=e.length,o=e.map(Bo),a=e.map(Fo),s=t.range(i).sort(function(t,e){return o[t]-o[e]}),l=0,c=0,u=[],d=[];for(n=0;n<i;++n)r=s[n],l<c?(l+=a[r],u.push(r)):(c+=a[r],d.push(r));return d.reverse().concat(u)},reverse:function(e){return t.range(e.length).reverse()},default:No}),jo=t.map({silhouette:function(t){var e,n,r,i=t.length,o=t[0].length,a=[],s=0,l=[];for(n=0;n<o;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];r>s&&(s=r),a.push(r)}for(n=0;n<o;++n)l[n]=(s-a[n])/2;return l},wiggle:function(t){var e,n,r,i,o,a,s,l,c,u=t.length,d=t[0],h=d.length,f=[];for(f[0]=l=c=0,n=1;n<h;++n){for(e=0,i=0;e<u;++e)i+=t[e][n][1];for(e=0,o=0,s=d[n][0]-d[n-1][0];e<u;++e){for(r=0,a=(t[e][n][1]-t[e][n-1][1])/(2*s);r<e;++r)a+=(t[r][n][1]-t[r][n-1][1])/s;o+=a*t[e][n][1]}f[n]=l-=i?o/i*s:0,l<c&&(c=l)}for(n=0;n<h;++n)f[n]-=c;return f},expand:function(t){var e,n,r,i=t.length,o=t[0].length,a=1/i,s=[];for(n=0;n<o;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=a}for(n=0;n<o;++n)s[n]=0;return s},zero:Ro});function No(e){return t.range(e.length)}function Ro(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function Bo(t){for(var e,n=1,r=0,i=t[0][1],o=t.length;n<o;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function Fo(t){return t.reduce(Ho,0)}function Ho(t,e){return t+e[1]}function qo(t,e){return Zo(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Zo(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,o=[];++n<=e;)o[n]=i*n+r;return o}function Vo(e){return[t.min(e),t.max(e)]}function Uo(t,e){return t.value-e.value}function Wo(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Go(t,e){t._pack_next=e,e._pack_prev=t}function Xo(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function Yo(t){if((e=t.children)&&(l=e.length)){var e,n,r,i,o,a,s,l,c=1/0,u=-1/0,d=1/0,h=-1/0;if(e.forEach($o),(n=e[0]).x=-n.r,n.y=0,_(n),l>1&&((r=e[1]).x=r.r,r.y=0,_(r),l>2))for(Qo(n,r,i=e[2]),_(i),Wo(n,i),n._pack_prev=i,Wo(i,r),r=n._pack_next,o=3;o<l;o++){Qo(n,r,i=e[o]);var f=0,p=1,g=1;for(a=r._pack_next;a!==r;a=a._pack_next,p++)if(Xo(a,i)){f=1;break}if(1==f)for(s=n._pack_prev;s!==a._pack_prev&&!Xo(s,i);s=s._pack_prev,g++);f?(p<g||p==g&&r.r<n.r?Go(n,r=a):Go(n=s,r),o--):(Wo(n,i),r=i,_(i))}var m=(c+u)/2,v=(d+h)/2,y=0;for(o=0;o<l;o++)(i=e[o]).x-=m,i.y-=v,y=Math.max(y,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=y,e.forEach(Jo)}function _(t){c=Math.min(t.x-t.r,c),u=Math.max(t.x+t.r,u),d=Math.min(t.y-t.r,d),h=Math.max(t.y+t.r,h)}}function $o(t){t._pack_next=t._pack_prev=t}function Jo(t){delete t._pack_next,delete t._pack_prev}function Qo(t,e,n){var r=t.r+n.r,i=e.x-t.x,o=e.y-t.y;if(r&&(i||o)){var a=e.r+n.r,s=i*i+o*o,l=.5+((r*=r)-(a*=a))/(2*s),c=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=t.x+l*i+c*o,n.y=t.y+l*o-c*i}else n.x=t.x+r,n.y=t.y}function Ko(t,e){return t.parent==e.parent?1:2}function ta(t){var e=t.children;return e.length?e[0]:t.t}function ea(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function na(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function ra(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function ia(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return i<0&&(n+=i/2,i=0),o<0&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function oa(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function aa(t){return t.rangeExtent?t.rangeExtent():oa(t.range())}function sa(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function la(t,e){var n,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function ca(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:ua}t.layout.histogram=function(){var e=!0,n=Number,r=Vo,i=qo;function o(o,a){for(var s,l,c=[],u=o.map(n,this),d=r.call(this,u,a),h=i.call(this,d,u,a),f=(a=-1,u.length),p=h.length-1,g=e?1:1/f;++a<p;)(s=c[a]=[]).dx=h[a+1]-(s.x=h[a]),s.y=0;if(p>0)for(a=-1;++a<f;)(l=u[a])>=d[0]&&l<=d[1]&&((s=c[t.bisect(h,l,1,p)-1]).y+=g,s.push(o[a]));return c}return o.value=function(t){return arguments.length?(n=t,o):n},o.range=function(t){return arguments.length?(r=me(t),o):r},o.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return Zo(e,t)}:me(t),o):i},o.frequency=function(t){return arguments.length?(e=!!t,o):e},o},t.layout.pack=function(){var e,n=t.layout.hierarchy().sort(Uo),r=0,i=[1,1];function o(t,o){var a=n.call(this,t,o),s=a[0],l=i[0],c=i[1],u=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,Ao(s,function(t){t.r=+u(t.value)}),Ao(s,Yo),r){var d=r*(e?1:Math.max(2*s.r/l,2*s.r/c))/2;Ao(s,function(t){t.r+=d}),Ao(s,Yo),Ao(s,function(t){t.r-=d})}return function t(e,n,r,i){var o=e.children;e.x=n+=i*e.x;e.y=r+=i*e.y;e.r*=i;if(o)for(var a=-1,s=o.length;++a<s;)t(o[a],n,r,i)}(s,l/2,c/2,e?1:1/Math.max(2*s.r/l,2*s.r/c)),a}return o.size=function(t){return arguments.length?(i=t,o):i},o.radius=function(t){return arguments.length?(e=null==t||"function"==typeof t?t:+t,o):e},o.padding=function(t){return arguments.length?(r=+t,o):r},To(o,n)},t.layout.tree=function(){var e=t.layout.hierarchy().sort(null).value(null),n=Ko,r=[1,1],i=null;function o(t,o){var c=e.call(this,t,o),u=c[0],d=function(t){var e,n={A:null,children:[t]},r=[n];for(;null!=(e=r.pop());)for(var i,o=e.children,a=0,s=o.length;a<s;++a)r.push((o[a]=i={_:o[a],parent:e,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}(u);if(Ao(d,a),d.parent.m=-d.z,Mo(d,s),i)Mo(u,l);else{var h=u,f=u,p=u;Mo(u,function(t){t.x<h.x&&(h=t),t.x>f.x&&(f=t),t.depth>p.depth&&(p=t)});var g=n(h,f)/2-h.x,m=r[0]/(f.x+n(f,h)/2+g),v=r[1]/(p.depth||1);Mo(u,function(t){t.x=(t.x+g)*m,t.y=t.depth*v})}return c}function a(t){var e=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(e.length){!function(t){var e,n=0,r=0,i=t.children,o=i.length;for(;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(t);var o=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+n(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+n(t._,i._));t.parent.A=function(t,e,r){if(e){for(var i,o=t,a=t,s=e,l=o.parent.children[0],c=o.m,u=a.m,d=s.m,h=l.m;s=ea(s),o=ta(o),s&&o;)l=ta(l),(a=ea(a)).a=t,(i=s.z+d-o.z-c+n(s._,o._))>0&&(na((p=t,g=r,(f=s).a.parent===p.parent?f.a:g),t,i),c+=i,u+=i),d+=s.m,c+=o.m,h+=l.m,u+=a.m;s&&!ea(a)&&(a.t=s,a.m+=d-u),o&&!ta(l)&&(l.t=o,l.m+=c-h,r=t)}var f,p,g;return r}(t,i,t.parent.A||r[0])}function s(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function l(t){t.x*=r[0],t.y=t.depth*r[1]}return o.separation=function(t){return arguments.length?(n=t,o):n},o.size=function(t){return arguments.length?(i=null==(r=t)?l:null,o):i?null:r},o.nodeSize=function(t){return arguments.length?(i=null==(r=t)?null:l,o):i?r:null},To(o,e)},t.layout.cluster=function(){var e=t.layout.hierarchy().sort(null).value(null),n=Ko,r=[1,1],i=!1;function o(o,a){var s,l=e.call(this,o,a),c=l[0],u=0;Ao(c,function(e){var r,i,o=e.children;o&&o.length?(e.x=(i=o).reduce(function(t,e){return t+e.x},0)/i.length,e.y=(r=o,1+t.max(r,function(t){return t.y}))):(e.x=s?u+=n(e,s):0,e.y=0,s=e)});var d=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(c),h=function t(e){var n,r=e.children;return r&&(n=r.length)?t(r[n-1]):e}(c),f=d.x-n(d,h)/2,p=h.x+n(h,d)/2;return Ao(c,i?function(t){t.x=(t.x-c.x)*r[0],t.y=(c.y-t.y)*r[1]}:function(t){t.x=(t.x-f)/(p-f)*r[0],t.y=(1-(c.y?t.y/c.y:1))*r[1]}),l}return o.separation=function(t){return arguments.length?(n=t,o):n},o.size=function(t){return arguments.length?(i=null==(r=t),o):i?null:r},o.nodeSize=function(t){return arguments.length?(i=null!=(r=t),o):i?r:null},To(o,e)},t.layout.treemap=function(){var e,n=t.layout.hierarchy(),r=Math.round,i=[1,1],o=null,a=ra,s=!1,l="squarify",c=.5*(1+Math.sqrt(5));function u(t,e){for(var n,r,i=-1,o=t.length;++i<o;)r=(n=t[i]).value*(e<0?0:e),n.area=isNaN(r)||r<=0?0:r}function d(t){var e=t.children;if(e&&e.length){var n,r,i,o=a(t),s=[],c=e.slice(),h=1/0,g="slice"===l?o.dx:"dice"===l?o.dy:"slice-dice"===l?1&t.depth?o.dy:o.dx:Math.min(o.dx,o.dy);for(u(c,o.dx*o.dy/t.value),s.area=0;(i=c.length)>0;)s.push(n=c[i-1]),s.area+=n.area,"squarify"!==l||(r=f(s,g))<=h?(c.pop(),h=r):(s.area-=s.pop().area,p(s,g,o,!1),g=Math.min(o.dx,o.dy),s.length=s.area=0,h=1/0);s.length&&(p(s,g,o,!0),s.length=s.area=0),e.forEach(d)}}function h(t){var e=t.children;if(e&&e.length){var n,r=a(t),i=e.slice(),o=[];for(u(i,r.dx*r.dy/t.value),o.area=0;n=i.pop();)o.push(n),o.area+=n.area,null!=n.z&&(p(o,n.z?r.dx:r.dy,r,!i.length),o.length=o.area=0);e.forEach(h)}}function f(t,e){for(var n,r=t.area,i=0,o=1/0,a=-1,s=t.length;++a<s;)(n=t[a].area)&&(n<o&&(o=n),n>i&&(i=n));return e*=e,(r*=r)?Math.max(e*i*c/r,r/(e*o*c)):1/0}function p(t,e,n,i){var o,a=-1,s=t.length,l=n.x,c=n.y,u=e?r(t.area/e):0;if(e==n.dx){for((i||u>n.dy)&&(u=n.dy);++a<s;)(o=t[a]).x=l,o.y=c,o.dy=u,l+=o.dx=Math.min(n.x+n.dx-l,u?r(o.area/u):0);o.z=!0,o.dx+=n.x+n.dx-l,n.y+=u,n.dy-=u}else{for((i||u>n.dx)&&(u=n.dx);++a<s;)(o=t[a]).x=l,o.y=c,o.dx=u,c+=o.dy=Math.min(n.y+n.dy-c,u?r(o.area/u):0);o.z=!1,o.dy+=n.y+n.dy-c,n.x+=u,n.dx-=u}}function g(t){var r=e||n(t),o=r[0];return o.x=o.y=0,o.value?(o.dx=i[0],o.dy=i[1]):o.dx=o.dy=0,e&&n.revalue(o),u([o],o.dx*o.dy/o.value),(e?h:d)(o),s&&(e=r),r}return g.size=function(t){return arguments.length?(i=t,g):i},g.padding=function(t){if(!arguments.length)return o;function e(e){return ia(e,t)}var n;return a=null==(o=t)?ra:"function"==(n=typeof t)?function(e){var n=t.call(g,e,e.depth);return null==n?ra(e):ia(e,"number"==typeof n?[n,n,n,n]:n)}:"number"===n?(t=[t,t,t,t],e):e,g},g.round=function(t){return arguments.length?(r=t?Math.round:Number,g):r!=Number},g.sticky=function(t){return arguments.length?(s=t,e=null,g):s},g.ratio=function(t){return arguments.length?(c=t,g):c},g.mode=function(t){return arguments.length?(l=t+"",g):l},To(g,n)},t.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){for(var n,r,i;!(i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r)||i>1;);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=t.random.normal.apply(t,arguments);return function(){return Math.exp(e())}},bates:function(e){var n=t.random.irwinHall(e);return function(){return n()/e}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},t.scale={};var ua={floor:z,ceil:z};function da(e,n,r,i){var o=[],a=[],s=0,l=Math.min(e.length,n.length)-1;for(e[l]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++s<=l;)o.push(r(e[s-1],e[s])),a.push(i(n[s-1],n[s]));return function(n){var r=t.bisect(e,n,1,l)-1;return a[r](o[r](n))}}function ha(e,n){return t.rebind(e,n,"range","rangeRound","interpolate","clamp")}function fa(t,e){return la(t,ca(pa(t,e)[2])),la(t,ca(pa(t,e)[2])),t}function pa(t,e){null==e&&(e=10);var n=oa(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function ga(e,n){return t.range.apply(t,pa(e,n))}function ma(e,n,r){var i,o,a,s=pa(e,n);if(r){var l=Pe.exec(r);if(l.shift(),"s"===l[8]){var c=t.formatPrefix(Math.max(y(s[0]),y(s[1])));return l[7]||(l[7]="."+ya(c.scale(s[2]))),l[8]="f",r=t.format(l.join("")),function(t){return r(c.scale(t))+c.symbol}}l[7]||(l[7]="."+(i=l[8],a=ya((o=s)[2]),i in va?Math.abs(a-ya(Math.max(y(o[0]),y(o[1]))))+ +("e"!==i):a-2*("%"===i))),r=l.join("")}else r=",."+ya(s[2])+"f";return t.format(r)}t.scale.linear=function(){return function t(e,n,r,i){var o,a;function s(){var t=Math.min(e.length,n.length)>2?da:sa,s=i?po:fo;return o=t(e,n,s,r),a=t(n,e,s,Ui),l}function l(t){return o(t)}l.invert=function(t){return a(t)};l.domain=function(t){return arguments.length?(e=t.map(Number),s()):e};l.range=function(t){return arguments.length?(n=t,s()):n};l.rangeRound=function(t){return l.range(t).interpolate(oo)};l.clamp=function(t){return arguments.length?(i=t,s()):i};l.interpolate=function(t){return arguments.length?(r=t,s()):r};l.ticks=function(t){return ga(e,t)};l.tickFormat=function(t,n){return ma(e,t,n)};l.nice=function(t){return fa(e,t),s()};l.copy=function(){return t(e,n,r,i)};return s()}([0,1],[0,1],Ui,!1)};var va={s:1,g:1,p:1,r:1,e:1};function ya(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}t.scale.log=function(){return function e(n,r,i,o){function a(t){return(i?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(r)}function s(t){return i?Math.pow(r,t):-Math.pow(r,-t)}function l(t){return n(a(t))}l.invert=function(t){return s(n.invert(t))};l.domain=function(t){return arguments.length?(i=t[0]>=0,n.domain((o=t.map(Number)).map(a)),l):o};l.base=function(t){return arguments.length?(r=+t,n.domain(o.map(a)),l):r};l.nice=function(){var t=la(o.map(a),i?Math:xa);return n.domain(t),o=t.map(s),l};l.ticks=function(){var t=oa(o),e=[],n=t[0],l=t[1],c=Math.floor(a(n)),u=Math.ceil(a(l)),d=r%1?2:r;if(isFinite(u-c)){if(i){for(;c<u;c++)for(var h=1;h<d;h++)e.push(s(c)*h);e.push(s(c))}else for(e.push(s(c));c++<u;)for(var h=d-1;h>0;h--)e.push(s(c)*h);for(c=0;e[c]<n;c++);for(u=e.length;e[u-1]>l;u--);e=e.slice(c,u)}return e};l.tickFormat=function(e,n){if(!arguments.length)return _a;arguments.length<2?n=_a:"function"!=typeof n&&(n=t.format(n));var i=Math.max(1,r*e/l.ticks().length);return function(t){var e=t/s(Math.round(a(t)));return e*r<r-.5&&(e*=r),e<=i?n(t):""}};l.copy=function(){return e(n.copy(),r,i,o)};return ha(l,n)}(t.scale.linear().domain([0,1]),10,!0,[1,10])};var _a=t.format(".0e"),xa={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function ba(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}t.scale.pow=function(){return function t(e,n,r){var i=ba(n),o=ba(1/n);function a(t){return e(i(t))}a.invert=function(t){return o(e.invert(t))};a.domain=function(t){return arguments.length?(e.domain((r=t.map(Number)).map(i)),a):r};a.ticks=function(t){return ga(r,t)};a.tickFormat=function(t,e){return ma(r,t,e)};a.nice=function(t){return a.domain(fa(r,t))};a.exponent=function(t){return arguments.length?(i=ba(n=t),o=ba(1/n),e.domain(r.map(i)),a):n};a.copy=function(){return t(e.copy(),n,r)};return ha(a,e)}(t.scale.linear(),1,[0,1])},t.scale.sqrt=function(){return t.scale.pow().exponent(.5)},t.scale.ordinal=function(){return function e(n,r){var i,o,a;function s(t){return o[((i.get(t)||("range"===r.t?i.set(t,n.push(t)):NaN))-1)%o.length]}function l(e,r){return t.range(n.length).map(function(t){return e+r*t})}s.domain=function(t){if(!arguments.length)return n;n=[],i=new x;for(var e,o=-1,a=t.length;++o<a;)i.has(e=t[o])||i.set(e,n.push(e));return s[r.t].apply(s,r.a)};s.range=function(t){return arguments.length?(o=t,a=0,r={t:"range",a:arguments},s):o};s.rangePoints=function(t,e){arguments.length<2&&(e=0);var i=t[0],c=t[1],u=n.length<2?(i=(i+c)/2,0):(c-i)/(n.length-1+e);return o=l(i+u*e/2,u),a=0,r={t:"rangePoints",a:arguments},s};s.rangeRoundPoints=function(t,e){arguments.length<2&&(e=0);var i=t[0],c=t[1],u=n.length<2?(i=c=Math.round((i+c)/2),0):(c-i)/(n.length-1+e)|0;return o=l(i+Math.round(u*e/2+(c-i-(n.length-1+e)*u)/2),u),a=0,r={t:"rangeRoundPoints",a:arguments},s};s.rangeBands=function(t,e,i){arguments.length<2&&(e=0),arguments.length<3&&(i=e);var c=t[1]<t[0],u=t[c-0],d=t[1-c],h=(d-u)/(n.length-e+2*i);return o=l(u+h*i,h),c&&o.reverse(),a=h*(1-e),r={t:"rangeBands",a:arguments},s};s.rangeRoundBands=function(t,e,i){arguments.length<2&&(e=0),arguments.length<3&&(i=e);var c=t[1]<t[0],u=t[c-0],d=t[1-c],h=Math.floor((d-u)/(n.length-e+2*i));return o=l(u+Math.round((d-u-(n.length-e)*h)/2),h),c&&o.reverse(),a=Math.round(h*(1-e)),r={t:"rangeRoundBands",a:arguments},s};s.rangeBand=function(){return a};s.rangeExtent=function(){return oa(r.a[0])};s.copy=function(){return e(n,r)};return s.domain(n)}([],{t:"range",a:[[]]})},t.scale.category10=function(){return t.scale.ordinal().range(wa)},t.scale.category20=function(){return t.scale.ordinal().range(ka)},t.scale.category20b=function(){return t.scale.ordinal().range(Ta)},t.scale.category20c=function(){return t.scale.ordinal().range(Ma)};var wa=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(se),ka=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(se),Ta=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(se),Ma=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(se);function Aa(){return 0}t.scale.quantile=function(){return function e(n,r){var i;function o(){var e=0,o=r.length;for(i=[];++e<o;)i[e-1]=t.quantile(n,e/o);return a}function a(e){if(!isNaN(e=+e))return r[t.bisect(i,e)]}a.domain=function(t){return arguments.length?(n=t.map(f).filter(p).sort(h),o()):n};a.range=function(t){return arguments.length?(r=t,o()):r};a.quantiles=function(){return i};a.invertExtent=function(t){return(t=r.indexOf(t))<0?[NaN,NaN]:[t>0?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]};a.copy=function(){return e(n,r)};return o()}([],[])},t.scale.quantize=function(){return function t(e,n,r){var i,o;function a(t){return r[Math.max(0,Math.min(o,Math.floor(i*(t-e))))]}function s(){return i=r.length/(n-e),o=r.length-1,a}a.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],s()):[e,n]};a.range=function(t){return arguments.length?(r=t,s()):r};a.invertExtent=function(t){return[t=(t=r.indexOf(t))<0?NaN:t/i+e,t+1/i]};a.copy=function(){return t(e,n,r)};return s()}(0,1,[0,1])},t.scale.threshold=function(){return function e(n,r){function i(e){if(e<=e)return r[t.bisect(n,e)]}i.domain=function(t){return arguments.length?(n=t,i):n};i.range=function(t){return arguments.length?(r=t,i):r};i.invertExtent=function(t){return t=r.indexOf(t),[n[t-1],n[t]]};i.copy=function(){return e(n,r)};return i}([.5],[0,1])},t.scale.identity=function(){return function t(e){function n(t){return+t}n.invert=n;n.domain=n.range=function(t){return arguments.length?(e=t.map(n),n):e};n.ticks=function(t){return ga(e,t)};n.tickFormat=function(t,n){return ma(e,t,n)};n.copy=function(){return t(e)};return n}([0,1])},t.svg={},t.svg.arc=function(){var t=Sa,e=Ca,n=Aa,r=La,i=Pa,o=za,a=Da;function s(){var s=Math.max(0,+t.apply(this,arguments)),c=Math.max(0,+e.apply(this,arguments)),u=i.apply(this,arguments)-St,d=o.apply(this,arguments)-St,h=Math.abs(d-u),f=u>d?0:1;if(c<s&&(p=c,c=s,s=p),h>=Lt)return l(c,f)+(s?l(s,1-f):"")+"Z";var p,g,m,v,y,_,x,b,w,k,T,M,A=0,L=0,S=[];if((v=(+a.apply(this,arguments)||0)/2)&&(m=r===La?Math.sqrt(s*s+c*c):+r.apply(this,arguments),f||(L*=-1),c&&(L=Ot(m/c*Math.sin(v))),s&&(A=Ot(m/s*Math.sin(v)))),c){y=c*Math.cos(u+L),_=c*Math.sin(u+L),x=c*Math.cos(d-L),b=c*Math.sin(d-L);var C=Math.abs(d-u-2*L)<=Mt?0:1;if(L&&Ea(y,_,x,b)===f^C){var P=(u+d)/2;y=c*Math.cos(P),_=c*Math.sin(P),x=b=null}}else y=_=0;if(s){w=s*Math.cos(d-A),k=s*Math.sin(d-A),T=s*Math.cos(u+A),M=s*Math.sin(u+A);var z=Math.abs(u-d+2*A)<=Mt?0:1;if(A&&Ea(w,k,T,M)===1-f^z){var D=(u+d)/2;w=s*Math.cos(D),k=s*Math.sin(D),T=M=null}}else w=k=0;if(h>kt&&(p=Math.min(Math.abs(c-s)/2,+n.apply(this,arguments)))>.001){g=s<c^f?0:1;var E=p,O=p;if(h<Mt){var I=null==T?[w,k]:null==x?[y,_]:oi([y,_],[T,M],[x,b],[w,k]),j=y-I[0],N=_-I[1],R=x-I[0],B=b-I[1],F=1/Math.sin(Math.acos((j*R+N*B)/(Math.sqrt(j*j+N*N)*Math.sqrt(R*R+B*B)))/2),H=Math.sqrt(I[0]*I[0]+I[1]*I[1]);O=Math.min(p,(s-H)/(F-1)),E=Math.min(p,(c-H)/(F+1))}if(null!=x){var q=Oa(null==T?[w,k]:[T,M],[y,_],c,E,f),Z=Oa([x,b],[w,k],c,E,f);p===E?S.push("M",q[0],"A",E,",",E," 0 0,",g," ",q[1],"A",c,",",c," 0 ",1-f^Ea(q[1][0],q[1][1],Z[1][0],Z[1][1]),",",f," ",Z[1],"A",E,",",E," 0 0,",g," ",Z[0]):S.push("M",q[0],"A",E,",",E," 0 1,",g," ",Z[0])}else S.push("M",y,",",_);if(null!=T){var V=Oa([y,_],[T,M],s,-O,f),U=Oa([w,k],null==x?[y,_]:[x,b],s,-O,f);p===O?S.push("L",U[0],"A",O,",",O," 0 0,",g," ",U[1],"A",s,",",s," 0 ",f^Ea(U[1][0],U[1][1],V[1][0],V[1][1]),",",1-f," ",V[1],"A",O,",",O," 0 0,",g," ",V[0]):S.push("L",U[0],"A",O,",",O," 0 0,",g," ",V[0])}else S.push("L",w,",",k)}else S.push("M",y,",",_),null!=x&&S.push("A",c,",",c," 0 ",C,",",f," ",x,",",b),S.push("L",w,",",k),null!=T&&S.push("A",s,",",s," 0 ",z,",",1-f," ",T,",",M);return S.push("Z"),S.join("")}function l(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return s.innerRadius=function(e){return arguments.length?(t=me(e),s):t},s.outerRadius=function(t){return arguments.length?(e=me(t),s):e},s.cornerRadius=function(t){return arguments.length?(n=me(t),s):n},s.padRadius=function(t){return arguments.length?(r=t==La?La:me(t),s):r},s.startAngle=function(t){return arguments.length?(i=me(t),s):i},s.endAngle=function(t){return arguments.length?(o=me(t),s):o},s.padAngle=function(t){return arguments.length?(a=me(t),s):a},s.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-St;return[Math.cos(r)*n,Math.sin(r)*n]},s};var La="auto";function Sa(t){return t.innerRadius}function Ca(t){return t.outerRadius}function Pa(t){return t.startAngle}function za(t){return t.endAngle}function Da(t){return t&&t.padAngle}function Ea(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function Oa(t,e,n,r,i){var o=t[0]-e[0],a=t[1]-e[1],s=(i?r:-r)/Math.sqrt(o*o+a*a),l=s*a,c=-s*o,u=t[0]+l,d=t[1]+c,h=e[0]+l,f=e[1]+c,p=(u+h)/2,g=(d+f)/2,m=h-u,v=f-d,y=m*m+v*v,_=n-r,x=u*f-h*d,b=(v<0?-1:1)*Math.sqrt(Math.max(0,_*_*y-x*x)),w=(x*v-m*b)/y,k=(-x*m-v*b)/y,T=(x*v+m*b)/y,M=(-x*m+v*b)/y,A=w-p,L=k-g,S=T-p,C=M-g;return A*A+L*L>S*S+C*C&&(w=T,k=M),[[w-l,k-c],[w*n/_,k*n/_]]}function Ia(t){var e=Kr,n=ti,r=Gn,i=Na,o=i.key,a=.7;function s(o){var s,l=[],c=[],u=-1,d=o.length,h=me(e),f=me(n);function p(){l.push("M",i(t(c),a))}for(;++u<d;)r.call(this,s=o[u],u)?c.push([+h.call(this,s,u),+f.call(this,s,u)]):c.length&&(p(),c=[]);return c.length&&p(),l.length?l.join(""):null}return s.x=function(t){return arguments.length?(e=t,s):e},s.y=function(t){return arguments.length?(n=t,s):n},s.defined=function(t){return arguments.length?(r=t,s):r},s.interpolate=function(t){return arguments.length?(o="function"==typeof t?i=t:(i=ja.get(t)||Na).key,s):o},s.tension=function(t){return arguments.length?(a=t,s):a},s}t.svg.line=function(){return Ia(z)};var ja=t.map({linear:Na,"linear-closed":Ra,step:function(t){var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];for(;++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);n>1&&i.push("H",r[0]);return i.join("")},"step-before":Ba,"step-after":Fa,basis:Za,"basis-open":function(t){if(t.length<4)return Na(t);var e,n=[],r=-1,i=t.length,o=[0],a=[0];for(;++r<3;)e=t[r],o.push(e[0]),a.push(e[1]);n.push(Va(Ga,o)+","+Va(Ga,a)),--r;for(;++r<i;)e=t[r],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Xa(n,o,a);return n.join("")},"basis-closed":function(t){var e,n,r=-1,i=t.length,o=i+4,a=[],s=[];for(;++r<4;)n=t[r%i],a.push(n[0]),s.push(n[1]);e=[Va(Ga,a),",",Va(Ga,s)],--r;for(;++r<o;)n=t[r%i],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Xa(e,a,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var r,i,o=t[0][0],a=t[0][1],s=t[n][0]-o,l=t[n][1]-a,c=-1;++c<=n;)r=t[c],i=c/n,r[0]=e*r[0]+(1-e)*(o+i*s),r[1]=e*r[1]+(1-e)*(a+i*l);return Za(t)},cardinal:function(t,e){return t.length<3?Na(t):t[0]+Ha(t,qa(t,e))},"cardinal-open":function(t,e){return t.length<4?Na(t):t[1]+Ha(t.slice(1,-1),qa(t,e))},"cardinal-closed":function(t,e){return t.length<3?Ra(t):t[0]+Ha((t.push(t[0]),t),qa([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?Na(t):t[0]+Ha(t,function(t){var e,n,r,i,o=[],a=function(t){var e=0,n=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=Ya(i,o);for(;++e<n;)r[e]=(a+(a=Ya(i=o,o=t[e+1])))/2;return r[e]=a,r}(t),s=-1,l=t.length-1;for(;++s<l;)e=Ya(t[s],t[s+1]),y(e)<kt?a[s]=a[s+1]=0:(n=a[s]/e,r=a[s+1]/e,(i=n*n+r*r)>9&&(i=3*e/Math.sqrt(i),a[s]=i*n,a[s+1]=i*r));s=-1;for(;++s<=l;)i=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}(t))}});function Na(t){return t.length>1?t.join("L"):t+"Z"}function Ra(t){return t.join("L")+"Z"}function Ba(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function Fa(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function Ha(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Na(t);var n=t.length!=e.length,r="",i=t[0],o=t[1],a=e[0],s=a,l=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],l=2),e.length>1){s=e[1],o=t[l],l++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var c=2;c<e.length;c++,l++)o=t[l],s=e[c],r+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var u=t[l];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+u[0]+","+u[1]}return r}function qa(t,e){for(var n,r=[],i=(1-e)/2,o=t[0],a=t[1],s=1,l=t.length;++s<l;)n=o,o=a,a=t[s],r.push([i*(a[0]-n[0]),i*(a[1]-n[1])]);return r}function Za(t){if(t.length<3)return Na(t);var e=1,n=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],s=[o,o,o,r[1]],l=[i,",",o,"L",Va(Ga,a),",",Va(Ga,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Xa(l,a,s);return t.pop(),l.push("L",r),l.join("")}function Va(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}ja.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Ua=[0,2/3,1/3,0],Wa=[0,1/3,2/3,0],Ga=[0,1/6,2/3,1/6];function Xa(t,e,n){t.push("C",Va(Ua,e),",",Va(Ua,n),",",Va(Wa,e),",",Va(Wa,n),",",Va(Ga,e),",",Va(Ga,n))}function Ya(t,e){return(e[1]-t[1])/(e[0]-t[0])}function $a(t){for(var e,n,r,i=-1,o=t.length;++i<o;)n=(e=t[i])[0],r=e[1]-St,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function Ja(t){var e=Kr,n=Kr,r=0,i=ti,o=Gn,a=Na,s=a.key,l=a,c="L",u=.7;function d(s){var d,h,f,p=[],g=[],m=[],v=-1,y=s.length,_=me(e),x=me(r),b=e===n?function(){return h}:me(n),w=r===i?function(){return f}:me(i);function k(){p.push("M",a(t(m),u),c,l(t(g.reverse()),u),"Z")}for(;++v<y;)o.call(this,d=s[v],v)?(g.push([h=+_.call(this,d,v),f=+x.call(this,d,v)]),m.push([+b.call(this,d,v),+w.call(this,d,v)])):g.length&&(k(),g=[],m=[]);return g.length&&k(),p.length?p.join(""):null}return d.x=function(t){return arguments.length?(e=n=t,d):n},d.x0=function(t){return arguments.length?(e=t,d):e},d.x1=function(t){return arguments.length?(n=t,d):n},d.y=function(t){return arguments.length?(r=i=t,d):i},d.y0=function(t){return arguments.length?(r=t,d):r},d.y1=function(t){return arguments.length?(i=t,d):i},d.defined=function(t){return arguments.length?(o=t,d):o},d.interpolate=function(t){return arguments.length?(s="function"==typeof t?a=t:(a=ja.get(t)||Na).key,l=a.reverse||a,c=a.closed?"M":"L",d):s},d.tension=function(t){return arguments.length?(u=t,d):u},d}function Qa(t){return t.radius}function Ka(t){return[t.x,t.y]}function ts(){return 64}function es(){return"circle"}function ns(t){var e=Math.sqrt(t/Mt);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}t.svg.line.radial=function(){var t=Ia($a);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Ba.reverse=Fa,Fa.reverse=Ba,t.svg.area=function(){return Ja(z)},t.svg.area.radial=function(){var t=Ja($a);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},t.svg.chord=function(){var t=Br,e=Fr,n=Qa,r=Pa,i=za;function o(n,r){var i,o,c=a(this,t,n,r),u=a(this,e,n,r);return"M"+c.p0+s(c.r,c.p1,c.a1-c.a0)+(o=u,(i=c).a0==o.a0&&i.a1==o.a1?l(c.r,c.p1,c.r,c.p0):l(c.r,c.p1,u.r,u.p0)+s(u.r,u.p1,u.a1-u.a0)+l(u.r,u.p1,c.r,c.p0))+"Z"}function a(t,e,o,a){var s=e.call(t,o,a),l=n.call(t,s,a),c=r.call(t,s,a)-St,u=i.call(t,s,a)-St;return{r:l,a0:c,a1:u,p0:[l*Math.cos(c),l*Math.sin(c)],p1:[l*Math.cos(u),l*Math.sin(u)]}}function s(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Mt)+",1 "+e}function l(t,e,n,r){return"Q 0,0 "+r}return o.radius=function(t){return arguments.length?(n=me(t),o):n},o.source=function(e){return arguments.length?(t=me(e),o):t},o.target=function(t){return arguments.length?(e=me(t),o):e},o.startAngle=function(t){return arguments.length?(r=me(t),o):r},o.endAngle=function(t){return arguments.length?(i=me(t),o):i},o},t.svg.diagonal=function(){var t=Br,e=Fr,n=Ka;function r(r,i){var o=t.call(this,r,i),a=e.call(this,r,i),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];return"M"+(l=l.map(n))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}return r.source=function(e){return arguments.length?(t=me(e),r):t},r.target=function(t){return arguments.length?(e=me(t),r):e},r.projection=function(t){return arguments.length?(n=t,r):n},r},t.svg.diagonal.radial=function(){var e=t.svg.diagonal(),n=Ka,r=e.projection;return e.projection=function(t){return arguments.length?r((e=n=t,function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-St;return[n*Math.cos(r),n*Math.sin(r)]})):n;var e},e},t.svg.symbol=function(){var t=es,e=ts;function n(n,r){return(rs.get(t.call(this,n,r))||ns)(e.call(this,n,r))}return n.type=function(e){return arguments.length?(t=me(e),n):t},n.size=function(t){return arguments.length?(e=me(t),n):e},n};var rs=t.map({circle:ns,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*os)),n=e*os;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/is),n=e*is/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/is),n=e*is/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});t.svg.symbolTypes=rs.keys();var is=Math.sqrt(3),os=Math.tan(30*Ct);G.transition=function(t){for(var e,n,r=cs||++hs,i=gs(t),o=[],a=us||{time:Date.now(),ease:to,delay:0,duration:250},s=-1,l=this.length;++s<l;){o.push(e=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(n=c[u])&&ms(n,u,i,r,a),e.push(n)}return ls(o,i,r)},G.interrupt=function(t){return this.each(null==t?as:ss(gs(t)))};var as=ss(gs());function ss(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function ls(t,e,n){return q(t,ds),t.namespace=e,t.id=n,t}var cs,us,ds=[],hs=0;function fs(t,e,n,r){var i=t.id,o=t.namespace;return ut(t,"function"==typeof n?function(t,a,s){t[o][i].tween.set(e,r(n.call(t,t.__data__,a,s)))}:(n=r(n),function(t){t[o][i].tween.set(e,n)}))}function ps(t){return null==t&&(t=""),function(){this.textContent=t}}function gs(t){return null==t?"__transition__":"__transition_"+t+"__"}function ms(t,e,n,r,i){var o,a,s,l,c,u=t[n]||(t[n]={active:0,count:0}),d=u[r];function h(n){var i=u.active,h=u[i];for(var p in h&&(h.timer.c=null,h.timer.t=NaN,--u.count,delete u[i],h.event&&h.event.interrupt.call(t,t.__data__,h.index)),u)if(+p<r){var g=u[p];g.timer.c=null,g.timer.t=NaN,--u.count,delete u[p]}a.c=f,Te(function(){return a.c&&f(n||1)&&(a.c=null,a.t=NaN),1},0,o),u.active=r,d.event&&d.event.start.call(t,t.__data__,e),c=[],d.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&c.push(r)}),l=d.ease,s=d.duration}function f(i){for(var o=i/s,a=l(o),h=c.length;h>0;)c[--h].call(t,a);if(o>=1)return d.event&&d.event.end.call(t,t.__data__,e),--u.count?delete u[r]:delete t[n],1}d||(o=i.time,a=Te(function(t){var e=d.delay;if(a.t=e+o,e<=t)return h(t-e);a.c=h},0,o),d=u[r]={tween:new x,time:o,timer:a,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++u.count)}ds.call=G.call,ds.empty=G.empty,ds.node=G.node,ds.size=G.size,t.transition=function(e,n){return e&&e.transition?cs?e.transition(n):e:t.selection().transition(e)},t.transition.prototype=ds,ds.select=function(t){var e,n,r,i=this.id,o=this.namespace,a=[];t=X(t);for(var s=-1,l=this.length;++s<l;){a.push(e=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(r=c[u])&&(n=t.call(r,r.__data__,u,s))?("__data__"in r&&(n.__data__=r.__data__),ms(n,u,o,i,r[o][i]),e.push(n)):e.push(null)}return ls(a,o,i)},ds.selectAll=function(t){var e,n,r,i,o,a=this.id,s=this.namespace,l=[];t=Y(t);for(var c=-1,u=this.length;++c<u;)for(var d=this[c],h=-1,f=d.length;++h<f;)if(r=d[h]){o=r[s][a],n=t.call(r,r.__data__,h,c),l.push(e=[]);for(var p=-1,g=n.length;++p<g;)(i=n[p])&&ms(i,p,s,a,o),e.push(i)}return ls(l,s,a)},ds.filter=function(t){var e,n,r=[];"function"!=typeof t&&(t=ct(t));for(var i=0,o=this.length;i<o;i++){r.push(e=[]);for(var a,s=0,l=(a=this[i]).length;s<l;s++)(n=a[s])&&t.call(n,n.__data__,s,i)&&e.push(n)}return ls(r,this.namespace,this.id)},ds.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):ut(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},ds.attr=function(e,n){if(arguments.length<2){for(n in e)this.attr(n,e[n]);return this}var r="transform"==e?ho:Ui,i=t.ns.qualify(e);function o(){this.removeAttribute(i)}function a(){this.removeAttributeNS(i.space,i.local)}return fs(this,"attr."+e,n,i.local?function(t){return null==t?a:(t+="",function(){var e,n=this.getAttributeNS(i.space,i.local);return n!==t&&(e=r(n,t),function(t){this.setAttributeNS(i.space,i.local,e(t))})})}:function(t){return null==t?o:(t+="",function(){var e,n=this.getAttribute(i);return n!==t&&(e=r(n,t),function(t){this.setAttribute(i,e(t))})})})},ds.attrTween=function(e,n){var r=t.ns.qualify(e);return this.tween("attr."+e,r.local?function(t,e){var i=n.call(this,t,e,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}:function(t,e){var i=n.call(this,t,e,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}})},ds.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.style(n,t[n],e);return this}n=""}function i(){this.style.removeProperty(t)}return fs(this,"style."+t,e,function(e){return null==e?i:(e+="",function(){var r,i=a(this).getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(r=Ui(i,e),function(e){this.style.setProperty(t,r(e),n)})})})},ds.styleTween=function(t,e,n){return arguments.length<3&&(n=""),this.tween("style."+t,function(r,i){var o=e.call(this,r,i,a(this).getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),n)}})},ds.text=function(t){return fs(this,"text",t,ps)},ds.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},ds.ease=function(e){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:("function"!=typeof e&&(e=t.ease.apply(t,arguments)),ut(this,function(t){t[r][n].ease=e}))},ds.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:ut(this,"function"==typeof t?function(r,i,o){r[n][e].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[n][e].delay=t}))},ds.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:ut(this,"function"==typeof t?function(r,i,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},ds.each=function(e,n){var r=this.id,i=this.namespace;if(arguments.length<2){var o=us,a=cs;try{cs=r,ut(this,function(t,n,o){us=t[i][r],e.call(t,t.__data__,n,o)})}finally{us=o,cs=a}}else ut(this,function(o){var a=o[i][r];(a.event||(a.event=t.dispatch("start","end","interrupt"))).on(e,n)});return this},ds.transition=function(){for(var t,e,n,r=this.id,i=++hs,o=this.namespace,a=[],s=0,l=this.length;s<l;s++){a.push(t=[]);for(var c,u=0,d=(c=this[s]).length;u<d;u++)(e=c[u])&&ms(e,u,o,i,{time:(n=e[o][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return ls(a,o,i)},t.svg.axis=function(){var e,n=t.scale.linear(),i=vs,o=6,a=6,s=3,l=[10],c=null;function u(r){r.each(function(){var r,u=t.select(this),d=this.__chart__||n,h=this.__chart__=n.copy(),f=null==c?h.ticks?h.ticks.apply(h,l):h.domain():c,p=null==e?h.tickFormat?h.tickFormat.apply(h,l):z:e,g=u.selectAll(".tick").data(f,h),m=g.enter().insert("g",".domain").attr("class","tick").style("opacity",kt),v=t.transition(g.exit()).style("opacity",kt).remove(),y=t.transition(g.order()).style("opacity",1),_=Math.max(o,0)+s,x=aa(h),b=u.selectAll(".domain").data([0]),w=(b.enter().append("path").attr("class","domain"),t.transition(b));m.append("line"),m.append("text");var k,T,M,A,L=m.select("line"),S=y.select("line"),C=g.select("text").text(p),P=m.select("text"),D=y.select("text"),E="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(r=_s,k="x",M="y",T="x2",A="y2",C.attr("dy",E<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+x[0]+","+E*a+"V0H"+x[1]+"V"+E*a)):(r=xs,k="y",M="x",T="y2",A="x2",C.attr("dy",".32em").style("text-anchor",E<0?"end":"start"),w.attr("d","M"+E*a+","+x[0]+"H0V"+x[1]+"H"+E*a)),L.attr(A,E*o),P.attr(M,E*_),S.attr(T,0).attr(A,E*o),D.attr(k,0).attr(M,E*_),h.rangeBand){var O=h,I=O.rangeBand()/2;d=h=function(t){return O(t)+I}}else d.rangeBand?d=h:v.call(r,h,d);m.call(r,d,h),y.call(r,h,h)})}return u.scale=function(t){return arguments.length?(n=t,u):n},u.orient=function(t){return arguments.length?(i=t in ys?t+"":vs,u):i},u.ticks=function(){return arguments.length?(l=r(arguments),u):l},u.tickValues=function(t){return arguments.length?(c=t,u):c},u.tickFormat=function(t){return arguments.length?(e=t,u):e},u.tickSize=function(t){var e=arguments.length;return e?(o=+t,a=+arguments[e-1],u):o},u.innerTickSize=function(t){return arguments.length?(o=+t,u):o},u.outerTickSize=function(t){return arguments.length?(a=+t,u):a},u.tickPadding=function(t){return arguments.length?(s=+t,u):s},u.tickSubdivide=function(){return arguments.length&&u},u};var vs="bottom",ys={top:1,right:1,bottom:1,left:1};function _s(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function xs(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}t.svg.brush=function(){var e,n,r=F(h,"brushstart","brush","brushend"),i=null,o=null,s=[0,0],l=[0,0],c=!0,u=!0,d=ws[0];function h(e){e.each(function(){var e=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",m).on("touchstart.brush",m),n=e.selectAll(".background").data([0]);n.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var r=e.selectAll(".resize").data(d,z);r.exit().remove(),r.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return bs[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),r.style("display",h.empty()?"none":null);var a,s=t.transition(e),l=t.transition(n);i&&(a=aa(i),l.attr("x",a[0]).attr("width",a[1]-a[0]),p(s)),o&&(a=aa(o),l.attr("y",a[0]).attr("height",a[1]-a[0]),g(s)),f(s)})}function f(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+s[+/e$/.test(t)]+","+l[+/^s/.test(t)]+")"})}function p(t){t.select(".extent").attr("x",s[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",s[1]-s[0])}function g(t){t.select(".extent").attr("y",l[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function m(){var d,m,v=this,y=t.select(t.event.target),_=r.of(v,arguments),x=t.select(v),b=y.datum(),w=!/^(n|s)$/.test(b)&&i,k=!/^(e|w)$/.test(b)&&o,T=y.classed("extent"),M=_t(v),A=t.mouse(v),L=t.select(a(v)).on("keydown.brush",function(){32==t.event.keyCode&&(T||(d=null,A[0]-=s[1],A[1]-=l[1],T=2),R())}).on("keyup.brush",function(){32==t.event.keyCode&&2==T&&(A[0]+=s[1],A[1]+=l[1],T=0,R())});if(t.event.changedTouches?L.on("touchmove.brush",P).on("touchend.brush",D):L.on("mousemove.brush",P).on("mouseup.brush",D),x.interrupt().selectAll("*").interrupt(),T)A[0]=s[0]-A[0],A[1]=l[0]-A[1];else if(b){var S=+/w$/.test(b),C=+/^n/.test(b);m=[s[1-S]-A[0],l[1-C]-A[1]],A[0]=s[S],A[1]=l[C]}else t.event.altKey&&(d=A.slice());function P(){var e=t.mouse(v),n=!1;m&&(e[0]+=m[0],e[1]+=m[1]),T||(t.event.altKey?(d||(d=[(s[0]+s[1])/2,(l[0]+l[1])/2]),A[0]=s[+(e[0]<d[0])],A[1]=l[+(e[1]<d[1])]):d=null),w&&z(e,i,0)&&(p(x),n=!0),k&&z(e,o,1)&&(g(x),n=!0),n&&(f(x),_({type:"brush",mode:T?"move":"resize"}))}function z(t,r,i){var o,a,h=aa(r),f=h[0],p=h[1],g=A[i],m=i?l:s,v=m[1]-m[0];if(T&&(f-=g,p-=v+g),o=(i?u:c)?Math.max(f,Math.min(p,t[i])):t[i],T?a=(o+=g)+v:(d&&(g=Math.max(f,Math.min(p,2*d[i]-o))),g<o?(a=o,o=g):a=g),m[0]!=o||m[1]!=a)return i?n=null:e=null,m[0]=o,m[1]=a,!0}function D(){P(),x.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null),t.select("body").style("cursor",null),L.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),M(),_({type:"brushend"})}x.style("pointer-events","none").selectAll(".resize").style("display",null),t.select("body").style("cursor",y.style("cursor")),_({type:"brushstart"}),P()}return h.event=function(i){i.each(function(){var i=r.of(this,arguments),o={x:s,y:l,i:e,j:n},a=this.__chart__||o;this.__chart__=o,cs?t.select(this).transition().each("start.brush",function(){e=a.i,n=a.j,s=a.x,l=a.y,i({type:"brushstart"})}).tween("brush:brush",function(){var t=Wi(s,o.x),r=Wi(l,o.y);return e=n=null,function(e){s=o.x=t(e),l=o.y=r(e),i({type:"brush",mode:"resize"})}}).each("end.brush",function(){e=o.i,n=o.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})}):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))})},h.x=function(t){return arguments.length?(d=ws[!(i=t)<<1|!o],h):i},h.y=function(t){return arguments.length?(d=ws[!i<<1|!(o=t)],h):o},h.clamp=function(t){return arguments.length?(i&&o?(c=!!t[0],u=!!t[1]):i?c=!!t:o&&(u=!!t),h):i&&o?[c,u]:i?c:o?u:null},h.extent=function(t){var r,a,c,u,d;return arguments.length?(i&&(r=t[0],a=t[1],o&&(r=r[0],a=a[0]),e=[r,a],i.invert&&(r=i(r),a=i(a)),a<r&&(d=r,r=a,a=d),r==s[0]&&a==s[1]||(s=[r,a])),o&&(c=t[0],u=t[1],i&&(c=c[1],u=u[1]),n=[c,u],o.invert&&(c=o(c),u=o(u)),u<c&&(d=c,c=u,u=d),c==l[0]&&u==l[1]||(l=[c,u])),h):(i&&(e?(r=e[0],a=e[1]):(r=s[0],a=s[1],i.invert&&(r=i.invert(r),a=i.invert(a)),a<r&&(d=r,r=a,a=d))),o&&(n?(c=n[0],u=n[1]):(c=l[0],u=l[1],o.invert&&(c=o.invert(c),u=o.invert(u)),u<c&&(d=c,c=u,u=d))),i&&o?[[r,c],[a,u]]:i?[r,a]:o&&[c,u])},h.clear=function(){return h.empty()||(s=[0,0],l=[0,0],e=n=null),h},h.empty=function(){return!!i&&s[0]==s[1]||!!o&&l[0]==l[1]},t.rebind(h,r,"on")};var bs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ws=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],ks=Ee.format=ln.timeFormat,Ts=ks.utc,Ms=Ts("%Y-%m-%dT%H:%M:%S.%LZ");function As(t){return t.toISOString()}function Ls(e,n,r){function i(t){return e(t)}function o(e,r){var i=(e[1]-e[0])/r,o=t.bisect(Cs,i);return o==Cs.length?[n.year,pa(e.map(function(t){return t/31536e6}),r)[2]]:o?n[i/Cs[o-1]<Cs[o]/i?o-1:o]:[Ds,pa(e,r)[2]]}return i.invert=function(t){return Ss(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain().map(Ss)},i.nice=function(t,e){var n=i.domain(),r=oa(n),a=null==t?o(r,10):"number"==typeof t&&o(r,t);function s(n){return!isNaN(n)&&!t.range(n,Ss(+n+1),e).length}return a&&(t=a[0],e=a[1]),i.domain(la(n,e>1?{floor:function(e){for(;s(e=t.floor(e));)e=Ss(e-1);return e},ceil:function(e){for(;s(e=t.ceil(e));)e=Ss(+e+1);return e}}:t))},i.ticks=function(t,e){var n=oa(i.domain()),r=null==t?o(n,10):"number"==typeof t?o(n,t):!t.range&&[{range:t},e];return r&&(t=r[0],e=r[1]),t.range(n[0],Ss(+n[1]+1),e<1?1:e)},i.tickFormat=function(){return r},i.copy=function(){return Ls(e.copy(),n,r)},ha(i,e)}function Ss(t){return new Date(t)}ks.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?As:Ms,As.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},As.toString=Ms.toString,Ee.second=Ne(function(t){return new Oe(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Ee.seconds=Ee.second.range,Ee.seconds.utc=Ee.second.utc.range,Ee.minute=Ne(function(t){return new Oe(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Ee.minutes=Ee.minute.range,Ee.minutes.utc=Ee.minute.utc.range,Ee.hour=Ne(function(t){var e=t.getTimezoneOffset()/60;return new Oe(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Ee.hours=Ee.hour.range,Ee.hours.utc=Ee.hour.utc.range,Ee.month=Ne(function(t){return(t=Ee.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Ee.months=Ee.month.range,Ee.months.utc=Ee.month.utc.range;var Cs=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ps=[[Ee.second,1],[Ee.second,5],[Ee.second,15],[Ee.second,30],[Ee.minute,1],[Ee.minute,5],[Ee.minute,15],[Ee.minute,30],[Ee.hour,1],[Ee.hour,3],[Ee.hour,6],[Ee.hour,12],[Ee.day,1],[Ee.day,2],[Ee.week,1],[Ee.month,1],[Ee.month,3],[Ee.year,1]],zs=ks.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Gn]]),Ds={range:function(e,n,r){return t.range(Math.ceil(e/r)*r,+n,r).map(Ss)},floor:z,ceil:z};Ps.year=Ee.year,Ee.scale=function(){return Ls(t.scale.linear(),Ps,zs)};var Es=Ps.map(function(t){return[t[0].utc,t[1]]}),Os=Ts.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Gn]]);function Is(t){return JSON.parse(t.responseText)}function js(t){var e=i.createRange();return e.selectNode(i.body),e.createContextualFragment(t.responseText)}Es.year=Ee.year.utc,Ee.scale.utc=function(){return Ls(t.scale.linear(),Es,Os)},t.text=ve(function(t){return t.responseText}),t.json=function(t,e){return ye(t,"application/json",Is,e)},t.html=function(t,e){return ye(t,"text/html",js,e)},t.xml=ve(function(t){return t.responseXML}),"function"==typeof define&&define.amd?(this.d3=t,define(t)):"object"==typeof e&&e.exports?e.exports=t:this.d3=t}()},{}],2:[function(t,e,n){(function(r,i){var o,a;o=this,a=function(){"use strict";function e(t){return"function"==typeof t}var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=0,a=void 0,s=void 0,l=function(t,e){g[o]=t,g[o+1]=e,2===(o+=2)&&(s?s(m):b())};var c="undefined"!=typeof window?window:void 0,u=c||{},d=u.MutationObserver||u.WebKitMutationObserver,h="undefined"==typeof self&&void 0!==r&&"[object process]"==={}.toString.call(r),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var t=setTimeout;return function(){return t(m,1)}}var g=new Array(1e3);function m(){for(var t=0;t<o;t+=2){(0,g[t])(g[t+1]),g[t]=void 0,g[t+1]=void 0}o=0}var v,y,_,x,b=void 0;function w(t,e){var n=arguments,r=this,i=new this.constructor(M);void 0===i[T]&&q(i);var o,a=r._state;return a?(o=n[a-1],l(function(){return F(a,i,o,r._result)})):j(r,i,t,e),i}function k(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(M);return D(e,t),e}h?b=function(){return r.nextTick(m)}:d?(y=0,_=new d(m),x=document.createTextNode(""),_.observe(x,{characterData:!0}),b=function(){x.data=y=++y%2}):f?((v=new MessageChannel).port1.onmessage=m,b=function(){return v.port2.postMessage(0)}):b=void 0===c&&"function"==typeof t?function(){try{var e=t("vertx");return a=e.runOnLoop||e.runOnContext,function(){a(m)}}catch(t){return p()}}():p();var T=Math.random().toString(36).substring(16);function M(){}var A=void 0,L=1,S=2,C=new R;function P(t){try{return t.then}catch(t){return C.error=t,C}}function z(t,n,r){var i,o,a,s;n.constructor===t.constructor&&r===w&&n.constructor.resolve===k?(a=t,(s=n)._state===L?O(a,s._result):s._state===S?I(a,s._result):j(s,void 0,function(t){return D(a,t)},function(t){return I(a,t)})):r===C?I(t,C.error):void 0===r?O(t,n):e(r)?(i=n,o=r,l(function(t){var e=!1,n=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(o,i,function(n){e||(e=!0,i!==n?D(t,n):O(t,n))},function(n){e||(e=!0,I(t,n))},t._label);!e&&n&&(e=!0,I(t,n))},t)):O(t,n)}function D(t,e){var n;t===e?I(t,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(n=e)||"object"==typeof n&&null!==n?z(t,e,P(e)):O(t,e)}function E(t){t._onerror&&t._onerror(t._result),N(t)}function O(t,e){t._state===A&&(t._result=e,t._state=L,0!==t._subscribers.length&&l(N,t))}function I(t,e){t._state===A&&(t._state=S,t._result=e,l(E,t))}function j(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+L]=n,i[o+S]=r,0===o&&t._state&&l(N,t)}function N(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,a=0;a<e.length;a+=3)r=e[a],i=e[a+n],r?F(n,r,i,o):i(o);t._subscribers.length=0}}function R(){this.error=null}var B=new R;function F(t,n,r,i){var o=e(r),a=void 0,s=void 0,l=void 0,c=void 0;if(o){if((a=function(t,e){try{return t(e)}catch(t){return B.error=t,B}}(r,i))===B?(c=!0,s=a.error,a=null):l=!0,n===a)return void I(n,new TypeError("A promises callback cannot return that same promise."))}else a=i,l=!0;n._state!==A||(o&&l?D(n,a):c?I(n,s):t===L?O(n,a):t===S&&I(n,a))}var H=0;function q(t){t[T]=H++,t._state=void 0,t._result=void 0,t._subscribers=[]}function Z(t,e){this._instanceConstructor=t,this.promise=new t(M),this.promise[T]||q(this.promise),n(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&O(this.promise,this._result))):I(this.promise,new Error("Array Methods must be provided an Array"))}function V(t){this[T]=H++,this._result=this._state=void 0,this._subscribers=[],M!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof V?function(t,e){try{e(function(e){D(t,e)},function(e){I(t,e)})}catch(e){I(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function U(){var t=void 0;if(void 0!==i)t=i;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=V}return Z.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===A&&n<t;n++)this._eachEntry(e[n],n)},Z.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===k){var i=P(t);if(i===w&&t._state!==A)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===V){var o=new n(M);z(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},Z.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===A&&(this._remaining--,t===S?I(r,n):this._result[e]=n),0===this._remaining&&O(r,this._result)},Z.prototype._willSettleAt=function(t,e){var n=this;j(t,void 0,function(t){return n._settledAt(L,e,t)},function(t){return n._settledAt(S,e,t)})},V.all=function(t){return new Z(this,t).promise},V.race=function(t){var e=this;return n(t)?new e(function(n,r){for(var i=t.length,o=0;o<i;o++)e.resolve(t[o]).then(n,r)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},V.resolve=k,V.reject=function(t){var e=new this(M);return I(e,t),e},V._setScheduler=function(t){s=t},V._setAsap=function(t){l=t},V._asap=l,V.prototype={constructor:V,then:w,catch:function(t){return this.then(null,t)}},U(),V.polyfill=U,V.Promise=V,V},"object"==typeof n&&void 0!==e?e.exports=a():"function"==typeof define&&define.amd?define(a):o.ES6Promise=a()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:292}],3:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,s,l,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(a(n=this._events[t]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),r=(c=n.slice()).length,l=0;l<r;l++)c[l].apply(this,s);return!0},r.prototype.on=r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.once=function(t,e){if(!i(e))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var n,r,a,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(n=this._events[t]).length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],4:[function(t,e,n){"use strict";e.exports=function(t){var e=typeof t;if("string"===e){var n=t;if(0===(t=+t)&&function(t){for(var e,n=t.length,r=0;r<n;r++)if(((e=t.charCodeAt(r))<9||e>13)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(e<8192||e>8205)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e)return!1;return!0}(n))return!1}else if("number"!==e)return!1;return t-t<1}},{}],5:[function(t,e,n){e.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,l=i+i,c=n*a,u=r*a,d=r*s,h=i*a,f=i*s,p=i*l,g=o*a,m=o*s,v=o*l;return t[0]=1-d-p,t[1]=u+v,t[2]=h-m,t[3]=0,t[4]=u-v,t[5]=1-c-p,t[6]=f+g,t[7]=0,t[8]=h+m,t[9]=f-g,t[10]=1-c-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],6:[function(t,e,n){(function(n){"use strict";var r,i=t("is-browser");r="function"==typeof n.matchMedia?!n.matchMedia("(hover: none)").matches:i,e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":8}],7:[function(t,e,n){"use strict";var r=t("is-browser");e.exports=r&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}()},{"is-browser":8}],8:[function(t,e,n){e.exports=!0},{}],9:[function(t,e,n){!function(t,n){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";var n=[],r=t.document,i=Object.getPrototypeOf,o=n.slice,a=n.concat,s=n.push,l=n.indexOf,c={},u=c.toString,d=c.hasOwnProperty,h=d.toString,f=h.call(Object),p={},g=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},m=function(t){return null!=t&&t===t.window},v={type:!0,src:!0,noModule:!0};function y(t,e,n){var i,o=(e=e||r).createElement("script");if(o.text=t,n)for(i in v)n[i]&&(o[i]=n[i]);e.head.appendChild(o).parentNode.removeChild(o)}function _(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?c[u.call(t)]||"object":typeof t}var x=function(t,e){return new x.fn.init(t,e)},b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function w(t){var e=!!t&&"length"in t&&t.length,n=_(t);return!g(t)&&!m(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}x.fn=x.prototype={jquery:"3.3.1",constructor:x,length:0,toArray:function(){return o.call(this)},get:function(t){return null==t?o.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=x.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return x.each(this,t)},map:function(t){return this.pushStack(x.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},x.extend=x.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||g(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],a!==(r=t[e])&&(c&&r&&(x.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&x.isPlainObject(n)?n:{},a[e]=x.extend(c,o,r)):void 0!==r&&(a[e]=r));return a},x.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==u.call(t))&&(!(e=i(t))||"function"==typeof(n=d.call(e,"constructor")&&e.constructor)&&h.call(n)===f)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){y(t)},each:function(t,e){var n,r=0;if(w(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(b,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(w(Object(t))?x.merge(n,"string"==typeof t?[t]:t):s.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:l.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;i<o;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,s=[];if(w(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&s.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&s.push(i);return a.apply([],s)},guid:1,support:p}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=n[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){c["[object "+e+"]"]=e.toLowerCase()});var k=function(t){var e,n,r,i,o,a,s,l,c,u,d,h,f,p,g,m,v,y,_,x="sizzle"+1*new Date,b=t.document,w=0,k=0,T=at(),M=at(),A=at(),L=function(t,e){return t===e&&(d=!0),0},S={}.hasOwnProperty,C=[],P=C.pop,z=C.push,D=C.push,E=C.slice,O=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},I="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",R="\\["+j+"*("+N+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+j+"*\\]",B=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+R+")*)|.*)\\)|)",F=new RegExp(j+"+","g"),H=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),q=new RegExp("^"+j+"*,"+j+"*"),Z=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),V=new RegExp("="+j+"*([^\\]'\"]*?)"+j+"*\\]","g"),U=new RegExp(B),W=new RegExp("^"+N+"$"),G={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N+"|[*])"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+I+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,K=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),tt=function(t,e,n){var r="0x"+e-65536;return r!=r||n?e:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,nt=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},rt=function(){h()},it=yt(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{D.apply(C=E.call(b.childNodes),b.childNodes),C[b.childNodes.length].nodeType}catch(t){D={apply:C.length?function(t,e){z.apply(t,E.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function ot(t,e,r,i){var o,s,c,u,d,p,v,y=e&&e.ownerDocument,w=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==w&&9!==w&&11!==w)return r;if(!i&&((e?e.ownerDocument||e:b)!==f&&h(e),e=e||f,g)){if(11!==w&&(d=J.exec(t)))if(o=d[1]){if(9===w){if(!(c=e.getElementById(o)))return r;if(c.id===o)return r.push(c),r}else if(y&&(c=y.getElementById(o))&&_(e,c)&&c.id===o)return r.push(c),r}else{if(d[2])return D.apply(r,e.getElementsByTagName(t)),r;if((o=d[3])&&n.getElementsByClassName&&e.getElementsByClassName)return D.apply(r,e.getElementsByClassName(o)),r}if(n.qsa&&!A[t+" "]&&(!m||!m.test(t))){if(1!==w)y=e,v=t;else if("object"!==e.nodeName.toLowerCase()){for((u=e.getAttribute("id"))?u=u.replace(et,nt):e.setAttribute("id",u=x),s=(p=a(t)).length;s--;)p[s]="#"+u+" "+vt(p[s]);v=p.join(","),y=Q.test(t)&&gt(e.parentNode)||e}if(v)try{return D.apply(r,y.querySelectorAll(v)),r}catch(t){}finally{u===x&&e.removeAttribute("id")}}}return l(t.replace(H,"$1"),e,r,i)}function at(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function st(t){return t[x]=!0,t}function lt(t){var e=f.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ct(t,e){for(var n=t.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=e}function ut(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function dt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ht(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function ft(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&it(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function pt(t){return st(function(e){return e=+e,st(function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function gt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=ot.support={},o=ot.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},h=ot.setDocument=function(t){var e,i,a=t?t.ownerDocument||t:b;return a!==f&&9===a.nodeType&&a.documentElement?(p=(f=a).documentElement,g=!o(f),b!==f&&(i=f.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",rt,!1):i.attachEvent&&i.attachEvent("onunload",rt)),n.attributes=lt(function(t){return t.className="i",!t.getAttribute("className")}),n.getElementsByTagName=lt(function(t){return t.appendChild(f.createComment("")),!t.getElementsByTagName("*").length}),n.getElementsByClassName=$.test(f.getElementsByClassName),n.getById=lt(function(t){return p.appendChild(t).id=x,!f.getElementsByName||!f.getElementsByName(x).length}),n.getById?(r.filter.ID=function(t){var e=t.replace(K,tt);return function(t){return t.getAttribute("id")===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(r.filter.ID=function(t){var e=t.replace(K,tt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},v=[],m=[],(n.qsa=$.test(f.querySelectorAll))&&(lt(function(t){p.appendChild(t).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+j+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+j+"*(?:value|"+I+")"),t.querySelectorAll("[id~="+x+"-]").length||m.push("~="),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+x+"+*").length||m.push(".#.+[+~]")}),lt(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=f.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+j+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=$.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&lt(function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),v.push("!=",B)}),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),e=$.test(p.compareDocumentPosition),_=e||$.test(p.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},L=e?function(t,e){if(t===e)return d=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t===f||t.ownerDocument===b&&_(b,t)?-1:e===f||e.ownerDocument===b&&_(b,e)?1:u?O(u,t)-O(u,e):0:4&r?-1:1)}:function(t,e){if(t===e)return d=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!i||!o)return t===f?-1:e===f?1:i?-1:o?1:u?O(u,t)-O(u,e):0;if(i===o)return ut(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?ut(a[r],s[r]):a[r]===b?-1:s[r]===b?1:0},f):f},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==f&&h(t),e=e.replace(V,"='$1']"),n.matchesSelector&&g&&!A[e+" "]&&(!v||!v.test(e))&&(!m||!m.test(e)))try{var r=y.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){}return ot(e,f,null,[t]).length>0},ot.contains=function(t,e){return(t.ownerDocument||t)!==f&&h(t),_(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==f&&h(t);var i=r.attrHandle[e.toLowerCase()],o=i&&S.call(r.attrHandle,e.toLowerCase())?i(t,e,!g):void 0;return void 0!==o?o:n.attributes||!g?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},ot.escape=function(t){return(t+"").replace(et,nt)},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,r=[],i=0,o=0;if(d=!n.detectDuplicates,u=!n.sortStable&&t.slice(0),t.sort(L),d){for(;e=t[o++];)e===t[o]&&(i=r.push(o));for(;i--;)t.splice(r[i],1)}return u=null,t},i=ot.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},(r=ot.selectors={cacheLength:50,createPseudo:st,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(K,tt),t[3]=(t[3]||t[4]||t[5]||"").replace(K,tt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return G.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&U.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(K,tt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=T[t+" "];return e||(e=new RegExp("(^|"+j+")"+t+"("+j+"|$)"))&&T(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(r){var i=ot.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(F," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,l){var c,u,d,h,f,p,g=o!==a?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s,_=!1;if(m){if(o){for(;g;){for(h=e;h=h[g];)if(s?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&y){for(_=(f=(c=(u=(d=(h=m)[x]||(h[x]={}))[h.uniqueID]||(d[h.uniqueID]={}))[t]||[])[0]===w&&c[1])&&c[2],h=f&&m.childNodes[f];h=++f&&h&&h[g]||(_=f=0)||p.pop();)if(1===h.nodeType&&++_&&h===e){u[t]=[w,f,_];break}}else if(y&&(_=f=(c=(u=(d=(h=e)[x]||(h[x]={}))[h.uniqueID]||(d[h.uniqueID]={}))[t]||[])[0]===w&&c[1]),!1===_)for(;(h=++f&&h&&h[g]||(_=f=0)||p.pop())&&((s?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++_||(y&&((u=(d=h[x]||(h[x]={}))[h.uniqueID]||(d[h.uniqueID]={}))[t]=[w,_]),h!==e)););return(_-=i)===r||_%r==0&&_/r>=0}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return i[x]?i(e):i.length>1?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?st(function(t,n){for(var r,o=i(t,e),a=o.length;a--;)t[r=O(t,o[a])]=!(n[r]=o[a])}):function(t){return i(t,0,n)}):i}},pseudos:{not:st(function(t){var e=[],n=[],r=s(t.replace(H,"$1"));return r[x]?st(function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}}),has:st(function(t){return function(e){return ot(t,e).length>0}}),contains:st(function(t){return t=t.replace(K,tt),function(e){return(e.textContent||e.innerText||i(e)).indexOf(t)>-1}}),lang:st(function(t){return W.test(t||"")||ot.error("unsupported lang: "+t),t=t.replace(K,tt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:ft(!1),disabled:ft(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return Y.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:pt(function(){return[0]}),last:pt(function(t,e){return[e-1]}),eq:pt(function(t,e,n){return[n<0?n+e:n]}),even:pt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:pt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:pt(function(t,e,n){for(var r=n<0?n+e:n;--r>=0;)t.push(r);return t}),gt:pt(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=dt(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=ht(e);function mt(){}function vt(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function yt(t,e,n){var r=e.dir,i=e.next,o=i||r,a=n&&"parentNode"===o,s=k++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||a)return t(e,n,i);return!1}:function(e,n,l){var c,u,d,h=[w,s];if(l){for(;e=e[r];)if((1===e.nodeType||a)&&t(e,n,l))return!0}else for(;e=e[r];)if(1===e.nodeType||a)if(u=(d=e[x]||(e[x]={}))[e.uniqueID]||(d[e.uniqueID]={}),i&&i===e.nodeName.toLowerCase())e=e[r]||e;else{if((c=u[o])&&c[0]===w&&c[1]===s)return h[2]=c[2];if(u[o]=h,h[2]=t(e,n,l))return!0}return!1}}function _t(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function xt(t,e,n,r,i){for(var o,a=[],s=0,l=t.length,c=null!=e;s<l;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),c&&e.push(s)));return a}function bt(t,e,n,r,i,o){return r&&!r[x]&&(r=bt(r)),i&&!i[x]&&(i=bt(i,o)),st(function(o,a,s,l){var c,u,d,h=[],f=[],p=a.length,g=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)ot(t,e[r],n);return n}(e||"*",s.nodeType?[s]:s,[]),m=!t||!o&&e?g:xt(g,h,t,s,l),v=n?i||(o?t:p||r)?[]:a:m;if(n&&n(m,v,s,l),r)for(c=xt(v,f),r(c,[],s,l),u=c.length;u--;)(d=c[u])&&(v[f[u]]=!(m[f[u]]=d));if(o){if(i||t){if(i){for(c=[],u=v.length;u--;)(d=v[u])&&c.push(m[u]=d);i(null,v=[],c,l)}for(u=v.length;u--;)(d=v[u])&&(c=i?O(o,d):h[u])>-1&&(o[c]=!(a[c]=d))}}else v=xt(v===a?v.splice(p,v.length):v),i?i(null,a,v,l):D.apply(a,v)})}function wt(t){for(var e,n,i,o=t.length,a=r.relative[t[0].type],s=a||r.relative[" "],l=a?1:0,u=yt(function(t){return t===e},s,!0),d=yt(function(t){return O(e,t)>-1},s,!0),h=[function(t,n,r){var i=!a&&(r||n!==c)||((e=n).nodeType?u(t,n,r):d(t,n,r));return e=null,i}];l<o;l++)if(n=r.relative[t[l].type])h=[yt(_t(h),n)];else{if((n=r.filter[t[l].type].apply(null,t[l].matches))[x]){for(i=++l;i<o&&!r.relative[t[i].type];i++);return bt(l>1&&_t(h),l>1&&vt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(H,"$1"),n,l<i&&wt(t.slice(l,i)),i<o&&wt(t=t.slice(i)),i<o&&vt(t))}h.push(n)}return _t(h)}return mt.prototype=r.filters=r.pseudos,r.setFilters=new mt,a=ot.tokenize=function(t,e){var n,i,o,a,s,l,c,u=M[t+" "];if(u)return e?0:u.slice(0);for(s=t,l=[],c=r.preFilter;s;){for(a in n&&!(i=q.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),n=!1,(i=Z.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(H," ")}),s=s.slice(n.length)),r.filter)!(i=G[a].exec(s))||c[a]&&!(i=c[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?ot.error(t):M(t,l).slice(0)},s=ot.compile=function(t,e){var n,i,o,s,l,u,d=[],p=[],m=A[t+" "];if(!m){for(e||(e=a(t)),n=e.length;n--;)(m=wt(e[n]))[x]?d.push(m):p.push(m);(m=A(t,(i=p,s=(o=d).length>0,l=i.length>0,u=function(t,e,n,a,u){var d,p,m,v=0,y="0",_=t&&[],x=[],b=c,k=t||l&&r.find.TAG("*",u),T=w+=null==b?1:Math.random()||.1,M=k.length;for(u&&(c=e===f||e||u);y!==M&&null!=(d=k[y]);y++){if(l&&d){for(p=0,e||d.ownerDocument===f||(h(d),n=!g);m=i[p++];)if(m(d,e||f,n)){a.push(d);break}u&&(w=T)}s&&((d=!m&&d)&&v--,t&&_.push(d))}if(v+=y,s&&y!==v){for(p=0;m=o[p++];)m(_,x,e,n);if(t){if(v>0)for(;y--;)_[y]||x[y]||(x[y]=P.call(a));x=xt(x)}D.apply(a,x),u&&!t&&x.length>0&&v+o.length>1&&ot.uniqueSort(a)}return u&&(w=T,c=b),_},s?st(u):u))).selector=t}return m},l=ot.select=function(t,e,n,i){var o,l,c,u,d,h="function"==typeof t&&t,f=!i&&a(t=h.selector||t);if(n=n||[],1===f.length){if((l=f[0]=f[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===e.nodeType&&g&&r.relative[l[1].type]){if(!(e=(r.find.ID(c.matches[0].replace(K,tt),e)||[])[0]))return n;h&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(o=G.needsContext.test(t)?0:l.length;o--&&(c=l[o],!r.relative[u=c.type]);)if((d=r.find[u])&&(i=d(c.matches[0].replace(K,tt),Q.test(l[0].type)&&gt(e.parentNode)||e))){if(l.splice(o,1),!(t=i.length&&vt(l)))return D.apply(n,i),n;break}}return(h||s(t,f))(i,e,!g,n,!e||Q.test(t)&&gt(e.parentNode)||e),n},n.sortStable=x.split("").sort(L).join("")===x,n.detectDuplicates=!!d,h(),n.sortDetached=lt(function(t){return 1&t.compareDocumentPosition(f.createElement("fieldset"))}),lt(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ct("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),n.attributes&&lt(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ct("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),lt(function(t){return null==t.getAttribute("disabled")})||ct(I,function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),ot}(t);x.find=k,x.expr=k.selectors,x.expr[":"]=x.expr.pseudos,x.uniqueSort=x.unique=k.uniqueSort,x.text=k.getText,x.isXMLDoc=k.isXML,x.contains=k.contains,x.escapeSelector=k.escape;var T=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&x(t).is(n))break;r.push(t)}return r},M=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},A=x.expr.match.needsContext;function L(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var S=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function C(t,e,n){return g(e)?x.grep(t,function(t,r){return!!e.call(t,r,t)!==n}):e.nodeType?x.grep(t,function(t){return t===e!==n}):"string"!=typeof e?x.grep(t,function(t){return l.call(e,t)>-1!==n}):x.filter(e,t,n)}x.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?x.find.matchesSelector(r,t)?[r]:[]:x.find.matches(t,x.grep(e,function(t){return 1===t.nodeType}))},x.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(x(t).filter(function(){for(e=0;e<r;e++)if(x.contains(i[e],this))return!0}));for(n=this.pushStack([]),e=0;e<r;e++)x.find(t,i[e],n);return r>1?x.uniqueSort(n):n},filter:function(t){return this.pushStack(C(this,t||[],!1))},not:function(t){return this.pushStack(C(this,t||[],!0))},is:function(t){return!!C(this,"string"==typeof t&&A.test(t)?x(t):t||[],!1).length}});var P,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(t,e,n){var i,o;if(!t)return this;if(n=n||P,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:z.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof x?e[0]:e,x.merge(this,x.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:r,!0)),S.test(i[1])&&x.isPlainObject(e))for(i in e)g(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(o=r.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):g(t)?void 0!==n.ready?n.ready(t):t(x):x.makeArray(t,this)}).prototype=x.fn,P=x(r);var D=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};function O(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}x.fn.extend({has:function(t){var e=x(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(x.contains(this,e[t]))return!0})},closest:function(t,e){var n,r=0,i=this.length,o=[],a="string"!=typeof t&&x(t);if(!A.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?x.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?l.call(x(t),this[0]):l.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),x.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return T(t,"parentNode")},parentsUntil:function(t,e,n){return T(t,"parentNode",n)},next:function(t){return O(t,"nextSibling")},prev:function(t){return O(t,"previousSibling")},nextAll:function(t){return T(t,"nextSibling")},prevAll:function(t){return T(t,"previousSibling")},nextUntil:function(t,e,n){return T(t,"nextSibling",n)},prevUntil:function(t,e,n){return T(t,"previousSibling",n)},siblings:function(t){return M((t.parentNode||{}).firstChild,t)},children:function(t){return M(t.firstChild)},contents:function(t){return L(t,"iframe")?t.contentDocument:(L(t,"template")&&(t=t.content||t),x.merge([],t.childNodes))}},function(t,e){x.fn[t]=function(n,r){var i=x.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=x.filter(r,i)),this.length>1&&(E[t]||x.uniqueSort(i),D.test(t)&&i.reverse()),this.pushStack(i)}});var I=/[^\x20\t\r\n\f]+/g;function j(t){return t}function N(t){throw t}function R(t,e,n,r){var i;try{t&&g(i=t.promise)?i.call(t).done(e).fail(n):t&&g(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}x.Callbacks=function(t){var e,n;t="string"==typeof t?(e=t,n={},x.each(e.match(I)||[],function(t,e){n[e]=!0}),n):x.extend({},t);var r,i,o,a,s=[],l=[],c=-1,u=function(){for(a=a||t.once,o=r=!0;l.length;c=-1)for(i=l.shift();++c<s.length;)!1===s[c].apply(i[0],i[1])&&t.stopOnFalse&&(c=s.length,i=!1);t.memory||(i=!1),r=!1,a&&(s=i?[]:"")},d={add:function(){return s&&(i&&!r&&(c=s.length-1,l.push(i)),function e(n){x.each(n,function(n,r){g(r)?t.unique&&d.has(r)||s.push(r):r&&r.length&&"string"!==_(r)&&e(r)})}(arguments),i&&!r&&u()),this},remove:function(){return x.each(arguments,function(t,e){for(var n;(n=x.inArray(e,s,n))>-1;)s.splice(n,1),n<=c&&c--}),this},has:function(t){return t?x.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return a=l=[],s=i="",this},disabled:function(){return!s},lock:function(){return a=l=[],i||r||(s=i=""),this},locked:function(){return!!a},fireWith:function(t,e){return a||(e=[t,(e=e||[]).slice?e.slice():e],l.push(e),r||u()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!o}};return d},x.extend({Deferred:function(e){var n=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return x.Deferred(function(e){x.each(n,function(n,r){var i=g(t[r[4]])&&t[r[4]];o[r[1]](function(){var t=i&&i.apply(this,arguments);t&&g(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[r[0]+"With"](this,i?[t]:arguments)})}),t=null}).promise()},then:function(e,r,i){var o=0;function a(e,n,r,i){return function(){var s=this,l=arguments,c=function(){var t,c;if(!(e<o)){if((t=r.apply(s,l))===n.promise())throw new TypeError("Thenable self-resolution");c=t&&("object"==typeof t||"function"==typeof t)&&t.then,g(c)?i?c.call(t,a(o,n,j,i),a(o,n,N,i)):(o++,c.call(t,a(o,n,j,i),a(o,n,N,i),a(o,n,j,n.notifyWith))):(r!==j&&(s=void 0,l=[t]),(i||n.resolveWith)(s,l))}},u=i?c:function(){try{c()}catch(t){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(t,u.stackTrace),e+1>=o&&(r!==N&&(s=void 0,l=[t]),n.rejectWith(s,l))}};e?u():(x.Deferred.getStackHook&&(u.stackTrace=x.Deferred.getStackHook()),t.setTimeout(u))}}return x.Deferred(function(t){n[0][3].add(a(0,t,g(i)?i:j,t.notifyWith)),n[1][3].add(a(0,t,g(e)?e:j)),n[2][3].add(a(0,t,g(r)?r:N))}).promise()},promise:function(t){return null!=t?x.extend(t,i):i}},o={};return x.each(n,function(t,e){var a=e[2],s=e[5];i[e[1]]=a.add,s&&a.add(function(){r=s},n[3-t][2].disable,n[3-t][3].disable,n[0][2].lock,n[0][3].lock),a.add(e[3].fire),o[e[0]]=function(){return o[e[0]+"With"](this===o?void 0:this,arguments),this},o[e[0]+"With"]=a.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(t){var e=arguments.length,n=e,r=Array(n),i=o.call(arguments),a=x.Deferred(),s=function(t){return function(n){r[t]=this,i[t]=arguments.length>1?o.call(arguments):n,--e||a.resolveWith(r,i)}};if(e<=1&&(R(t,a.done(s(n)).resolve,a.reject,!e),"pending"===a.state()||g(i[n]&&i[n].then)))return a.then();for(;n--;)R(i[n],s(n),a.reject);return a.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&B.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},x.readyException=function(e){t.setTimeout(function(){throw e})};var F=x.Deferred();function H(){r.removeEventListener("DOMContentLoaded",H),t.removeEventListener("load",H),x.ready()}x.fn.ready=function(t){return F.then(t).catch(function(t){x.readyException(t)}),this},x.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--x.readyWait:x.isReady)||(x.isReady=!0,!0!==t&&--x.readyWait>0||F.resolveWith(r,[x]))}}),x.ready.then=F.then,"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?t.setTimeout(x.ready):(r.addEventListener("DOMContentLoaded",H),t.addEventListener("load",H));var q=function(t,e,n,r,i,o,a){var s=0,l=t.length,c=null==n;if("object"===_(n))for(s in i=!0,n)q(t,e,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,g(r)||(a=!0),c&&(a?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(x(t),n)})),e))for(;s<l;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:c?e.call(t):l?e(t[0],n):o},Z=/^-ms-/,V=/-([a-z])/g;function U(t,e){return e.toUpperCase()}function W(t){return t.replace(Z,"ms-").replace(V,U)}var G=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function X(){this.expando=x.expando+X.uid++}X.uid=1,X.prototype={cache:function(t){var e=t[this.expando];return e||(e={},G(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[W(e)]=n;else for(r in e)i[W(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][W(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(W):(e=W(e))in r?[e]:e.match(I)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||x.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!x.isEmptyObject(e)}};var Y=new X,$=new X,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function K(t,e,n){var r,i;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(Q,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(t){}$.set(t,e,n)}else n=void 0;return n}x.extend({hasData:function(t){return $.hasData(t)||Y.hasData(t)},data:function(t,e,n){return $.access(t,e,n)},removeData:function(t,e){$.remove(t,e)},_data:function(t,e,n){return Y.access(t,e,n)},_removeData:function(t,e){Y.remove(t,e)}}),x.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=$.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=W(r.slice(5)),K(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){$.set(this,t)}):q(this,function(e){var n;if(o&&void 0===e)return void 0!==(n=$.get(o,t))?n:void 0!==(n=K(o,t))?n:void 0;this.each(function(){$.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){$.remove(this,t)})}}),x.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=Y.get(t,e),n&&(!r||Array.isArray(n)?r=Y.access(t,e,x.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=x.queue(t,e),r=n.length,i=n.shift(),o=x._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,function(){x.dequeue(t,e)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Y.get(t,n)||Y.access(t,n,{empty:x.Callbacks("once memory").add(function(){Y.remove(t,[e+"queue",n])})})}}),x.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?x.queue(this[0],t):void 0===e?this:this.each(function(){var n=x.queue(this,t,e);x._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&x.dequeue(this,t)})},dequeue:function(t){return this.each(function(){x.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=x.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=Y.get(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),nt=["Top","Right","Bottom","Left"],rt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&x.contains(t.ownerDocument,t)&&"none"===x.css(t,"display")},it=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in i=n.apply(t,r||[]),e)t.style[o]=a[o];return i};function ot(t,e,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return x.css(t,e,"")},l=s(),c=n&&n[3]||(x.cssNumber[e]?"":"px"),u=(x.cssNumber[e]||"px"!==c&&+l)&&et.exec(x.css(t,e));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;a--;)x.style(t,e,u+c),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),u/=o;u*=2,x.style(t,e,u+c),n=n||[]}return n&&(u=+u||+l||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=u,r.end=i)),i}var at={};function st(t,e){for(var n,r,i,o,a,s,l,c=[],u=0,d=t.length;u<d;u++)(r=t[u]).style&&(n=r.style.display,e?("none"===n&&(c[u]=Y.get(r,"display")||null,c[u]||(r.style.display="")),""===r.style.display&&rt(r)&&(c[u]=(o=void 0,a=void 0,void 0,l=void 0,a=(i=r).ownerDocument,s=i.nodeName,(l=at[s])||(o=a.body.appendChild(a.createElement(s)),l=x.css(o,"display"),o.parentNode.removeChild(o),"none"===l&&(l="block"),at[s]=l,l)))):"none"!==n&&(c[u]="none",Y.set(r,"display",n)));for(u=0;u<d;u++)null!=c[u]&&(t[u].style.display=c[u]);return t}x.fn.extend({show:function(){return st(this,!0)},hide:function(){return st(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){rt(this)?x(this).show():x(this).hide()})}});var lt=/^(?:checkbox|radio)$/i,ct=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ut=/^$|^module$|\/(?:java|ecma)script/i,dt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ht(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&L(t,e)?x.merge([t],n):n}function ft(t,e){for(var n=0,r=t.length;n<r;n++)Y.set(t[n],"globalEval",!e||Y.get(e[n],"globalEval"))}dt.optgroup=dt.option,dt.tbody=dt.tfoot=dt.colgroup=dt.caption=dt.thead,dt.th=dt.td;var pt,gt,mt=/<|&#?\w+;/;function vt(t,e,n,r,i){for(var o,a,s,l,c,u,d=e.createDocumentFragment(),h=[],f=0,p=t.length;f<p;f++)if((o=t[f])||0===o)if("object"===_(o))x.merge(h,o.nodeType?[o]:o);else if(mt.test(o)){for(a=a||d.appendChild(e.createElement("div")),s=(ct.exec(o)||["",""])[1].toLowerCase(),l=dt[s]||dt._default,a.innerHTML=l[1]+x.htmlPrefilter(o)+l[2],u=l[0];u--;)a=a.lastChild;x.merge(h,a.childNodes),(a=d.firstChild).textContent=""}else h.push(e.createTextNode(o));for(d.textContent="",f=0;o=h[f++];)if(r&&x.inArray(o,r)>-1)i&&i.push(o);else if(c=x.contains(o.ownerDocument,o),a=ht(d.appendChild(o),"script"),c&&ft(a),n)for(u=0;o=a[u++];)ut.test(o.type||"")&&n.push(o);return d}pt=r.createDocumentFragment().appendChild(r.createElement("div")),(gt=r.createElement("input")).setAttribute("type","radio"),gt.setAttribute("checked","checked"),gt.setAttribute("name","t"),pt.appendChild(gt),p.checkClone=pt.cloneNode(!0).cloneNode(!0).lastChild.checked,pt.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!pt.cloneNode(!0).lastChild.defaultValue;var yt=r.documentElement,_t=/^key/,xt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,bt=/^([^.]*)(?:\.(.+)|)/;function wt(){return!0}function kt(){return!1}function Tt(){try{return r.activeElement}catch(t){}}function Mt(t,e,n,r,i,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(r=r||n,n=void 0),e)Mt(t,s,n,r,e[s],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=kt;else if(!i)return t;return 1===o&&(a=i,(i=function(t){return x().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=x.guid++)),t.each(function(){x.event.add(this,e,i,r,n)})}x.event={global:{},add:function(t,e,n,r,i){var o,a,s,l,c,u,d,h,f,p,g,m=Y.get(t);if(m)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&x.find.matchesSelector(yt,i),n.guid||(n.guid=x.guid++),(l=m.events)||(l=m.events={}),(a=m.handle)||(a=m.handle=function(e){return void 0!==x&&x.event.triggered!==e.type?x.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(I)||[""]).length;c--;)f=g=(s=bt.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),f&&(d=x.event.special[f]||{},f=(i?d.delegateType:d.bindType)||f,d=x.event.special[f]||{},u=x.extend({type:f,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&x.expr.match.needsContext.test(i),namespace:p.join(".")},o),(h=l[f])||((h=l[f]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(t,r,p,a)||t.addEventListener&&t.addEventListener(f,a)),d.add&&(d.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,u):h.push(u),x.event.global[f]=!0)},remove:function(t,e,n,r,i){var o,a,s,l,c,u,d,h,f,p,g,m=Y.hasData(t)&&Y.get(t);if(m&&(l=m.events)){for(c=(e=(e||"").match(I)||[""]).length;c--;)if(f=g=(s=bt.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),f){for(d=x.event.special[f]||{},h=l[f=(r?d.delegateType:d.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)u=h[o],!i&&g!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(h.splice(o,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(t,u));a&&!h.length&&(d.teardown&&!1!==d.teardown.call(t,p,m.handle)||x.removeEvent(t,f,m.handle),delete l[f])}else for(f in l)x.event.remove(t,f+e[c],n,r,!0);x.isEmptyObject(l)&&Y.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,a,s=x.event.fix(t),l=new Array(arguments.length),c=(Y.get(this,"events")||{})[s.type]||[],u=x.event.special[s.type]||{};for(l[0]=s,e=1;e<arguments.length;e++)l[e]=arguments[e];if(s.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,s)){for(a=x.event.handlers.call(this,s,c),e=0;(i=a[e++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((x.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,l))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,s),s.result}},handlers:function(t,e){var n,r,i,o,a,s=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[i=(r=e[n]).selector+" "]&&(a[i]=r.needsContext?x(i,this).index(c)>-1:x.find(i,this,null,[c]).length),a[i]&&o.push(r);o.length&&s.push({elem:c,handlers:o})}return c=this,l<e.length&&s.push({elem:c,handlers:e.slice(l)}),s},addProp:function(t,e){Object.defineProperty(x.Event.prototype,t,{enumerable:!0,configurable:!0,get:g(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[x.expando]?t:new x.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Tt()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Tt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&L(this,"input"))return this.click(),!1},_default:function(t){return L(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},x.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},x.Event=function(t,e){if(!(this instanceof x.Event))return new x.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?wt:kt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&x.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:kt,isPropagationStopped:kt,isImmediatePropagationStopped:kt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=wt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=wt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=wt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&_t.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&xt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},x.event.addProp),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){x.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=t.relatedTarget,i=t.handleObj;return r&&(r===this||x.contains(this,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}}),x.fn.extend({on:function(t,e,n,r){return Mt(this,t,e,n,r)},one:function(t,e,n,r){return Mt(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,x(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=kt),this.each(function(){x.event.remove(this,t,n,e)})}});var At=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Lt=/<script|<style|<link/i,St=/checked\s*(?:[^=]|=\s*.checked.)/i,Ct=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Pt(t,e){return L(t,"table")&&L(11!==e.nodeType?e:e.firstChild,"tr")&&x(t).children("tbody")[0]||t}function zt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Dt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Et(t,e){var n,r,i,o,a,s,l,c;if(1===e.nodeType){if(Y.hasData(t)&&(o=Y.access(t),a=Y.set(e,o),c=o.events))for(i in delete a.handle,a.events={},c)for(n=0,r=c[i].length;n<r;n++)x.event.add(e,i,c[i][n]);$.hasData(t)&&(s=$.access(t),l=x.extend({},s),$.set(e,l))}}function Ot(t,e,n,r){e=a.apply([],e);var i,o,s,l,c,u,d=0,h=t.length,f=h-1,m=e[0],v=g(m);if(v||h>1&&"string"==typeof m&&!p.checkClone&&St.test(m))return t.each(function(i){var o=t.eq(i);v&&(e[0]=m.call(this,i,o.html())),Ot(o,e,n,r)});if(h&&(o=(i=vt(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(l=(s=x.map(ht(i,"script"),zt)).length;d<h;d++)c=i,d!==f&&(c=x.clone(c,!0,!0),l&&x.merge(s,ht(c,"script"))),n.call(t[d],c,d);if(l)for(u=s[s.length-1].ownerDocument,x.map(s,Dt),d=0;d<l;d++)c=s[d],ut.test(c.type||"")&&!Y.access(c,"globalEval")&&x.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?x._evalUrl&&x._evalUrl(c.src):y(c.textContent.replace(Ct,""),u,c))}return t}function It(t,e,n){for(var r,i=e?x.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||x.cleanData(ht(r)),r.parentNode&&(n&&x.contains(r.ownerDocument,r)&&ft(ht(r,"script")),r.parentNode.removeChild(r));return t}x.extend({htmlPrefilter:function(t){return t.replace(At,"<$1></$2>")},clone:function(t,e,n){var r,i,o,a,s,l,c,u=t.cloneNode(!0),d=x.contains(t.ownerDocument,t);if(!(p.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||x.isXMLDoc(t)))for(a=ht(u),r=0,i=(o=ht(t)).length;r<i;r++)s=o[r],l=a[r],void 0,"input"===(c=l.nodeName.toLowerCase())&&lt.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(e)if(n)for(o=o||ht(t),a=a||ht(u),r=0,i=o.length;r<i;r++)Et(o[r],a[r]);else Et(t,u);return(a=ht(u,"script")).length>0&&ft(a,!d&&ht(t,"script")),u},cleanData:function(t){for(var e,n,r,i=x.event.special,o=0;void 0!==(n=t[o]);o++)if(G(n)){if(e=n[Y.expando]){if(e.events)for(r in e.events)i[r]?x.event.remove(n,r):x.removeEvent(n,r,e.handle);n[Y.expando]=void 0}n[$.expando]&&(n[$.expando]=void 0)}}}),x.fn.extend({detach:function(t){return It(this,t,!0)},remove:function(t){return It(this,t)},text:function(t){return q(this,function(t){return void 0===t?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Ot(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pt(this,t).appendChild(t)})},prepend:function(){return Ot(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Pt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Ot(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Ot(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(x.cleanData(ht(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return x.clone(this,t,e)})},html:function(t){return q(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Lt.test(t)&&!dt[(ct.exec(t)||["",""])[1].toLowerCase()]){t=x.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(x.cleanData(ht(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Ot(this,arguments,function(e){var n=this.parentNode;x.inArray(this,t)<0&&(x.cleanData(ht(this)),n&&n.replaceChild(e,this))},t)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){x.fn[t]=function(t){for(var n,r=[],i=x(t),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),x(i[a])[e](n),s.apply(r,n.get());return this.pushStack(r)}});var jt=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),Nt=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},Rt=new RegExp(nt.join("|"),"i");function Bt(t,e,n){var r,i,o,a,s=t.style;return(n=n||Nt(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||x.contains(t.ownerDocument,t)||(a=x.style(t,e)),!p.pixelBoxStyles()&&jt.test(a)&&Rt.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Ft(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",yt.appendChild(c).appendChild(u);var e=t.getComputedStyle(u);i="1%"!==e.top,l=12===n(e.marginLeft),u.style.right="60%",s=36===n(e.right),o=36===n(e.width),u.style.position="absolute",a=36===u.offsetWidth||"absolute",yt.removeChild(c),u=null}}function n(t){return Math.round(parseFloat(t))}var i,o,a,s,l,c=r.createElement("div"),u=r.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===u.style.backgroundClip,x.extend(p,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),a}}))}();var Ht=/^(none|table(?!-c[ea]).+)/,qt=/^--/,Zt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:"0",fontWeight:"400"},Ut=["Webkit","Moz","ms"],Wt=r.createElement("div").style;function Gt(t){var e=x.cssProps[t];return e||(e=x.cssProps[t]=function(t){if(t in Wt)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=Ut.length;n--;)if((t=Ut[n]+e)in Wt)return t}(t)||t),e}function Xt(t,e,n){var r=et.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function Yt(t,e,n,r,i,o){var a="width"===e?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=x.css(t,n+nt[a],!0,i)),r?("content"===n&&(l-=x.css(t,"padding"+nt[a],!0,i)),"margin"!==n&&(l-=x.css(t,"border"+nt[a]+"Width",!0,i))):(l+=x.css(t,"padding"+nt[a],!0,i),"padding"!==n?l+=x.css(t,"border"+nt[a]+"Width",!0,i):s+=x.css(t,"border"+nt[a]+"Width",!0,i));return!r&&o>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-s-.5))),l}function $t(t,e,n){var r=Nt(t),i=Bt(t,e,r),o="border-box"===x.css(t,"boxSizing",!1,r),a=o;if(jt.test(i)){if(!n)return i;i="auto"}return a=a&&(p.boxSizingReliable()||i===t.style[e]),("auto"===i||!parseFloat(i)&&"inline"===x.css(t,"display",!1,r))&&(i=t["offset"+e[0].toUpperCase()+e.slice(1)],a=!0),(i=parseFloat(i)||0)+Yt(t,e,n||(o?"border":"content"),a,r,i)+"px"}function Jt(t,e,n,r,i){return new Jt.prototype.init(t,e,n,r,i)}x.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Bt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=W(e),l=qt.test(e),c=t.style;if(l||(e=Gt(s)),a=x.cssHooks[e]||x.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:c[e];"string"===(o=typeof n)&&(i=et.exec(n))&&i[1]&&(n=ot(t,e,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(x.cssNumber[s]?"":"px")),p.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(l?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,r){var i,o,a,s=W(e);return qt.test(e)||(e=Gt(s)),(a=x.cssHooks[e]||x.cssHooks[s])&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=Bt(t,e,r)),"normal"===i&&e in Vt&&(i=Vt[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),x.each(["height","width"],function(t,e){x.cssHooks[e]={get:function(t,n,r){if(n)return!Ht.test(x.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?$t(t,e,r):it(t,Zt,function(){return $t(t,e,r)})},set:function(t,n,r){var i,o=Nt(t),a="border-box"===x.css(t,"boxSizing",!1,o),s=r&&Yt(t,e,r,a,o);return a&&p.scrollboxSize()===o.position&&(s-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-Yt(t,e,"border",!1,o)-.5)),s&&(i=et.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=x.css(t,e)),Xt(0,n,s)}}}),x.cssHooks.marginLeft=Ft(p.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Bt(t,"marginLeft"))||t.getBoundingClientRect().left-it(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(t,e){x.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+nt[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(x.cssHooks[t+e].set=Xt)}),x.fn.extend({css:function(t,e){return q(this,function(t,e,n){var r,i,o={},a=0;if(Array.isArray(e)){for(r=Nt(t),i=e.length;a<i;a++)o[e[a]]=x.css(t,e[a],!1,r);return o}return void 0!==n?x.style(t,e,n):x.css(t,e)},t,e,arguments.length>1)}}),x.Tween=Jt,(Jt.prototype={constructor:Jt,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||x.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(x.cssNumber[n]?"":"px")},cur:function(){var t=Jt.propHooks[this.prop];return t&&t.get?t.get(this):Jt.propHooks._default.get(this)},run:function(t){var e,n=Jt.propHooks[this.prop];return this.options.duration?this.pos=e=x.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Jt.propHooks._default.set(this),this}}).init.prototype=Jt.prototype,(Jt.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=x.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){x.fx.step[t.prop]?x.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[x.cssProps[t.prop]]&&!x.cssHooks[t.prop]?t.elem[t.prop]=t.now:x.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=Jt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},x.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},x.fx=Jt.prototype.init,x.fx.step={};var Qt,Kt,te,ee,ne=/^(?:toggle|show|hide)$/,re=/queueHooks$/;function ie(){Kt&&(!1===r.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(ie):t.setTimeout(ie,x.fx.interval),x.fx.tick())}function oe(){return t.setTimeout(function(){Qt=void 0}),Qt=Date.now()}function ae(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=nt[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function se(t,e,n){for(var r,i=(le.tweeners[e]||[]).concat(le.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,e,t))return r}function le(t,e,n){var r,i,o=0,a=le.prefilters.length,s=x.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var e=Qt||oe(),n=Math.max(0,c.startTime+c.duration-e),r=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(r);return s.notifyWith(t,[c,r,n]),r<1&&a?n:(a||s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c]),!1)},c=s.promise({elem:t,props:x.extend({},e),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},n),originalProperties:e,originalOptions:n,startTime:Qt||oe(),duration:n.duration,tweens:[],createTween:function(e,n){var r=x.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){var n=0,r=e?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return e?(s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c,e])):s.rejectWith(t,[c,e]),this}}),u=c.props;for(!function(t,e){var n,r,i,o,a;for(n in t)if(i=e[r=W(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(a=x.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(u,c.opts.specialEasing);o<a;o++)if(r=le.prefilters[o].call(c,t,u,c.opts))return g(r.stop)&&(x._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return x.map(u,se,c),g(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),x.fx.timer(x.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}x.Animation=x.extend(le,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ot(n.elem,t,et.exec(e),n),n}]},tweener:function(t,e){g(t)?(e=t,t=["*"]):t=t.match(I);for(var n,r=0,i=t.length;r<i;r++)n=t[r],le.tweeners[n]=le.tweeners[n]||[],le.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var r,i,o,a,s,l,c,u,d="width"in e||"height"in e,h=this,f={},p=t.style,g=t.nodeType&&rt(t),m=Y.get(t,"fxshow");for(r in n.queue||(null==(a=x._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,x.queue(t,"fx").length||a.empty.fire()})})),e)if(i=e[r],ne.test(i)){if(delete e[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;g=!0}f[r]=m&&m[r]||x.style(t,r)}if((l=!x.isEmptyObject(e))||!x.isEmptyObject(f))for(r in d&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=m&&m.display)&&(c=Y.get(t,"display")),"none"===(u=x.css(t,"display"))&&(c?u=c:(st([t],!0),c=t.style.display||c,u=x.css(t,"display"),st([t]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===x.css(t,"float")&&(l||(h.done(function(){p.display=c}),null==c&&(u=p.display,c="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,f)l||(m?"hidden"in m&&(g=m.hidden):m=Y.access(t,"fxshow",{display:c}),o&&(m.hidden=!g),g&&st([t],!0),h.done(function(){for(r in g||st([t]),Y.remove(t,"fxshow"),f)x.style(t,r,f[r])})),l=se(g?m[r]:0,r,h),r in m||(m[r]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?le.prefilters.unshift(t):le.prefilters.push(t)}}),x.speed=function(t,e,n){var r=t&&"object"==typeof t?x.extend({},t):{complete:n||!n&&e||g(t)&&t,duration:t,easing:n&&e||e&&!g(e)&&e};return x.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in x.fx.speeds?r.duration=x.fx.speeds[r.duration]:r.duration=x.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.fn.extend({fadeTo:function(t,e,n,r){return this.filter(rt).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=x.isEmptyObject(t),o=x.speed(e,n,r),a=function(){var e=le(this,x.extend({},t),o);(i||Y.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=x.timers,a=Y.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&re.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||x.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=Y.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=x.timers,a=r?r.length:0;for(n.finish=!0,x.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),x.each(["toggle","show","hide"],function(t,e){var n=x.fn[e];x.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ae(e,!0),t,r,i)}}),x.each({slideDown:ae("show"),slideUp:ae("hide"),slideToggle:ae("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){x.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),x.timers=[],x.fx.tick=function(){var t,e=0,n=x.timers;for(Qt=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||x.fx.stop(),Qt=void 0},x.fx.timer=function(t){x.timers.push(t),x.fx.start()},x.fx.interval=13,x.fx.start=function(){Kt||(Kt=!0,ie())},x.fx.stop=function(){Kt=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(e,n){return e=x.fx&&x.fx.speeds[e]||e,n=n||"fx",this.queue(n,function(n,r){var i=t.setTimeout(n,e);r.stop=function(){t.clearTimeout(i)}})},te=r.createElement("input"),ee=r.createElement("select").appendChild(r.createElement("option")),te.type="checkbox",p.checkOn=""!==te.value,p.optSelected=ee.selected,(te=r.createElement("input")).value="t",te.type="radio",p.radioValue="t"===te.value;var ce,ue=x.expr.attrHandle;x.fn.extend({attr:function(t,e){return q(this,x.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){x.removeAttr(this,t)})}}),x.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?x.prop(t,e,n):(1===o&&x.isXMLDoc(t)||(i=x.attrHooks[e.toLowerCase()]||(x.expr.match.bool.test(e)?ce:void 0)),void 0!==n?null===n?void x.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=x.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!p.radioValue&&"radio"===e&&L(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(I);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),ce={set:function(t,e,n){return!1===e?x.removeAttr(t,n):t.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(t,e){var n=ue[e]||x.find.attr;ue[e]=function(t,e,r){var i,o,a=e.toLowerCase();return r||(o=ue[a],ue[a]=i,i=null!=n(t,e,r)?a:null,ue[a]=o),i}});var de=/^(?:input|select|textarea|button)$/i,he=/^(?:a|area)$/i;function fe(t){return(t.match(I)||[]).join(" ")}function pe(t){return t.getAttribute&&t.getAttribute("class")||""}function ge(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(I)||[]}x.fn.extend({prop:function(t,e){return q(this,x.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[x.propFix[t]||t]})}}),x.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&x.isXMLDoc(t)||(e=x.propFix[e]||e,i=x.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=x.find.attr(t,"tabindex");return e?parseInt(e,10):de.test(t.nodeName)||he.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(x.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,l=0;if(g(t))return this.each(function(e){x(this).addClass(t.call(this,e,pe(this)))});if((e=ge(t)).length)for(;n=this[l++];)if(i=pe(n),r=1===n.nodeType&&" "+fe(i)+" "){for(a=0;o=e[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=fe(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,l=0;if(g(t))return this.each(function(e){x(this).removeClass(t.call(this,e,pe(this)))});if(!arguments.length)return this.attr("class","");if((e=ge(t)).length)for(;n=this[l++];)if(i=pe(n),r=1===n.nodeType&&" "+fe(i)+" "){for(a=0;o=e[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(s=fe(r))&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t,r="string"===n||Array.isArray(t);return"boolean"==typeof e&&r?e?this.addClass(t):this.removeClass(t):g(t)?this.each(function(n){x(this).toggleClass(t.call(this,n,pe(this),e),e)}):this.each(function(){var e,i,o,a;if(r)for(i=0,o=x(this),a=ge(t);e=a[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||((e=pe(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Y.get(this,"__className__")||""))})},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+fe(pe(n))+" ").indexOf(e)>-1)return!0;return!1}});var me=/\r/g;x.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=g(t),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,x(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=x.map(i,function(t){return null==t?"":t+""})),(e=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))})):i?(e=x.valHooks[i.type]||x.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(me,""):null==n?"":n:void 0}}),x.extend({valHooks:{option:{get:function(t){var e=x.find.attr(t,"value");return null!=e?e:fe(x.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],l=a?o+1:i.length;for(r=o<0?l:a?o:0;r<l;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!L(n.parentNode,"optgroup"))){if(e=x(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,o=x.makeArray(e),a=i.length;a--;)((r=i[a]).selected=x.inArray(x.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=x.inArray(x(t).val(),e)>-1}},p.checkOn||(x.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),p.focusin="onfocusin"in t;var ve=/^(?:focusinfocus|focusoutblur)$/,ye=function(t){t.stopPropagation()};x.extend(x.event,{trigger:function(e,n,i,o){var a,s,l,c,u,h,f,p,v=[i||r],y=d.call(e,"type")?e.type:e,_=d.call(e,"namespace")?e.namespace.split("."):[];if(s=p=l=i=i||r,3!==i.nodeType&&8!==i.nodeType&&!ve.test(y+x.event.triggered)&&(y.indexOf(".")>-1&&(y=(_=y.split(".")).shift(),_.sort()),u=y.indexOf(":")<0&&"on"+y,(e=e[x.expando]?e:new x.Event(y,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=_.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+_.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:x.makeArray(n,[e]),f=x.event.special[y]||{},o||!f.trigger||!1!==f.trigger.apply(i,n))){if(!o&&!f.noBubble&&!m(i)){for(c=f.delegateType||y,ve.test(c+y)||(s=s.parentNode);s;s=s.parentNode)v.push(s),l=s;l===(i.ownerDocument||r)&&v.push(l.defaultView||l.parentWindow||t)}for(a=0;(s=v[a++])&&!e.isPropagationStopped();)p=s,e.type=a>1?c:f.bindType||y,(h=(Y.get(s,"events")||{})[e.type]&&Y.get(s,"handle"))&&h.apply(s,n),(h=u&&s[u])&&h.apply&&G(s)&&(e.result=h.apply(s,n),!1===e.result&&e.preventDefault());return e.type=y,o||e.isDefaultPrevented()||f._default&&!1!==f._default.apply(v.pop(),n)||!G(i)||u&&g(i[y])&&!m(i)&&((l=i[u])&&(i[u]=null),x.event.triggered=y,e.isPropagationStopped()&&p.addEventListener(y,ye),i[y](),e.isPropagationStopped()&&p.removeEventListener(y,ye),x.event.triggered=void 0,l&&(i[u]=l)),e.result}},simulate:function(t,e,n){var r=x.extend(new x.Event,n,{type:t,isSimulated:!0});x.event.trigger(r,null,e)}}),x.fn.extend({trigger:function(t,e){return this.each(function(){x.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return x.event.trigger(t,e,n,!0)}}),p.focusin||x.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){x.event.simulate(e,t.target,x.event.fix(t))};x.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=Y.access(r,e);i||r.addEventListener(t,n,!0),Y.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=Y.access(r,e)-1;i?Y.access(r,e,i):(r.removeEventListener(t,n,!0),Y.remove(r,e))}}});var _e=t.location,xe=Date.now(),be=/\?/;x.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(t){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||x.error("Invalid XML: "+e),n};var we=/\[\]$/,ke=/\r?\n/g,Te=/^(?:submit|button|image|reset|file)$/i,Me=/^(?:input|select|textarea|keygen)/i;function Ae(t,e,n,r){var i;if(Array.isArray(e))x.each(e,function(e,i){n||we.test(t)?r(t,i):Ae(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)});else if(n||"object"!==_(e))r(t,e);else for(i in e)Ae(t+"["+i+"]",e[i],n,r)}x.param=function(t,e){var n,r=[],i=function(t,e){var n=g(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!x.isPlainObject(t))x.each(t,function(){i(this.name,this.value)});else for(n in t)Ae(n,t[n],e,i);return r.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=x.prop(this,"elements");return t?x.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!x(this).is(":disabled")&&Me.test(this.nodeName)&&!Te.test(t)&&(this.checked||!lt.test(t))}).map(function(t,e){var n=x(this).val();return null==n?null:Array.isArray(n)?x.map(n,function(t){return{name:e.name,value:t.replace(ke,"\r\n")}}):{name:e.name,value:n.replace(ke,"\r\n")}}).get()}});var Le=/%20/g,Se=/#.*$/,Ce=/([?&])_=[^&]*/,Pe=/^(.*?):[ \t]*([^\r\n]*)$/gm,ze=/^(?:GET|HEAD)$/,De=/^\/\//,Ee={},Oe={},Ie="*/".concat("*"),je=r.createElement("a");function Ne(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(I)||[];if(g(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function Re(t,e,n,r){var i={},o=t===Oe;function a(s){var l;return i[s]=!0,x.each(t[s]||[],function(t,s){var c=s(e,n,r);return"string"!=typeof c||o||i[c]?o?!(l=c):void 0:(e.dataTypes.unshift(c),a(c),!1)}),l}return a(e.dataTypes[0])||!i["*"]&&a("*")}function Be(t,e){var n,r,i=x.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&x.extend(!0,t,r),t}je.href=_e.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_e.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(_e.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ie,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Be(Be(t,x.ajaxSettings),e):Be(x.ajaxSettings,t)},ajaxPrefilter:Ne(Ee),ajaxTransport:Ne(Oe),ajax:function(e,n){"object"==typeof e&&(n=e,e=void 0),n=n||{};var i,o,a,s,l,c,u,d,h,f,p=x.ajaxSetup({},n),g=p.context||p,m=p.context&&(g.nodeType||g.jquery)?x(g):x.event,v=x.Deferred(),y=x.Callbacks("once memory"),_=p.statusCode||{},b={},w={},k="canceled",T={readyState:0,getResponseHeader:function(t){var e;if(u){if(!s)for(s={};e=Pe.exec(a);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return u?a:null},setRequestHeader:function(t,e){return null==u&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==u&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)T.always(t[T.status]);else for(e in t)_[e]=[_[e],t[e]];return this},abort:function(t){var e=t||k;return i&&i.abort(e),M(0,e),this}};if(v.promise(T),p.url=((e||p.url||_e.href)+"").replace(De,_e.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(I)||[""],null==p.crossDomain){c=r.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=je.protocol+"//"+je.host!=c.protocol+"//"+c.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=x.param(p.data,p.traditional)),Re(Ee,p,n,T),u)return T;for(h in(d=x.event&&p.global)&&0==x.active++&&x.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!ze.test(p.type),o=p.url.replace(Se,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Le,"+")):(f=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(be.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(Ce,"$1"),f=(be.test(o)?"&":"?")+"_="+xe+++f),p.url=o+f),p.ifModified&&(x.lastModified[o]&&T.setRequestHeader("If-Modified-Since",x.lastModified[o]),x.etag[o]&&T.setRequestHeader("If-None-Match",x.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&T.setRequestHeader("Content-Type",p.contentType),T.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Ie+"; q=0.01":""):p.accepts["*"]),p.headers)T.setRequestHeader(h,p.headers[h]);if(p.beforeSend&&(!1===p.beforeSend.call(g,T,p)||u))return T.abort();if(k="abort",y.add(p.complete),T.done(p.success),T.fail(p.error),i=Re(Oe,p,n,T)){if(T.readyState=1,d&&m.trigger("ajaxSend",[T,p]),u)return T;p.async&&p.timeout>0&&(l=t.setTimeout(function(){T.abort("timeout")},p.timeout));try{u=!1,i.send(b,M)}catch(t){if(u)throw t;M(-1,t)}}else M(-1,"No Transport");function M(e,n,r,s){var c,h,f,b,w,k=n;u||(u=!0,l&&t.clearTimeout(l),i=void 0,a=s||"",T.readyState=e>0?4:0,c=e>=200&&e<300||304===e,r&&(b=function(t,e,n){for(var r,i,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||t.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(p,T,r)),b=function(t,e,n,r){var i,o,a,s,l,c={},u=t.dataTypes.slice();if(u[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(o=u.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(i in c)if((s=i.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[i]:!0!==c[i]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(p,b,T,c),c?(p.ifModified&&((w=T.getResponseHeader("Last-Modified"))&&(x.lastModified[o]=w),(w=T.getResponseHeader("etag"))&&(x.etag[o]=w)),204===e||"HEAD"===p.type?k="nocontent":304===e?k="notmodified":(k=b.state,h=b.data,c=!(f=b.error))):(f=k,!e&&k||(k="error",e<0&&(e=0))),T.status=e,T.statusText=(n||k)+"",c?v.resolveWith(g,[h,k,T]):v.rejectWith(g,[T,k,f]),T.statusCode(_),_=void 0,d&&m.trigger(c?"ajaxSuccess":"ajaxError",[T,p,c?h:f]),y.fireWith(g,[T,k]),d&&(m.trigger("ajaxComplete",[T,p]),--x.active||x.event.trigger("ajaxStop")))}return T},getJSON:function(t,e,n){return x.get(t,e,n,"json")},getScript:function(t,e){return x.get(t,void 0,e,"script")}}),x.each(["get","post"],function(t,e){x[e]=function(t,n,r,i){return g(n)&&(i=i||r,r=n,n=void 0),x.ajax(x.extend({url:t,type:e,dataType:i,data:n,success:r},x.isPlainObject(t)&&t))}}),x._evalUrl=function(t){return x.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},x.fn.extend({wrapAll:function(t){var e;return this[0]&&(g(t)&&(t=t.call(this[0])),e=x(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return g(t)?this.each(function(e){x(this).wrapInner(t.call(this,e))}):this.each(function(){var e=x(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=g(t);return this.each(function(n){x(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(t){return!x.expr.pseudos.visible(t)},x.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var Fe={0:200,1223:204},He=x.ajaxSettings.xhr();p.cors=!!He&&"withCredentials"in He,p.ajax=He=!!He,x.ajaxTransport(function(e){var n,r;if(p.cors||He&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);n=function(t){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Fe[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&t.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(e.hasContent&&e.data||null)}catch(t){if(n)throw t}},abort:function(){n&&n()}}}),x.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return x.globalEval(t),t}}}),x.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),x.ajaxTransport("script",function(t){var e,n;if(t.crossDomain)return{send:function(i,o){e=x("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&o("error"===t.type?404:200,t.type)}),r.head.appendChild(e[0])},abort:function(){n&&n()}}});var qe,Ze=[],Ve=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ze.pop()||x.expando+"_"+xe++;return this[t]=!0,t}}),x.ajaxPrefilter("json jsonp",function(e,n,r){var i,o,a,s=!1!==e.jsonp&&(Ve.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ve.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=g(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Ve,"$1"+i):!1!==e.jsonp&&(e.url+=(be.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||x.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){a=arguments},r.always(function(){void 0===o?x(t).removeProp(i):t[i]=o,e[i]&&(e.jsonpCallback=n.jsonpCallback,Ze.push(i)),a&&g(o)&&o(a[0]),a=o=void 0}),"script"}),p.createHTMLDocument=((qe=r.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===qe.childNodes.length),x.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(p.createHTMLDocument?((i=(e=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,e.head.appendChild(i)):e=r),a=!n&&[],(o=S.exec(t))?[e.createElement(o[1])]:(o=vt([t],e,a),a&&a.length&&x(a).remove(),x.merge([],o.childNodes)));var i,o,a},x.fn.load=function(t,e,n){var r,i,o,a=this,s=t.indexOf(" ");return s>-1&&(r=fe(t.slice(s)),t=t.slice(0,s)),g(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&x.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(r?x("<div>").append(x.parseHTML(t)).find(r):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){x.fn[e]=function(t){return this.on(e,t)}}),x.expr.pseudos.animated=function(t){return x.grep(x.timers,function(e){return t===e.elem}).length},x.offset={setOffset:function(t,e,n){var r,i,o,a,s,l,c=x.css(t,"position"),u=x(t),d={};"static"===c&&(t.style.position="relative"),s=u.offset(),o=x.css(t,"top"),l=x.css(t,"left"),("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1?(a=(r=u.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),g(e)&&(e=e.call(t,n,x.extend({},s))),null!=e.top&&(d.top=e.top-s.top+a),null!=e.left&&(d.left=e.left-s.left+i),"using"in e?e.using.call(t,d):u.css(d)}},x.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){x.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===x.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===x.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=x(t).offset()).top+=x.css(t,"borderTopWidth",!0),i.left+=x.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-x.css(r,"marginTop",!0),left:e.left-i.left-x.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===x.css(t,"position");)t=t.offsetParent;return t||yt})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;x.fn[t]=function(r){return q(this,function(t,r,i){var o;if(m(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i},t,r,arguments.length)}}),x.each(["top","left"],function(t,e){x.cssHooks[e]=Ft(p.pixelPosition,function(t,n){if(n)return n=Bt(t,e),jt.test(n)?x(t).position()[e]+"px":n})}),x.each({Height:"height",Width:"width"},function(t,e){x.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){x.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return q(this,function(e,n,i){var o;return m(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?x.css(e,n,s):x.style(e,n,i,s)},e,a?i:void 0,a)}})}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){x.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),x.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),x.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),x.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),g(t))return r=o.call(arguments,2),(i=function(){return t.apply(e||this,r.concat(o.call(arguments)))}).guid=t.guid=t.guid||x.guid++,i},x.holdReady=function(t){t?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=L,x.isFunction=g,x.isWindow=m,x.camelCase=W,x.type=_,x.now=Date.now,x.isNumeric=function(t){var e=x.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return x});var Ue=t.jQuery,We=t.$;return x.noConflict=function(e){return t.$===x&&(t.$=We),e&&t.jQuery===x&&(t.jQuery=Ue),x},e||(t.jQuery=t.$=x),x})},{}],10:[function(t,e,n){var r,i;r=function(t){var e=t.Control.extend({includes:t.Evented?t.Evented.prototype:t.Mixin.Events,options:{position:"bottomright",toggleDisplay:!1,zoomLevelOffset:-5,zoomLevelFixed:!1,centerFixed:!1,zoomAnimation:!1,autoToggleDisplay:!1,minimized:!1,width:150,height:150,collapsedWidth:19,collapsedHeight:19,aimingRectOptions:{color:"#ff7800",weight:1,clickable:!1},shadowRectOptions:{color:"#000000",weight:1,clickable:!1,opacity:0,fillOpacity:0},strings:{hideText:"Hide MiniMap",showText:"Show MiniMap"},mapOptions:{}},initialize:function(e,n){t.Util.setOptions(this,n),this.options.aimingRectOptions.clickable=!1,this.options.shadowRectOptions.clickable=!1,this._layer=e},onAdd:function(e){this._mainMap=e,this._container=t.DomUtil.create("div","leaflet-control-minimap"),this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",t.DomEvent.disableClickPropagation(this._container),t.DomEvent.on(this._container,"mousewheel",t.DomEvent.stopPropagation);var n={attributionControl:!1,dragging:!this.options.centerFixed,zoomControl:!1,zoomAnimation:this.options.zoomAnimation,autoToggleDisplay:this.options.autoToggleDisplay,touchZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),scrollWheelZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),doubleClickZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),boxZoom:!this._isZoomLevelFixed(),crs:e.options.crs};return n=t.Util.extend(this.options.mapOptions,n),this._miniMap=new t.Map(this._container,n),this._miniMap.addLayer(this._layer),this._mainMapMoving=!1,this._miniMapMoving=!1,this._userToggledDisplay=!1,this._minimized=!1,this.options.toggleDisplay&&this._addToggleButton(),this._miniMap.whenReady(t.Util.bind(function(){this._aimingRect=t.rectangle(this._mainMap.getBounds(),this.options.aimingRectOptions).addTo(this._miniMap),this._shadowRect=t.rectangle(this._mainMap.getBounds(),this.options.shadowRectOptions).addTo(this._miniMap),this._mainMap.on("moveend",this._onMainMapMoved,this),this._mainMap.on("move",this._onMainMapMoving,this),this._miniMap.on("movestart",this._onMiniMapMoveStarted,this),this._miniMap.on("move",this._onMiniMapMoving,this),this._miniMap.on("moveend",this._onMiniMapMoved,this)},this)),this._container},addTo:function(e){t.Control.prototype.addTo.call(this,e);var n=this.options.centerFixed||this._mainMap.getCenter();return this._miniMap.setView(n,this._decideZoom(!0)),this._setDisplay(this.options.minimized),this},onRemove:function(t){this._mainMap.off("moveend",this._onMainMapMoved,this),this._mainMap.off("move",this._onMainMapMoving,this),this._miniMap.off("moveend",this._onMiniMapMoved,this),this._miniMap.removeLayer(this._layer)},changeLayer:function(t){this._miniMap.removeLayer(this._layer),this._layer=t,this._miniMap.addLayer(this._layer)},_addToggleButton:function(){this._toggleDisplayButton=this.options.toggleDisplay?this._createButton("",this._toggleButtonInitialTitleText(),"leaflet-control-minimap-toggle-display leaflet-control-minimap-toggle-display-"+this.options.position,this._container,this._toggleDisplayButtonClicked,this):void 0,this._toggleDisplayButton.style.width=this.options.collapsedWidth+"px",this._toggleDisplayButton.style.height=this.options.collapsedHeight+"px"},_toggleButtonInitialTitleText:function(){return this.options.minimized?this.options.strings.showText:this.options.strings.hideText},_createButton:function(e,n,r,i,o,a){var s=t.DomUtil.create("a",r,i);s.innerHTML=e,s.href="#",s.title=n;var l=t.DomEvent.stopPropagation;return t.DomEvent.on(s,"click",l).on(s,"mousedown",l).on(s,"dblclick",l).on(s,"click",t.DomEvent.preventDefault).on(s,"click",o,a),s},_toggleDisplayButtonClicked:function(){this._userToggledDisplay=!0,this._minimized?this._restore():this._minimize()},_setDisplay:function(t){t!==this._minimized&&(this._minimized?this._restore():this._minimize())},_minimize:function(){this.options.toggleDisplay?(this._container.style.width=this.options.collapsedWidth+"px",this._container.style.height=this.options.collapsedHeight+"px",this._toggleDisplayButton.className+=" minimized-"+this.options.position,this._toggleDisplayButton.title=this.options.strings.showText):this._container.style.display="none",this._minimized=!0,this._onToggle()},_restore:function(){this.options.toggleDisplay?(this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",this._toggleDisplayButton.className=this._toggleDisplayButton.className.replace("minimized-"+this.options.position,""),this._toggleDisplayButton.title=this.options.strings.hideText):this._container.style.display="block",this._minimized=!1,this._onToggle()},_onMainMapMoved:function(t){if(this._miniMapMoving)this._miniMapMoving=!1;else{var e=this.options.centerFixed||this._mainMap.getCenter();this._mainMapMoving=!0,this._miniMap.setView(e,this._decideZoom(!0)),this._setDisplay(this._decideMinimized())}this._aimingRect.setBounds(this._mainMap.getBounds())},_onMainMapMoving:function(t){this._aimingRect.setBounds(this._mainMap.getBounds())},_onMiniMapMoveStarted:function(t){if(!this.options.centerFixed){var e=this._aimingRect.getBounds(),n=this._miniMap.latLngToContainerPoint(e.getSouthWest()),r=this._miniMap.latLngToContainerPoint(e.getNorthEast());this._lastAimingRectPosition={sw:n,ne:r}}},_onMiniMapMoving:function(e){this.options.centerFixed||!this._mainMapMoving&&this._lastAimingRectPosition&&(this._shadowRect.setBounds(new t.LatLngBounds(this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.sw),this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.ne))),this._shadowRect.setStyle({opacity:1,fillOpacity:.3}))},_onMiniMapMoved:function(t){this._mainMapMoving?this._mainMapMoving=!1:(this._miniMapMoving=!0,this._mainMap.setView(this._miniMap.getCenter(),this._decideZoom(!1)),this._shadowRect.setStyle({opacity:0,fillOpacity:0}))},_isZoomLevelFixed:function(){var t=this.options.zoomLevelFixed;return this._isDefined(t)&&this._isInteger(t)},_decideZoom:function(t){if(this._isZoomLevelFixed())return t?this.options.zoomLevelFixed:this._mainMap.getZoom();if(t)return this._mainMap.getZoom()+this.options.zoomLevelOffset;var e,n=this._miniMap.getZoom()-this._mainMap.getZoom(),r=this._miniMap.getZoom()-this.options.zoomLevelOffset;return n>this.options.zoomLevelOffset&&this._mainMap.getZoom()<this._miniMap.getMinZoom()-this.options.zoomLevelOffset?this._miniMap.getZoom()>this._lastMiniMapZoom?(e=this._mainMap.getZoom()+1,this._miniMap.setZoom(this._miniMap.getZoom()-1)):e=this._mainMap.getZoom():e=r,this._lastMiniMapZoom=this._miniMap.getZoom(),e},_decideMinimized:function(){return this._userToggledDisplay?this._minimized:this.options.autoToggleDisplay?!!this._mainMap.getBounds().contains(this._miniMap.getBounds()):this._minimized},_isInteger:function(t){return"number"==typeof t},_isDefined:function(t){return void 0!==t},_onToggle:function(){t.Util.requestAnimFrame(function(){t.DomEvent.on(this._container,"transitionend",this._fireToggleEvents,this),t.Browser.any3d||t.Util.requestAnimFrame(this._fireToggleEvents,this)},this)},_fireToggleEvents:function(){t.DomEvent.off(this._container,"transitionend",this._fireToggleEvents,this);var e={minimized:this._minimized};this.fire(this._minimized?"minimize":"restore",e),this.fire("toggle",e)}});return t.Map.mergeOptions({miniMapControl:!1}),t.Map.addInitHook(function(){this.options.miniMapControl&&(this.miniMapControl=(new e).addTo(this))}),e},i=window,"function"==typeof define&&define.amd?define(["leaflet"],r):"object"==typeof n&&(e.exports=r(t("leaflet"))),void 0!==i&&i.L&&(i.L.Control.MiniMap=r(L),i.L.control.minimap=function(t,e){return new i.L.Control.MiniMap(t,e)})},{leaflet:11}],11:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";var e=Object.freeze;function n(t){var e,n,r,i;for(n=1,r=arguments.length;n<r;n++)for(e in i=arguments[n])t[e]=i[e];return t}Object.freeze=function(t){return t};var r=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function i(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var r=n.call(arguments,2);return function(){return t.apply(e,r.length?r.concat(n.call(arguments)):arguments)}}var o=0;function a(t){return t._leaflet_id=t._leaflet_id||++o,t._leaflet_id}function s(t,e,n){var r,i,o,a;return a=function(){r=!1,i&&(o.apply(n,i),i=!1)},o=function(){r?i=arguments:(t.apply(n,arguments),setTimeout(a,e),r=!0)}}function l(t,e,n){var r=e[1],i=e[0],o=r-i;return t===r&&n?t:((t-i)%o+o)%o+i}function c(){return!1}function u(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function d(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function h(t){return d(t).split(/\s+/)}function f(t,e){for(var n in t.hasOwnProperty("options")||(t.options=t.options?r(t.options):{}),e)t.options[n]=e[n];return t.options}function p(t,e,n){var r=[];for(var i in t)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+r.join("&")}var g=/\{ *([\w_-]+) *\}/g;function m(t,e){return t.replace(g,function(t,n){var r=e[n];if(void 0===r)throw new Error("No value provided for variable "+t);return"function"==typeof r&&(r=r(e)),r})}var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function y(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function x(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var b=0;function w(t){var e=+new Date,n=Math.max(0,16-(e-b));return b=e+n,window.setTimeout(t,n)}var k=window.requestAnimationFrame||x("RequestAnimationFrame")||w,T=window.cancelAnimationFrame||x("CancelAnimationFrame")||x("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function M(t,e,n){if(!n||k!==w)return k.call(window,i(t,e));t.call(e)}function A(t){t&&T.call(window,t)}var S=(Object.freeze||Object)({freeze:e,extend:n,create:r,bind:i,lastId:o,stamp:a,throttle:s,wrapNum:l,falseFn:c,formatNum:u,trim:d,splitWords:h,setOptions:f,getParamString:p,template:m,isArray:v,indexOf:y,emptyImageUrl:_,requestFn:k,cancelFn:T,requestAnimFrame:M,cancelAnimFrame:A});function C(){}C.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,o=r(i);for(var a in o.constructor=e,e.prototype=o,this)this.hasOwnProperty(a)&&"prototype"!==a&&"__super__"!==a&&(e[a]=this[a]);return t.statics&&(n(e,t.statics),delete t.statics),t.includes&&(!function(t){if("undefined"==typeof L||!L||!L.Mixin)return;t=v(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}(t.includes),n.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=n(r(o.options),t.options)),n(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},e},C.include=function(t){return n(this.prototype,t),this},C.mergeOptions=function(t){return n(this.prototype.options,t),this},C.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var P={on:function(t,e,n){if("object"==typeof t)for(var r in t)this._on(r,t[r],e);else for(var i=0,o=(t=h(t)).length;i<o;i++)this._on(t[i],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var r in t)this._off(r,t[r],e);else for(var i=0,o=(t=h(t)).length;i<o;i++)this._off(t[i],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var r=this._events[t];r||(r=[],this._events[t]=r),n===this&&(n=void 0);for(var i={fn:e,ctx:n},o=r,a=0,s=o.length;a<s;a++)if(o[a].fn===e&&o[a].ctx===n)return;o.push(i)},_off:function(t,e,n){var r,i,o;if(this._events&&(r=this._events[t]))if(e){if(n===this&&(n=void 0),r)for(i=0,o=r.length;i<o;i++){var a=r[i];if(a.ctx===n&&a.fn===e)return a.fn=c,this._firingCount&&(this._events[t]=r=r.slice()),void r.splice(i,1)}}else{for(i=0,o=r.length;i<o;i++)r[i].fn=c;delete this._events[t]}},fire:function(t,e,r){if(!this.listens(t,r))return this;var i=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var a=0,s=o.length;a<s;a++){var l=o[a];l.fn.call(l.ctx||this,i)}this._firingCount--}}return r&&this._propagateEvent(i),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var r in this._eventParents)if(this._eventParents[r].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var r in t)this.once(r,t[r],e);return this}var o=i(function(){this.off(t,e,n).off(t,o,n)},this);return this.on(t,e,n).on(t,o,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[a(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[a(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};P.addEventListener=P.on,P.removeEventListener=P.clearAllEventListeners=P.off,P.addOneTimeEventListener=P.once,P.fireEvent=P.fire,P.hasEventListeners=P.listens;var z=C.extend(P);function D(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var E=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function O(t,e,n){return t instanceof D?t:v(t)?new D(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new D(t.x,t.y):new D(t,e,n)}function I(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function j(t,e){return!t||t instanceof I?t:new I(t,e)}function N(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function R(t,e){return t instanceof N?t:new N(t,e)}function B(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function F(t,e,n){return t instanceof B?t:v(t)&&"object"!=typeof t[0]?3===t.length?new B(t[0],t[1],t[2]):2===t.length?new B(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new B(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new B(t,e,n)}D.prototype={clone:function(){return new D(this.x,this.y)},add:function(t){return this.clone()._add(O(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(O(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new D(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new D(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=E(this.x),this.y=E(this.y),this},distanceTo:function(t){var e=(t=O(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=O(t)).x===this.x&&t.y===this.y},contains:function(t){return t=O(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},I.prototype={extend:function(t){return t=O(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new D((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new D(this.min.x,this.max.y)},getTopRight:function(){return new D(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof D?O(t):j(t))instanceof I?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=j(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>=e.x&&r.x<=n.x,a=i.y>=e.y&&r.y<=n.y;return o&&a},overlaps:function(t){t=j(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>e.x&&r.x<n.x,a=i.y>e.y&&r.y<n.y;return o&&a},isValid:function(){return!(!this.min||!this.max)}},N.prototype={extend:function(t){var e,n,r=this._southWest,i=this._northEast;if(t instanceof B)e=t,n=t;else{if(!(t instanceof N))return t?this.extend(F(t)||R(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return r||i?(r.lat=Math.min(e.lat,r.lat),r.lng=Math.min(e.lng,r.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new B(e.lat,e.lng),this._northEast=new B(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,r=Math.abs(e.lat-n.lat)*t,i=Math.abs(e.lng-n.lng)*t;return new N(new B(e.lat-r,e.lng-i),new B(n.lat+r,n.lng+i))},getCenter:function(){return new B((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new B(this.getNorth(),this.getWest())},getSouthEast:function(){return new B(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof B||"lat"in t?F(t):R(t);var e,n,r=this._southWest,i=this._northEast;return t instanceof N?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=r.lat&&n.lat<=i.lat&&e.lng>=r.lng&&n.lng<=i.lng},intersects:function(t){t=R(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>=e.lat&&r.lat<=n.lat,a=i.lng>=e.lng&&r.lng<=n.lng;return o&&a},overlaps:function(t){t=R(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>e.lat&&r.lat<n.lat,a=i.lng>e.lng&&r.lng<n.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=R(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},B.prototype={equals:function(t,e){return!!t&&(t=F(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+u(this.lat,t)+", "+u(this.lng,t)+")"},distanceTo:function(t){return Z.distance(this,F(t))},wrap:function(){return Z.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return R([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new B(this.lat,this.lng,this.alt)}};var H,q={latLngToPoint:function(t,e){var n=this.projection.project(t),r=this.scale(e);return this.transformation._transform(n,r)},pointToLatLng:function(t,e){var n=this.scale(e),r=this.transformation.untransform(t,n);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new I(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?l(t.lng,this.wrapLng,!0):t.lng;return new B(this.wrapLat?l(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),r=e.lat-n.lat,i=e.lng-n.lng;if(0===r&&0===i)return t;var o=t.getSouthWest(),a=t.getNorthEast();return new N(new B(o.lat-r,o.lng-i),new B(a.lat-r,a.lng-i))}},Z=n({},q,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,r=t.lat*n,i=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),a=Math.sin((e.lng-t.lng)*n/2),s=o*o+Math.cos(r)*Math.cos(i)*a*a,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),V={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),i=Math.sin(r*e);return new D(this.R*t.lng*e,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(t){var e=180/Math.PI;return new B((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(H=6378137*Math.PI,new I([-H,-H],[H,H]))};function U(t,e,n,r){if(v(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=r}function W(t,e,n,r){return new U(t,e,n,r)}U.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new D((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var G,X=n({},Z,{code:"EPSG:3857",projection:V,transformation:(G=.5/(Math.PI*V.R),W(G,.5,-G,.5))}),Y=n({},X,{code:"EPSG:900913"});function $(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function J(t,e){var n,r,i,o,a,s,l="";for(n=0,i=t.length;n<i;n++){for(r=0,o=(a=t[n]).length;r<o;r++)l+=(r?"L":"M")+(s=a[r]).x+" "+s.y;l+=e?St?"z":"x":""}return l||"M0 0"}var Q=document.documentElement.style,K="ActiveXObject"in window,tt=K&&!document.addEventListener,et="msLaunchUri"in navigator&&!("documentMode"in document),nt=Pt("webkit"),rt=Pt("android"),it=Pt("android 2")||Pt("android 3"),ot=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),at=rt&&Pt("Google")&&ot<537&&!("AudioNode"in window),st=!!window.opera,lt=Pt("chrome"),ct=Pt("gecko")&&!nt&&!st&&!K,ut=!lt&&Pt("safari"),dt=Pt("phantom"),ht="OTransition"in Q,ft=0===navigator.platform.indexOf("Win"),pt=K&&"transition"in Q,gt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!it,mt="MozPerspective"in Q,vt=!window.L_DISABLE_3D&&(pt||gt||mt)&&!ht&&!dt,yt="undefined"!=typeof orientation||Pt("mobile"),_t=yt&&nt,xt=yt&&gt,bt=!window.PointerEvent&&window.MSPointerEvent,wt=!(!window.PointerEvent&&!bt),kt=!window.L_NO_TOUCH&&(wt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Tt=yt&&st,Mt=yt&&ct,At=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Lt=!!document.createElement("canvas").getContext,St=!(!document.createElementNS||!$("svg").createSVGRect),Ct=!St&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function Pt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var zt=(Object.freeze||Object)({ie:K,ielt9:tt,edge:et,webkit:nt,android:rt,android23:it,androidStock:at,opera:st,chrome:lt,gecko:ct,safari:ut,phantom:dt,opera12:ht,win:ft,ie3d:pt,webkit3d:gt,gecko3d:mt,any3d:vt,mobile:yt,mobileWebkit:_t,mobileWebkit3d:xt,msPointer:bt,pointer:wt,touch:kt,mobileOpera:Tt,mobileGecko:Mt,retina:At,canvas:Lt,svg:St,vml:Ct}),Dt=bt?"MSPointerDown":"pointerdown",Et=bt?"MSPointerMove":"pointermove",Ot=bt?"MSPointerUp":"pointerup",It=bt?"MSPointerCancel":"pointercancel",jt=["INPUT","SELECT","OPTION"],Nt={},Rt=!1,Bt=0;function Ft(t,e,n,r){var o,a,s,l,c,u,d,h,f,p;return"touchstart"===e?(d=t,h=n,f=r,p=i(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(jt.indexOf(t.target.tagName)<0))return;ie(t)}Vt(t,h)}),d["_leaflet_touchstart"+f]=p,d.addEventListener(Dt,p,!1),Rt||(document.documentElement.addEventListener(Dt,Ht,!0),document.documentElement.addEventListener(Et,qt,!0),document.documentElement.addEventListener(Ot,Zt,!0),document.documentElement.addEventListener(It,Zt,!0),Rt=!0)):"touchmove"===e?(c=n,u=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&Vt(t,c)},(l=t)["_leaflet_touchmove"+r]=u,l.addEventListener(Et,u,!1)):"touchend"===e&&(a=n,s=function(t){Vt(t,a)},(o=t)["_leaflet_touchend"+r]=s,o.addEventListener(Ot,s,!1),o.addEventListener(It,s,!1)),this}function Ht(t){Nt[t.pointerId]=t,Bt++}function qt(t){Nt[t.pointerId]&&(Nt[t.pointerId]=t)}function Zt(t){delete Nt[t.pointerId],Bt--}function Vt(t,e){for(var n in t.touches=[],Nt)t.touches.push(Nt[n]);t.changedTouches=[t],e(t)}var Ut=bt?"MSPointerDown":wt?"pointerdown":"touchstart",Wt=bt?"MSPointerUp":wt?"pointerup":"touchend",Gt="_leaflet_";function Xt(t,e,n){var r,i,o=!1,a=250;function s(t){var e;if(wt){if(!et||"mouse"===t.pointerType)return;e=Bt}else e=t.touches.length;if(!(e>1)){var n=Date.now(),s=n-(r||n);i=t.touches?t.touches[0]:t,o=s>0&&s<=a,r=n}}function l(t){if(o&&!i.cancelBubble){if(wt){if(!et||"mouse"===t.pointerType)return;var n,a,s={};for(a in i)n=i[a],s[a]=n&&n.bind?n.bind(i):n;i=s}i.type="dblclick",e(i),r=null}}return t[Gt+Ut+n]=s,t[Gt+Wt+n]=l,t[Gt+"dblclick"+n]=e,t.addEventListener(Ut,s,!1),t.addEventListener(Wt,l,!1),t.addEventListener("dblclick",e,!1),this}function Yt(t,e){var n=t[Gt+Ut+e],r=t[Gt+Wt+e],i=t[Gt+"dblclick"+e];return t.removeEventListener(Ut,n,!1),t.removeEventListener(Wt,r,!1),et||t.removeEventListener("dblclick",i,!1),this}function $t(t,e,n,r){if("object"==typeof e)for(var i in e)Kt(t,i,e[i],n);else for(var o=0,a=(e=h(e)).length;o<a;o++)Kt(t,e[o],n,r);return this}var Jt="_leaflet_events";function Qt(t,e,n,r){if("object"==typeof e)for(var i in e)te(t,i,e[i],n);else if(e)for(var o=0,a=(e=h(e)).length;o<a;o++)te(t,e[o],n,r);else{for(var s in t[Jt])te(t,s,t[Jt][s]);delete t[Jt]}return this}function Kt(t,e,n,r){var i=e+a(n)+(r?"_"+a(r):"");if(t[Jt]&&t[Jt][i])return this;var o=function(e){return n.call(r||t,e||window.event)},s=o;wt&&0===e.indexOf("touch")?Ft(t,e,o,i):!kt||"dblclick"!==e||!Xt||wt&&lt?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",o,!1):"mouseenter"===e||"mouseleave"===e?(o=function(e){e=e||window.event,fe(t,e)&&s(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",o,!1)):("click"===e&&rt&&(o=function(t){!function(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,r=ce&&n-ce;if(r&&r>100&&r<500||t.target._simulatedClick&&!t._simulated)return void oe(t);ce=n,e(t)}(t,s)}),t.addEventListener(e,o,!1)):"attachEvent"in t&&t.attachEvent("on"+e,o):Xt(t,o,i),t[Jt]=t[Jt]||{},t[Jt][i]=o}function te(t,e,n,r){var i,o,s,l=e+a(n)+(r?"_"+a(r):""),c=t[Jt]&&t[Jt][l];if(!c)return this;wt&&0===e.indexOf("touch")?(s=(i=t)["_leaflet_"+(o=e)+l],"touchstart"===o?i.removeEventListener(Dt,s,!1):"touchmove"===o?i.removeEventListener(Et,s,!1):"touchend"===o&&(i.removeEventListener(Ot,s,!1),i.removeEventListener(It,s,!1))):!kt||"dblclick"!==e||!Yt||wt&&lt?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",c,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,c,!1):"detachEvent"in t&&t.detachEvent("on"+e,c):Yt(t,l),t[Jt][l]=null}function ee(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,he(t),this}function ne(t){return Kt(t,"mousewheel",ee),this}function re(t){return $t(t,"mousedown touchstart dblclick",ee),Kt(t,"click",de),this}function ie(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function oe(t){return ie(t),ee(t),this}function ae(t,e){if(!e)return new D(t.clientX,t.clientY);var n=e.getBoundingClientRect(),r=n.width/e.offsetWidth||1,i=n.height/e.offsetHeight||1;return new D(t.clientX/r-n.left-e.clientLeft,t.clientY/i-n.top-e.clientTop)}var se=ft&&lt?2*window.devicePixelRatio:ct?window.devicePixelRatio:1;function le(t){return et?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/se:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var ce,ue={};function de(t){ue[t.type]=!0}function he(t){var e=ue[t.type];return ue[t.type]=!1,e}function fe(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var pe,ge,me,ve,ye,_e=(Object.freeze||Object)({on:$t,off:Qt,stopPropagation:ee,disableScrollPropagation:ne,disableClickPropagation:re,preventDefault:ie,stop:oe,getMousePosition:ae,getWheelDelta:le,fakeStop:de,skipped:he,isExternalTarget:fe,addListener:$t,removeListener:Qt}),xe=je(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),be=je(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),we="webkitTransition"===be||"OTransition"===be?be+"End":"transitionend";function ke(t){return"string"==typeof t?document.getElementById(t):t}function Te(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(t,null);n=r?r[e]:null}return"auto"===n?null:n}function Me(t,e,n){var r=document.createElement(t);return r.className=e||"",n&&n.appendChild(r),r}function Ae(t){var e=t.parentNode;e&&e.removeChild(t)}function Le(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Se(t){var e=t.parentNode;e.lastChild!==t&&e.appendChild(t)}function Ce(t){var e=t.parentNode;e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function Pe(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=Oe(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function ze(t,e){if(void 0!==t.classList)for(var n=h(e),r=0,i=n.length;r<i;r++)t.classList.add(n[r]);else if(!Pe(t,e)){var o=Oe(t);Ee(t,(o?o+" ":"")+e)}}function De(t,e){void 0!==t.classList?t.classList.remove(e):Ee(t,d((" "+Oe(t)+" ").replace(" "+e+" "," ")))}function Ee(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function Oe(t){return void 0===t.className.baseVal?t.className:t.className.baseVal}function Ie(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(r)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+r+"(opacity="+e+")"}(t,e)}function je(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function Ne(t,e,n){var r=e||new D(0,0);t.style[xe]=(pt?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function Re(t,e){t._leaflet_pos=e,vt?Ne(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Be(t){return t._leaflet_pos||new D(0,0)}if("onselectstart"in document)pe=function(){$t(window,"selectstart",ie)},ge=function(){Qt(window,"selectstart",ie)};else{var Fe=je(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);pe=function(){if(Fe){var t=document.documentElement.style;me=t[Fe],t[Fe]="none"}},ge=function(){Fe&&(document.documentElement.style[Fe]=me,me=void 0)}}function He(){$t(window,"dragstart",ie)}function qe(){Qt(window,"dragstart",ie)}function Ze(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Ve(),ve=t,ye=t.style.outline,t.style.outline="none",$t(window,"keydown",Ve))}function Ve(){ve&&(ve.style.outline=ye,ve=void 0,ye=void 0,Qt(window,"keydown",Ve))}var Ue=(Object.freeze||Object)({TRANSFORM:xe,TRANSITION:be,TRANSITION_END:we,get:ke,getStyle:Te,create:Me,remove:Ae,empty:Le,toFront:Se,toBack:Ce,hasClass:Pe,addClass:ze,removeClass:De,setClass:Ee,getClass:Oe,setOpacity:Ie,testProp:je,setTransform:Ne,setPosition:Re,getPosition:Be,disableTextSelection:pe,enableTextSelection:ge,disableImageDrag:He,enableImageDrag:qe,preventOutline:Ze,restoreOutline:Ve}),We=z.extend({run:function(t,e,n,r){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=Be(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),Re(this._el,n),this.fire("step")},_complete:function(){A(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ge=z.extend({options:{crs:X,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=f(this,e),this._initContainer(t),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(F(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=be&&vt&&!Tt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),$t(this._proxy,we,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,r){if((e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(F(t),e,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&!0!==r)&&(void 0!==r.animate&&(r.zoom=n({animate:r.animate},r.zoom),r.pan=n({animate:r.animate,duration:r.duration},r.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,r.zoom):this._tryAnimatedPan(t,r.pan)))return clearTimeout(this._sizeTimer),this;return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var r=this.getZoomScale(e),i=this.getSize().divideBy(2),o=(t instanceof D?t:this.latLngToContainerPoint(t)).subtract(i).multiplyBy(1-1/r),a=this.containerPointToLatLng(i.add(o));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():R(t);var n=O(e.paddingTopLeft||e.padding||[0,0]),r=O(e.paddingBottomRight||e.padding||[0,0]),i=this.getBoundsZoom(t,!1,n.add(r));if((i="number"==typeof e.maxZoom?Math.min(e.maxZoom,i):i)===1/0)return{center:t.getCenter(),zoom:i};var o=r.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),i),s=this.project(t.getNorthEast(),i);return{center:this.unproject(a.add(s).divideBy(2).add(o),i),zoom:i}},fitBounds:function(t,e){if(!(t=R(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=O(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new We,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){ze(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!vt)return this.setView(t,e,n);this._stop();var r=this.project(this.getCenter()),i=this.project(t),o=this.getSize(),a=this._zoom;t=F(t),e=void 0===e?a:e;var s=Math.max(o.x,o.y),l=s*this.getZoomScale(a,e),c=i.distanceTo(r)||1,u=1.42,d=u*u;function h(t){var e=(l*l-s*s+(t?-1:1)*d*d*c*c)/(2*(t?l:s)*d*c),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function f(t){return(Math.exp(t)-Math.exp(-t))/2}function p(t){return(Math.exp(t)+Math.exp(-t))/2}var g=h(0);function m(t){return s*(p(g)*(f(e=g+u*t)/p(e))-f(g))/d;var e}var v=Date.now(),y=(h(1)-g)/u,_=n.duration?1e3*n.duration:1e3*y*.8;return this._moveStart(!0,n.noMoveStart),function n(){var o,l,d=(Date.now()-v)/_,h=(o=d,(1-Math.pow(1-o,1.5))*y);d<=1?(this._flyToFrame=M(n,this),this._move(this.unproject(r.add(i.subtract(r).multiplyBy(m(h)/c)),a),this.getScaleZoom(s/(l=h,s*(p(g)/p(g+u*l))),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=R(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,R(t));return n.equals(r)||this.panTo(r,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),o=e.divideBy(2).round(),a=r.divideBy(2).round(),s=o.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=i(this._handleGeolocationResponse,this),r=i(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,r,t):navigator.geolocation.getCurrentPosition(e,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=new B(t.coords.latitude,t.coords.longitude),n=e.toBounds(t.coords.accuracy),r=this._locateOptions;if(r.setView){var i=this.getBoundsZoom(n);this.setView(e,r.maxZoom?Math.min(i,r.maxZoom):i)}var o={latlng:e,bounds:n,timestamp:t.timestamp};for(var a in t.coords)"number"==typeof t.coords[a]&&(o[a]=t.coords[a]);this.fire("locationfound",o)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),Ae(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)Ae(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=Me("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new N(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=R(t),n=O(n||[0,0]);var r=this.getZoom()||0,i=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(n),c=j(this.project(s,r),this.project(a,r)).getSize(),u=vt?this.options.zoomSnap:1,d=l.x/c.x,h=l.y/c.y,f=e?Math.max(d,h):Math.min(d,h);return r=this.getScaleZoom(f,r),u&&(r=Math.round(r/(u/100))*(u/100),r=e?Math.ceil(r/u)*u:Math.floor(r/u)*u),Math.max(i,Math.min(o,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new D(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new I(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var r=n.zoom(t*n.scale(e));return isNaN(r)?1/0:r},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(F(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(O(t),e)},layerPointToLatLng:function(t){var e=O(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(F(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(F(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(R(t))},distance:function(t,e){return this.options.crs.distance(F(t),F(e))},containerPointToLayerPoint:function(t){return O(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return O(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(O(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(F(t)))},mouseEventToContainerPoint:function(t){return ae(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=ke(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");$t(e,"scroll",this._onScroll,this),this._containerId=a(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&vt,ze(t,"leaflet-container"+(kt?" leaflet-touch":"")+(At?" leaflet-retina":"")+(tt?" leaflet-oldie":"")+(ut?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=Te(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Re(this._mapPane,new D(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ze(t.markerPane,"leaflet-zoom-hide"),ze(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){Re(this._mapPane,new D(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var r=this._zoom!==e;this._moveStart(r,!1)._move(t,e)._moveEnd(r),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var r=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return A(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Re(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[a(this._container)]=this;var e=t?Qt:$t;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),vt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){A(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,r=[],i="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,s=!1;o;){if((n=this._targets[a(o)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(e,!0)){if(i&&!fe(o,t))break;if(r.push(n),i)break}if(o===this._container)break;o=o.parentNode}return r.length||s||i||!fe(o,t)||(r=[this]),r},_handleDOMEvent:function(t){if(this._loaded&&!he(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e||Ze(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,r){if("click"===t.type){var i=n({},t);i.type="preclick",this._fireDOMEvent(i,i.type,r)}if(!t._stopped&&(r=(r||[]).concat(this._findEventTargets(t,e))).length){var o=r[0];"contextmenu"===e&&o.listens(e,!0)&&ie(t);var a={originalEvent:t};if("keypress"!==t.type){var s=o.getLatLng&&(!o._radius||o._radius<=10);a.containerPoint=s?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),a.layerPoint=this.containerPointToLayerPoint(a.containerPoint),a.latlng=s?o.getLatLng():this.layerPointToLatLng(a.layerPoint)}for(var l=0;l<r.length;l++)if(r[l].fire(e,a,!0),a.originalEvent._stopped||!1===r[l].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Be(this._mapPane)||new D(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(r)},_latLngBoundsToNewLayerBounds:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return j([this.project(t.getSouthWest(),e)._subtract(r),this.project(t.getNorthWest(),e)._subtract(r),this.project(t.getSouthEast(),e)._subtract(r),this.project(t.getNorthEast(),e)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var r=this.project(t,e),i=this.getSize().divideBy(2),o=new I(r.subtract(i),r.add(i)),a=this._getBoundsOffset(o,n,e);return a.round().equals([0,0])?t:this.unproject(r.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),r=new I(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(r,e))},_getBoundsOffset:function(t,e,n){var r=j(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),i=r.min.subtract(t.min),o=r.max.subtract(t.max);return new D(this._rebound(i.x,-o.x),this._rebound(i.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),r=vt?this.options.zoomSnap:1;return r&&(t=Math.round(t/r)*r),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){De(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n))&&(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=Me("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=xe,n=this._proxy.style[e];Ne(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var t=this.getCenter(),e=this.getZoom();Ne(this._proxy,this.project(t,e),this.getZoomScale(e,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ae(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(e),i=this._getCenterOffset(t)._divideBy(1-1/r);return!(!0!==n.animate&&!this.getSize().contains(i))&&(M(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,ze(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&De(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),M(function(){this._moveEnd(!0)},this))}});var Xe=C.extend({options:{position:"topright"},initialize:function(t){f(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),r=t._controlCorners[n];return ze(e,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e),this},remove:function(){return this._map?(Ae(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ye=function(t){return new Xe(t)};Ge.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=Me("div",e+"control-container",this._container);function r(r,i){var o=e+r+" "+e+i;t[r+i]=Me("div",o,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Ae(this._controlCorners[t]);Ae(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var $e=Xe.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,r){return n<r?-1:r<n?1:0}},initialize:function(t,e,n){for(var r in f(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[r],r);for(r in e)this._addLayer(e[r],r,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Xe.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(a(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){ze(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(ze(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):De(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return De(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=Me("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),re(e),ne(e);var r=this._form=Me("form",t+"-list");n&&(this._map.on("click",this.collapse,this),rt||$t(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var i=this._layersLink=Me("a",t+"-toggle",e);i.href="#",i.title="Layers",kt?($t(i,"click",oe),$t(i,"click",this.expand,this)):$t(i,"focus",this.expand,this),n||this.expand(),this._baseLayersList=Me("div",t+"-base",r),this._separator=Me("div",t+"-separator",r),this._overlaysList=Me("div",t+"-overlays",r),e.appendChild(r)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&a(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(i(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Le(this._baseLayersList),Le(this._overlaysList),this._layerControlInputs=[];var t,e,n,r,i=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),e=e||r.overlay,t=t||!r.overlay,i+=r.overlay?0:1;return this.options.hideSingleBase&&(t=t&&i>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(a(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(t){var e,n=document.createElement("label"),r=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=r):e=this._createRadioElement("leaflet-base-layers",r),this._layerControlInputs.push(e),e.layerId=a(t.layer),$t(e,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+t.name;var o=document.createElement("div");return n.appendChild(o),o.appendChild(e),o.appendChild(i),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,r=[],i=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?r.push(e):t.checked||i.push(e);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])&&this._map.removeLayer(i[o]);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])||this._map.addLayer(r[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,r=this._map.getZoom(),i=n.length-1;i>=0;i--)t=n[i],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&r<e.options.minZoom||void 0!==e.options.maxZoom&&r>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Je=Xe.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=Me("div",e+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,r,i){var o=Me("a",n,r);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),re(o),$t(o,"click",oe),$t(o,"click",i,this),$t(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";De(this._zoomInButton,e),De(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&ze(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&ze(this._zoomInButton,e)}});Ge.mergeOptions({zoomControl:!0}),Ge.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Je,this.addControl(this.zoomControl))});var Qe=Xe.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=Me("div",e),r=this.options;return this._addScales(r,e+"-line",n),t.on(r.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=Me("div",e,n)),t.imperial&&(this._iScale=Me("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,r,i=3.2808399*t;i>5280?(e=i/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" ft",r/i))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),Ke=Xe.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){f(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=Me("div","leaflet-control-attribution"),re(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});Ge.mergeOptions({attributionControl:!0}),Ge.addInitHook(function(){this.options.attributionControl&&(new Ke).addTo(this)});Xe.Layers=$e,Xe.Zoom=Je,Xe.Scale=Qe,Xe.Attribution=Ke,Ye.layers=function(t,e,n){return new $e(t,e,n)},Ye.zoom=function(t){return new Je(t)},Ye.scale=function(t){return new Qe(t)},Ye.attribution=function(t){return new Ke(t)};var tn=C.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});tn.addTo=function(t,e){return t.addHandler(e,this),this};var en,nn={Events:P},rn=kt?"touchstart mousedown":"mousedown",on={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},an={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},sn=z.extend({options:{clickTolerance:3},initialize:function(t,e,n,r){f(this,r),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||($t(this._dragStartTarget,rn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(sn._dragging===this&&this.finishDrag(),Qt(this._dragStartTarget,rn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!Pe(this._element,"leaflet-zoom-anim")&&!(sn._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(sn._dragging=this,this._preventOutline&&Ze(this._element),He(),pe(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new D(e.clientX,e.clientY),$t(document,an[t.type],this._onMove,this),$t(document,on[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new D(e.clientX,e.clientY).subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(ie(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=Be(this._element).subtract(n),ze(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ze(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,A(this._animRequest),this._lastEvent=t,this._animRequest=M(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Re(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in De(document.body,"leaflet-dragging"),this._lastTarget&&(De(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),an)Qt(document,an[t],this._onMove,this),Qt(document,on[t],this._onUp,this);qe(),ge(),this._moved&&this._moving&&(A(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,sn._dragging=!1}});function ln(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=function(t,e){var n=t.length,r=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,function t(e,n,r,i,o){var a,s,l,c=0;for(s=i+1;s<=o-1;s++)(l=fn(e[s],e[i],e[o],!0))>c&&(a=s,c=l);c>r&&(n[a]=1,t(e,n,r,i,a),t(e,n,r,a,o))}(t,r,e,0,n-1);var i,o=[];for(i=0;i<n;i++)r[i]&&o.push(t[i]);return o}(t=function(t,e){for(var n=[t[0]],r=1,i=0,o=t.length;r<o;r++)a=t[r],s=t[i],void 0,void 0,l=s.x-a.x,c=s.y-a.y,l*l+c*c>e&&(n.push(t[r]),i=r);var a,s,l,c;i<o-1&&n.push(t[o-1]);return n}(t,n),n)}function cn(t,e,n){return Math.sqrt(fn(t,e,n,!0))}function un(t,e,n,r,i){var o,a,s,l=r?en:hn(t,n),c=hn(e,n);for(en=c;;){if(!(l|c))return[t,e];if(l&c)return!1;s=hn(a=dn(t,e,o=l||c,n,i),n),o===l?(t=a,l=s):(e=a,c=s)}}function dn(t,e,n,r,i){var o,a,s=e.x-t.x,l=e.y-t.y,c=r.min,u=r.max;return 8&n?(o=t.x+s*(u.y-t.y)/l,a=u.y):4&n?(o=t.x+s*(c.y-t.y)/l,a=c.y):2&n?(o=u.x,a=t.y+l*(u.x-t.x)/s):1&n&&(o=c.x,a=t.y+l*(c.x-t.x)/s),new D(o,a,i)}function hn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function fn(t,e,n,r){var i,o=e.x,a=e.y,s=n.x-o,l=n.y-a,c=s*s+l*l;return c>0&&((i=((t.x-o)*s+(t.y-a)*l)/c)>1?(o=n.x,a=n.y):i>0&&(o+=s*i,a+=l*i)),s=t.x-o,l=t.y-a,r?s*s+l*l:new D(o,a)}function pn(t){return!v(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function gn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),pn(t)}var mn=(Object.freeze||Object)({simplify:ln,pointToSegmentDistance:cn,closestPointOnSegment:function(t,e,n){return fn(t,e,n)},clipSegment:un,_getEdgeIntersection:dn,_getBitCode:hn,_sqClosestPointOnSegment:fn,isFlat:pn,_flat:gn});function vn(t,e,n){var r,i,o,a,s,l,c,u,d,h=[1,4,2,8];for(i=0,c=t.length;i<c;i++)t[i]._code=hn(t[i],e);for(a=0;a<4;a++){for(u=h[a],r=[],i=0,o=(c=t.length)-1;i<c;o=i++)s=t[i],l=t[o],s._code&u?l._code&u||((d=dn(l,s,u,e,n))._code=hn(d,e),r.push(d)):(l._code&u&&((d=dn(l,s,u,e,n))._code=hn(d,e),r.push(d)),r.push(s));t=r}return t}var yn,_n=(Object.freeze||Object)({clipPolygon:vn}),xn={project:function(t){return new D(t.lng,t.lat)},unproject:function(t){return new B(t.y,t.x)},bounds:new I([-180,-90],[180,90])},bn={R:6378137,R_MINOR:6356752.314245179,bounds:new I([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,r=t.lat*e,i=this.R_MINOR/n,o=Math.sqrt(1-i*i),a=o*Math.sin(r),s=Math.tan(Math.PI/4-r/2)/Math.pow((1-a)/(1+a),o/2);return r=-n*Math.log(Math.max(s,1e-10)),new D(t.lng*e*n,r)},unproject:function(t){for(var e,n=180/Math.PI,r=this.R,i=this.R_MINOR/r,o=Math.sqrt(1-i*i),a=Math.exp(-t.y/r),s=Math.PI/2-2*Math.atan(a),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)e=o*Math.sin(s),e=Math.pow((1-e)/(1+e),o/2),s+=c=Math.PI/2-2*Math.atan(a*e)-s;return new B(s*n,t.x*n/r)}},wn=(Object.freeze||Object)({LonLat:xn,Mercator:bn,SphericalMercator:V}),kn=n({},Z,{code:"EPSG:3395",projection:bn,transformation:(yn=.5/(Math.PI*bn.R),W(yn,.5,-yn,.5))}),Tn=n({},Z,{code:"EPSG:4326",projection:xn,transformation:W(1/180,1,-1/180,.5)}),Mn=n({},q,{projection:xn,transformation:W(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,r=e.lat-t.lat;return Math.sqrt(n*n+r*r)},infinite:!0});q.Earth=Z,q.EPSG3395=kn,q.EPSG3857=X,q.EPSG900913=Y,q.EPSG4326=Tn,q.Simple=Mn;var An=z.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[a(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[a(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Ge.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=a(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=a(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&a(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?v(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[a(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=a(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var i=this._zoomBoundLayers[r].options;t=void 0===i.minZoom?t:Math.min(t,i.minZoom),e=void 0===i.maxZoom?e:Math.max(e,i.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ln=An.extend({initialize:function(t,e){var n,r;if(f(this,e),this._layers={},t)for(n=0,r=t.length;n<r;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,r=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,r);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return a(t)}}),Sn=Ln.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Ln.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Ln.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new N;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Cn=C.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){f(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(r,t),r},_setIconStyles:function(t,e){var n=this.options,r=n[e+"Size"];"number"==typeof r&&(r=[r,r]);var i=O(r),o=O("shadow"===e&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),i&&(t.style.width=i.x+"px",t.style.height=i.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return At&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});var Pn=Cn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Pn.imagePath||(Pn.imagePath=this._detectIconPath()),(this.options.imagePath||Pn.imagePath)+Cn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=Me("div","leaflet-default-icon-path",document.body),e=Te(t,"background-image")||Te(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),zn=tn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new sn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ze(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&De(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,r=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,o=L.DomUtil.getPosition(e._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),l=j(a.min._subtract(s).add(i),a.max._subtract(s).subtract(i));if(!l.contains(o)){var c=O((Math.max(l.max.x,o.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(r);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),L.DomUtil.setPosition(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=M(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(A(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,r=Be(e._icon),i=e._map.layerPointToLatLng(r);n&&Re(n,r),e._latlng=i,t.latlng=i,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){A(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Dn=An.extend({options:{icon:new Pn,interactive:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1},initialize:function(t,e){f(this,e),this._latlng=F(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=F(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),ze(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var i=t.icon.createShadow(this._shadow),o=!1;i!==this._shadow&&(this._removeShadow(),o=!0),i&&(ze(i,e),i.alt=""),this._shadow=i,t.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&o&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),Ae(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ae(this._shadow),this._shadow=null},_setPos:function(t){Re(this._icon,t),this._shadow&&Re(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(ze(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),zn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new zn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;Ie(this._icon,t),this._shadow&&Ie(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var En=An.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return f(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),On=En.extend({options:{fill:!0,radius:10},initialize:function(t,e){f(this,e),this._latlng=F(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=F(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return En.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),r=[t+n,e+n];this._pxBounds=new I(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var In=On.extend({initialize:function(t,e,r){if("number"==typeof e&&(e=n({},r,{radius:e})),f(this,e),this._latlng=F(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new N(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:En.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===Z.distance){var i=Math.PI/180,o=this._mRadius/Z.R/i,a=n.project([e+o,t]),s=n.project([e-o,t]),l=a.add(s).divideBy(2),c=n.unproject(l).lat,u=Math.acos((Math.cos(o*i)-Math.sin(e*i)*Math.sin(c*i))/(Math.cos(e*i)*Math.cos(c*i)))/i;(isNaN(u)||0===u)&&(u=o/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-n.project([c,t-u]).x,this._radiusY=l.y-a.y}else{var d=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(d).x}this._updateBounds()}});var jn=En.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){f(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,r=1/0,i=null,o=fn,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],c=1,u=l.length;c<u;c++){var d=o(t,e=l[c-1],n=l[c],!0);d<r&&(r=d,i=o(t,e,n))}return i&&(i.distance=Math.sqrt(r)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,o,a,s=this._rings[0],l=s.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,r=0;t<l-1;t++)if(i=s[t],o=s[t+1],(r+=n=i.distanceTo(o))>e)return a=(r-e)/n,this._map.layerPointToLatLng([o.x-a*(o.x-i.x),o.y-a*(o.y-i.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=F(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new N,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return pn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=pn(t),r=0,i=t.length;r<i;r++)n?(e[r]=F(t[r]),this._bounds.extend(e[r])):e[r]=this._convertLatLngs(t[r]);return e},_project:function(){var t=new I;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),n=new D(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(n),t.max._add(n),this._pxBounds=t)},_projectLatlngs:function(t,e,n){var r,i,o=t[0]instanceof B,a=t.length;if(o){for(i=[],r=0;r<a;r++)i[r]=this._map.latLngToLayerPoint(t[r]),n.extend(i[r]);e.push(i)}else for(r=0;r<a;r++)this._projectLatlngs(t[r],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,r,i,o,a,s,l=this._parts;for(e=0,r=0,i=this._rings.length;e<i;e++)for(n=0,o=(s=this._rings[e]).length;n<o-1;n++)(a=un(s[n],s[n+1],t,n,!0))&&(l[r]=l[r]||[],l[r].push(a[0]),a[1]===s[n+1]&&n!==o-2||(l[r].push(a[1]),r++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,r=t.length;n<r;n++)t[n]=ln(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,r,i,o,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(r=0,i=(a=(s=this._parts[n]).length)-1;r<a;i=r++)if((e||0!==r)&&cn(t,s[i],s[r])<=l)return!0;return!1}});jn._flat=gn;var Nn=jn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,o,a,s,l,c=this._rings[0],u=c.length;if(!u)return null;for(o=a=s=0,t=0,e=u-1;t<u;e=t++)n=c[t],r=c[e],i=n.y*r.x-r.y*n.x,a+=(n.x+r.x)*i,s+=(n.y+r.y)*i,o+=3*i;return l=0===o?c[0]:[a/o,s/o],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=jn.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof B&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){jn.prototype._setLatLngs.call(this,t),pn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return pn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new D(e,e);if(t=new I(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var r,i=0,o=this._rings.length;i<o;i++)(r=vn(this._rings[i],t,!0)).length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,r,i,o,a,s,l,c=!1;if(!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;i<s;i++)for(o=0,a=(l=(e=this._parts[i]).length)-1;o<l;a=o++)n=e[o],r=e[a],n.y>t.y!=r.y>t.y&&t.x<(r.x-n.x)*(t.y-n.y)/(r.y-n.y)+n.x&&(c=!c);return c||jn.prototype._containsPoint.call(this,t,!0)}});var Rn=Sn.extend({initialize:function(t,e){f(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,r,i=v(t)?t:t.features;if(i){for(e=0,n=i.length;e<n;e++)((r=i[e]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=Bn(t,o);return a?(a.feature=Un(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}});function Bn(t,e){var n,r,i,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,l=[],c=e&&e.pointToLayer,u=e&&e.coordsToLatLng||Fn;if(!s&&!a)return null;switch(a.type){case"Point":return n=u(s),c?c(t,n):new Dn(n);case"MultiPoint":for(i=0,o=s.length;i<o;i++)n=u(s[i]),l.push(c?c(t,n):new Dn(n));return new Sn(l);case"LineString":case"MultiLineString":return r=Hn(s,"LineString"===a.type?0:1,u),new jn(r,e);case"Polygon":case"MultiPolygon":return r=Hn(s,"Polygon"===a.type?1:2,u),new Nn(r,e);case"GeometryCollection":for(i=0,o=a.geometries.length;i<o;i++){var d=Bn({geometry:a.geometries[i],type:"Feature",properties:t.properties},e);d&&l.push(d)}return new Sn(l);default:throw new Error("Invalid GeoJSON object.")}}function Fn(t){return new B(t[1],t[0],t[2])}function Hn(t,e,n){for(var r,i=[],o=0,a=t.length;o<a;o++)r=e?Hn(t[o],e-1,n):(n||Fn)(t[o]),i.push(r);return i}function qn(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[u(t.lng,e),u(t.lat,e),u(t.alt,e)]:[u(t.lng,e),u(t.lat,e)]}function Zn(t,e,n,r){for(var i=[],o=0,a=t.length;o<a;o++)i.push(e?Zn(t[o],e-1,n,r):qn(t[o],r));return!e&&n&&i.push(i[0]),i}function Vn(t,e){return t.feature?n({},t.feature,{geometry:e}):Un(e)}function Un(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Wn={toGeoJSON:function(t){return Vn(this,{type:"Point",coordinates:qn(this.getLatLng(),t)})}};function Gn(t,e){return new Rn(t,e)}Dn.include(Wn),In.include(Wn),On.include(Wn),jn.include({toGeoJSON:function(t){var e=!pn(this._latlngs);return Vn(this,{type:(e?"Multi":"")+"LineString",coordinates:Zn(this._latlngs,e?1:0,!1,t)})}}),Nn.include({toGeoJSON:function(t){var e=!pn(this._latlngs),n=e&&!pn(this._latlngs[0]),r=Zn(this._latlngs,n?2:e?1:0,!0,t);return e||(r=[r]),Vn(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),Ln.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),Vn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,r=[];return this.eachLayer(function(e){if(e.toGeoJSON){var i=e.toGeoJSON(t);if(n)r.push(i.geometry);else{var o=Un(i);"FeatureCollection"===o.type?r.push.apply(r,o.features):r.push(o)}}}),n?Vn(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});var Xn=Gn,Yn=An.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=R(e),f(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ze(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ae(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Se(this._image),this},bringToBack:function(){return this._map&&Ce(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=R(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:Me("img");ze(e,"leaflet-image-layer"),this._zoomAnimated&&ze(e,"leaflet-zoom-animated"),this.options.className&&ze(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onload=i(this.fire,this,"load"),e.onerror=i(this._overlayOnError,this,"error"),this.options.crossOrigin&&(e.crossOrigin=""),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Ne(this._image,n,e)},_reset:function(){var t=this._image,e=new I(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();Re(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){Ie(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),$n=Yn.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:Me("video");if(ze(e,"leaflet-image-layer"),this._zoomAnimated&&ze(e,"leaflet-zoom-animated"),e.onselectstart=c,e.onmousemove=c,e.onloadeddata=i(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),r=[],o=0;o<n.length;o++)r.push(n[o].src);this._url=n.length>0?r:[e.src]}else{v(this._url)||(this._url=[this._url]),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var a=0;a<this._url.length;a++){var s=Me("source");s.src=this._url[a],e.appendChild(s)}}}});var Jn=An.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){f(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Ie(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Ie(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(Ie(this._container,0),this._removeTimeout=setTimeout(i(Ae,void 0,this._container),200)):Ae(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=F(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Se(this._container),this},bringToBack:function(){return this._map&&Ce(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=O(this.options.offset),n=this._getAnchor();this._zoomAnimated?Re(this._container,t.add(n)):e=e.add(t).add(n);var r=this._containerBottom=-e.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=r+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}}),Qn=Jn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Jn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof En||this._source.on("preclick",ee))},onRemove:function(t){Jn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof En||this._source.off("preclick",ee))},getEvents:function(){var t=Jn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=Me("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=Me("div",t+"-content-wrapper",e);if(this._contentNode=Me("div",t+"-content",n),re(n),ne(this._contentNode),$t(n,"contextmenu",ee),this._tipContainer=Me("div",t+"-tip-container",e),this._tip=Me("div",t+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=Me("a",t+"-close-button",e);r.href="#close",r.innerHTML="&#215;",$t(r,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var r=t.offsetHeight,i=this.options.maxHeight,o="leaflet-popup-scrolled";i&&r>i?(e.height=i+"px",ze(t,o)):De(t,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();Re(this._container,e.add(n))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(Te(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,r=this._containerWidth,i=new D(this._containerLeft,-n-this._containerBottom);i._add(Be(this._container));var o=t.layerPointToContainerPoint(i),a=O(this.options.autoPanPadding),s=O(this.options.autoPanPaddingTopLeft||a),l=O(this.options.autoPanPaddingBottomRight||a),c=t.getSize(),u=0,d=0;o.x+r+l.x>c.x&&(u=o.x+r-c.x+l.x),o.x-u-s.x<0&&(u=o.x-s.x),o.y+n+l.y>c.y&&(d=o.y+n-c.y+l.y),o.y-d-s.y<0&&(d=o.y-s.y),(u||d)&&t.fire("autopanstart").panBy([u,d])}},_onCloseButtonClick:function(t){this._close(),oe(t)},_getAnchor:function(){return O(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ge.mergeOptions({closePopupOnClick:!0}),Ge.include({openPopup:function(t,e,n){return t instanceof Qn||(t=new Qn(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),An.include({bindPopup:function(t,e){return t instanceof Qn?(f(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new Qn(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof An||(e=t,t=this),t instanceof Sn)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(oe(t),e instanceof En?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Kn=Jn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Jn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Jn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Jn.prototype.getEvents.call(this);return kt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Me("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,r=e.latLngToContainerPoint(e.getCenter()),i=e.layerPointToContainerPoint(t),o=this.options.direction,a=n.offsetWidth,s=n.offsetHeight,l=O(this.options.offset),c=this._getAnchor();"top"===o?t=t.add(O(-a/2+l.x,-s+l.y+c.y,!0)):"bottom"===o?t=t.subtract(O(a/2-l.x,-l.y,!0)):"center"===o?t=t.subtract(O(a/2+l.x,s/2-c.y+l.y,!0)):"right"===o||"auto"===o&&i.x<r.x?(o="right",t=t.add(O(l.x+c.x,c.y-s/2+l.y,!0))):(o="left",t=t.subtract(O(a+c.x-l.x,s/2-c.y-l.y,!0))),De(n,"leaflet-tooltip-right"),De(n,"leaflet-tooltip-left"),De(n,"leaflet-tooltip-top"),De(n,"leaflet-tooltip-bottom"),ze(n,"leaflet-tooltip-"+o),Re(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Ie(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return O(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ge.include({openTooltip:function(t,e,n){return t instanceof Kn||(t=new Kn(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),An.include({bindTooltip:function(t,e){return t instanceof Kn?(f(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new Kn(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),kt&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof An||(e=t,t=this),t instanceof Sn)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(ze(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(De(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,r=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}});var tr=Cn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var r=O(n.bgPos);e.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});Cn.Default=Pn;var er=An.extend({options:{tileSize:256,opacity:1,updateWhenIdle:yt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){f(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Ae(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Se(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ce(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof D?t:new D(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,r=-t(-1/0,1/0),i=0,o=n.length;i<o;i++)e=n[i].style.zIndex,n[i]!==this._container&&e&&(r=t(r,+e));isFinite(r)&&(this.options.zIndex=r+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!tt){Ie(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var r in this._tiles){var i=this._tiles[r];if(i.current&&i.loaded){var o=Math.min(1,(t-i.loaded)/200);Ie(i.el,o),o<1?e=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(A(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=Me("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(Ae(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[t],i=this._map;return r||((r=this._levels[t]={}).el=Me("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=e,r.origin=i.project(i.unproject(i.getPixelOrigin()),t).round(),r.zoom=t,this._setZoomTransform(r,i.getCenter(),i.getZoom()),r.el.offsetWidth,this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var r=e.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Ae(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,r){var i=Math.floor(t/2),o=Math.floor(e/2),a=n-1,s=new D(+i,+o);s.z=+a;var l=this._tileCoordsToKey(s),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),a>r&&this._retainParent(i,o,a,r))},_retainChildren:function(t,e,n,r){for(var i=2*t;i<2*t+2;i++)for(var o=2*e;o<2*e+2;o++){var a=new D(i,o);a.z=n+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<r&&this._retainChildren(i,o,n+1,r))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,r){var i=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&i>this.options.maxZoom||void 0!==this.options.minZoom&&i<this.options.minZoom)&&(i=void 0);var o=this.options.updateWhenZooming&&i!==this._tileZoom;r&&!o||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==i&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var r=this._map.getZoomScale(n,t.zoom),i=t.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(e,n)).round();vt?Ne(t.el,i,r):Re(t.el,i)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],r).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],r).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],r).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),r=e.getZoomScale(n,this._tileZoom),i=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*r);return new I(i.subtract(o),i.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(t),i=this._pxBoundsToTileRange(r),o=i.getCenter(),a=[],s=this.options.keepBuffer,l=new I(i.getBottomLeft().subtract([s,-s]),i.getTopRight().add([s,-s]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var u=this._tiles[c].coords;u.z===this._tileZoom&&l.contains(new D(u.x,u.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var d=i.min.y;d<=i.max.y;d++)for(var h=i.min.x;h<=i.max.x;h++){var f=new D(h,d);if(f.z=this._tileZoom,this._isValidTile(f)){var p=this._tiles[this._tileCoordsToKey(f)];p?p.current=!0:a.push(f)}}if(a.sort(function(t,e){return t.distanceTo(o)-e.distanceTo(o)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var g=document.createDocumentFragment();for(h=0;h<a.length;h++)this._addTile(a[h],g);this._level.el.appendChild(g)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(t);return R(this.options.bounds).overlaps(r)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),r=t.scaleBy(n),i=r.add(n);return[e.unproject(r,t.z),e.unproject(i,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new N(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new D(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(at||e.el.setAttribute("src",_),Ae(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ze(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=c,t.onmousemove=c,tt&&this.options.opacity<1&&Ie(t,this.options.opacity),rt&&!it&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),r=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),i(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&M(i(this._tileReady,this,t,null,o)),Re(o,n),this._tiles[r]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){if(this._map){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var r=this._tileCoordsToKey(t);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(Ie(n.el,0),A(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(ze(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),tt||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new D(this._wrapX?l(t.x,this._wrapX):t.x,this._wrapY?l(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new I(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});var nr=er.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=f(this,e)).detectRetina&&At&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),rt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return $t(n,"load",i(this._tileOnLoad,this,e,n)),$t(n,"error",i(this._tileOnError,this,e,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:At?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=r),e["-y"]=r}return m(this._url,n(e,this.options))},_tileOnLoad:function(t,e){tt?setTimeout(i(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var r=this.options.errorTileUrl;r&&e.getAttribute("src")!==r&&(e.src=r),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=c,e.onerror=c,e.complete||(e.src=_,Ae(e),delete this._tiles[t]))}});function rr(t,e){return new nr(t,e)}var ir=nr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var r=n({},this.defaultWmsParams);for(var i in e)i in this.options||(r[i]=e[i]);var o=(e=f(this,e)).detectRetina&&At?2:1,a=this.getTileSize();r.width=a.x*o,r.height=a.y*o,this.wmsParams=r},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,nr.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,r=j(n.project(e[0]),n.project(e[1])),i=r.min,o=r.max,a=(this._wmsVersion>=1.3&&this._crs===Tn?[i.y,i.x,o.y,o.x]:[i.x,i.y,o.x,o.y]).join(","),s=L.TileLayer.prototype.getTileUrl.call(this,t);return s+p(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});nr.WMS=ir,rr.wms=function(t,e){return new ir(t,e)};var or=An.extend({options:{padding:.1,tolerance:0},initialize:function(t){f(this,t),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&ze(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),r=Be(this._container),i=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),a=this._map.project(t,e).subtract(o),s=i.multiplyBy(-n).add(r).add(i).subtract(a);vt?Ne(this._container,s,n):Re(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new I(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ar=or.extend({getEvents:function(){var t=or.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){or.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");$t(t,"mousemove",s(this._onMouseMove,32,this),this),$t(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),$t(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){delete this._ctx,Ae(this._container),Qt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},or.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),r=At?2:1;Re(e,t.min),e.width=r*n.x,e.height=r*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",At&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){or.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[a(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,r=e.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete t._order,delete this._layers[L.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,n=t.options.dashArray.split(","),r=[];for(e=0;e<n.length;e++)r.push(Number(n[e]));t.options._dashArray=r}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new I,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,r,i,o,a=t._parts,s=a.length,l=this._ctx;if(s){for(this._drawnLayers[t._leaflet_id]=t,l.beginPath(),n=0;n<s;n++){for(r=0,i=a[n].length;r<i;r++)o=a[n][r],l[r?"lineTo":"moveTo"](o.x,o.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,r=Math.max(Math.round(t._radius),1),i=(Math.max(Math.round(t._radiusY),1)||r)/r;this._drawnLayers[t._leaflet_id]=t,1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(e.x,e.y/i,r,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,r=this._map.mouseEventToLayerPoint(t),i=this._drawFirst;i;i=i.next)(e=i.layer).options.interactive&&e._containsPoint(r)&&!this._map._draggableMoved(e)&&(n=e);n&&(de(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(De(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var n,r,i=this._drawFirst;i;i=i.next)(n=i.layer).options.interactive&&n._containsPoint(e)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(ze(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order,n=e.next,r=e.prev;n&&(n.prev=r,r?r.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,n=e.next,r=e.prev;r&&(r.next=n,n?n.prev=r:r&&(this._drawLast=r),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}});function sr(t){return Lt?new ar(t):null}var lr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),cr={_initContainer:function(){this._container=Me("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(or.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=lr("shape");ze(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=lr("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;Ae(e),t.removeInteractiveTarget(e),delete this._layers[a(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,r=t.options,i=t._container;i.stroked=!!r.stroke,i.filled=!!r.fill,r.stroke?(e||(e=t._stroke=lr("stroke")),i.appendChild(e),e.weight=r.weight+"px",e.color=r.color,e.opacity=r.opacity,r.dashArray?e.dashStyle=v(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=r.lineCap.replace("butt","flat"),e.joinstyle=r.lineJoin):e&&(i.removeChild(e),t._stroke=null),r.fill?(n||(n=t._fill=lr("fill")),i.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(i.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),r=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+r+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){Se(t._container)},_bringToBack:function(t){Ce(t._container)}},ur=Ct?lr:$,dr=or.extend({getEvents:function(){var t=or.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=ur("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ur("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ae(this._container),Qt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){or.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),Re(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=ur("path");t.options.className&&ze(e,t.options.className),t.options.interactive&&ze(e,"leaflet-interactive"),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Ae(t._path),t.removeInteractiveTarget(t._path),delete this._layers[a(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,J(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),r="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",i=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(t,i)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){Se(t._path)},_bringToBack:function(t){Ce(t._path)}});function hr(t){return St||Ct?new dr(t):null}Ct&&dr.include(cr),Ge.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&sr()||hr()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=dr&&hr({pane:t})||ar&&sr({pane:t}),this._paneRenderers[t]=e),e}});var fr=Nn.extend({initialize:function(t,e){Nn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=R(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});dr.create=ur,dr.pointsToPath=J,Rn.geometryToLayer=Bn,Rn.coordsToLatLng=Fn,Rn.coordsToLatLngs=Hn,Rn.latLngToCoords=qn,Rn.latLngsToCoords=Zn,Rn.getFeature=Vn,Rn.asFeature=Un,Ge.mergeOptions({boxZoom:!0});var pr=tn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){$t(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Qt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ae(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),pe(),He(),this._startPoint=this._map.mouseEventToContainerPoint(t),$t(document,{contextmenu:oe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Me("div","leaflet-zoom-box",this._container),ze(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new I(this._point,this._startPoint),n=e.getSize();Re(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(Ae(this._box),De(this._container,"leaflet-crosshair")),ge(),qe(),Qt(document,{contextmenu:oe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var e=new N(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Ge.addInitHook("addHandler","boxZoom",pr),Ge.mergeOptions({doubleClickZoom:!0});var gr=tn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),r=e.options.zoomDelta,i=t.originalEvent.shiftKey?n-r:n+r;"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}});Ge.addInitHook("addHandler","doubleClickZoom",gr),Ge.mergeOptions({dragging:!0,inertia:!it,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var mr=tn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new sn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}ze(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){De(this._map._container,"leaflet-grab"),De(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=R(this._map.options.maxBounds);this._offsetLimit=j(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-e+n)%t+e-n,o=(r+e+n)%t-e-n,a=Math.abs(i+n)<Math.abs(o+n)?i:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,r=!n.inertia||this._times.length<2;if(e.fire("dragend",t),r)e.fire("moveend");else{this._prunePositions(+new Date);var i=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=i.multiplyBy(a/o),l=s.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,l),u=s.multiplyBy(c/l),d=c/(n.inertiaDeceleration*a),h=u.multiplyBy(-d/2).round();h.x||h.y?(h=e._limitOffset(h,e.options.maxBounds),M(function(){e.panBy(h,{duration:d,easeLinearity:a,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});Ge.addInitHook("addHandler","dragging",mr),Ge.mergeOptions({keyboard:!0,keyboardPanDelta:80});var vr=tn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),$t(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Qt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,r=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,r=this._panKeys={},i=this.keyCodes;for(e=0,n=i.left.length;e<n;e++)r[i.left[e]]=[-1*t,0];for(e=0,n=i.right.length;e<n;e++)r[i.right[e]]=[t,0];for(e=0,n=i.down.length;e<n;e++)r[i.down[e]]=[0,t];for(e=0,n=i.up.length;e<n;e++)r[i.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,r=this._zoomKeys={},i=this.keyCodes;for(e=0,n=i.zoomIn.length;e<n;e++)r[i.zoomIn[e]]=t;for(e=0,n=i.zoomOut.length;e<n;e++)r[i.zoomOut[e]]=-t},_addHooks:function(){$t(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Qt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,r=this._map;if(n in this._panKeys){if(r._panAnim&&r._panAnim._inProgress)return;e=this._panKeys[n],t.shiftKey&&(e=O(e).multiplyBy(3)),r.panBy(e),r.options.maxBounds&&r.panInsideBounds(r.options.maxBounds)}else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}oe(t)}}});Ge.addInitHook("addHandler","keyboard",vr),Ge.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var yr=tn.extend({addHooks:function(){$t(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Qt(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=le(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),r),oe(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,o=n?Math.ceil(i/n)*n:i,a=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});Ge.addInitHook("addHandler","scrollWheelZoom",yr),Ge.mergeOptions({tap:!0,tapTolerance:15});var _r=tn.extend({addHooks:function(){$t(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Qt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(ie(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new D(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&ze(n,"leaflet-active"),this._holdTimeout=setTimeout(i(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),$t(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Qt(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&De(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new D(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});kt&&!wt&&Ge.addInitHook("addHandler","tap",_r),Ge.mergeOptions({touchZoom:kt&&!it,bounceAtZoomLimits:!0});var xr=tn.extend({addHooks:function(){ze(this._map._container,"leaflet-touch-zoom"),$t(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){De(this._map._container,"leaflet-touch-zoom"),Qt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),$t(document,"touchmove",this._onTouchMove,this),$t(document,"touchend",this._onTouchEnd,this),ie(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var a=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),A(this._animRequest);var s=i(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=M(s,this,!0),ie(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,A(this._animRequest),Qt(document,"touchmove",this._onTouchMove),Qt(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ge.addInitHook("addHandler","touchZoom",xr),Ge.BoxZoom=pr,Ge.DoubleClickZoom=gr,Ge.Drag=mr,Ge.Keyboard=vr,Ge.ScrollWheelZoom=yr,Ge.Tap=_r,Ge.TouchZoom=xr;var br=window.L;window.L=t,Object.freeze=e,t.version="1.3.1",t.noConflict=function(){return window.L=br,this},t.Control=Xe,t.control=Ye,t.Browser=zt,t.Evented=z,t.Mixin=nn,t.Util=S,t.Class=C,t.Handler=tn,t.extend=n,t.bind=i,t.stamp=a,t.setOptions=f,t.DomEvent=_e,t.DomUtil=Ue,t.PosAnimation=We,t.Draggable=sn,t.LineUtil=mn,t.PolyUtil=_n,t.Point=D,t.point=O,t.Bounds=I,t.bounds=j,t.Transformation=U,t.transformation=W,t.Projection=wn,t.LatLng=B,t.latLng=F,t.LatLngBounds=N,t.latLngBounds=R,t.CRS=q,t.GeoJSON=Rn,t.geoJSON=Gn,t.geoJson=Xn,t.Layer=An,t.LayerGroup=Ln,t.layerGroup=function(t,e){return new Ln(t,e)},t.FeatureGroup=Sn,t.featureGroup=function(t){return new Sn(t)},t.ImageOverlay=Yn,t.imageOverlay=function(t,e,n){return new Yn(t,e,n)},t.VideoOverlay=$n,t.videoOverlay=function(t,e,n){return new $n(t,e,n)},t.DivOverlay=Jn,t.Popup=Qn,t.popup=function(t,e){return new Qn(t,e)},t.Tooltip=Kn,t.tooltip=function(t,e){return new Kn(t,e)},t.Icon=Cn,t.icon=function(t){return new Cn(t)},t.DivIcon=tr,t.divIcon=function(t){return new tr(t)},t.Marker=Dn,t.marker=function(t,e){return new Dn(t,e)},t.TileLayer=nr,t.tileLayer=rr,t.GridLayer=er,t.gridLayer=function(t){return new er(t)},t.SVG=dr,t.svg=hr,t.Renderer=or,t.Canvas=ar,t.canvas=sr,t.Path=En,t.CircleMarker=On,t.circleMarker=function(t,e){return new On(t,e)},t.Circle=In,t.circle=function(t,e,n){return new In(t,e,n)},t.Polyline=jn,t.polyline=function(t,e){return new jn(t,e)},t.Polygon=Nn,t.polygon=function(t,e){return new Nn(t,e)},t.Rectangle=fr,t.rectangle=function(t,e){return new fr(t,e)},t.Map=Ge,t.map=function(t,e){return new Ge(t,e)}},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.L={})},{}],12:[function(t,e,n){var r={left:0,top:0};e.exports=function(t,e,n){e=e||t.currentTarget||t.srcElement,Array.isArray(n)||(n=[0,0]);var i=t.clientX||0,o=t.clientY||0,a=(s=e,s===window||s===document||s===document.body?r:s.getBoundingClientRect());var s;return n[0]=i-a.left,n[1]=o-a.top,n}},{}],13:[function(t,e,n){"use strict";var r=t("../src/lib"),i={"X,X div":"font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .modebar":"position:absolute;top:2px;right:2px;z-index:1001;background:rgba(255,255,255,0.7);","X .modebar--hover":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;margin-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group:first-child":"margin-left:0px;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar-btn path":"fill:rgba(0,31,95,0.3);","X .modebar-btn.active path,X .modebar-btn:hover path":"fill:rgba(0,22,72,0.5);","X .modebar-btn.modebar-btn--logo":"padding:3px 1px;","X .modebar-btn.modebar-btn--logo path":"fill:#447adb !important;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var o in i){var a=o.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");r.addStyleRule(a,i[o])}},{"../src/lib":151}],14:[function(t,e,n){"use strict";e.exports={undo:{width:857.1,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",ascent:850,descent:-150},home:{width:928.6,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",ascent:850,descent:-150},"camera-retro":{width:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",ascent:850,descent:-150},zoombox:{width:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",ascent:850,descent:-150},pan:{width:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",ascent:850,descent:-150},zoom_plus:{width:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",ascent:850,descent:-150},zoom_minus:{width:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",ascent:850,descent:-150},autoscale:{width:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",ascent:850,descent:-150},tooltip_basic:{width:1500,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",ascent:850,descent:-150},tooltip_compare:{width:1125,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",ascent:850,descent:-150},plotlylogo:{width:1542,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",ascent:850,descent:-150},"z-axis":{width:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",ascent:850,descent:-150},"3d_rotate":{width:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",ascent:850,descent:-150},camera:{width:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",ascent:850,descent:-150},movie:{width:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",ascent:850,descent:-150},question:{width:857.1,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",ascent:850,descent:-150},disk:{width:857.1,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",ascent:850,descent:-150},lasso:{width:1031,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",ascent:850,descent:-150},selectbox:{width:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",ascent:850,descent:-150},spikeline:{width:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",ascent:850,descent:-150}}},{}],15:[function(t,e,n){"use strict";e.exports=t("../src/traces/bar")},{"../src/traces/bar":247}],16:[function(t,e,n){"use strict";e.exports=t("../src/core")},{"../src/core":137}],17:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/cartesian/axes"),o=t("./common_defaults"),a=t("./attributes");e.exports=function(t,e,n,s,l){function c(n,i){return r.coerce(t,e,a,n,i)}s=s||{};var u=c("visible",!(l=l||{}).itemIsNotPlainObject),d=c("clicktoshow");if(!u&&!d)return e;o(t,e,n,c);for(var h=e.showarrow,f=["x","y"],p=[-10,-30],g={_fullLayout:n},m=0;m<2;m++){var v=f[m],y=i.coerceRef(t,e,g,v,"","paper");if(i.coercePosition(e,g,c,y,v,.5),h){var _="a"+v,x=i.coerceRef(t,e,g,_,"pixel");"pixel"!==x&&x!==y&&(x=e[_]="pixel");var b="pixel"===x?p[m]:.4;i.coercePosition(e,g,c,x,_,b)}c(v+"anchor"),c(v+"shift")}if(r.noneOrAll(t,e,["x","y"]),h&&r.noneOrAll(t,e,["ax","ay"]),d){var w=c("xclick"),k=c("yclick");e._xclick=void 0===w?e.x:i.cleanPosition(w,g,e.xref),e._yclick=void 0===k?e.y:i.cleanPosition(k,g,e.yref)}return e}},{"../../lib":151,"../../plots/cartesian/axes":194,"./attributes":19,"./common_defaults":22}],18:[function(t,e,n){"use strict";e.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],19:[function(t,e,n){"use strict";var r=t("./arrow_paths"),i=t("../../plots/font_attributes"),o=t("../../plots/cartesian/constants");e.exports={_isLinkedToArray:"annotation",visible:{valType:"boolean",role:"info",dflt:!0,editType:"calcIfAutorange+arraydraw",description:["Determines whether or not this annotation is visible."].join(" ")},text:{valType:"string",role:"info",editType:"calcIfAutorange+arraydraw",description:["Sets the text associated with this annotation.","Plotly uses a subset of HTML tags to do things like","newline (<br>), bold (<b></b>), italics (<i></i>),","hyperlinks (<a href='...'></a>). Tags <em>, <sup>, <sub>","<span> are also supported."].join(" ")},textangle:{valType:"angle",dflt:0,role:"style",editType:"calcIfAutorange+arraydraw",description:["Sets the angle at which the `text` is drawn","with respect to the horizontal."].join(" ")},font:i({editType:"calcIfAutorange+arraydraw",colorEditType:"arraydraw",description:"Sets the annotation text font."}),width:{valType:"number",min:1,dflt:null,role:"style",editType:"calcIfAutorange+arraydraw",description:["Sets an explicit width for the text box. null (default) lets the","text set the box width. Wider text will be clipped.","There is no automatic wrapping; use <br> to start a new line."].join(" ")},height:{valType:"number",min:1,dflt:null,role:"style",editType:"calcIfAutorange+arraydraw",description:["Sets an explicit height for the text box. null (default) lets the","text set the box height. Taller text will be clipped."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,role:"style",editType:"arraydraw",description:"Sets the opacity of the annotation (text + arrow)."},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",role:"style",editType:"arraydraw",description:["Sets the horizontal alignment of the `text` within the box.","Has an effect only if `text` spans more two or more lines","(i.e. `text` contains one or more <br> HTML tags) or if an","explicit width is set to override the text width."].join(" ")},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",role:"style",editType:"arraydraw",description:["Sets the vertical alignment of the `text` within the box.","Has an effect only if an explicit height is set to override","the text height."].join(" ")},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",role:"style",editType:"arraydraw",description:"Sets the background color of the annotation."},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",role:"style",editType:"arraydraw",description:["Sets the color of the border enclosing the annotation `text`."].join(" ")},borderpad:{valType:"number",min:0,dflt:1,role:"style",editType:"calcIfAutorange+arraydraw",description:["Sets the padding (in px) between the `text`","and the enclosing border."].join(" ")},borderwidth:{valType:"number",min:0,dflt:1,role:"style",editType:"calcIfAutorange+arraydraw",description:["Sets the width (in px) of the border enclosing","the annotation `text`."].join(" ")},showarrow:{valType:"boolean",dflt:!0,role:"style",editType:"calcIfAutorange+arraydraw",description:["Determines whether or not the annotation is drawn with an arrow.","If *true*, `text` is placed near the arrow's tail.","If *false*, `text` lines up with the `x` and `y` provided."].join(" ")},arrowcolor:{valType:"color",role:"style",editType:"arraydraw",description:"Sets the color of the annotation arrow."},arrowhead:{valType:"integer",min:0,max:r.length,dflt:1,role:"style",editType:"arraydraw",description:"Sets the end annotation arrow head style."},startarrowhead:{valType:"integer",min:0,max:r.length,dflt:1,role:"style",editType:"arraydraw",description:"Sets the start annotation arrow head style."},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",role:"style",editType:"arraydraw",description:"Sets the annotation arrow head position."},arrowsize:{valType:"number",min:.3,dflt:1,role:"style",editType:"calcIfAutorange+arraydraw",description:["Sets the size of the end annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},startarrowsize:{valType:"number",min:.3,dflt:1,role:"style",editType:"calcIfAutorange+arraydraw",description:["Sets the size of the start annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},arrowwidth:{valType:"number",min:.1,role:"style",editType:"calcIfAutorange+arraydraw",description:"Sets the width (in px) of annotation arrow line."},standoff:{valType:"number",min:0,dflt:0,role:"style",editType:"calcIfAutorange+arraydraw",description:["Sets a distance, in pixels, to move the end arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},startstandoff:{valType:"number",min:0,dflt:0,role:"style",editType:"calcIfAutorange+arraydraw",description:["Sets a distance, in pixels, to move the start arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},ax:{valType:"any",role:"info",editType:"calcIfAutorange+arraydraw",description:["Sets the x component of the arrow tail about the arrow head.","If `axref` is `pixel`, a positive (negative) ","component corresponds to an arrow pointing","from right to left (left to right).","If `axref` is an axis, this is an absolute value on that axis,","like `x`, NOT a relative value."].join(" ")},ay:{valType:"any",role:"info",editType:"calcIfAutorange+arraydraw",description:["Sets the y component of the arrow tail about the arrow head.","If `ayref` is `pixel`, a positive (negative) ","component corresponds to an arrow pointing","from bottom to top (top to bottom).","If `ayref` is an axis, this is an absolute value on that axis,","like `y`, NOT a relative value."].join(" ")},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.x.toString()],role:"info",editType:"calc",description:["Indicates in what terms the tail of the annotation (ax,ay) ","is specified. If `pixel`, `ax` is a relative offset in pixels ","from `x`. If set to an x axis id (e.g. *x* or *x2*), `ax` is ","specified in the same terms as that axis. This is useful ","for trendline annotations which should continue to indicate ","the correct trend when zoomed."].join(" ")},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.y.toString()],role:"info",editType:"calc",description:["Indicates in what terms the tail of the annotation (ax,ay) ","is specified. If `pixel`, `ay` is a relative offset in pixels ","from `y`. If set to a y axis id (e.g. *y* or *y2*), `ay` is ","specified in the same terms as that axis. This is useful ","for trendline annotations which should continue to indicate ","the correct trend when zoomed."].join(" ")},xref:{valType:"enumerated",values:["paper",o.idRegex.x.toString()],role:"info",editType:"calc",description:["Sets the annotation's x coordinate axis.","If set to an x axis id (e.g. *x* or *x2*), the `x` position","refers to an x coordinate","If set to *paper*, the `x` position refers to the distance from","the left side of the plotting area in normalized coordinates","where 0 (1) corresponds to the left (right) side."].join(" ")},x:{valType:"any",role:"info",editType:"calcIfAutorange+arraydraw",description:["Sets the annotation's x position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",role:"info",editType:"calcIfAutorange+arraydraw",description:["Sets the text box's horizontal position anchor","This anchor binds the `x` position to the *left*, *center*","or *right* of the annotation.","For example, if `x` is set to 1, `xref` to *paper* and","`xanchor` to *right* then the right-most portion of the","annotation lines up with the right-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *center* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},xshift:{valType:"number",dflt:0,role:"style",editType:"calcIfAutorange+arraydraw",description:["Shifts the position of the whole annotation and arrow to the","right (positive) or left (negative) by this many pixels."].join(" ")},yref:{valType:"enumerated",values:["paper",o.idRegex.y.toString()],role:"info",editType:"calc",description:["Sets the annotation's y coordinate axis.","If set to an y axis id (e.g. *y* or *y2*), the `y` position","refers to an y coordinate","If set to *paper*, the `y` position refers to the distance from","the bottom of the plotting area in normalized coordinates","where 0 (1) corresponds to the bottom (top)."].join(" ")},y:{valType:"any",role:"info",editType:"calcIfAutorange+arraydraw",description:["Sets the annotation's y position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",role:"info",editType:"calcIfAutorange+arraydraw",description:["Sets the text box's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the annotation.","For example, if `y` is set to 1, `yref` to *paper* and","`yanchor` to *top* then the top-most portion of the","annotation lines up with the top-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *middle* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},yshift:{valType:"number",dflt:0,role:"style",editType:"calcIfAutorange+arraydraw",description:["Shifts the position of the whole annotation and arrow up","(positive) or down (negative) by this many pixels."].join(" ")},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,role:"style",editType:"arraydraw",description:["Makes this annotation respond to clicks on the plot.","If you click a data point that exactly matches the `x` and `y`","values of this annotation, and it is hidden (visible: false),","it will appear. In *onoff* mode, you must click the same point","again to make it disappear, so if you click multiple points,","you can show multiple annotations. In *onout* mode, a click","anywhere else in the plot (on another data point or not) will","hide this annotation.","If you need to show/hide this annotation in response to different","`x` or `y` values, you can set `xclick` and/or `yclick`. This is","useful for example to label the side of a bar. To label markers","though, `standoff` is preferred over `xclick` and `yclick`."].join(" ")},xclick:{valType:"any",role:"info",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `x` value","is `xclick` rather than the annotation's `x` value."].join(" ")},yclick:{valType:"any",role:"info",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `y` value","is `yclick` rather than the annotation's `y` value."].join(" ")},hovertext:{valType:"string",role:"info",editType:"arraydraw",description:["Sets text to appear when hovering over this annotation.","If omitted or blank, no hover label will appear."].join(" ")},hoverlabel:{bgcolor:{valType:"color",role:"style",editType:"arraydraw",description:["Sets the background color of the hover label.","By default uses the annotation's `bgcolor` made opaque,","or white if it was transparent."].join(" ")},bordercolor:{valType:"color",role:"style",editType:"arraydraw",description:["Sets the border color of the hover label.","By default uses either dark grey or white, for maximum","contrast with `hoverlabel.bgcolor`."].join(" ")},font:i({editType:"arraydraw",description:["Sets the hover label text font.","By default uses the global hover font and size,","with color from `hoverlabel.bordercolor`."].join(" ")}),editType:"arraydraw"},captureevents:{valType:"boolean",role:"info",editType:"arraydraw",description:["Determines whether the annotation text box captures mouse move","and click events, or allows those events to pass through to data","points in the plot that may be behind the annotation. By default","`captureevents` is *false* unless `hovertext` is provided.","If you use the event `plotly_clickannotation` without `hovertext`","you must explicitly enable `captureevents`."].join(" ")},editType:"calc",_deprecated:{ref:{valType:"string",role:"info",editType:"calc",description:["Obsolete. Set `xref` and `yref` separately instead."].join(" ")}}}},{"../../plots/cartesian/constants":199,"../../plots/font_attributes":220,"./arrow_paths":18}],20:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/cartesian/axes"),o=t("./draw").draw;function a(t){var e=t._fullLayout;r.filterVisible(e.annotations).forEach(function(e){var n,r,o,a,s=i.getFromId(t,e.xref),l=i.getFromId(t,e.yref),c=3*e.arrowsize*e.arrowwidth||0,u=3*e.startarrowsize*e.arrowwidth||0;s&&s.autorange&&(n=c+e.xshift,r=c-e.xshift,o=u+e.xshift,a=u-e.xshift,e.axref===e.xref?(i.expand(s,[s.r2c(e.x)],{ppadplus:n,ppadminus:r}),i.expand(s,[s.r2c(e.ax)],{ppadplus:Math.max(e._xpadplus,o),ppadminus:Math.max(e._xpadminus,a)})):(o=e.ax?o+e.ax:o,a=e.ax?a-e.ax:a,i.expand(s,[s.r2c(e.x)],{ppadplus:Math.max(e._xpadplus,n,o),ppadminus:Math.max(e._xpadminus,r,a)}))),l&&l.autorange&&(n=c-e.yshift,r=c+e.yshift,o=u-e.yshift,a=u+e.yshift,e.ayref===e.yref?(i.expand(l,[l.r2c(e.y)],{ppadplus:n,ppadminus:r}),i.expand(l,[l.r2c(e.ay)],{ppadplus:Math.max(e._ypadplus,o),ppadminus:Math.max(e._ypadminus,a)})):(o=e.ay?o+e.ay:o,a=e.ay?a-e.ay:a,i.expand(l,[l.r2c(e.y)],{ppadplus:Math.max(e._ypadplus,n,o),ppadminus:Math.max(e._ypadminus,r,a)})))})}e.exports=function(t){var e=t._fullLayout,n=r.filterVisible(e.annotations);if(n.length&&t._fullData.length){var s={};for(var l in n.forEach(function(t){s[t.xref]=1,s[t.yref]=1}),s){var c=i.getFromId(t,l);if(c&&c.autorange)return r.syncOrAsync([o,a],t)}}}},{"../../lib":151,"../../plots/cartesian/axes":194,"./draw":25}],21:[function(t,e,n){"use strict";var r=t("../../plotly");function i(t,e){var n,r,i,a,s,l,c,u=t._fullLayout.annotations,d=[],h=[],f=[],p=(e||[]).length;for(n=0;n<u.length;n++)if(a=(i=u[n]).clicktoshow){for(r=0;r<p;r++)if(l=(s=e[r]).xaxis,c=s.yaxis,l._id===i.xref&&c._id===i.yref&&l.d2r(s.x)===o(i._xclick,l)&&c.d2r(s.y)===o(i._yclick,c)){(i.visible?"onout"===a?h:f:d).push(n);break}r===p&&i.visible&&"onout"===a&&h.push(n)}return{on:d,off:h,explicitOff:f}}function o(t,e){return"log"===e.type?e.l2r(t):e.d2r(t)}e.exports={hasClickToShow:function(t,e){var n=i(t,e);return n.on.length>0||n.explicitOff.length>0},onClick:function(t,e){var n,o=i(t,e),a=o.on,s=o.off.concat(o.explicitOff),l={};if(!a.length&&!s.length)return;for(n=0;n<a.length;n++)l["annotations["+a[n]+"].visible"]=!0;for(n=0;n<s.length;n++)l["annotations["+s[n]+"].visible"]=!1;return r.update(t,{},l)}}},{"../../plotly":189}],22:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../color");e.exports=function(t,e,n,o){o("opacity");var a=o("bgcolor"),s=o("bordercolor"),l=i.opacity(s);o("borderpad");var c=o("borderwidth"),u=o("showarrow");if(o("text",u?" ":n._dfltTitle.annotation),o("textangle"),r.coerceFont(o,"font",n.font),o("width"),o("align"),o("height")&&o("valign"),u){var d,h,f=o("arrowside");-1!==f.indexOf("end")&&(d=o("arrowhead"),h=o("arrowsize")),-1!==f.indexOf("start")&&(o("startarrowhead",d),o("startarrowsize",h)),o("arrowcolor",l?e.bordercolor:i.defaultLine),o("arrowwidth",2*(l&&c||1)),o("standoff"),o("startstandoff")}var p=o("hovertext"),g=n.hoverlabel||{};if(p){var m=o("hoverlabel.bgcolor",g.bgcolor||(i.opacity(a)?i.rgb(a):i.defaultLine)),v=o("hoverlabel.bordercolor",g.bordercolor||i.contrast(m));r.coerceFont(o,"hoverlabel.font",{family:g.font.family,size:g.font.size,color:g.font.color||v})}o("captureevents",!!p)}},{"../../lib":151,"../color":34}],23:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib/to_log_range");e.exports=function(t,e,n,o){e=e||{};var a="log"===n&&"linear"===e.type,s="linear"===n&&"log"===e.type;if(a||s)for(var l,c,u=t._fullLayout.annotations,d=e._id.charAt(0),h=0;h<u.length;h++)l=u[h],c="annotations["+h+"].",l[d+"ref"]===e._id&&f(d),l["a"+d+"ref"]===e._id&&f("a"+d);function f(t){var n=l[t],s=null;s=a?i(n,e.range):Math.pow(10,n),r(s)||(s=null),o(c+t,s)}}},{"../../lib/to_log_range":174,"fast-isnumeric":4}],24:[function(t,e,n){"use strict";var r=t("../../plots/array_container_defaults"),i=t("./annotation_defaults");e.exports=function(t,e){r(t,e,{name:"annotations",handleItemDefaults:i})}},{"../../plots/array_container_defaults":191,"./annotation_defaults":17}],25:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../plotly"),o=t("../../plots/plots"),a=t("../../lib"),s=t("../../plots/cartesian/axes"),l=t("../color"),c=t("../drawing"),u=t("../fx"),d=t("../../lib/svg_text_utils"),h=t("../../lib/setcursor"),f=t("../dragelement"),p=t("./draw_arrow_head");function g(t,e){var n=t._fullLayout.annotations[e]||{};m(t,n,e,!1,s.getFromId(t,n.xref),s.getFromId(t,n.yref))}function m(t,e,n,o,s,g){var m,v,y=t._fullLayout,_=t._fullLayout._size,x=t._context.edits;o?(m="annotation-"+o,v=o+".annotations["+n+"]"):(m="annotation",v="annotations["+n+"]"),y._infolayer.selectAll("."+m+'[data-index="'+n+'"]').remove();var b="clip"+y._uid+"_ann"+n;if(e._input&&!1!==e.visible){var w={x:{},y:{}},k=+e.textangle||0,T=y._infolayer.append("g").classed(m,!0).attr("data-index",String(n)).style("opacity",e.opacity),M=T.append("g").classed("annotation-text-g",!0),A=x[e.showarrow?"annotationTail":"annotationPosition"],L=e.captureevents||x.annotationText||A,S=M.append("g").style("pointer-events",L?"all":null).call(h,"default").on("click",function(){t._dragging=!1;var i={index:n,annotation:e._input,fullAnnotation:e,event:r.event};o&&(i.subplotId=o),t.emit("plotly_clickannotation",i)});e.hovertext&&S.on("mouseover",function(){var n=e.hoverlabel,r=n.font,i=this.getBoundingClientRect(),o=t.getBoundingClientRect();u.loneHover({x0:i.left-o.left,x1:i.right-o.left,y:(i.top+i.bottom)/2-o.top,text:e.hovertext,color:n.bgcolor,borderColor:n.bordercolor,fontFamily:r.family,fontSize:r.size,fontColor:r.color},{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:t})}).on("mouseout",function(){u.loneUnhover(y._hoverlayer.node())});var C=e.borderwidth,P=e.borderpad,z=C+P,D=S.append("rect").attr("class","bg").style("stroke-width",C+"px").call(l.stroke,e.bordercolor).call(l.fill,e.bgcolor),E=e.width||e.height,O=y._topclips.selectAll("#"+b).data(E?[0]:[]);O.enter().append("clipPath").classed("annclip",!0).attr("id",b).append("rect"),O.exit().remove();var I=e.font,j=S.append("text").classed("annotation-text",!0).text(e.text);x.annotationText?j.call(d.makeEditable,{delegate:S,gd:t}).call(N).on("edit",function(n){e.text=n,this.call(N);var r={};r[v+".text"]=e.text,s&&s.autorange&&(r[s._name+".autorange"]=!0),g&&g.autorange&&(r[g._name+".autorange"]=!0),i.relayout(t,r)}):j.call(N)}else r.selectAll("#"+b).remove();function N(n){return n.call(c.font,I).attr({"text-anchor":{left:"start",right:"end"}[e.align]||"middle"}),d.convertToTspans(n,t,R),n}function R(){var n=j.selectAll("a");1===n.size()&&n.text()===j.text()&&S.insert("a",":first-child").attr({"xlink:xlink:href":n.attr("xlink:href"),"xlink:xlink:show":n.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(D.node());var r=S.select(".annotation-text-math-group"),u=!r.empty(),m=c.bBox((u?r:j).node()),L=m.width,P=m.height,I=e.width||L,N=e.height||P,R=Math.round(I+2*z),B=Math.round(N+2*z);function F(t,e){return"auto"===e&&(e=t<1/3?"left":t>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[e]}e._w=I,e._h=N;for(var H=!1,q=["x","y"],Z=0;Z<q.length;Z++){var V,U,W,G,X,Y=q[Z],$=e[Y+"ref"]||Y,J=e["a"+Y+"ref"],Q={x:s,y:g}[Y],K=(k+("x"===Y?0:-90))*Math.PI/180,tt=R*Math.cos(K),et=B*Math.sin(K),nt=Math.abs(tt)+Math.abs(et),rt=e[Y+"anchor"],it=e[Y+"shift"]*("x"===Y?1:-1),ot=w[Y];if(Q){var at=Q.r2fraction(e[Y]);if((t._dragging||!Q.autorange)&&(at<0||at>1)&&(J===$?((at=Q.r2fraction(e["a"+Y]))<0||at>1)&&(H=!0):H=!0,H))continue;V=Q._offset+Q.r2p(e[Y]),G=.5}else"x"===Y?(W=e[Y],V=_.l+_.w*W):(W=1-e[Y],V=_.t+_.h*W),G=e.showarrow?.5:W;if(e.showarrow){ot.head=V;var st=e["a"+Y];X=tt*F(.5,e.xanchor)-et*F(.5,e.yanchor),J===$?(ot.tail=Q._offset+Q.r2p(st),U=X):(ot.tail=V+st,U=X+st),ot.text=ot.tail+X;var lt=y["x"===Y?"width":"height"];if("paper"===$&&(ot.head=a.constrain(ot.head,1,lt-1)),"pixel"===J){var ct=-Math.max(ot.tail-3,ot.text),ut=Math.min(ot.tail+3,ot.text)-lt;ct>0?(ot.tail+=ct,ot.text+=ct):ut>0&&(ot.tail-=ut,ot.text-=ut)}ot.tail+=it,ot.head+=it}else U=X=nt*F(G,rt),ot.text=V+X;ot.text+=it,X+=it,U+=it,e["_"+Y+"padplus"]=nt/2+U,e["_"+Y+"padminus"]=nt/2-U,e["_"+Y+"size"]=nt,e["_"+Y+"shift"]=X}if(H)S.remove();else{var dt=0,ht=0;if("left"!==e.align&&(dt=(I-L)*("center"===e.align?.5:1)),"top"!==e.valign&&(ht=(N-P)*("middle"===e.valign?.5:1)),u)r.select("svg").attr({x:z+dt-1,y:z+ht}).call(c.setClipUrl,E?b:null);else{var ft=z+ht-m.top,pt=z+dt-m.left;j.call(d.positionText,pt,ft).call(c.setClipUrl,E?b:null)}O.select("rect").call(c.setRect,z,z,I,N),D.call(c.setRect,C/2,C/2,R-C,B-C),S.call(c.setTranslate,Math.round(w.x.text-R/2),Math.round(w.y.text-B/2)),M.attr({transform:"rotate("+k+","+w.x.text+","+w.y.text+")"});var gt,mt,vt=function(n,r){T.selectAll(".annotation-arrow-g").remove();var u=w.x.head,d=w.y.head,h=w.x.tail+n,m=w.y.tail+r,y=w.x.text+n,b=w.y.text+r,A=a.rotationXYMatrix(k,y,b),L=a.apply2DTransform(A),C=a.apply2DTransform2(A),P=+D.attr("width"),z=+D.attr("height"),E=y-.5*P,O=E+P,I=b-.5*z,j=I+z,N=[[E,I,E,j],[E,j,O,j],[O,j,O,I],[O,I,E,I]].map(C);if(!N.reduce(function(t,e){return t^!!a.segmentsIntersect(u,d,u+1e6,d+1e6,e[0],e[1],e[2],e[3])},!1)){N.forEach(function(t){var e=a.segmentsIntersect(h,m,u,d,t[0],t[1],t[2],t[3]);e&&(h=e.x,m=e.y)});var R=e.arrowwidth,B=e.arrowcolor,F=e.arrowside,H=T.append("g").style({opacity:l.opacity(B)}).classed("annotation-arrow-g",!0),q=H.append("path").attr("d","M"+h+","+m+"L"+u+","+d).style("stroke-width",R+"px").call(l.stroke,l.rgb(B));if(p(q,F,e),x.annotationPosition&&q.node().parentNode&&!o){var Z=u,V=d;if(e.standoff){var U=Math.sqrt(Math.pow(u-h,2)+Math.pow(d-m,2));Z+=e.standoff*(h-u)/U,V+=e.standoff*(m-d)/U}var W,G,X,Y=H.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(h-Z)+","+(m-V),transform:"translate("+Z+","+V+")"}).style("stroke-width",R+6+"px").call(l.stroke,"rgba(0,0,0,0)").call(l.fill,"rgba(0,0,0,0)");f.init({element:Y.node(),gd:t,prepFn:function(){var t=c.getTranslate(S);G=t.x,X=t.y,W={},s&&s.autorange&&(W[s._name+".autorange"]=!0),g&&g.autorange&&(W[g._name+".autorange"]=!0)},moveFn:function(t,n){var r=L(G,X),i=r[0]+t,o=r[1]+n;S.call(c.setTranslate,i,o),W[v+".x"]=s?s.p2r(s.r2p(e.x)+t):e.x+t/_.w,W[v+".y"]=g?g.p2r(g.r2p(e.y)+n):e.y-n/_.h,e.axref===e.xref&&(W[v+".ax"]=s.p2r(s.r2p(e.ax)+t)),e.ayref===e.yref&&(W[v+".ay"]=g.p2r(g.r2p(e.ay)+n)),H.attr("transform","translate("+t+","+n+")"),M.attr({transform:"rotate("+k+","+i+","+o+")"})},doneFn:function(){i.relayout(t,W);var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})}}};if(e.showarrow&&vt(0,0),A)f.init({element:S.node(),gd:t,prepFn:function(){mt=M.attr("transform"),gt={}},moveFn:function(t,n){var r="pointer";if(e.showarrow)e.axref===e.xref?gt[v+".ax"]=s.p2r(s.r2p(e.ax)+t):gt[v+".ax"]=e.ax+t,e.ayref===e.yref?gt[v+".ay"]=g.p2r(g.r2p(e.ay)+n):gt[v+".ay"]=e.ay+n,vt(t,n);else{if(o)return;if(s)gt[v+".x"]=e.x+t/s._m;else{var i=e._xsize/_.w,a=e.x+(e._xshift-e.xshift)/_.w-i/2;gt[v+".x"]=f.align(a+t/_.w,i,0,1,e.xanchor)}if(g)gt[v+".y"]=e.y+n/g._m;else{var l=e._ysize/_.h,c=e.y-(e._yshift+e.yshift)/_.h-l/2;gt[v+".y"]=f.align(c-n/_.h,l,0,1,e.yanchor)}s&&g||(r=f.getCursor(s?.5:gt[v+".x"],g?.5:gt[v+".y"],e.xanchor,e.yanchor))}M.attr({transform:"translate("+t+","+n+")"+mt}),h(S,r)},doneFn:function(){h(S),i.relayout(t,gt);var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})}}}e.exports={draw:function(t){var e=t._fullLayout;e._infolayer.selectAll(".annotation").remove();for(var n=0;n<e.annotations.length;n++)e.annotations[n].visible&&g(t,n);return o.previousPromises(t)},drawOne:g,drawRaw:m}},{"../../lib":151,"../../lib/setcursor":170,"../../lib/svg_text_utils":172,"../../plotly":189,"../../plots/cartesian/axes":194,"../../plots/plots":226,"../color":34,"../dragelement":56,"../drawing":59,"../fx":76,"./draw_arrow_head":26,d3:1}],26:[function(t,e,n){"use strict";var r=t("d3"),i=t("../color"),o=t("./arrow_paths");e.exports=function(t,e,n){var a,s,l,c,u=t.node(),d=o[n.arrowhead||0],h=o[n.startarrowhead||0],f=(n.arrowwidth||1)*(n.arrowsize||1),p=(n.arrowwidth||1)*(n.startarrowsize||1),g=e.indexOf("start")>=0,m=e.indexOf("end")>=0,v=d.backoff*f+n.standoff,y=h.backoff*p+n.startstandoff;if("line"===u.nodeName){a={x:+t.attr("x1"),y:+t.attr("y1")},s={x:+t.attr("x2"),y:+t.attr("y2")};var _=a.x-s.x,x=a.y-s.y;if(c=(l=Math.atan2(x,_))+Math.PI,v&&y&&v+y>Math.sqrt(_*_+x*x))return void z();if(v){if(v*v>_*_+x*x)return void z();var b=v*Math.cos(l),w=v*Math.sin(l);s.x+=b,s.y+=w,t.attr({x2:s.x,y2:s.y})}if(y){if(y*y>_*_+x*x)return void z();var k=y*Math.cos(l),T=y*Math.sin(l);a.x-=k,a.y-=T,t.attr({x1:a.x,y1:a.y})}}else if("path"===u.nodeName){var M=u.getTotalLength(),A="";if(M<v+y)return void z();var L=u.getPointAtLength(0),S=u.getPointAtLength(.1);l=Math.atan2(L.y-S.y,L.x-S.x),a=u.getPointAtLength(Math.min(y,M)),A="0px,"+y+"px,";var C=u.getPointAtLength(M),P=u.getPointAtLength(M-.1);c=Math.atan2(C.y-P.y,C.x-P.x),s=u.getPointAtLength(Math.max(0,M-v)),A+=M-(A?y+v:v)+"px,"+M+"px",t.style("stroke-dasharray",A)}function z(){t.style("stroke-dasharray","0px,100px")}function D(e,o,a,s){e.path&&(e.noRotate&&(a=0),r.select(u.parentNode).append("path").attr({class:t.attr("class"),d:e.path,transform:"translate("+o.x+","+o.y+")"+(a?"rotate("+180*a/Math.PI+")":"")+"scale("+s+")"}).style({fill:i.rgb(n.arrowcolor),"stroke-width":0}))}g&&D(h,a,l,p),m&&D(d,s,c,f)}},{"../color":34,"./arrow_paths":18,d3:1}],27:[function(t,e,n){"use strict";var r=t("./draw"),i=t("./click");e.exports={moduleType:"component",name:"annotations",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("annotations"),calcAutorange:t("./calc_autorange"),draw:r.draw,drawOne:r.drawOne,drawRaw:r.drawRaw,hasClickToShow:i.hasClickToShow,onClick:i.onClick,convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":204,"./attributes":19,"./calc_autorange":20,"./click":21,"./convert_coords":23,"./defaults":24,"./draw":25}],28:[function(t,e,n){"use strict";var r=t("../annotations/attributes"),i=t("../../plot_api/edit_types").overrideAll;e.exports=i({_isLinkedToArray:"annotation",visible:r.visible,x:{valType:"any",role:"info",description:["Sets the annotation's x position."].join(" ")},y:{valType:"any",role:"info",description:["Sets the annotation's y position."].join(" ")},z:{valType:"any",role:"info",description:["Sets the annotation's z position."].join(" ")},ax:{valType:"number",role:"info",description:["Sets the x component of the arrow tail about the arrow head (in pixels)."].join(" ")},ay:{valType:"number",role:"info",description:["Sets the y component of the arrow tail about the arrow head (in pixels)."].join(" ")},xanchor:r.xanchor,xshift:r.xshift,yanchor:r.yanchor,yshift:r.yshift,text:r.text,textangle:r.textangle,font:r.font,width:r.width,height:r.height,opacity:r.opacity,align:r.align,valign:r.valign,bgcolor:r.bgcolor,bordercolor:r.bordercolor,borderpad:r.borderpad,borderwidth:r.borderwidth,showarrow:r.showarrow,arrowcolor:r.arrowcolor,arrowhead:r.arrowhead,startarrowhead:r.startarrowhead,arrowside:r.arrowside,arrowsize:r.arrowsize,startarrowsize:r.startarrowsize,arrowwidth:r.arrowwidth,standoff:r.standoff,startstandoff:r.startstandoff,hovertext:r.hovertext,hoverlabel:r.hoverlabel,captureevents:r.captureevents},"calc","from-root")},{"../../plot_api/edit_types":178,"../annotations/attributes":19}],29:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/cartesian/axes");function o(t,e){var n=e.fullSceneLayout.domain,o=e.fullLayout._size,a={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};t._xa={},r.extendFlat(t._xa,a),i.setConvert(t._xa),t._xa._offset=o.l+n.x[0]*o.w,t._xa.l2p=function(){return.5*(1+t._pdata[0]/t._pdata[3])*o.w*(n.x[1]-n.x[0])},t._ya={},r.extendFlat(t._ya,a),i.setConvert(t._ya),t._ya._offset=o.t+(1-n.y[1])*o.h,t._ya.l2p=function(){return.5*(1-t._pdata[1]/t._pdata[3])*o.h*(n.y[1]-n.y[0])}}e.exports=function(t){for(var e=t.fullSceneLayout.annotations,n=0;n<e.length;n++)o(e[n],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()}},{"../../lib":151,"../../plots/cartesian/axes":194}],30:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/cartesian/axes"),o=t("../../plots/array_container_defaults"),a=t("../annotations/common_defaults"),s=t("./attributes");function l(t,e,n,o,l){function c(n,i){return r.coerce(t,e,s,n,i)}function u(t){var r=t+"axis",o={_fullLayout:{}};return o._fullLayout[r]=n[r],i.coercePosition(e,o,c,t,t,.5)}return c("visible",!l.itemIsNotPlainObject)?(a(t,e,o.fullLayout,c),u("x"),u("y"),u("z"),r.noneOrAll(t,e,["x","y","z"]),e.xref="x",e.yref="y",e.zref="z",c("xanchor"),c("yanchor"),c("xshift"),c("yshift"),e.showarrow&&(e.axref="pixel",e.ayref="pixel",c("ax",-10),c("ay",-30),r.noneOrAll(t,e,["ax","ay"])),e):e}e.exports=function(t,e,n){o(t,e,{name:"annotations",handleItemDefaults:l,fullLayout:n.fullLayout})}},{"../../lib":151,"../../plots/array_container_defaults":191,"../../plots/cartesian/axes":194,"../annotations/common_defaults":22,"./attributes":28}],31:[function(t,e,n){"use strict";var r=t("../annotations/draw").drawRaw,i=t("../../plots/gl3d/project"),o=["x","y","z"];e.exports=function(t){for(var e=t.fullSceneLayout,n=t.dataScale,a=e.annotations,s=0;s<a.length;s++){for(var l=a[s],c=!1,u=0;u<3;u++){var d=o[u],h=l[d],f=e[d+"axis"].r2fraction(h);if(f<0||f>1){c=!0;break}}c?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+s+'"]').remove():(l._pdata=i(t.glplot.cameraParams,[e.xaxis.r2l(l.x)*n[0],e.yaxis.r2l(l.y)*n[1],e.zaxis.r2l(l.z)*n[2]]),r(t.graphDiv,l,s,t.id,l._xa,l._ya))}}},{"../../plots/gl3d/project":223,"../annotations/draw":25}],32:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("../../lib");e.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),includeBasePlot:function(t,e){var n=r.subplotsRegistry.gl3d;if(!n)return;for(var o=n.attrRegex,a=Object.keys(t),s=0;s<a.length;s++){var l=a[s];o.test(l)&&(t[l].annotations||[]).length&&(i.pushUnique(e._basePlotModules,n),i.pushUnique(e._subplots.gl3d,l))}},convert:t("./convert"),draw:t("./draw")}},{"../../lib":151,"../../registry":233,"./attributes":28,"./convert":29,"./defaults":30,"./draw":31}],33:[function(t,e,n){"use strict";n.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],n.defaultLine="#444",n.lightLine="#eee",n.background="#fff",n.borderLine="#BEC8D9",n.lightFraction=1e3/11},{}],34:[function(t,e,n){"use strict";var r=t("tinycolor2"),i=t("fast-isnumeric"),o=e.exports={},a=t("./attributes");o.defaults=a.defaults;var s=o.defaultLine=a.defaultLine;o.lightLine=a.lightLine;var l=o.background=a.background;function c(t){if(i(t)||"string"!=typeof t)return t;var e=t.trim();if("rgb"!==e.substr(0,3))return t;var n=e.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return t;var r=n[1].trim().split(/\s*[\s,]\s*/),o="a"===e.charAt(3)&&4===r.length;if(!o&&3!==r.length)return t;for(var a=0;a<r.length;a++){if(!r[a].length)return t;if(r[a]=Number(r[a]),!(r[a]>=0))return t;if(3===a)r[a]>1&&(r[a]=1);else if(r[a]>=1)return t}var s=Math.round(255*r[0])+", "+Math.round(255*r[1])+", "+Math.round(255*r[2]);return o?"rgba("+s+", "+r[3]+")":"rgb("+s+")"}o.tinyRGB=function(t){var e=t.toRgb();return"rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+")"},o.rgb=function(t){return o.tinyRGB(r(t))},o.opacity=function(t){return t?r(t).getAlpha():0},o.addOpacity=function(t,e){var n=r(t).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+e+")"},o.combine=function(t,e){var n=r(t).toRgb();if(1===n.a)return r(t).toRgbString();var i=r(e||l).toRgb(),o=1===i.a?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},a={r:o.r*(1-n.a)+n.r*n.a,g:o.g*(1-n.a)+n.g*n.a,b:o.b*(1-n.a)+n.b*n.a};return r(a).toRgbString()},o.contrast=function(t,e,n){var i=r(t);return 1!==i.getAlpha()&&(i=r(o.combine(t,l))),(i.isDark()?e?i.lighten(e):l:n?i.darken(n):s).toString()},o.stroke=function(t,e){var n=r(e);t.style({stroke:o.tinyRGB(n),"stroke-opacity":n.getAlpha()})},o.fill=function(t,e){var n=r(e);t.style({fill:o.tinyRGB(n),"fill-opacity":n.getAlpha()})},o.clean=function(t){if(t&&"object"==typeof t){var e,n,r,i,a=Object.keys(t);for(e=0;e<a.length;e++)if(i=t[r=a[e]],"color"===r.substr(r.length-5))if(Array.isArray(i))for(n=0;n<i.length;n++)i[n]=c(i[n]);else t[r]=c(i);else if("colorscale"===r.substr(r.length-10)&&Array.isArray(i))for(n=0;n<i.length;n++)Array.isArray(i[n])&&(i[n][1]=c(i[n][1]));else if(Array.isArray(i)){var s=i[0];if(!Array.isArray(s)&&s&&"object"==typeof s)for(n=0;n<i.length;n++)o.clean(i[n])}else i&&"object"==typeof i&&o.clean(i)}}},{"./attributes":33,"fast-isnumeric":4,tinycolor2:293}],35:[function(t,e,n){"use strict";var r=t("../../plots/cartesian/layout_attributes"),i=t("../../plots/font_attributes"),o=t("../../lib/extend").extendFlat,a=t("../../plot_api/edit_types").overrideAll;e.exports=a({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],role:"style",dflt:"pixels",description:["Determines whether this color bar's thickness","(i.e. the measure in the constant color direction)","is set in units of plot *fraction* or in *pixels*.","Use `thickness` to set the value."].join(" ")},thickness:{valType:"number",role:"style",min:0,dflt:30,description:["Sets the thickness of the color bar","This measure excludes the size of the padding, ticks and labels."].join(" ")},lenmode:{valType:"enumerated",values:["fraction","pixels"],role:"info",dflt:"fraction",description:["Determines whether this color bar's length","(i.e. the measure in the color variation direction)","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,role:"style",description:["Sets the length of the color bar","This measure excludes the padding of both ends.","That is, the color bar length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",dflt:1.02,min:-2,max:3,role:"style",description:["Sets the x position of the color bar (in plot fraction)."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",role:"style",description:["Sets this color bar's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the color bar."].join(" ")},xpad:{valType:"number",role:"style",min:0,dflt:10,description:"Sets the amount of padding (in px) along the x direction."},y:{valType:"number",role:"style",dflt:.5,min:-2,max:3,description:["Sets the y position of the color bar (in plot fraction)."].join(" ")},yanchor:{valType:"enumerated",values:["top","middle","bottom"],role:"style",dflt:"middle",description:["Sets this color bar's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the color bar."].join(" ")},ypad:{valType:"number",role:"style",min:0,dflt:10,description:"Sets the amount of padding (in px) along the y direction."},outlinecolor:r.linecolor,outlinewidth:r.linewidth,bordercolor:r.linecolor,borderwidth:{valType:"number",role:"style",min:0,dflt:0,description:["Sets the width (in px) or the border enclosing this color bar."].join(" ")},bgcolor:{valType:"color",role:"style",dflt:"rgba(0,0,0,0)",description:"Sets the color of padded area."},tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:o({},r.ticks,{dflt:""}),ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:i({description:"Sets the color bar's tick label font"}),tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,separatethousands:r.separatethousands,exponentformat:r.exponentformat,showexponent:r.showexponent,title:{valType:"string",role:"info",description:"Sets the title of the color bar."},titlefont:i({description:"Sets this color bar's title font."}),titleside:{valType:"enumerated",values:["right","top","bottom"],role:"style",dflt:"top",description:["Determines the location of the colorbar title","with respect to the color bar."].join(" ")}},"colorbars","from-root")},{"../../lib/extend":145,"../../plot_api/edit_types":178,"../../plots/cartesian/layout_attributes":206,"../../plots/font_attributes":220}],36:[function(t,e,n){"use strict";e.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],37:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/cartesian/tick_value_defaults"),o=t("../../plots/cartesian/tick_mark_defaults"),a=t("../../plots/cartesian/tick_label_defaults"),s=t("./attributes");e.exports=function(t,e,n){var l=e.colorbar={},c=t.colorbar||{};function u(t,e){return r.coerce(c,l,s,t,e)}u("thickness","fraction"===u("thicknessmode")?30/(n.width-n.margin.l-n.margin.r):30),u("len","fraction"===u("lenmode")?1:n.height-n.margin.t-n.margin.b),u("x"),u("xanchor"),u("xpad"),u("y"),u("yanchor"),u("ypad"),r.noneOrAll(c,l,["x","y"]),u("outlinecolor"),u("outlinewidth"),u("bordercolor"),u("borderwidth"),u("bgcolor"),i(c,l,u,"linear");var d={outerTicks:!1,font:n.font};a(c,l,u,"linear",d),o(c,l,u,"linear",d),u("title",n._dfltTitle.colorbar),r.coerceFont(u,"titlefont",n.font),u("titleside")}},{"../../lib":151,"../../plots/cartesian/tick_label_defaults":214,"../../plots/cartesian/tick_mark_defaults":215,"../../plots/cartesian/tick_value_defaults":216,"./attributes":35}],38:[function(t,e,n){"use strict";var r=t("d3"),i=t("tinycolor2"),o=t("../../plotly"),a=t("../../plots/plots"),s=t("../../registry"),l=t("../../plots/cartesian/axes"),c=t("../dragelement"),u=t("../../lib"),d=t("../../lib/extend").extendFlat,h=t("../../lib/setcursor"),f=t("../drawing"),p=t("../color"),g=t("../titles"),m=t("../../lib/svg_text_utils"),v=t("../../constants/alignment").LINE_SPACING,y=t("../../plots/cartesian/axis_defaults"),_=t("../../plots/cartesian/position_defaults"),x=t("../../plots/cartesian/layout_attributes"),b=t("./attributes"),w=t("./constants").cn;e.exports=function(t,e){var n={};function k(){var b=t._fullLayout,M=b._size;if("function"==typeof n.fillcolor||"function"==typeof n.line.color){var A,L,S=r.extent(("function"==typeof n.fillcolor?n.fillcolor:n.line.color).domain()),C=[],P=[],z="function"==typeof n.line.color?n.line.color:function(){return n.line.color},D="function"==typeof n.fillcolor?n.fillcolor:function(){return n.fillcolor},E=n.levels.end+n.levels.size/100,O=n.levels.size,I=1.001*S[0]-.001*S[1],j=1.001*S[1]-.001*S[0];for(L=0;L<1e5&&(A=n.levels.start+L*O,!(O>0?A>=E:A<=E));L++)A>I&&A<j&&C.push(A);if("function"==typeof n.fillcolor)if(n.filllevels)for(E=n.filllevels.end+n.filllevels.size/100,O=n.filllevels.size,L=0;L<1e5&&(A=n.filllevels.start+L*O,!(O>0?A>=E:A<=E));L++)A>S[0]&&A<S[1]&&P.push(A);else(P=C.map(function(t){return t-n.levels.size/2})).push(P[P.length-1]+n.levels.size);else n.fillcolor&&"string"==typeof n.fillcolor&&(P=[0]);n.levels.size<0&&(C.reverse(),P.reverse());var N,R=b.height-b.margin.t-b.margin.b,B=b.width-b.margin.l-b.margin.r,F=Math.round(n.thickness*("fraction"===n.thicknessmode?B:1)),H=F/M.w,q=Math.round(n.len*("fraction"===n.lenmode?R:1)),Z=q/M.h,V=n.xpad/M.w,U=(n.borderwidth+n.outlinewidth)/2,W=n.ypad/M.h,G=Math.round(n.x*M.w+n.xpad),X=n.x-H*({middle:.5,right:1}[n.xanchor]||0),Y=n.y+Z*(({top:-.5,bottom:.5}[n.yanchor]||0)-.5),$=Math.round(M.h*(1-Y)),J=$-q,Q={type:"linear",range:S,tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:n.ticks,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,tickfont:n.tickfont,tickangle:n.tickangle,tickformat:n.tickformat,exponentformat:n.exponentformat,separatethousands:n.separatethousands,showexponent:n.showexponent,showtickprefix:n.showtickprefix,tickprefix:n.tickprefix,showticksuffix:n.showticksuffix,ticksuffix:n.ticksuffix,title:n.title,titlefont:n.titlefont,showline:!0,anchor:"free",position:1},K={type:"linear",_id:"y"+e},tt={letter:"y",font:b.font,noHover:!0,calendar:b.calendar};if(y(Q,K,gt,tt,b),_(Q,K,gt,tt),K.position=n.x+V+H,k.axis=K,-1!==["top","bottom"].indexOf(n.titleside)&&(K.titleside=n.titleside,K.titlex=n.x+V,K.titley=Y+("top"===n.titleside?Z-W:W)),n.line.color&&"auto"===n.tickmode){K.tickmode="linear",K.tick0=n.levels.start;var et=n.levels.size,nt=u.constrain(($-J)/50,4,15)+1,rt=(S[1]-S[0])/((n.nticks||nt)*et);if(rt>1){var it=Math.pow(10,Math.floor(Math.log(rt)/Math.LN10));et*=it*u.roundUp(rt/it,[2,5,10]),(Math.abs(n.levels.start)/n.levels.size+1e-6)%1<2e-6&&(K.tick0=0)}K.dtick=et}K.domain=[Y+W,Y+Z-W],K.setScale();var ot=b._infolayer.selectAll("g."+e).data([0]);ot.enter().append("g").classed(e,!0).classed(w.colorbar,!0).each(function(){var t=r.select(this);t.append("rect").classed(w.cbbg,!0),t.append("g").classed(w.cbfills,!0),t.append("g").classed(w.cblines,!0),t.append("g").classed(w.cbaxis,!0).classed(w.crisp,!0),t.append("g").classed(w.cbtitleunshift,!0).append("g").classed(w.cbtitle,!0),t.append("rect").classed(w.cboutline,!0),t.select(".cbtitle").datum(0)}),ot.attr("transform","translate("+Math.round(M.l)+","+Math.round(M.t)+")");var at=ot.select(".cbtitleunshift").attr("transform","translate(-"+Math.round(M.l)+",-"+Math.round(M.t)+")");K._axislayer=ot.select(".cbaxis");var st=0;if(-1!==["top","bottom"].indexOf(n.titleside)){var lt,ct=M.l+(n.x+V)*M.w,ut=K.titlefont.size;lt="top"===n.titleside?(1-(Y+Z-W))*M.h+M.t+3+.75*ut:(1-(Y+W))*M.h+M.t-3-.25*ut,mt(K._id+"title",{attributes:{x:ct,y:lt,"text-anchor":"start"}})}var dt,ht,ft,pt=u.syncOrAsync([a.previousPromises,function(){if(-1!==["top","bottom"].indexOf(n.titleside)){var e=ot.select(".cbtitle"),o=e.select("text"),a=[-n.outlinewidth/2,n.outlinewidth/2],s=e.select(".h"+K._id+"title-math-group").node(),c=15.6;if(o.node()&&(c=parseInt(o.node().style.fontSize,10)*v),s?(st=f.bBox(s).height)>c&&(a[1]-=(st-c)/2):o.node()&&!o.classed(w.jsPlaceholder)&&(st=f.bBox(o.node()).height),st){if(st+=5,"top"===n.titleside)K.domain[1]-=st/M.h,a[1]*=-1;else{K.domain[0]+=st/M.h;var d=m.lineCount(o);a[1]+=(1-d)*c}e.attr("transform","translate("+a+")"),K.setScale()}}ot.selectAll(".cbfills,.cblines").attr("transform","translate(0,"+Math.round(M.h*(1-K.domain[1]))+")"),K._axislayer.attr("transform","translate(0,"+Math.round(-M.t)+")");var h=ot.select(".cbfills").selectAll("rect.cbfill").data(P);h.enter().append("rect").classed(w.cbfill,!0).style("stroke","none"),h.exit().remove(),h.each(function(t,e){var n=[0===e?S[0]:(P[e]+P[e-1])/2,e===P.length-1?S[1]:(P[e]+P[e+1])/2].map(K.c2p).map(Math.round);e!==P.length-1&&(n[1]+=n[1]>n[0]?1:-1);var o=D(t).replace("e-",""),a=i(o).toHexString();r.select(this).attr({x:G,width:Math.max(F,2),y:r.min(n),height:Math.max(r.max(n)-r.min(n),2),fill:a})});var p=ot.select(".cblines").selectAll("path.cbline").data(n.line.color&&n.line.width?C:[]);return p.enter().append("path").classed(w.cbline,!0),p.exit().remove(),p.each(function(t){r.select(this).attr("d","M"+G+","+(Math.round(K.c2p(t))+n.line.width/2%1)+"h"+F).call(f.lineGroupStyle,n.line.width,z(t),n.line.dash)}),K._axislayer.selectAll("g."+K._id+"tick,path").remove(),K._pos=G+F+(n.outlinewidth||0)/2-("outside"===n.ticks?1:0),K.side="right",u.syncOrAsync([function(){return l.doTicks(t,K,!0)},function(){if(-1===["top","bottom"].indexOf(n.titleside)){var e=K.titlefont.size,i=K._offset+K._length/2,o=M.l+(K.position||0)*M.w+("right"===K.side?10+e*(K.showticklabels?1:.5):-10-e*(K.showticklabels?.5:0));mt("h"+K._id+"title",{avoid:{selection:r.select(t).selectAll("g."+K._id+"tick"),side:n.titleside,offsetLeft:M.l,offsetTop:0,maxShift:b.width},attributes:{x:o,y:i,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}])},a.previousPromises,function(){var r=F+n.outlinewidth/2+f.bBox(K._axislayer.node()).width;if((N=at.select("text")).node()&&!N.classed(w.jsPlaceholder)){var i,o=at.select(".h"+K._id+"title-math-group").node();i=o&&-1!==["top","bottom"].indexOf(n.titleside)?f.bBox(o).width:f.bBox(at.node()).right-G-M.l,r=Math.max(r,i)}var s=2*n.xpad+r+n.borderwidth+n.outlinewidth/2,l=$-J;ot.select(".cbbg").attr({x:G-n.xpad-(n.borderwidth+n.outlinewidth)/2,y:J-U,width:Math.max(s,2),height:Math.max(l+2*U,2)}).call(p.fill,n.bgcolor).call(p.stroke,n.bordercolor).style({"stroke-width":n.borderwidth}),ot.selectAll(".cboutline").attr({x:G,y:J+n.ypad+("top"===n.titleside?st:0),width:Math.max(F,2),height:Math.max(l-2*n.ypad-st,2)}).call(p.stroke,n.outlinecolor).style({fill:"None","stroke-width":n.outlinewidth});var c=({center:.5,right:1}[n.xanchor]||0)*s;ot.attr("transform","translate("+(M.l-c)+","+M.t+")"),a.autoMargin(t,e,{x:n.x,y:n.y,l:s*({right:1,center:.5}[n.xanchor]||0),r:s*({left:1,center:.5}[n.xanchor]||0),t:l*({bottom:1,middle:.5}[n.yanchor]||0),b:l*({top:1,middle:.5}[n.yanchor]||0)})}],t);if(pt&&pt.then&&(t._promises||[]).push(pt),t._context.edits.colorbarPosition)c.init({element:ot.node(),gd:t,prepFn:function(){dt=ot.attr("transform"),h(ot)},moveFn:function(t,e){ot.attr("transform",dt+" translate("+t+","+e+")"),ht=c.align(X+t/M.w,H,0,1,n.xanchor),ft=c.align(Y-e/M.h,Z,0,1,n.yanchor);var r=c.getCursor(ht,ft,n.xanchor,n.yanchor);h(ot,r)},doneFn:function(){h(ot),void 0!==ht&&void 0!==ft&&o.restyle(t,{"colorbar.x":ht,"colorbar.y":ft},T().index)}});return pt}function gt(t,e){return u.coerce(Q,K,x,t,e)}function mt(e,n){var r,i=T();r=s.traceIs(i,"markerColorscale")?"marker.colorbar.title":"colorbar.title";var o={propContainer:K,propName:r,traceIndex:i.index,placeholder:b._dfltTitle.colorbar,containerGroup:ot.select(".cbtitle")},a="h"===e.charAt(0)?e.substr(1):"h"+e;ot.selectAll("."+a+",."+a+"-math-group").remove(),g.draw(t,e,d(o,n||{}))}b._infolayer.selectAll("g."+e).remove()}function T(){var n,r,i=e.substr(2);for(n=0;n<t._fullData.length;n++)if((r=t._fullData[n]).uid===i)return r}return Object.keys(b).forEach(function(t){n[t]=null}),n.fillcolor=null,n.line={color:null,width:null,dash:null},n.levels={start:null,end:null,size:null},n.filllevels=null,Object.keys(n).forEach(function(t){k[t]=function(e){return arguments.length?(n[t]=u.isPlainObject(n[t])?u.extendFlat(n[t],e):e,k):n[t]}}),k.options=function(t){return Object.keys(t).forEach(function(e){"function"==typeof k[e]&&k[e](t[e])}),k},k._opts=n,k}},{"../../constants/alignment":132,"../../lib":151,"../../lib/extend":145,"../../lib/setcursor":170,"../../lib/svg_text_utils":172,"../../plotly":189,"../../plots/cartesian/axes":194,"../../plots/cartesian/axis_defaults":196,"../../plots/cartesian/layout_attributes":206,"../../plots/cartesian/position_defaults":210,"../../plots/plots":226,"../../registry":233,"../color":34,"../dragelement":56,"../drawing":59,"../titles":125,"./attributes":35,"./constants":36,d3:1,tinycolor2:293}],39:[function(t,e,n){"use strict";var r=t("../../lib");e.exports=function(t){return r.isPlainObject(t.colorbar)}},{"../../lib":151}],40:[function(t,e,n){"use strict";e.exports={zauto:{valType:"boolean",role:"info",dflt:!0,editType:"calc",impliedEdits:{zmin:void 0,zmax:void 0},description:["Determines the whether or not the color domain is computed","with respect to the input data."].join(" ")},zmin:{valType:"number",role:"info",dflt:null,editType:"plot",impliedEdits:{zauto:!1},description:"Sets the lower bound of color domain."},zmax:{valType:"number",role:"info",dflt:null,editType:"plot",impliedEdits:{zauto:!1},description:"Sets the upper bound of color domain."},colorscale:{valType:"colorscale",role:"style",editType:"calc",impliedEdits:{autocolorscale:!1},description:["Sets the colorscale.","The colorscale must be an array containing","arrays mapping a normalized value to an","rgb, rgba, hex, hsl, hsv, or named color string.","At minimum, a mapping for the lowest (0) and highest (1)","values are required. For example,","`[[0, 'rgb(0,0,255)', [1, 'rgb(255,0,0)']]`.","To control the bounds of the colorscale in z space,","use zmin and zmax"].join(" ")},autocolorscale:{valType:"boolean",role:"style",dflt:!0,editType:"calc",impliedEdits:{colorscale:void 0},description:["Determines whether or not the colorscale is picked using the sign of","the input z values."].join(" ")},reversescale:{valType:"boolean",role:"style",dflt:!1,editType:"calc",description:"Reverses the colorscale."},showscale:{valType:"boolean",role:"info",dflt:!0,editType:"calc",description:["Determines whether or not a colorbar is displayed for this trace."].join(" ")}}},{}],41:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./scales"),o=t("./flip_scale");e.exports=function(t,e,n,a){var s,l;n?(s=r.nestedProperty(t,n).get(),l=r.nestedProperty(t._input,n).get()):(s=t,l=t._input);var c=a+"auto",u=a+"min",d=a+"max",h=s[c],f=s[u],p=s[d],g=s.colorscale;!1===h&&void 0!==f||(f=r.aggNums(Math.min,null,e)),!1===h&&void 0!==p||(p=r.aggNums(Math.max,null,e)),f===p&&(f-=.5,p+=.5),s[u]=f,s[d]=p,l[u]=f,l[d]=p,l[c]=!1!==h||void 0===f&&void 0===p,s.autocolorscale&&(g=f*p<0?i.RdBu:f>=0?i.Reds:i.Blues,l.colorscale=g,s.reversescale&&(g=o(g)),s.colorscale=g)}},{"../../lib":151,"./flip_scale":46,"./scales":53}],42:[function(t,e,n){"use strict";var r=t("./attributes"),i=t("../../lib/extend").extendFlat,o=t("./scales.js");e.exports=function(t,e,n){var a=t?t+".":"";return{color:{valType:"color",arrayOk:!0,role:"style",editType:e||"style",description:["Sets the",t,"color. It accepts either a specific color","or an array of numbers that are mapped to the colorscale","relative to the max and min values of the array or relative to","`cmin` and `cmax` if set."].join(" ")},colorscale:i({},r.colorscale,{description:["Sets the colorscale and only has an effect","if `"+a+"color` is set to a numerical array.","The colorscale must be an array containing","arrays mapping a normalized value to an","rgb, rgba, hex, hsl, hsv, or named color string.","At minimum, a mapping for the lowest (0) and highest (1)","values are required. For example,","`[[0, 'rgb(0,0,255)', [1, 'rgb(255,0,0)']]`.","To control the bounds of the colorscale in color space,","use `"+a+"cmin` and `"+a+"cmax`.","Alternatively, `colorscale` may be a palette name string","of the following list:",Object.keys(o).join(", ")].join(" ")}),cauto:i({},r.zauto,{impliedEdits:{cmin:void 0,cmax:void 0},description:["Has an effect only if `"+a+"color` is set to a numerical array","and `cmin`, `cmax` are set by the user. In this case,","it controls whether the range of colors in `colorscale` is mapped to","the range of values in the `color` array (`cauto: true`), or the `cmin`/`cmax`","values (`cauto: false`).","Defaults to `false` when `cmin`, `cmax` are set by the user."].join(" ")}),cmax:i({},r.zmax,{editType:e||r.zmax.editType,impliedEdits:{cauto:!1},description:["Has an effect only if `"+a+"color` is set to a numerical array.","Sets the upper bound of the color domain.","Value should be associated to the `"+a+"color` array index,","and if set, `"+a+"cmin` must be set as well."].join(" ")}),cmin:i({},r.zmin,{editType:e||r.zmin.editType,impliedEdits:{cauto:!1},description:["Has an effect only if `"+a+"color` is set to a numerical array.","Sets the lower bound of the color domain.","Value should be associated to the `"+a+"color` array index,","and if set, `"+a+"cmax` must be set as well."].join(" ")}),autocolorscale:i({},r.autocolorscale,{description:["Has an effect only if `"+a+"color` is set to a numerical array.","Determines whether the colorscale is a default palette (`autocolorscale: true`)","or the palette determined by `"+a+"colorscale`.","In case `colorscale` is unspecified or `autocolorscale` is true, the default ","palette will be chosen according to whether numbers in the `color` array are","all positive, all negative or mixed."].join(" "),dflt:!1===n?n:r.autocolorscale.dflt}),reversescale:i({},r.reversescale,{description:["Has an effect only if `"+a+"color` is set to a numerical array.","Reverses the color mapping if true (`cmin` will correspond to the last color","in the array and `cmax` will correspond to the first color)."].join(" ")})}}},{"../../lib/extend":145,"./attributes":40,"./scales.js":53}],43:[function(t,e,n){"use strict";var r=t("./scales");e.exports=r.RdBu},{"./scales":53}],44:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib"),o=t("../colorbar/has_colorbar"),a=t("../colorbar/defaults"),s=t("./is_valid_scale"),l=t("./flip_scale");e.exports=function(t,e,n,c,u){var d,h=u.prefix,f=u.cLetter,p=h.slice(0,h.length-1),g=h?i.nestedProperty(t,p).get()||{}:t,m=h?i.nestedProperty(e,p).get()||{}:e,v=g[f+"min"],y=g[f+"max"],_=g.colorscale;c(h+f+"auto",!(r(v)&&r(y)&&v<y)),c(h+f+"min"),c(h+f+"max"),void 0!==_&&(d=!s(_)),c(h+"autocolorscale",d);var x,b=c(h+"colorscale");(c(h+"reversescale")&&(m.colorscale=l(b)),"marker.line."!==h)&&(h&&(x=o(g)),c(h+"showscale",x)&&a(g,m,n))}},{"../../lib":151,"../colorbar/defaults":37,"../colorbar/has_colorbar":39,"./flip_scale":46,"./is_valid_scale":50,"fast-isnumeric":4}],45:[function(t,e,n){"use strict";e.exports=function(t,e,n){for(var r=t.length,i=new Array(r),o=new Array(r),a=0;a<r;a++){var s=t[a];i[a]=e+s[0]*(n-e),o[a]=s[1]}return{domain:i,range:o}}},{}],46:[function(t,e,n){"use strict";e.exports=function(t){for(var e,n=t.length,r=new Array(n),i=n-1,o=0;i>=0;i--,o++)e=t[i],r[o]=[1-e[0],e[1]];return r}},{}],47:[function(t,e,n){"use strict";var r=t("./scales"),i=t("./default_scale"),o=t("./is_valid_scale_array");e.exports=function(t,e){if(e||(e=i),!t)return e;function n(){try{t=r[t]||JSON.parse(t)}catch(n){t=e}}return"string"==typeof t&&(n(),"string"==typeof t&&n()),o(t)?t:e}},{"./default_scale":43,"./is_valid_scale_array":51,"./scales":53}],48:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib"),o=t("./is_valid_scale");e.exports=function(t,e){var n=e?i.nestedProperty(t,e).get()||{}:t,a=n.color,s=!1;if(Array.isArray(a))for(var l=0;l<a.length;l++)if(r(a[l])){s=!0;break}return i.isPlainObject(n)&&(s||!0===n.showscale||r(n.cmin)&&r(n.cmax)||o(n.colorscale)||i.isPlainObject(n.colorbar))}},{"../../lib":151,"./is_valid_scale":50,"fast-isnumeric":4}],49:[function(t,e,n){"use strict";n.scales=t("./scales"),n.defaultScale=t("./default_scale"),n.attributes=t("./attributes"),n.handleDefaults=t("./defaults"),n.calc=t("./calc"),n.hasColorscale=t("./has_colorscale"),n.isValidScale=t("./is_valid_scale"),n.getScale=t("./get_scale"),n.flipScale=t("./flip_scale"),n.extractScale=t("./extract_scale"),n.makeColorScaleFunc=t("./make_color_scale_func")},{"./attributes":40,"./calc":41,"./default_scale":43,"./defaults":44,"./extract_scale":45,"./flip_scale":46,"./get_scale":47,"./has_colorscale":48,"./is_valid_scale":50,"./make_color_scale_func":52,"./scales":53}],50:[function(t,e,n){"use strict";var r=t("./scales"),i=t("./is_valid_scale_array");e.exports=function(t){return void 0!==r[t]||i(t)}},{"./is_valid_scale_array":51,"./scales":53}],51:[function(t,e,n){"use strict";var r=t("tinycolor2");e.exports=function(t){var e=0;if(!Array.isArray(t)||t.length<2)return!1;if(!t[0]||!t[t.length-1])return!1;if(0!=+t[0][0]||1!=+t[t.length-1][0])return!1;for(var n=0;n<t.length;n++){var i=t[n];if(2!==i.length||+i[0]<e||!r(i[1]).isValid())return!1;e=+i[0]}return!0}},{tinycolor2:293}],52:[function(t,e,n){"use strict";var r=t("d3"),i=t("tinycolor2"),o=t("fast-isnumeric"),a=t("../color");function s(t){var e={r:t[0],g:t[1],b:t[2],a:t[3]};return i(e).toRgbString()}e.exports=function(t,e){e=e||{};for(var n=t.domain,l=t.range,c=l.length,u=new Array(c),d=0;d<c;d++){var h=i(l[d]).toRgb();u[d]=[h.r,h.g,h.b,h.a]}var f,p=r.scale.linear().domain(n).range(u).clamp(!0),g=e.noNumericCheck,m=e.returnArray;return(f=g&&m?p:g?function(t){return s(p(t))}:m?function(t){return o(t)?p(t):i(t).isValid()?t:a.defaultLine}:function(t){return o(t)?s(p(t)):i(t).isValid()?t:a.defaultLine}).domain=p.domain,f.range=function(){return l},f}},{"../color":34,d3:1,"fast-isnumeric":4,tinycolor2:293}],53:[function(t,e,n){"use strict";e.exports={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]}},{}],54:[function(t,e,n){"use strict";e.exports=function(t,e,n,r,i){var o=(t-n)/(r-n),a=o+e/(r-n),s=(o+a)/2;return"left"===i||"bottom"===i?o:"center"===i||"middle"===i?s:"right"===i||"top"===i?a:o<2/3-s?o:a>4/3-s?a:s}},{}],55:[function(t,e,n){"use strict";var r=t("../../lib"),i=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];e.exports=function(t,e,n,o){return t="left"===n?0:"center"===n?1:"right"===n?2:r.constrain(Math.floor(3*t),0,2),e="bottom"===o?0:"middle"===o?1:"top"===o?2:r.constrain(Math.floor(3*e),0,2),i[e][t]}},{"../../lib":151}],56:[function(t,e,n){"use strict";var r=t("mouse-event-offset"),i=t("has-hover"),o=t("has-passive-events"),a=t("../../plotly"),s=t("../../lib"),l=t("../../plots/cartesian/constants"),c=t("../../constants/interactions"),u=e.exports={};u.align=t("./align"),u.getCursor=t("./cursor");var d=t("./unhover");function h(){var t=document.createElement("div");t.className="dragcover";var e=t.style;return e.position="fixed",e.left=0,e.right=0,e.top=0,e.bottom=0,e.zIndex=999999999,e.background="none",document.body.appendChild(t),t}function f(t){return r(t.changedTouches?t.changedTouches[0]:t,document.body)}u.unhover=d.wrapped,u.unhoverRaw=d.raw,u.init=function(t){var e,n,r,d,p,g,m,v,y=t.gd,_=1,x=c.DBLCLICKDELAY,b=t.element;y._mouseDownTime||(y._mouseDownTime=0),b.style.pointerEvents="all",b.onmousedown=k,o?(b._ontouchstart&&b.removeEventListener("touchstart",b._ontouchstart),b._ontouchstart=k,b.addEventListener("touchstart",k,{passive:!1})):b.ontouchstart=k;var w=t.clampFn||function(t,e,n){return Math.abs(t)<n&&(t=0),Math.abs(e)<n&&(e=0),[t,e]};function k(o){o.preventDefault(),y._dragged=!1,y._dragging=!0;var a=f(o);e=a[0],n=a[1],m=o.target,g=o,v=o.buttons&&2===o.buttons||o.ctrlKey,(r=(new Date).getTime())-y._mouseDownTime<x?_+=1:(_=1,y._mouseDownTime=r),t.prepFn&&t.prepFn(o,e,n),i&&!v?(p=h()).style.cursor=window.getComputedStyle(b).cursor:i||(p=document,d=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(b).cursor),document.addEventListener("mousemove",T),document.addEventListener("mouseup",M),document.addEventListener("touchmove",T),document.addEventListener("touchend",M)}function T(r){r.preventDefault();var i=f(r),o=t.minDrag||l.MINDRAG,a=w(i[0]-e,i[1]-n,o),s=a[0],c=a[1];(s||c)&&(y._dragged=!0,u.unhover(y)),y._dragged&&t.moveFn&&!v&&t.moveFn(s,c)}function M(e){if(document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",M),document.removeEventListener("touchmove",T),document.removeEventListener("touchend",M),e.preventDefault(),i?s.removeElement(p):d&&(p.documentElement.style.cursor=d,d=null),y._dragging){if(y._dragging=!1,(new Date).getTime()-y._mouseDownTime>x&&(_=Math.max(_-1,1)),y._dragged)t.doneFn&&t.doneFn(e);else if(t.clickFn&&t.clickFn(_,g),!v){var n;try{n=new MouseEvent("click",e)}catch(t){var r=f(e);(n=document.createEvent("MouseEvents")).initMouseEvent("click",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,r[0],r[1],e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}m.dispatchEvent(n)}var o;(o=y)._dragging=!1,o._replotPending&&a.plot(o),y._dragged=!1}else y._dragged=!1}},u.coverSlip=h},{"../../constants/interactions":133,"../../lib":151,"../../plotly":189,"../../plots/cartesian/constants":199,"./align":54,"./cursor":55,"./unhover":57,"has-hover":6,"has-passive-events":7,"mouse-event-offset":12}],57:[function(t,e,n){"use strict";var r=t("../../lib/events"),i=t("../../lib/throttle"),o=t("../../lib/get_graph_div"),a=t("../fx/constants"),s=e.exports={};s.wrapped=function(t,e,n){(t=o(t))._fullLayout&&i.clear(t._fullLayout._uid+a.HOVERID),s.raw(t,e,n)},s.raw=function(t,e){var n=t._fullLayout,i=t._hoverdata;e||(e={}),e.target&&!1===r.triggerHandler(t,"plotly_beforehover",e)||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),t._hoverdata=void 0,e.target&&i&&t.emit("plotly_unhover",{event:e,points:i}))}},{"../../lib/events":144,"../../lib/get_graph_div":149,"../../lib/throttle":173,"../fx/constants":71}],58:[function(t,e,n){"use strict";n.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",role:"style",editType:"style",description:["Sets the dash style of lines. Set to a dash type string","(*solid*, *dot*, *dash*, *longdash*, *dashdot*, or *longdashdot*)","or a dash length list in px (eg *5px,10px,2px,2px*)."].join(" ")}},{}],59:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),o=t("tinycolor2"),a=t("../../registry"),s=t("../color"),l=t("../colorscale"),c=t("../../lib"),u=t("../../lib/svg_text_utils"),d=t("../../constants/xmlns_namespaces"),h=t("../../constants/alignment").LINE_SPACING,f=t("../../constants/interactions").DESELECTDIM,p=t("../../traces/scatter/subtypes"),g=t("../../traces/scatter/make_bubble_size_func"),m=e.exports={};m.font=function(t,e,n,r){c.isPlainObject(e)&&(r=e.color,n=e.size,e=e.family),e&&t.style("font-family",e),n+1&&t.style("font-size",n+"px"),r&&t.call(s.fill,r)},m.setPosition=function(t,e,n){t.attr("x",e).attr("y",n)},m.setSize=function(t,e,n){t.attr("width",e).attr("height",n)},m.setRect=function(t,e,n,r,i){t.call(m.setPosition,e,n).call(m.setSize,r,i)},m.translatePoint=function(t,e,n,r){var o=n.c2p(t.x),a=r.c2p(t.y);return!!(i(o)&&i(a)&&e.node())&&("text"===e.node().nodeName?e.attr("x",o).attr("y",a):e.attr("transform","translate("+o+","+a+")"),!0)},m.translatePoints=function(t,e,n){t.each(function(t){var i=r.select(this);m.translatePoint(t,i,e,n)})},m.hideOutsideRangePoint=function(t,e,n,r,i,o){e.attr("display",n.isPtWithinRange(t,i)&&r.isPtWithinRange(t,o)?null:"none")},m.hideOutsideRangePoints=function(t,e){if(e._hasClipOnAxisFalse){var n=e.xaxis,i=e.yaxis;t.each(function(e){var o=e[0].trace,a=o.xcalendar,s=o.ycalendar;t.selectAll(".point,.textpoint").each(function(t){m.hideOutsideRangePoint(t,r.select(this),n,i,a,s)})})}},m.crispRound=function(t,e,n){return e&&i(e)?t._context.staticPlot?e:e<1?1:Math.round(e):n||0},m.singleLineStyle=function(t,e,n,r,i){e.style("fill","none");var o=(((t||[])[0]||{}).trace||{}).line||{},a=n||o.width||0,l=i||o.dash||"";s.stroke(e,r||o.color),m.dashLine(e,l,a)},m.lineGroupStyle=function(t,e,n,i){t.style("fill","none").each(function(t){var o=(((t||[])[0]||{}).trace||{}).line||{},a=e||o.width||0,l=i||o.dash||"";r.select(this).call(s.stroke,n||o.color).call(m.dashLine,l,a)})},m.dashLine=function(t,e,n){n=+n||0,e=m.dashStyle(e,n),t.style({"stroke-dasharray":e,"stroke-width":n+"px"})},m.dashStyle=function(t,e){e=+e||1;var n=Math.max(e,3);return"solid"===t?t="":"dot"===t?t=n+"px,"+n+"px":"dash"===t?t=3*n+"px,"+3*n+"px":"longdash"===t?t=5*n+"px,"+5*n+"px":"dashdot"===t?t=3*n+"px,"+n+"px,"+n+"px,"+n+"px":"longdashdot"===t&&(t=5*n+"px,"+2*n+"px,"+n+"px,"+2*n+"px"),t},m.singleFillStyle=function(t){var e=(((r.select(t.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;e&&t.call(s.fill,e)},m.fillGroupStyle=function(t){t.style("stroke-width",0).each(function(e){var n=r.select(this);try{n.call(s.fill,e[0].trace.fillcolor)}catch(e){c.error(e,t),n.remove()}})};var v=t("./symbol_defs");m.symbolNames=[],m.symbolFuncs=[],m.symbolNeedLines={},m.symbolNoDot={},m.symbolNoFill={},m.symbolList=[],Object.keys(v).forEach(function(t){var e=v[t];m.symbolList=m.symbolList.concat([e.n,t,e.n+100,t+"-open"]),m.symbolNames[e.n]=t,m.symbolFuncs[e.n]=e.f,e.needLine&&(m.symbolNeedLines[e.n]=!0),e.noDot?m.symbolNoDot[e.n]=!0:m.symbolList=m.symbolList.concat([e.n+200,t+"-dot",e.n+300,t+"-open-dot"]),e.noFill&&(m.symbolNoFill[e.n]=!0)});var y=m.symbolNames.length,_="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";function x(t,e){var n=t%100;return m.symbolFuncs[n](e)+(t>=200?_:"")}m.symbolNumber=function(t){if("string"==typeof t){var e=0;t.indexOf("-open")>0&&(e=100,t=t.replace("-open","")),t.indexOf("-dot")>0&&(e+=200,t=t.replace("-dot","")),(t=m.symbolNames.indexOf(t))>=0&&(t+=e)}return t%100>=y||t>=400?0:Math.floor(Math.max(t,0))};var b={x1:1,x2:0,y1:0,y2:0},w={x1:0,x2:0,y1:1,y2:0};m.gradient=function(t,e,n,i,a,l){var u=e._fullLayout._defs.select(".gradients").selectAll("#"+n).data([i+a+l],c.identity);u.exit().remove(),u.enter().append("radial"===i?"radialGradient":"linearGradient").each(function(){var t=r.select(this);"horizontal"===i?t.attr(b):"vertical"===i&&t.attr(w),t.attr("id",n);var e=o(a),c=o(l);t.append("stop").attr({offset:"0%","stop-color":s.tinyRGB(c),"stop-opacity":c.getAlpha()}),t.append("stop").attr({offset:"100%","stop-color":s.tinyRGB(e),"stop-opacity":e.getAlpha()})}),t.style({fill:"url(#"+n+")","fill-opacity":null})},m.initGradients=function(t){var e=t._fullLayout._defs.selectAll(".gradients").data([0]);e.enter().append("g").classed("gradients",!0),e.selectAll("linearGradient,radialGradient").remove()},m.singlePointStyle=function(t,e,n,r,i,o){var l=n.marker;!function(t,e,n,r,i,o,l,c){if(a.traceIs(n,"symbols")){var u=g(n);e.attr("d",function(t){var e;e="various"===t.ms||"various"===o.size?3:p.isBubble(n)?u(t.ms):(o.size||6)/2,t.mrc=e;var r=m.symbolNumber(t.mx||o.symbol)||0;return t.om=r%200>=100,x(r,e)})}e.style("opacity",function(t){return(t.mo+1||o.opacity+1)-1});var d,h,f,v=!1;if(t.so?(f=l.outlierwidth,h=l.outliercolor,d=o.outliercolor):(f=(t.mlw+1||l.width+1||(t.trace?t.trace.marker.line.width:0)+1)-1,h="mlc"in t?t.mlcc=i(t.mlc):Array.isArray(l.color)?s.defaultLine:l.color,Array.isArray(o.color)&&(d=s.defaultLine,v=!0),d="mc"in t?t.mcc=r(t.mc):o.color||"rgba(0,0,0,0)"),t.om)e.call(s.stroke,d).style({"stroke-width":(f||1)+"px",fill:"none"});else{e.style("stroke-width",f+"px");var y=o.gradient,_=t.mgt;if(_?v=!0:_=y&&y.type,_&&"none"!==_){var b=t.mgc;b?v=!0:b=y.color;var w="g"+c._fullLayout._uid+"-"+n.uid;v&&(w+="-"+t.i),e.call(m.gradient,c,w,_,d,b)}else e.call(s.fill,d);f&&e.call(s.stroke,h)}}(t,e,n,r,i,l,l.line,o)},m.pointStyle=function(t,e,n){if(t.size()){var i=e.marker,o=m.tryColorscale(i,""),a=m.tryColorscale(i,"line");t.each(function(t){m.singlePointStyle(t,r.select(this),e,o,a,n)})}},m.selectedPointStyle=function(t,e){if(t.size()&&e.selectedpoints){var n=e.selected||{},i=e.unselected||{},o=e.marker||{},l=n.marker||{},c=i.marker||{},u=o.opacity,d=l.opacity,h=c.opacity,p=void 0!==d,g=void 0!==h;t.each(function(t){var e,n=r.select(this),i=t.mo,o=void 0!==i;(o||p||g)&&(t.selected?p&&(e=d):e=g?h:f*(o?i:u)),void 0!==e&&n.style("opacity",e)});var v=l.color,y=c.color;(v||y)&&t.each(function(t){var e,n=r.select(this);t.selected?v&&(e=v):y&&(e=y),e&&s.fill(n,e)});var _=l.size,b=c.size,w=void 0!==_,k=void 0!==b;a.traceIs(e,"symbols")&&(w||k)&&t.each(function(t){var e,n=r.select(this),i=t.mrc,a=t.mx||o.symbol||0;e=t.selected?w?_/2:i:k?b/2:i,n.attr("d",x(m.symbolNumber(a),e)),t.mrc2=e})}},m.tryColorscale=function(t,e){var n=e?c.nestedProperty(t,e).get():t,r=n.colorscale,i=n.color;return r&&Array.isArray(i)?l.makeColorScaleFunc(l.extractScale(r,n.cmin,n.cmax)):c.identity};var k={start:1,end:-1,middle:0,bottom:1,top:-1};function T(t,e,n,i){var o=r.select(t.node().parentNode),a=-1!==e.indexOf("top")?"top":-1!==e.indexOf("bottom")?"bottom":"middle",s=-1!==e.indexOf("left")?"end":-1!==e.indexOf("right")?"start":"middle",l=i?i/.8+1:0,c=(u.lineCount(t)-1)*h+1,d=k[s]*l,f=.75*n+k[a]*l+(k[a]-1)*c*n/2;t.attr("text-anchor",s),o.attr("transform","translate("+d+","+f+")")}function M(t,e){var n=t.ts||e.textfont.size;return i(n)&&n>0?n:0}m.textPointStyle=function(t,e,n){t.each(function(t){var i=r.select(this),o=c.extractOption(t,e,"tx","text");if(o){var a=t.tp||e.textposition,s=M(t,e);i.call(m.font,t.tf||e.textfont.family,s,t.tc||e.textfont.color).text(o).call(u.convertToTspans,n).call(T,a,s,t.mrc)}else i.remove()})},m.selectedTextStyle=function(t,e){if(t.size()&&e.selectedpoints){var n=e.selected||{},i=e.unselected||{};t.each(function(t){var o,a=r.select(this),l=t.tc||e.textfont.color,c=t.tp||e.textposition,u=M(t,e),d=(n.textfont||{}).color,h=(i.textfont||{}).color;t.selected?d&&(o=d):h?o=h:d||(o=s.addOpacity(l,f)),o&&s.fill(a,o),T(a,c,u,t.mrc2||t.mrc)})}};var A=.5;function L(t,e,n,i){var o=t[0]-e[0],a=t[1]-e[1],s=n[0]-e[0],l=n[1]-e[1],c=Math.pow(o*o+a*a,A/2),u=Math.pow(s*s+l*l,A/2),d=(u*u*o-c*c*s)*i,h=(u*u*a-c*c*l)*i,f=3*u*(c+u),p=3*c*(c+u);return[[r.round(e[0]+(f&&d/f),2),r.round(e[1]+(f&&h/f),2)],[r.round(e[0]-(p&&d/p),2),r.round(e[1]-(p&&h/p),2)]]}m.smoothopen=function(t,e){if(t.length<3)return"M"+t.join("L");var n,r="M"+t[0],i=[];for(n=1;n<t.length-1;n++)i.push(L(t[n-1],t[n],t[n+1],e));for(r+="Q"+i[0][0]+" "+t[1],n=2;n<t.length-1;n++)r+="C"+i[n-2][1]+" "+i[n-1][0]+" "+t[n];return r+="Q"+i[t.length-3][1]+" "+t[t.length-1]},m.smoothclosed=function(t,e){if(t.length<3)return"M"+t.join("L")+"Z";var n,r="M"+t[0],i=t.length-1,o=[L(t[i],t[0],t[1],e)];for(n=1;n<i;n++)o.push(L(t[n-1],t[n],t[n+1],e));for(o.push(L(t[i-1],t[i],t[0],e)),n=1;n<=i;n++)r+="C"+o[n-1][1]+" "+o[n][0]+" "+t[n];return r+="C"+o[i][1]+" "+o[0][0]+" "+t[0]+"Z"};var S={hv:function(t,e){return"H"+r.round(e[0],2)+"V"+r.round(e[1],2)},vh:function(t,e){return"V"+r.round(e[1],2)+"H"+r.round(e[0],2)},hvh:function(t,e){return"H"+r.round((t[0]+e[0])/2,2)+"V"+r.round(e[1],2)+"H"+r.round(e[0],2)},vhv:function(t,e){return"V"+r.round((t[1]+e[1])/2,2)+"H"+r.round(e[0],2)+"V"+r.round(e[1],2)}},C=function(t,e){return"L"+r.round(e[0],2)+","+r.round(e[1],2)};m.steps=function(t){var e=S[t]||C;return function(t){for(var n="M"+r.round(t[0][0],2)+","+r.round(t[0][1],2),i=1;i<t.length;i++)n+=e(t[i-1],t[i]);return n}},m.makeTester=function(){var t=r.select("body").selectAll("#js-plotly-tester").data([0]);t.enter().append("svg").attr("id","js-plotly-tester").attr(d.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"});var e=t.selectAll(".js-reference-point").data([0]);e.enter().append("path").classed("js-reference-point",!0).attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"}),m.tester=t,m.testref=e},m.savedBBoxes={};var P=0;function z(t){var e=t.getAttribute("data-unformatted");if(null!==e)return e+t.getAttribute("data-math")+t.getAttribute("text-anchor")+t.getAttribute("style")}m.bBox=function(t,e,n){var i,o,a;if(n||(n=z(t)),n){if(i=m.savedBBoxes[n])return c.extendFlat({},i)}else if(1===t.childNodes.length){var s=t.childNodes[0];if(n=z(s)){var l=+s.getAttribute("x")||0,d=+s.getAttribute("y")||0,h=s.getAttribute("transform");if(!h){var f=m.bBox(s,!1,n);return l&&(f.left+=l,f.right+=l),d&&(f.top+=d,f.bottom+=d),f}if(n+="~"+l+"~"+d+"~"+h,i=m.savedBBoxes[n])return c.extendFlat({},i)}}e?o=t:(a=m.tester.node(),o=t.cloneNode(!0),a.appendChild(o)),r.select(o).attr("transform",null).call(u.positionText,0,0);var p=o.getBoundingClientRect(),g=m.testref.node().getBoundingClientRect();e||a.removeChild(o);var v={height:p.height,width:p.width,left:p.left-g.left,top:p.top-g.top,right:p.right-g.left,bottom:p.bottom-g.top};return P>=1e4&&(m.savedBBoxes={},P=0),n&&(m.savedBBoxes[n]=v),P++,c.extendFlat({},v)},m.setClipUrl=function(t,e){if(e){var n="#"+e,i=r.select("base");i.size()&&i.attr("href")&&(n=window.location.href.split("#")[0]+n),t.attr("clip-path","url("+n+")")}else t.attr("clip-path",null)},m.getTranslate=function(t){var e=(t[t.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(t,e,n){return[e,n].join(" ")}).split(" ");return{x:+e[0]||0,y:+e[1]||0}},m.setTranslate=function(t,e,n){var r=t.attr?"attr":"getAttribute",i=t.attr?"attr":"setAttribute",o=t[r]("transform")||"";return e=e||0,n=n||0,o=o.replace(/(\btranslate\(.*?\);?)/,"").trim(),o=(o+=" translate("+e+", "+n+")").trim(),t[i]("transform",o),o},m.getScale=function(t){var e=(t[t.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(t,e,n){return[e,n].join(" ")}).split(" ");return{x:+e[0]||1,y:+e[1]||1}},m.setScale=function(t,e,n){var r=t.attr?"attr":"getAttribute",i=t.attr?"attr":"setAttribute",o=t[r]("transform")||"";return e=e||1,n=n||1,o=o.replace(/(\bscale\(.*?\);?)/,"").trim(),o=(o+=" scale("+e+", "+n+")").trim(),t[i]("transform",o),o},m.setPointGroupScale=function(t,e,n){var r,i,o;return n=n||1,i=1===(e=e||1)&&1===n?"":" scale("+e+","+n+")",o=/\s*sc.*/,t.each(function(){r=(this.getAttribute("transform")||"").replace(o,""),r=(r+=i).trim(),this.setAttribute("transform",r)}),i};var D=/translate\([^)]*\)\s*$/;m.setTextPointsScale=function(t,e,n){t.each(function(){var t,i=r.select(this),o=i.select("text");if(o.node()){var a=parseFloat(o.attr("x")||0),s=parseFloat(o.attr("y")||0),l=(i.attr("transform")||"").match(D);t=1===e&&1===n?[]:["translate("+a+","+s+")","scale("+e+","+n+")","translate("+-a+","+-s+")"],l&&t.push(l),i.attr("transform",t.join(" "))}})}},{"../../constants/alignment":132,"../../constants/interactions":133,"../../constants/xmlns_namespaces":136,"../../lib":151,"../../lib/svg_text_utils":172,"../../registry":233,"../../traces/scatter/make_bubble_size_func":276,"../../traces/scatter/subtypes":281,"../color":34,"../colorscale":49,"./symbol_defs":60,d3:1,"fast-isnumeric":4,tinycolor2:293}],60:[function(t,e,n){"use strict";var r=t("d3");e.exports={circle:{n:0,f:function(t){var e=r.round(t,2);return"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"}},square:{n:1,f:function(t){var e=r.round(t,2);return"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"}},diamond:{n:2,f:function(t){var e=r.round(1.3*t,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"Z"}},cross:{n:3,f:function(t){var e=r.round(.4*t,2),n=r.round(1.2*t,2);return"M"+n+","+e+"H"+e+"V"+n+"H-"+e+"V"+e+"H-"+n+"V-"+e+"H-"+e+"V-"+n+"H"+e+"V-"+e+"H"+n+"Z"}},x:{n:4,f:function(t){var e=r.round(.8*t/Math.sqrt(2),2),n="l"+e+","+e,i="l"+e+",-"+e,o="l-"+e+",-"+e,a="l-"+e+","+e;return"M0,"+e+n+i+o+i+o+a+o+a+n+a+n+"Z"}},"triangle-up":{n:5,f:function(t){var e=r.round(2*t/Math.sqrt(3),2);return"M-"+e+","+r.round(t/2,2)+"H"+e+"L0,-"+r.round(t,2)+"Z"}},"triangle-down":{n:6,f:function(t){var e=r.round(2*t/Math.sqrt(3),2);return"M-"+e+",-"+r.round(t/2,2)+"H"+e+"L0,"+r.round(t,2)+"Z"}},"triangle-left":{n:7,f:function(t){var e=r.round(2*t/Math.sqrt(3),2);return"M"+r.round(t/2,2)+",-"+e+"V"+e+"L-"+r.round(t,2)+",0Z"}},"triangle-right":{n:8,f:function(t){var e=r.round(2*t/Math.sqrt(3),2);return"M-"+r.round(t/2,2)+",-"+e+"V"+e+"L"+r.round(t,2)+",0Z"}},"triangle-ne":{n:9,f:function(t){var e=r.round(.6*t,2),n=r.round(1.2*t,2);return"M-"+n+",-"+e+"H"+e+"V"+n+"Z"}},"triangle-se":{n:10,f:function(t){var e=r.round(.6*t,2),n=r.round(1.2*t,2);return"M"+e+",-"+n+"V"+e+"H-"+n+"Z"}},"triangle-sw":{n:11,f:function(t){var e=r.round(.6*t,2),n=r.round(1.2*t,2);return"M"+n+","+e+"H-"+e+"V-"+n+"Z"}},"triangle-nw":{n:12,f:function(t){var e=r.round(.6*t,2),n=r.round(1.2*t,2);return"M-"+e+","+n+"V-"+e+"H"+n+"Z"}},pentagon:{n:13,f:function(t){var e=r.round(.951*t,2),n=r.round(.588*t,2),i=r.round(-t,2),o=r.round(-.309*t,2);return"M"+e+","+o+"L"+n+","+r.round(.809*t,2)+"H-"+n+"L-"+e+","+o+"L0,"+i+"Z"}},hexagon:{n:14,f:function(t){var e=r.round(t,2),n=r.round(t/2,2),i=r.round(t*Math.sqrt(3)/2,2);return"M"+i+",-"+n+"V"+n+"L0,"+e+"L-"+i+","+n+"V-"+n+"L0,-"+e+"Z"}},hexagon2:{n:15,f:function(t){var e=r.round(t,2),n=r.round(t/2,2),i=r.round(t*Math.sqrt(3)/2,2);return"M-"+n+","+i+"H"+n+"L"+e+",0L"+n+",-"+i+"H-"+n+"L-"+e+",0Z"}},octagon:{n:16,f:function(t){var e=r.round(.924*t,2),n=r.round(.383*t,2);return"M-"+n+",-"+e+"H"+n+"L"+e+",-"+n+"V"+n+"L"+n+","+e+"H-"+n+"L-"+e+","+n+"V-"+n+"Z"}},star:{n:17,f:function(t){var e=1.4*t,n=r.round(.225*e,2),i=r.round(.951*e,2),o=r.round(.363*e,2),a=r.round(.588*e,2),s=r.round(-e,2),l=r.round(-.309*e,2),c=r.round(.118*e,2),u=r.round(.809*e,2);return"M"+n+","+l+"H"+i+"L"+o+","+c+"L"+a+","+u+"L0,"+r.round(.382*e,2)+"L-"+a+","+u+"L-"+o+","+c+"L-"+i+","+l+"H-"+n+"L0,"+s+"Z"}},hexagram:{n:18,f:function(t){var e=r.round(.66*t,2),n=r.round(.38*t,2),i=r.round(.76*t,2);return"M-"+i+",0l-"+n+",-"+e+"h"+i+"l"+n+",-"+e+"l"+n+","+e+"h"+i+"l-"+n+","+e+"l"+n+","+e+"h-"+i+"l-"+n+","+e+"l-"+n+",-"+e+"h-"+i+"Z"}},"star-triangle-up":{n:19,f:function(t){var e=r.round(t*Math.sqrt(3)*.8,2),n=r.round(.8*t,2),i=r.round(1.6*t,2),o=r.round(4*t,2),a="A "+o+","+o+" 0 0 1 ";return"M-"+e+","+n+a+e+","+n+a+"0,-"+i+a+"-"+e+","+n+"Z"}},"star-triangle-down":{n:20,f:function(t){var e=r.round(t*Math.sqrt(3)*.8,2),n=r.round(.8*t,2),i=r.round(1.6*t,2),o=r.round(4*t,2),a="A "+o+","+o+" 0 0 1 ";return"M"+e+",-"+n+a+"-"+e+",-"+n+a+"0,"+i+a+e+",-"+n+"Z"}},"star-square":{n:21,f:function(t){var e=r.round(1.1*t,2),n=r.round(2*t,2),i="A "+n+","+n+" 0 0 1 ";return"M-"+e+",-"+e+i+"-"+e+","+e+i+e+","+e+i+e+",-"+e+i+"-"+e+",-"+e+"Z"}},"star-diamond":{n:22,f:function(t){var e=r.round(1.4*t,2),n=r.round(1.9*t,2),i="A "+n+","+n+" 0 0 1 ";return"M-"+e+",0"+i+"0,"+e+i+e+",0"+i+"0,-"+e+i+"-"+e+",0Z"}},"diamond-tall":{n:23,f:function(t){var e=r.round(.7*t,2),n=r.round(1.4*t,2);return"M0,"+n+"L"+e+",0L0,-"+n+"L-"+e+",0Z"}},"diamond-wide":{n:24,f:function(t){var e=r.round(1.4*t,2),n=r.round(.7*t,2);return"M0,"+n+"L"+e+",0L0,-"+n+"L-"+e+",0Z"}},hourglass:{n:25,f:function(t){var e=r.round(t,2);return"M"+e+","+e+"H-"+e+"L"+e+",-"+e+"H-"+e+"Z"},noDot:!0},bowtie:{n:26,f:function(t){var e=r.round(t,2);return"M"+e+","+e+"V-"+e+"L-"+e+","+e+"V-"+e+"Z"},noDot:!0},"circle-cross":{n:27,f:function(t){var e=r.round(t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(t){var e=r.round(t,2),n=r.round(t/Math.sqrt(2),2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(t){var e=r.round(t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(t){var e=r.round(t,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(t){var e=r.round(1.3*t,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"ZM0,-"+e+"V"+e+"M-"+e+",0H"+e},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(t){var e=r.round(1.3*t,2),n=r.round(.65*t,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"ZM-"+n+",-"+n+"L"+n+","+n+"M-"+n+","+n+"L"+n+",-"+n},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(t){var e=r.round(1.4*t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(t){var e=r.round(t,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(t){var e=r.round(1.2*t,2),n=r.round(.85*t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(t){var e=r.round(t/2,2),n=r.round(t,2);return"M"+e+","+n+"V-"+n+"m-"+n+",0V"+n+"M"+n+","+e+"H-"+n+"m0,-"+n+"H"+n},needLine:!0,noFill:!0},"y-up":{n:37,f:function(t){var e=r.round(1.2*t,2),n=r.round(1.6*t,2),i=r.round(.8*t,2);return"M-"+e+","+i+"L0,0M"+e+","+i+"L0,0M0,-"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(t){var e=r.round(1.2*t,2),n=r.round(1.6*t,2),i=r.round(.8*t,2);return"M-"+e+",-"+i+"L0,0M"+e+",-"+i+"L0,0M0,"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(t){var e=r.round(1.2*t,2),n=r.round(1.6*t,2),i=r.round(.8*t,2);return"M"+i+","+e+"L0,0M"+i+",-"+e+"L0,0M-"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(t){var e=r.round(1.2*t,2),n=r.round(1.6*t,2),i=r.round(.8*t,2);return"M-"+i+","+e+"L0,0M-"+i+",-"+e+"L0,0M"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(t){var e=r.round(1.4*t,2);return"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(t){var e=r.round(1.4*t,2);return"M0,"+e+"V-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(t){var e=r.round(t,2);return"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(t){var e=r.round(t,2);return"M"+e+","+e+"L-"+e+",-"+e},needLine:!0,noDot:!0,noFill:!0}}},{d3:1}],61:[function(t,e,n){"use strict";e.exports={visible:{valType:"boolean",role:"info",editType:"calc",description:["Determines whether or not this set of error bars is visible."].join(" ")},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],role:"info",editType:"calc",description:["Determines the rule used to generate the error bars.","If *constant`, the bar lengths are of a constant value.","Set this constant in `value`.","If *percent*, the bar lengths correspond to a percentage of","underlying data. Set this percentage in `value`.","If *sqrt*, the bar lengths correspond to the sqaure of the","underlying data.","If *array*, the bar lengths are set with data set `array`."].join(" ")},symmetric:{valType:"boolean",role:"info",editType:"calc",description:["Determines whether or not the error bars have the same length","in both direction","(top/bottom for vertical bars, left/right for horizontal bars."].join(" ")},array:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar.","Values are plotted relative to the underlying data."].join(" ")},arrayminus:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar in the","bottom (left) direction for vertical (horizontal) bars","Values are plotted relative to the underlying data."].join(" ")},value:{valType:"number",min:0,dflt:10,role:"info",editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars."].join(" ")},valueminus:{valType:"number",min:0,dflt:10,role:"info",editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars in the","bottom (left) direction for vertical (horizontal) bars"].join(" ")},traceref:{valType:"integer",min:0,dflt:0,role:"info",editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,role:"info",editType:"style"},copy_ystyle:{valType:"boolean",role:"style",editType:"plot"},copy_zstyle:{valType:"boolean",role:"style",editType:"style"},color:{valType:"color",role:"style",editType:"style",description:"Sets the stoke color of the error bars."},thickness:{valType:"number",min:0,dflt:2,role:"style",editType:"style",description:"Sets the thickness (in px) of the error bars."},width:{valType:"number",min:0,role:"style",editType:"plot",description:["Sets the width (in px) of the cross-bar at both ends","of the error bars."].join(" ")},editType:"calc",_deprecated:{opacity:{valType:"number",role:"style",editType:"style",description:["Obsolete.","Use the alpha channel in error bar `color` to set the opacity."].join(" ")}}}},{}],62:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../registry"),o=t("../../plots/cartesian/axes"),a=t("./compute_error");function s(t,e,n,i){var s=e["error_"+i]||{},l=[];if(s.visible&&-1!==["linear","log"].indexOf(n.type)){for(var c=a(s),u=0;u<t.length;u++){var d=t[u],h=d[i];if(r(n.c2l(h))){var f=c(h,u);if(r(f[0])&&r(f[1])){var p=d[i+"s"]=h-f[0],g=d[i+"h"]=h+f[1];l.push(p,g)}}}o.expand(n,l,{padded:!0})}}e.exports=function(t){for(var e=t.calcdata,n=0;n<e.length;n++){var r=e[n],a=r[0].trace;if(i.traceIs(a,"errorBarsOK")){var l=o.getFromId(t,a.xaxis),c=o.getFromId(t,a.yaxis);s(r,a,l,"x"),s(r,a,c,"y")}}}},{"../../plots/cartesian/axes":194,"../../registry":233,"./compute_error":63,"fast-isnumeric":4}],63:[function(t,e,n){"use strict";function r(t,e){return"percent"===t?function(t){return Math.abs(t*e/100)}:"constant"===t?function(){return Math.abs(e)}:"sqrt"===t?function(t){return Math.sqrt(Math.abs(t))}:void 0}e.exports=function(t){var e=t.type,n=t.symmetric;if("data"===e){var i=t.array,o=t.arrayminus;return n||void 0===o?function(t,e){var n=+i[e];return[n,n]}:function(t,e){return[+o[e],+i[e]]}}var a=r(e,t.value),s=r(e,t.valueminus);return n||void 0===t.valueminus?function(t){var e=a(t);return[e,e]}:function(t){return[s(t),a(t)]}}},{}],64:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../registry"),o=t("../../lib"),a=t("./attributes");e.exports=function(t,e,n,s){var l="error_"+s.axis,c=e[l]={},u=t[l]||{};function d(t,e){return o.coerce(u,c,a,t,e)}if(!1!==d("visible",void 0!==u.array||void 0!==u.value||"sqrt"===u.type)){var h=d("type","array"in u?"data":"percent"),f=!0;if("sqrt"!==h&&(f=d("symmetric",!(("data"===h?"arrayminus":"valueminus")in u))),"data"===h){if(d("array")||(c.array=[]),d("traceref"),!f)d("arrayminus")||(c.arrayminus=[]),d("tracerefminus")}else"percent"!==h&&"constant"!==h||(d("value"),f||d("valueminus"));var p="copy_"+s.inherit+"style";if(s.inherit)(e["error_"+s.inherit]||{}).visible&&d(p,!(u.color||r(u.thickness)||r(u.width)));s.inherit&&c[p]||(d("color",n),d("thickness"),d("width",i.traceIs(e,"gl3d")?0:4))}}},{"../../lib":151,"../../registry":233,"./attributes":61,"fast-isnumeric":4}],65:[function(t,e,n){"use strict";var r=e.exports={};r.attributes=t("./attributes"),r.supplyDefaults=t("./defaults"),r.calc=t("./calc"),r.calcFromTrace=function(t,e){for(var n=t.x||[],i=t.y||[],o=n.length||i.length,a=new Array(o),s=0;s<o;s++)a[s]={x:n[s],y:i[s]};return a[0].trace=t,r.calc({calcdata:[a],_fullLayout:e}),a},r.plot=t("./plot"),r.style=t("./style"),r.hoverInfo=function(t,e,n){(e.error_y||{}).visible&&(n.yerr=t.yh-t.y,e.error_y.symmetric||(n.yerrneg=t.y-t.ys)),(e.error_x||{}).visible&&(n.xerr=t.xh-t.x,e.error_x.symmetric||(n.xerrneg=t.x-t.xs))}},{"./attributes":61,"./calc":62,"./defaults":64,"./plot":66,"./style":67}],66:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),o=t("../drawing"),a=t("../../traces/scatter/subtypes");e.exports=function(t,e,n){var s=e.xaxis,l=e.yaxis,c=n&&n.duration>0;t.each(function(t){var u,d=t[0].trace,h=d.error_x||{},f=d.error_y||{};d.ids&&(u=function(t){return t.id});var p=a.hasMarkers(d)&&d.marker.maxdisplayed>0;f.visible||h.visible||(t=[]);var g=r.select(this).selectAll("g.errorbar").data(t,u);if(g.exit().remove(),t.length){h.visible||g.selectAll("path.xerror").remove(),f.visible||g.selectAll("path.yerror").remove(),g.style("opacity",1);var m=g.enter().append("g").classed("errorbar",!0);c&&m.style("opacity",0).transition().duration(n.duration).style("opacity",1),o.setClipUrl(g,e.layerClipId),g.each(function(t){var e=r.select(this),o=function(t,e,n){var r={x:e.c2p(t.x),y:n.c2p(t.y)};void 0!==t.yh&&(r.yh=n.c2p(t.yh),r.ys=n.c2p(t.ys),i(r.ys)||(r.noYS=!0,r.ys=n.c2p(t.ys,!0)));void 0!==t.xh&&(r.xh=e.c2p(t.xh),r.xs=e.c2p(t.xs),i(r.xs)||(r.noXS=!0,r.xs=e.c2p(t.xs,!0)));return r}(t,s,l);if(!p||t.vis){var a;if(f.visible&&i(o.x)&&i(o.yh)&&i(o.ys)){var u=f.width;a="M"+(o.x-u)+","+o.yh+"h"+2*u+"m-"+u+",0V"+o.ys,o.noYS||(a+="m-"+u+",0h"+2*u);var d=e.select("path.yerror");!d.size()?d=e.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):c&&(d=d.transition().duration(n.duration).ease(n.easing)),d.attr("d",a)}if(h.visible&&i(o.y)&&i(o.xh)&&i(o.xs)){var g=(h.copy_ystyle?f:h).width;a="M"+o.xh+","+(o.y-g)+"v"+2*g+"m0,-"+g+"H"+o.xs,o.noXS||(a+="m0,-"+g+"v"+2*g);var m=e.select("path.xerror");!m.size()?m=e.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):c&&(m=m.transition().duration(n.duration).ease(n.easing)),m.attr("d",a)}}})}})}},{"../../traces/scatter/subtypes":281,"../drawing":59,d3:1,"fast-isnumeric":4}],67:[function(t,e,n){"use strict";var r=t("d3"),i=t("../color");e.exports=function(t){t.each(function(t){var e=t[0].trace,n=e.error_y||{},o=e.error_x||{},a=r.select(this);a.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(i.stroke,n.color),o.copy_ystyle&&(o=n),a.selectAll("path.xerror").style("stroke-width",o.thickness+"px").call(i.stroke,o.color)})}},{"../color":34,d3:1}],68:[function(t,e,n){"use strict";var r=t("../../plots/font_attributes");e.exports={hoverlabel:{bgcolor:{valType:"color",role:"style",arrayOk:!0,editType:"none",description:["Sets the background color of the hover labels for this trace"].join(" ")},bordercolor:{valType:"color",role:"style",arrayOk:!0,editType:"none",description:["Sets the border color of the hover labels for this trace."].join(" ")},font:r({arrayOk:!0,editType:"none",description:"Sets the font used in hover labels."}),namelength:{valType:"integer",min:-1,arrayOk:!0,role:"style",editType:"none",description:["Sets the length (in number of characters) of the trace name in","the hover labels for this trace. -1 shows the whole name","regardless of length. 0-3 shows the first 0-3 characters, and","an integer >3 will show the whole name if it is less than that","many characters, but if it is longer, will truncate to","`namelength - 3` characters and add an ellipsis."].join(" ")},editType:"calc"}}},{"../../plots/font_attributes":220}],69:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../registry");function o(t,e,n,i){i=i||r.identity,Array.isArray(t)&&(e[0][n]=i(t))}e.exports=function(t){var e=t.calcdata,n=t._fullLayout;function a(t){return function(e){return r.coerceHoverinfo({hoverinfo:e},{_module:t._module},n)}}for(var s=0;s<e.length;s++){var l=e[s],c=l[0].trace;if(!i.traceIs(c,"pie")){var u=i.traceIs(c,"2dMap")?o:r.fillArray;u(c.hoverinfo,l,"hi",a(c)),c.hoverlabel&&(u(c.hoverlabel.bgcolor,l,"hbg"),u(c.hoverlabel.bordercolor,l,"hbc"),u(c.hoverlabel.font.size,l,"hts"),u(c.hoverlabel.font.color,l,"htc"),u(c.hoverlabel.font.family,l,"htf"),u(c.hoverlabel.namelength,l,"hnl"))}}}},{"../../lib":151,"../../registry":233}],70:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("./hover").hover;e.exports=function(t,e,n){var o=r.getComponentMethod("annotations","onClick")(t,t._hoverdata);function a(){t.emit("plotly_click",{points:t._hoverdata,event:e})}void 0!==n&&i(t,e,n,!0),t._hoverdata&&e&&e.target&&(o&&o.then?o.then(a):a(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}},{"../../registry":233,"./hover":74}],71:[function(t,e,n){"use strict";e.exports={MAXDIST:20,YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],72:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./attributes"),o=t("./hoverlabel_defaults");e.exports=function(t,e,n,a){o(t,e,function(n,o){return r.coerce(t,e,i,n,o)},a.hoverlabel)}},{"../../lib":151,"./attributes":68,"./hoverlabel_defaults":75}],73:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./constants");n.getSubplot=function(t){return t.subplot||t.xaxis+t.yaxis||t.geo},n.flat=function(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=e;return n},n.p2c=function(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r].p2c(e);return n},n.getDistanceFunction=function(t,e,r,i){return"closest"===t?i||n.quadrature(e,r):"x"===t?e:r},n.getClosest=function(t,e,n){if(!1!==n.index)n.index>=0&&n.index<t.length?n.distance=0:n.index=!1;else for(var r=0;r<t.length;r++){var i=e(t[r]);i<=n.distance&&(n.index=r,n.distance=i)}return n},n.inbox=function(t,e){return t*e<0||0===t?i.MAXDIST*(.6-.3/Math.max(3,Math.abs(t-e))):1/0},n.quadrature=function(t,e){return function(n){var r=t(n),i=e(n);return Math.sqrt(r*r+i*i)}},n.makeEventData=function(t,e,r){var i="index"in t?t.index:t.pointNumber,o={data:e._input,fullData:e,curveNumber:e.index,pointNumber:i};if(e._indexToPoints){var a=e._indexToPoints[i];1===a.length?o.pointIndex=a[0]:o.pointIndices=a}else o.pointIndex=i;return e._module.eventData?o=e._module.eventData(o,t,e,r,i):("xVal"in t?o.x=t.xVal:"x"in t&&(o.x=t.x),"yVal"in t?o.y=t.yVal:"y"in t&&(o.y=t.y),t.xa&&(o.xaxis=t.xa),t.ya&&(o.yaxis=t.ya),void 0!==t.zLabelVal&&(o.z=t.zLabelVal)),n.appendArrayPointValue(o,e,i),o},n.appendArrayPointValue=function(t,e,n){var i=e._arrayAttrs;if(i)for(var o=0;o<i.length;o++){var l=i[o],c=a(l);if(void 0===t[c]){var u=s(r.nestedProperty(e,l).get(),n);void 0!==u&&(t[c]=u)}}},n.appendArrayMultiPointValues=function(t,e,n){var i=e._arrayAttrs;if(i)for(var o=0;o<i.length;o++){var l=i[o],c=a(l);if(void 0===t[c]){for(var u=r.nestedProperty(e,l).get(),d=new Array(n.length),h=0;h<n.length;h++)d[h]=s(u,n[h]);t[c]=d}}};var o={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color"};function a(t){return o[t]||t}function s(t,e){return Array.isArray(e)?Array.isArray(t)&&Array.isArray(t[e[0]])?t[e[0]][e[1]]:void 0:t[e]}},{"../../lib":151,"./constants":71}],74:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),o=t("tinycolor2"),a=t("../../lib"),s=t("../../lib/events"),l=t("../../lib/svg_text_utils"),c=t("../../lib/override_cursor"),u=t("../drawing"),d=t("../color"),h=t("../dragelement"),f=t("../../plots/cartesian/axes"),p=t("../../registry"),g=t("./helpers"),m=t("./constants"),v=m.YANGLE,y=Math.PI*v/180,_=1/Math.sin(y),x=Math.cos(y),b=Math.sin(y),w=m.HOVERARROWSIZE,k=m.HOVERTEXTPAD;function T(t,e,n){var i,o,a=e.hovermode,s=e.rotateLabels,c=e.bgColor,h=e.container,f=e.outerContainer,p=e.commonLabelOpts||{},g=e.fontFamily||m.HOVERFONT,y=e.fontSize||m.HOVERFONTSIZE,_=t[0],x=_.xa,b=_.ya,T="y"===a?"yLabel":"xLabel",M=_[T],A=(String(M)||"").split(" ")[0],L=f.node().getBoundingClientRect(),S=L.top,C=L.width,P=L.height,z=_.distance<=e.hoverdistance&&("x"===a||"y"===a);for(i=0;i<t.length;i++){o=t[i].hoverinfo||t[i].trace.hoverinfo;var D=Array.isArray(o)?o:o.split("+");if(-1===D.indexOf("all")&&-1===D.indexOf(a)){z=!1;break}}var E=h.selectAll("g.axistext").data(z?[0]:[]);E.enter().append("g").classed("axistext",!0),E.exit().remove(),E.each(function(){var e=r.select(this),i=e.selectAll("path").data([0]),o=e.selectAll("text").data([0]);i.enter().append("path").style({"stroke-width":"1px"}),i.style({fill:p.bgcolor||d.defaultLine,stroke:p.bordercolor||d.background}),o.enter().append("text").attr("data-notex",1),o.text(M).call(u.font,p.font.family||g,p.font.size||y,p.font.color||d.background).call(l.positionText,0,0).call(l.convertToTspans,n),e.attr("transform","");var s=o.node().getBoundingClientRect();if("x"===a){o.attr("text-anchor","middle").call(l.positionText,0,"top"===x.side?S-s.bottom-w-k:S-s.top+w+k);var c="top"===x.side?"-":"";i.attr("d","M0,0L"+w+","+c+w+"H"+(k+s.width/2)+"v"+c+(2*k+s.height)+"H-"+(k+s.width/2)+"V"+c+w+"H-"+w+"Z"),e.attr("transform","translate("+(x._offset+(_.x0+_.x1)/2)+","+(b._offset+("top"===x.side?0:b._length))+")")}else{o.attr("text-anchor","right"===b.side?"start":"end").call(l.positionText,("right"===b.side?1:-1)*(k+w),S-s.top-s.height/2);var h="right"===b.side?"":"-";i.attr("d","M0,0L"+h+w+","+w+"V"+(k+s.height/2)+"h"+h+(2*k+s.width)+"V-"+(k+s.height/2)+"H"+h+w+"V-"+w+"Z"),e.attr("transform","translate("+(x._offset+("right"===b.side?x._length:0))+","+(b._offset+(_.y0+_.y1)/2)+")")}t=t.filter(function(t){return void 0!==t.zLabelVal||(t[T]||"").split(" ")[0]===A})});var O=h.selectAll("g.hovertext").data(t,function(t){return[t.trace.index,t.index,t.x0,t.y0,t.name,t.attr,t.xa,t.ya||""].join(",")});return O.enter().append("g").classed("hovertext",!0).each(function(){var t=r.select(this);t.append("rect").call(d.fill,d.addOpacity(c,.8)),t.append("text").classed("name",!0),t.append("path").style("stroke-width","1px"),t.append("text").classed("nums",!0).call(u.font,g,y)}),O.exit().remove(),O.each(function(t){var e=r.select(this).attr("transform",""),i="",o="",h=d.opacity(t.color)?t.color:d.defaultLine,f=d.combine(h,c),p=t.borderColor||d.contrast(f);if(void 0!==t.nameOverride&&(t.name=t.nameOverride),t.name){i=l.plainText(t.name||"");var m=Math.round(t.nameLength);m>-1&&i.length>m&&(i=m>3?i.substr(0,m-3)+"...":i.substr(0,m))}void 0!==t.extraText&&(o+=t.extraText),void 0!==t.zLabel?(void 0!==t.xLabel&&(o+="x: "+t.xLabel+"<br>"),void 0!==t.yLabel&&(o+="y: "+t.yLabel+"<br>"),o+=(o?"z: ":"")+t.zLabel):z&&t[a+"Label"]===M?o=t[("x"===a?"y":"x")+"Label"]||"":void 0===t.xLabel?void 0!==t.yLabel&&(o=t.yLabel):o=void 0===t.yLabel?t.xLabel:"("+t.xLabel+", "+t.yLabel+")",t.text&&!Array.isArray(t.text)&&(o+=(o?"<br>":"")+t.text),""===o&&(""===i&&e.remove(),o=i);var _=e.select("text.nums").call(u.font,t.fontFamily||g,t.fontSize||y,t.fontColor||p).text(o).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,n),x=e.select("text.name"),b=0;i&&i!==o?(x.call(u.font,t.fontFamily||g,t.fontSize||y,f).text(i).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,n),b=x.node().getBoundingClientRect().width+2*k):(x.remove(),e.select("rect").remove()),e.select("path").style({fill:f,stroke:p});var T,A,L=_.node().getBoundingClientRect(),D=t.xa._offset+(t.x0+t.x1)/2,E=t.ya._offset+(t.y0+t.y1)/2,O=Math.abs(t.x1-t.x0),I=Math.abs(t.y1-t.y0),j=L.width+w+k+b;t.ty0=S-L.top,t.bx=L.width+2*k,t.by=L.height+2*k,t.anchor="start",t.txwidth=L.width,t.tx2width=b,t.offset=0,s?(t.pos=D,T=E+I/2+j<=P,A=E-I/2-j>=0,"top"!==t.idealAlign&&T||!A?T?(E+=I/2,t.anchor="start"):t.anchor="middle":(E-=I/2,t.anchor="end")):(t.pos=E,T=D+O/2+j<=C,A=D-O/2-j>=0,"left"!==t.idealAlign&&T||!A?T?(D+=O/2,t.anchor="start"):t.anchor="middle":(D-=O/2,t.anchor="end")),_.attr("text-anchor",t.anchor),b&&x.attr("text-anchor",t.anchor),e.attr("transform","translate("+D+","+E+")"+(s?"rotate("+v+")":""))}),O}function M(t,e){t.each(function(t){var n=r.select(this);if(t.del)n.remove();else{var i="end"===t.anchor?-1:1,o=n.select("text.nums"),a={start:1,end:-1,middle:0}[t.anchor],s=a*(w+k),c=s+a*(t.txwidth+k),d=0,h=t.offset;"middle"===t.anchor&&(s-=t.tx2width/2,c-=t.tx2width/2),e&&(h*=-b,d=t.offset*x),n.select("path").attr("d","middle"===t.anchor?"M-"+t.bx/2+",-"+t.by/2+"h"+t.bx+"v"+t.by+"h-"+t.bx+"Z":"M0,0L"+(i*w+d)+","+(w+h)+"v"+(t.by/2-w)+"h"+i*t.bx+"v-"+t.by+"H"+(i*w+d)+"V"+(h-w)+"Z"),o.call(l.positionText,s+d,h+t.ty0-t.by/2+k),t.tx2width&&(n.select("text.name").call(l.positionText,c+a*k+d,h+t.ty0-t.by/2+k),n.select("rect").call(u.setRect,c+(a-1)*t.tx2width/2+d,h-t.by/2-1,t.tx2width,t.by+2))}})}function A(t,e){var n=t.index,r=t.trace||{},i=t.cd[0],o=t.cd[n]||{},s=Array.isArray(n)?function(t,e){return a.castOption(i,n,t)||a.extractOption({},r,"",e)}:function(t,e){return a.extractOption(o,r,t,e)};function l(e,n,r){var i=s(n,r);i&&(t[e]=i)}if(l("hoverinfo","hi","hoverinfo"),l("color","hbg","hoverlabel.bgcolor"),l("borderColor","hbc","hoverlabel.bordercolor"),l("fontFamily","htf","hoverlabel.font.family"),l("fontSize","hts","hoverlabel.font.size"),l("fontColor","htc","hoverlabel.font.color"),l("nameLength","hnl","hoverlabel.namelength"),t.posref="y"===e?(t.x0+t.x1)/2:(t.y0+t.y1)/2,t.x0=a.constrain(t.x0,0,t.xa._length),t.x1=a.constrain(t.x1,0,t.xa._length),t.y0=a.constrain(t.y0,0,t.ya._length),t.y1=a.constrain(t.y1,0,t.ya._length),void 0!==t.xLabelVal&&(t.xLabel="xLabel"in t?t.xLabel:f.hoverLabelText(t.xa,t.xLabelVal),t.xVal=t.xa.c2d(t.xLabelVal)),void 0!==t.yLabelVal&&(t.yLabel="yLabel"in t?t.yLabel:f.hoverLabelText(t.ya,t.yLabelVal),t.yVal=t.ya.c2d(t.yLabelVal)),void 0!==t.zLabelVal&&void 0===t.zLabel&&(t.zLabel=String(t.zLabelVal)),!(isNaN(t.xerr)||"log"===t.xa.type&&t.xerr<=0)){var c=f.tickText(t.xa,t.xa.c2l(t.xerr),"hover").text;void 0!==t.xerrneg?t.xLabel+=" +"+c+" / -"+f.tickText(t.xa,t.xa.c2l(t.xerrneg),"hover").text:t.xLabel+=" ± "+c,"x"===e&&(t.distance+=1)}if(!(isNaN(t.yerr)||"log"===t.ya.type&&t.yerr<=0)){var u=f.tickText(t.ya,t.ya.c2l(t.yerr),"hover").text;void 0!==t.yerrneg?t.yLabel+=" +"+u+" / -"+f.tickText(t.ya,t.ya.c2l(t.yerrneg),"hover").text:t.yLabel+=" ± "+u,"y"===e&&(t.distance+=1)}var d=t.hoverinfo||t.trace.hoverinfo;return"all"!==d&&(-1===(d=Array.isArray(d)?d:d.split("+")).indexOf("x")&&(t.xLabel=void 0),-1===d.indexOf("y")&&(t.yLabel=void 0),-1===d.indexOf("z")&&(t.zLabel=void 0),-1===d.indexOf("text")&&(t.text=void 0),-1===d.indexOf("name")&&(t.name=void 0)),t}function L(t,e){var n,r,i=e.container,a=e.fullLayout,s=e.event,l=!!t.hLinePoint,c=!!t.vLinePoint;if(i.selectAll(".spikeline").remove(),c||l){var h=d.combine(a.plot_bgcolor,a.paper_bgcolor);if(l){var f,p,g=t.hLinePoint;n=g&&g.xa,"cursor"===(r=g&&g.ya).spikesnap?(f=s.pointerX,p=s.pointerY):(f=n._offset+(g.x0+g.x1)/2,p=r._offset+(g.y0+g.y1)/2);var m,v,y=o.readability(g.color,h)<1.5?d.contrast(h):g.color,_=r.spikemode,x=r.spikethickness,b=r.spikecolor||y,w=r._boundingBox,k=(w.left+w.right)/2<f?w.right:w.left;-1===_.indexOf("toaxis")&&-1===_.indexOf("across")||(-1!==_.indexOf("toaxis")&&(m=k,v=f),-1!==_.indexOf("across")&&(m=r._counterSpan[0],v=r._counterSpan[1]),i.insert("line",":first-child").attr({x1:m,x2:v,y1:p,y2:p,"stroke-width":x,stroke:b,"stroke-dasharray":u.dashStyle(r.spikedash,x)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:m,x2:v,y1:p,y2:p,"stroke-width":x+2,stroke:h}).classed("spikeline",!0).classed("crisp",!0)),-1!==_.indexOf("marker")&&i.insert("circle",":first-child").attr({cx:k+("right"!==r.side?x:-x),cy:p,r:x,fill:b}).classed("spikeline",!0)}if(c){var T,M,A=t.vLinePoint;n=A&&A.xa,r=A&&A.ya,"cursor"===n.spikesnap?(T=s.pointerX,M=s.pointerY):(T=n._offset+(A.x0+A.x1)/2,M=r._offset+(A.y0+A.y1)/2);var L,S,C=o.readability(A.color,h)<1.5?d.contrast(h):A.color,P=n.spikemode,z=n.spikethickness,D=n.spikecolor||C,E=n._boundingBox,O=(E.top+E.bottom)/2<M?E.bottom:E.top;-1===P.indexOf("toaxis")&&-1===P.indexOf("across")||(-1!==P.indexOf("toaxis")&&(L=O,S=M),-1!==P.indexOf("across")&&(L=n._counterSpan[0],S=n._counterSpan[1]),i.insert("line",":first-child").attr({x1:T,x2:T,y1:L,y2:S,"stroke-width":z,stroke:D,"stroke-dasharray":u.dashStyle(n.spikedash,z)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:T,x2:T,y1:L,y2:S,"stroke-width":z+2,stroke:h}).classed("spikeline",!0).classed("crisp",!0)),-1!==P.indexOf("marker")&&i.insert("circle",":first-child").attr({cx:T,cy:O-("top"!==n.side?z:-z),r:z,fill:D}).classed("spikeline",!0)}}}function S(t,e){return!e||(e.vLinePoint!==t._spikepoints.vLinePoint||e.hLinePoint!==t._spikepoints.hLinePoint)}n.hover=function(t,e,n,o){t=a.getGraphDiv(t),a.throttle(t._fullLayout._uid+m.HOVERID,m.HOVERMINTIME,function(){!function(t,e,n,o){n||(n="xy");var l=Array.isArray(n)?n:[n],u=t._fullLayout,m=u._plots||[],v=m[n];if(v){var y=v.overlays.map(function(t){return t.id});l=l.concat(y)}for(var x=l.length,b=new Array(x),w=new Array(x),k=!1,C=0;C<x;C++){var P=l[C],z=m[P];if(z)k=!0,b[C]=f.getFromId(t,z.xaxis._id),w[C]=f.getFromId(t,z.yaxis._id);else{var D=u[P]._subplot;b[C]=D.xaxis,w[C]=D.yaxis}}var E=e.hovermode||u.hovermode;E&&!k&&(E="closest");if(-1===["x","y","closest"].indexOf(E)||!t.calcdata||t.querySelector(".zoombox")||t._dragging)return h.unhoverRaw(t,e);var O,I,j,N,R,B,F,H,q,Z,V,U,W,G=-1===u.hoverdistance?1/0:u.hoverdistance,X=-1===u.spikedistance?1/0:u.spikedistance,Y=[],$=[],J={hLinePoint:null,vLinePoint:null};if(Array.isArray(e))for(E="array",j=0;j<e.length;j++)"skip"!==(R=t.calcdata[e[j].curveNumber||0])[0].trace.hoverinfo&&$.push(R);else{for(N=0;N<t.calcdata.length;N++)R=t.calcdata[N],"skip"!==(B=R[0].trace).hoverinfo&&-1!==l.indexOf(g.getSubplot(B))&&$.push(R);var Q,K,tt=!e.target;if(tt)Q="xpx"in e?e.xpx:b[0]._length/2,e.pointerX=Q+b[0]._offset,K="ypx"in e?e.ypx:w[0]._length/2,e.pointerY=K+w[0]._offset;else{if(!1===s.triggerHandler(t,"plotly_beforehover",e))return;var et=e.target.getBoundingClientRect();if(Q=e.clientX-et.left,K=e.clientY-et.top,Q<0||Q>et.width||K<0||K>et.height)return h.unhoverRaw(t,e);e.pointerX=e.offsetX,e.pointerY=e.offsetY}if(O="xval"in e?g.flat(l,e.xval):g.p2c(b,Q),I="yval"in e?g.flat(l,e.yval):g.p2c(w,K),!i(O[0])||!i(I[0]))return a.warn("Fx.hover failed",e,t),h.unhoverRaw(t,e)}var nt=1/0;for(N=0;N<$.length;N++)if((R=$[N])&&R[0]&&R[0].trace&&!0===R[0].trace.visible&&(B=R[0].trace,-1===["carpet","contourcarpet"].indexOf(B._module.name))){if(F=g.getSubplot(B),H=l.indexOf(F),q=E,U={cd:R,trace:B,xa:b[H],ya:w[H],index:!1,distance:Math.min(nt,G),color:d.defaultLine,name:B.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},u[F]&&(U.subplot=u[F]._subplot),W=Y.length,"array"===q){var rt=e[N];"pointNumber"in rt?(U.index=rt.pointNumber,q="closest"):(q="","xval"in rt&&(Z=rt.xval,q="x"),"yval"in rt&&(V=rt.yval,q=q?"closest":"y"))}else Z=O[H],V=I[H];if(0!==G)if(B._module&&B._module.hoverPoints){var it=B._module.hoverPoints(U,Z,V,q,u._hoverlayer);if(it)for(var ot,at=0;at<it.length;at++)ot=it[at],i(ot.x0)&&i(ot.y0)&&Y.push(A(ot,E))}else a.log("Unrecognized trace type in hover:",B);if("closest"===E&&Y.length>W&&(Y.splice(0,W),nt=Y[0].distance),u._has("cartesian")&&0!==X&&0===Y.length){U.distance=X,U.index=!1;var st=B._module.hoverPoints(U,Z,V,"closest",u._hoverlayer);if(st){var lt,ct=st.filter(function(t){return t.xa.showspikes});if(ct.length){var ut=ct[0];i(ut.x0)&&i(ut.y0)&&(lt=pt(ut),(!J.vLinePoint||J.vLinePoint.distance>lt.distance)&&(J.vLinePoint=lt))}var dt=st.filter(function(t){return t.ya.showspikes});if(dt.length){var ht=dt[0];i(ht.x0)&&i(ht.y0)&&(lt=pt(ht),(!J.hLinePoint||J.hLinePoint.distance>lt.distance)&&(J.hLinePoint=lt))}}}}function ft(t,e){if(!t.length)return null;var n=t.map(function(t,e){var n,r,i,o,a=t.xa,s=t.ya,l=a.c2p(Z),c=s.c2p(V),u=(r=(n=t).kink,i=(n.x1+n.x0)/2-l,o=(n.y1+n.y0)/2-c,Math.max(Math.sqrt(i*i+o*o)-r,1-3/r));return{distance:u,index:e}});return n=n.filter(function(t){return t.distance<=e}).sort(function(t,e){return t.distance-e.distance}),n.length?t[n[0].index]:null}function pt(t){return t?{xa:t.xa,ya:t.ya,x0:t.x0,x1:t.x1,y0:t.y0,y1:t.y1,distance:t.distance,curveNumber:t.trace.index,color:t.color,pointNumber:t.index}:null}var gt={fullLayout:u,container:u._hoverlayer,outerContainer:u._paperdiv,event:e},mt=t._spikepoints,vt={vLinePoint:J.vLinePoint,hLinePoint:J.hLinePoint};if(t._spikepoints=vt,u._has("cartesian")&&0!==X&&0!==Y.length){var yt=Y.filter(function(t){return t.ya.showspikes}),_t=ft(yt,X);J.hLinePoint=pt(_t);var xt=Y.filter(function(t){return t.xa.showspikes}),bt=ft(xt,X);J.vLinePoint=pt(bt)}if(0===Y.length){var wt=h.unhoverRaw(t,e);return!u._has("cartesian")||null===J.hLinePoint&&null===J.vLinePoint||S(mt)&&L(J,gt),wt}u._has("cartesian")&&S(mt)&&L(J,gt);Y.sort(function(t,e){return t.distance-e.distance});var kt=t._hoverdata,Tt=[];for(j=0;j<Y.length;j++){var Mt=Y[j];Tt.push(g.makeEventData(Mt,Mt.trace,Mt.cd))}t._hoverdata=Tt;var At="y"===E&&$.length>1,Lt=d.combine(u.plot_bgcolor||d.background,u.paper_bgcolor),St={hovermode:E,rotateLabels:At,bgColor:Lt,container:u._hoverlayer,outerContainer:u._paperdiv,commonLabelOpts:u.hoverlabel,hoverdistance:u.hoverdistance},Ct=T(Y,St,t);if(function(t,e,n){var r,i,o,a,s,l,c,u=0,d=t.map(function(t,r){var i=t[e];return[{i:r,dp:0,pos:t.pos,posref:t.posref,size:t.by*("x"===i._id.charAt(0)?_:1)/2,pmin:0,pmax:"x"===i._id.charAt(0)?n.width:n.height}]}).sort(function(t,e){return t[0].posref-e[0].posref});function h(t){var e=t[0],n=t[t.length-1];if(i=e.pmin-e.pos-e.dp+e.size,o=n.pos+n.dp+n.size-e.pmax,i>.01){for(s=t.length-1;s>=0;s--)t[s].dp+=i;r=!1}if(!(o<.01)){if(i<-.01){for(s=t.length-1;s>=0;s--)t[s].dp-=o;r=!1}if(r){var c=0;for(a=0;a<t.length;a++)(l=t[a]).pos+l.dp+l.size>e.pmax&&c++;for(a=t.length-1;a>=0&&!(c<=0);a--)(l=t[a]).pos>e.pmax-1&&(l.del=!0,c--);for(a=0;a<t.length&&!(c<=0);a++)if((l=t[a]).pos<e.pmin+1)for(l.del=!0,c--,o=2*l.size,s=t.length-1;s>=0;s--)t[s].dp-=o;for(a=t.length-1;a>=0&&!(c<=0);a--)(l=t[a]).pos+l.dp+l.size>e.pmax&&(l.del=!0,c--)}}}for(;!r&&u<=t.length;){for(u++,r=!0,a=0;a<d.length-1;){var f=d[a],p=d[a+1],g=f[f.length-1],m=p[0];if((i=g.pos+g.dp+g.size-m.pos-m.dp+m.size)>.01&&g.pmin===m.pmin&&g.pmax===m.pmax){for(s=p.length-1;s>=0;s--)p[s].dp+=i;for(f.push.apply(f,p),d.splice(a+1,1),c=0,s=f.length-1;s>=0;s--)c+=f[s].dp;for(o=c/f.length,s=f.length-1;s>=0;s--)f[s].dp-=o;r=!1}else a++}d.forEach(h)}for(a=d.length-1;a>=0;a--){var v=d[a];for(s=v.length-1;s>=0;s--){var y=v[s],x=t[y.i];x.offset=y.dp,x.del=y.del}}}(Y,At?"xa":"ya",u),M(Ct,At),e.target&&e.target.tagName){var Pt=p.getComponentMethod("annotations","hasClickToShow")(t,Tt);c(r.select(e.target),Pt?"pointer":"")}if(!e.target||o||!function(t,e,n){if(!n||n.length!==t._hoverdata.length)return!0;for(var r=n.length-1;r>=0;r--){var i=n[r],o=t._hoverdata[r];if(i.curveNumber!==o.curveNumber||String(i.pointNumber)!==String(o.pointNumber))return!0}return!1}(t,0,kt))return;kt&&t.emit("plotly_unhover",{event:e,points:kt});t.emit("plotly_hover",{event:e,points:t._hoverdata,xaxes:b,yaxes:w,xvals:O,yvals:I})}(t,e,n,o)})},n.loneHover=function(t,e){var n={color:t.color||d.defaultLine,x0:t.x0||t.x||0,x1:t.x1||t.x||0,y0:t.y0||t.y||0,y1:t.y1||t.y||0,xLabel:t.xLabel,yLabel:t.yLabel,zLabel:t.zLabel,text:t.text,name:t.name,idealAlign:t.idealAlign,borderColor:t.borderColor,fontFamily:t.fontFamily,fontSize:t.fontSize,fontColor:t.fontColor,trace:{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0},i=r.select(e.container),o=e.outerContainer?r.select(e.outerContainer):i,a={hovermode:"closest",rotateLabels:!1,bgColor:e.bgColor||d.background,container:i,outerContainer:o,hoverdistance:m.MAXDIST},s=T([n],a,e.gd);return M(s,a.rotateLabels),s.node()}},{"../../lib":151,"../../lib/events":144,"../../lib/override_cursor":162,"../../lib/svg_text_utils":172,"../../plots/cartesian/axes":194,"../../registry":233,"../color":34,"../dragelement":56,"../drawing":59,"./constants":71,"./helpers":73,d3:1,"fast-isnumeric":4,tinycolor2:293}],75:[function(t,e,n){"use strict";var r=t("../../lib");e.exports=function(t,e,n,i){n("hoverlabel.bgcolor",(i=i||{}).bgcolor),n("hoverlabel.bordercolor",i.bordercolor),n("hoverlabel.namelength",i.namelength),r.coerceFont(n,"hoverlabel.font",i.font)}},{"../../lib":151}],76:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../lib"),o=t("../dragelement"),a=t("./helpers"),s=t("./layout_attributes");e.exports={moduleType:"component",name:"fx",constants:t("./constants"),schema:{layout:s},attributes:t("./attributes"),layoutAttributes:s,supplyLayoutGlobalDefaults:t("./layout_global_defaults"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),getDistanceFunction:a.getDistanceFunction,getClosest:a.getClosest,inbox:a.inbox,quadrature:a.quadrature,appendArrayPointValue:a.appendArrayPointValue,castHoverOption:function(t,e,n){return i.castOption(t,e,"hoverlabel."+n)},castHoverinfo:function(t,e,n){return i.castOption(t,n,"hoverinfo",function(n){return i.coerceHoverinfo({hoverinfo:n},{_module:t._module},e)})},hover:t("./hover").hover,unhover:o.unhover,loneHover:t("./hover").loneHover,loneUnhover:function(t){var e=i.isD3Selection(t)?t:r.select(t);e.selectAll("g.hovertext").remove(),e.selectAll(".spikeline").remove()},click:t("./click")}},{"../../lib":151,"../dragelement":56,"./attributes":68,"./calc":69,"./click":70,"./constants":71,"./defaults":72,"./helpers":73,"./hover":74,"./layout_attributes":77,"./layout_defaults":78,"./layout_global_defaults":79,d3:1}],77:[function(t,e,n){"use strict";var r=t("./constants"),i=t("../../plots/font_attributes")({editType:"none",description:"Sets the default hover label font used by all traces on the graph."});i.family.dflt=r.HOVERFONT,i.size.dflt=r.HOVERFONTSIZE,e.exports={dragmode:{valType:"enumerated",role:"info",values:["zoom","pan","select","lasso","orbit","turntable"],dflt:"zoom",editType:"modebar",description:["Determines the mode of drag interactions.","*select* and *lasso* apply only to scatter traces with","markers or text. *orbit* and *turntable* apply only to","3D scenes."].join(" ")},hovermode:{valType:"enumerated",role:"info",values:["x","y","closest",!1],editType:"modebar",description:"Determines the mode of hover interactions."},hoverdistance:{valType:"integer",min:-1,dflt:20,role:"info",editType:"none",description:["Sets the default distance (in pixels) to look for data","to add hover labels (-1 means no cutoff, 0 means no looking for data)"].join(" ")},spikedistance:{valType:"integer",min:-1,dflt:20,role:"info",editType:"none",description:["Sets the default distance (in pixels) to look for data to draw","spikelines to (-1 means no cutoff, 0 means no looking for data)."].join(" ")},hoverlabel:{bgcolor:{valType:"color",role:"style",editType:"none",description:["Sets the background color of all hover labels on graph"].join(" ")},bordercolor:{valType:"color",role:"style",editType:"none",description:["Sets the border color of all hover labels on graph."].join(" ")},font:i,namelength:{valType:"integer",min:-1,dflt:15,role:"style",editType:"none",description:["Sets the default length (in number of characters) of the trace name in","the hover labels for all traces. -1 shows the whole name","regardless of length. 0-3 shows the first 0-3 characters, and","an integer >3 will show the whole name if it is less than that","many characters, but if it is longer, will truncate to","`namelength - 3` characters and add an ellipsis."].join(" ")},editType:"none"}}},{"../../plots/font_attributes":220,"./constants":71}],78:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./layout_attributes");e.exports=function(t,e,n){function o(n,o){return r.coerce(t,e,i,n,o)}var a;o("dragmode"),e._has("cartesian")?(e._isHoriz=function(t){for(var e=!0,n=0;n<t.length;n++){var r=t[n];if("h"!==r.orientation){e=!1;break}}return e}(n),a=e._isHoriz?"y":"x"):a="closest",o("hovermode",a)&&(o("hoverdistance"),o("spikedistance"));var s=e._has("mapbox"),l=e._has("geo"),c=e._basePlotModules.length;"zoom"===e.dragmode&&((s||l)&&1===c||s&&l&&2===c)&&(e.dragmode="pan")}},{"../../lib":151,"./layout_attributes":77}],79:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./hoverlabel_defaults"),o=t("./layout_attributes");e.exports=function(t,e){i(t,e,function(n,i){return r.coerce(t,e,o,n,i)})}},{"../../lib":151,"./hoverlabel_defaults":75,"./layout_attributes":77}],80:[function(t,e,n){"use strict";var r=t("../../plots/cartesian/constants");e.exports={_isLinkedToArray:"image",visible:{valType:"boolean",role:"info",dflt:!0,editType:"arraydraw",description:["Determines whether or not this image is visible."].join(" ")},source:{valType:"string",role:"info",editType:"arraydraw",description:["Specifies the URL of the image to be used.","The URL must be accessible from the domain where the","plot code is run, and can be either relative or absolute."].join(" ")},layer:{valType:"enumerated",values:["below","above"],dflt:"above",role:"info",editType:"arraydraw",description:["Specifies whether images are drawn below or above traces.","When `xref` and `yref` are both set to `paper`,","image is drawn below the entire plot area."].join(" ")},sizex:{valType:"number",role:"info",dflt:0,editType:"arraydraw",description:["Sets the image container size horizontally.","The image will be sized based on the `position` value.","When `xref` is set to `paper`, units are sized relative","to the plot width."].join(" ")},sizey:{valType:"number",role:"info",dflt:0,editType:"arraydraw",description:["Sets the image container size vertically.","The image will be sized based on the `position` value.","When `yref` is set to `paper`, units are sized relative","to the plot height."].join(" ")},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",role:"info",editType:"arraydraw",description:["Specifies which dimension of the image to constrain."].join(" ")},opacity:{valType:"number",role:"info",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the image."},x:{valType:"any",role:"info",dflt:0,editType:"arraydraw",description:["Sets the image's x position.","When `xref` is set to `paper`, units are sized relative","to the plot height.","See `xref` for more info"].join(" ")},y:{valType:"any",role:"info",dflt:0,editType:"arraydraw",description:["Sets the image's y position.","When `yref` is set to `paper`, units are sized relative","to the plot height.","See `yref` for more info"].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",role:"info",editType:"arraydraw",description:"Sets the anchor for the x position"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",role:"info",editType:"arraydraw",description:"Sets the anchor for the y position."},xref:{valType:"enumerated",values:["paper",r.idRegex.x.toString()],dflt:"paper",role:"info",editType:"arraydraw",description:["Sets the images's x coordinate axis.","If set to a x axis id (e.g. *x* or *x2*), the `x` position","refers to an x data coordinate","If set to *paper*, the `x` position refers to the distance from","the left of plot in normalized coordinates","where *0* (*1*) corresponds to the left (right)."].join(" ")},yref:{valType:"enumerated",values:["paper",r.idRegex.y.toString()],dflt:"paper",role:"info",editType:"arraydraw",description:["Sets the images's y coordinate axis.","If set to a y axis id (e.g. *y* or *y2*), the `y` position","refers to a y data coordinate.","If set to *paper*, the `y` position refers to the distance from","the bottom of the plot in normalized coordinates","where *0* (*1*) corresponds to the bottom (top)."].join(" ")},editType:"arraydraw"}},{"../../plots/cartesian/constants":199}],81:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib/to_log_range");e.exports=function(t,e,n,o){e=e||{};var a="log"===n&&"linear"===e.type,s="linear"===n&&"log"===e.type;if(a||s)for(var l,c,u=t._fullLayout.images,d=e._id.charAt(0),h=0;h<u.length;h++)if(c="images["+h+"].",(l=u[h])[d+"ref"]===e._id){var f=l[d],p=l["size"+d],g=null,m=null;if(a){g=i(f,e.range);var v=p/Math.pow(10,g)/2;m=2*Math.log(v+Math.sqrt(1+v*v))/Math.LN10}else m=(g=Math.pow(10,f))*(Math.pow(10,p/2)-Math.pow(10,-p/2));r(g)?r(m)||(m=null):(g=null,m=null),o(c+d,g),o(c+"size"+d,m)}}},{"../../lib/to_log_range":174,"fast-isnumeric":4}],82:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/cartesian/axes"),o=t("../../plots/array_container_defaults"),a=t("./attributes");function s(t,e,n){function o(n,i){return r.coerce(t,e,a,n,i)}if(!o("visible",!!o("source")))return e;o("layer"),o("xanchor"),o("yanchor"),o("sizex"),o("sizey"),o("sizing"),o("opacity");for(var s={_fullLayout:n},l=["x","y"],c=0;c<2;c++){var u=l[c],d=i.coerceRef(t,e,s,u,"paper");i.coercePosition(e,s,o,d,u,0)}return e}e.exports=function(t,e){o(t,e,{name:"images",handleItemDefaults:s})}},{"../../lib":151,"../../plots/array_container_defaults":191,"../../plots/cartesian/axes":194,"./attributes":80}],83:[function(t,e,n){"use strict";var r=t("d3"),i=t("../drawing"),o=t("../../plots/cartesian/axes"),a=t("../../constants/xmlns_namespaces");e.exports=function(t){var e,n,s=t._fullLayout,l=[],c={},u=[];for(n=0;n<s.images.length;n++){var d=s.images[n];if(d.visible)if("below"===d.layer&&"paper"!==d.xref&&"paper"!==d.yref){e=d.xref+d.yref;var h=s._plots[e];if(!h){u.push(d);continue}h.mainplot&&(e=h.mainplot.id),c[e]||(c[e]=[]),c[e].push(d)}else"above"===d.layer?l.push(d):u.push(d)}var f={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}};function p(e){var n=r.select(this);if(!this.img||this.img.src!==e.source){n.attr("xmlns",a.svg);var i=new Promise(function(t){var r=new Image;function i(){n.remove(),t()}this.img=r,r.setAttribute("crossOrigin","anonymous"),r.onerror=i,r.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,e.getContext("2d").drawImage(this,0,0);var r=e.toDataURL("image/png");n.attr("xlink:href",r),t()},n.on("error",i),r.src=e.source}.bind(this));t._promises.push(i)}}function g(e){var n=r.select(this),a=o.getFromId(t,e.xref),l=o.getFromId(t,e.yref),c=s._size,u=a?Math.abs(a.l2p(e.sizex)-a.l2p(0)):e.sizex*c.w,d=l?Math.abs(l.l2p(e.sizey)-l.l2p(0)):e.sizey*c.h,h=u*f.x[e.xanchor].offset,p=d*f.y[e.yanchor].offset,g=f.x[e.xanchor].sizing+f.y[e.yanchor].sizing,m=(a?a.r2p(e.x)+a._offset:e.x*c.w+c.l)+h,v=(l?l.r2p(e.y)+l._offset:c.h-e.y*c.h+c.t)+p;switch(e.sizing){case"fill":g+=" slice";break;case"stretch":g="none"}n.attr({x:m,y:v,width:u,height:d,preserveAspectRatio:g,opacity:e.opacity});var y=(a?a._id:"")+(l?l._id:"");n.call(i.setClipUrl,y?"clip"+s._uid+y:null)}var m=s._imageLowerLayer.selectAll("image").data(u),v=s._imageUpperLayer.selectAll("image").data(l);m.enter().append("image"),v.enter().append("image"),m.exit().remove(),v.exit().remove(),m.each(function(t){p.bind(this)(t),g.bind(this)(t)}),v.each(function(t){p.bind(this)(t),g.bind(this)(t)});var y=Object.keys(s._plots);for(n=0;n<y.length;n++){e=y[n];var _=s._plots[e];if(_.imagelayer){var x=_.imagelayer.selectAll("image").data(c[e]||[]);x.enter().append("image"),x.exit().remove(),x.each(function(t){p.bind(this)(t),g.bind(this)(t)})}}}},{"../../constants/xmlns_namespaces":136,"../../plots/cartesian/axes":194,"../drawing":59,d3:1}],84:[function(t,e,n){"use strict";e.exports={moduleType:"component",name:"images",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("images"),draw:t("./draw"),convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":204,"./attributes":80,"./convert_coords":81,"./defaults":82,"./draw":83}],85:[function(t,e,n){"use strict";n.isRightAnchor=function(t){return"right"===t.xanchor||"auto"===t.xanchor&&t.x>=2/3},n.isCenterAnchor=function(t){return"center"===t.xanchor||"auto"===t.xanchor&&t.x>1/3&&t.x<2/3},n.isBottomAnchor=function(t){return"bottom"===t.yanchor||"auto"===t.yanchor&&t.y<=1/3},n.isMiddleAnchor=function(t){return"middle"===t.yanchor||"auto"===t.yanchor&&t.y>1/3&&t.y<2/3}},{}],86:[function(t,e,n){"use strict";var r=t("../../plots/font_attributes"),i=t("../color/attributes");e.exports={bgcolor:{valType:"color",role:"style",editType:"legend",description:"Sets the legend background color."},bordercolor:{valType:"color",dflt:i.defaultLine,role:"style",editType:"legend",description:"Sets the color of the border enclosing the legend."},borderwidth:{valType:"number",min:0,dflt:0,role:"style",editType:"legend",description:"Sets the width (in px) of the border enclosing the legend."},font:r({editType:"legend",description:"Sets the font used to text the legend items."}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",role:"info",editType:"legend",description:"Sets the orientation of the legend."},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],role:"style",editType:"legend",description:["Determines the order at which the legend items are displayed.","If *normal*, the items are displayed top-to-bottom in the same","order as the input data.","If *reversed*, the items are displayed in the opposite order","as *normal*.","If *grouped*, the items are displayed in groups","(when a trace `legendgroup` is provided).","if *grouped+reversed*, the items are displayed in the opposite order","as *grouped*."].join(" ")},tracegroupgap:{valType:"number",min:0,dflt:10,role:"style",editType:"legend",description:["Sets the amount of vertical space (in px) between legend groups."].join(" ")},x:{valType:"number",min:-2,max:3,dflt:1.02,role:"style",editType:"legend",description:"Sets the x position (in normalized coordinates) of the legend."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",role:"info",editType:"legend",description:["Sets the legend's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the legend."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:1,role:"style",editType:"legend",description:"Sets the y position (in normalized coordinates) of the legend."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",role:"info",editType:"legend",description:["Sets the legend's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the legend."].join(" ")},editType:"legend"}},{"../../plots/font_attributes":220,"../color/attributes":33}],87:[function(t,e,n){"use strict";e.exports={scrollBarWidth:4,scrollBarHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4}},{}],88:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("../../lib"),o=t("./attributes"),a=t("../../plots/layout_attributes"),s=t("./helpers");e.exports=function(t,e,n){for(var l,c,u,d,h=t.legend||{},f={},p=0,g="normal",m=0;m<n.length;m++){var v=n[m];s.legendGetsTrace(v)&&(p++,r.traceIs(v,"pie")&&p++),(r.traceIs(v,"bar")&&"stack"===e.barmode||-1!==["tonextx","tonexty"].indexOf(v.fill))&&(g=s.isGrouped({traceorder:g})?"grouped+reversed":"reversed"),void 0!==v.legendgroup&&""!==v.legendgroup&&(g=s.isReversed({traceorder:g})?"reversed+grouped":"grouped")}function y(t,e){return i.coerce(h,f,o,t,e)}if(!1!==i.coerce(t,e,a,"showlegend",p>1)){if(e.legend=f,y("bgcolor",e.paper_bgcolor),y("bordercolor"),y("borderwidth"),i.coerceFont(y,"font",e.font),y("orientation"),"h"===f.orientation){var _=t.xaxis;_&&_.rangeslider&&_.rangeslider.visible?(l=0,u="left",c=1.1,d="bottom"):(l=0,u="left",c=-.1,d="top")}y("traceorder",g),s.isGrouped(e.legend)&&y("tracegroupgap"),y("x",l),y("xanchor",u),y("y",c),y("yanchor",d),i.noneOrAll(h,f,["x","y"])}}},{"../../lib":151,"../../plots/layout_attributes":224,"../../registry":233,"./attributes":86,"./helpers":92}],89:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../plotly"),o=t("../../lib"),a=t("../../plots/plots"),s=t("../../registry"),l=t("../dragelement"),c=t("../drawing"),u=t("../color"),d=t("../../lib/svg_text_utils"),h=t("./handle_click"),f=t("./constants"),p=t("../../constants/interactions"),g=t("../../constants/alignment"),m=g.LINE_SPACING,v=g.FROM_TL,y=g.FROM_BR,_=t("./get_legend_data"),x=t("./style"),b=t("./helpers"),w=t("./anchor_utils"),k=p.DBLCLICKDELAY;function T(t,e){var n=t.data()[0][0],r=e._fullLayout,a=n.trace,l=s.traceIs(a,"pie"),u=a.index,h=l?n.label:a.name,f=t.selectAll("text.legendtext").data([0]);function p(n){d.convertToTspans(n,e,function(){!function(t,e){var n=t.data()[0][0];if(!n.trace.showlegend)return void t.remove();var r,i,o=t.select("g[class*=math-group]"),a=o.node(),s=e._fullLayout.legend.font.size*m;if(a){var l=c.bBox(a);r=l.height,i=l.width,c.setTranslate(o,0,r/4)}else{var u=t.select(".legendtext"),h=d.lineCount(u),f=u.node();r=s*h,i=f?c.bBox(f).width:0;var p=s*(.3+(1-h)/2);d.positionText(u,40,p)}r=Math.max(r,16)+3,n.height=r,n.width=i}(t,e)})}f.enter().append("text").classed("legendtext",!0),f.attr("text-anchor","start").classed("user-select-none",!0).call(c.font,r.legend.font).text(h),e._context.edits.legendText&&!l?f.call(d.makeEditable,{gd:e}).call(p).on("edit",function(t){this.text(t).call(p);var r,a=t;this.text()||(t="    ");var l=n.trace._fullInput||{},c={};if(-1!==["ohlc","candlestick"].indexOf(l.type))c[(r=n.trace.transforms)[r.length-1].direction+".name"]=t;else if(s.hasTransform(l,"groupby")){var d=s.getTransformIndices(l,"groupby"),h=d[d.length-1],f=o.keyedContainer(l,"transforms["+h+"].styles","target","value.name");""===a?f.remove(n.trace._group):f.set(n.trace._group,t),c=f.constructUpdate()}else c.name=t;return i.restyle(e,c,u)}):f.call(p)}function M(t,e){var n,r=1,i=t.selectAll("rect").data([0]);i.enter().append("rect").classed("legendtoggle",!0).style("cursor","pointer").attr("pointer-events","all").call(u.fill,"rgba(0,0,0,0)"),i.on("mousedown",function(){(n=(new Date).getTime())-e._legendMouseDownTime<k?r+=1:(r=1,e._legendMouseDownTime=n)}),i.on("mouseup",function(){if(!e._dragged&&!e._editing){var n=e._fullLayout.legend;(new Date).getTime()-e._legendMouseDownTime>k&&(r=Math.max(r-1,1)),1===r?n._clickTimeout=setTimeout(function(){h(t,e,r)},k):2===r&&(n._clickTimeout&&clearTimeout(n._clickTimeout),e._legendMouseDownTime=0,h(t,e,r))}})}function A(t,e,n){var i=t._fullLayout,o=i.legend,a=o.borderwidth,s=b.isGrouped(o),l=0;if(o._width=0,o._height=0,b.isVertical(o))s&&e.each(function(t,e){c.setTranslate(this,0,e*o.tracegroupgap)}),n.each(function(t){var e=t[0],n=e.height,r=e.width;c.setTranslate(this,a,5+a+o._height+n/2),o._height+=n,o._width=Math.max(o._width,r)}),o._width+=45+2*a,o._height+=10+2*a,s&&(o._height+=(o._lgroupsLength-1)*o.tracegroupgap),l=40;else if(s){for(var u=[o._width],d=e.data(),h=0,f=d.length;h<f;h++){var p=d[h].map(function(t){return t[0].width}),g=40+Math.max.apply(null,p);o._width+=o.tracegroupgap+g,u.push(o._width)}e.each(function(t,e){c.setTranslate(this,u[e],0)}),e.each(function(){var t=r.select(this).selectAll("g.traces"),e=0;t.each(function(t){var n=t[0].height;c.setTranslate(this,0,5+a+e+n/2),e+=n}),o._height=Math.max(o._height,e)}),o._height+=10+2*a,o._width+=2*a}else{var m,v=0,y=0,_=0,x=0,w=0,k=o.tracegroupgap||5;n.each(function(t){_=Math.max(40+t[0].width,_),w+=40+t[0].width+k}),m=i.width-(i.margin.r+i.margin.l)>a+w-k,n.each(function(t){var e=t[0],n=m?40+t[0].width:_;a+x+k+n>i.width-(i.margin.r+i.margin.l)&&(x=0,v+=y,o._height=o._height+y,y=0),c.setTranslate(this,a+x,5+a+e.height/2+v),o._width+=k+n,o._height=Math.max(o._height,e.height),x+=k+n,y=Math.max(e.height,y)}),o._width+=2*a,o._height+=10+2*a}o._width=Math.ceil(o._width),o._height=Math.ceil(o._height),n.each(function(e){var n=e[0];r.select(this).select(".legendtoggle").call(c.setRect,0,-n.height/2,(t._context.edits.legendText?0:o._width)+l,n.height)})}function L(t){var e=t._fullLayout.legend,n="left";w.isRightAnchor(e)?n="right":w.isCenterAnchor(e)&&(n="center");var r="top";w.isBottomAnchor(e)?r="bottom":w.isMiddleAnchor(e)&&(r="middle"),a.autoMargin(t,"legend",{x:e.x,y:e.y,l:e._width*v[n],r:e._width*y[n],b:e._height*y[r],t:e._height*v[r]})}e.exports=function(t){var e=t._fullLayout,n="legend"+e._uid;if(e._infolayer&&t.calcdata){t._legendMouseDownTime||(t._legendMouseDownTime=0);var d=e.legend,p=e.showlegend&&_(t.calcdata,d),g=e.hiddenlabels||[];if(!e.showlegend||!p.length)return e._infolayer.selectAll(".legend").remove(),e._topdefs.select("#"+n).remove(),void a.autoMargin(t,"legend");var m=e._infolayer.selectAll("g.legend").data([0]);m.enter().append("g").attr({class:"legend","pointer-events":"all"});var b=e._topdefs.selectAll("#"+n).data([0]);b.enter().append("clipPath").attr("id",n).append("rect");var S=m.selectAll("rect.bg").data([0]);S.enter().append("rect").attr({class:"bg","shape-rendering":"crispEdges"}),S.call(u.stroke,d.bordercolor),S.call(u.fill,d.bgcolor),S.style("stroke-width",d.borderwidth+"px");var C=m.selectAll("g.scrollbox").data([0]);C.enter().append("g").attr("class","scrollbox");var P=m.selectAll("rect.scrollbar").data([0]);P.enter().append("rect").attr({class:"scrollbar",rx:20,ry:2,width:0,height:0}).call(u.fill,"#808BA4");var z=C.selectAll("g.groups").data(p);z.enter().append("g").attr("class","groups"),z.exit().remove();var D=z.selectAll("g.traces").data(o.identity);D.enter().append("g").attr("class","traces"),D.exit().remove(),D.call(x,t).style("opacity",function(t){var e=t[0].trace;return s.traceIs(e,"pie")?-1!==g.indexOf(t[0].label)?.5:1:"legendonly"===e.visible?.5:1}).each(function(){r.select(this).call(T,t).call(M,t)});var E=0!==m.enter().size();E&&(A(t,z,D),L(t));var O=e.width,I=e.height;A(t,z,D),d._height>I?function(t){var e=t._fullLayout.legend,n="left";w.isRightAnchor(e)?n="right":w.isCenterAnchor(e)&&(n="center");a.autoMargin(t,"legend",{x:e.x,y:.5,l:e._width*v[n],r:e._width*y[n],b:0,t:0})}(t):L(t);var j=e._size,N=j.l+j.w*d.x,R=j.t+j.h*(1-d.y);w.isRightAnchor(d)?N-=d._width:w.isCenterAnchor(d)&&(N-=d._width/2),w.isBottomAnchor(d)?R-=d._height:w.isMiddleAnchor(d)&&(R-=d._height/2);var B=d._width,F=j.w;B>F?(N=j.l,B=F):(N+B>O&&(N=O-B),N<0&&(N=0),B=Math.min(O-N,d._width));var H=d._height,q=j.h;H>q?(R=j.t,H=q):(R+H>I&&(R=I-H),R<0&&(R=0),H=Math.min(I-R,d._height)),c.setTranslate(m,N,R);var Z,V,U,W,G,X,Y=H-f.scrollBarHeight-2*f.scrollBarMargin,$=d._height-H;if(d._height<=H||t._context.staticPlot)S.attr({width:B-d.borderwidth,height:H-d.borderwidth,x:d.borderwidth/2,y:d.borderwidth/2}),c.setTranslate(C,0,0),b.select("rect").attr({width:B-2*d.borderwidth,height:H-2*d.borderwidth,x:d.borderwidth,y:d.borderwidth}),C.call(c.setClipUrl,n);else{Z=f.scrollBarMargin,V=C.attr("data-scroll")||0,S.attr({width:B-2*d.borderwidth+f.scrollBarWidth+f.scrollBarMargin,height:H-d.borderwidth,x:d.borderwidth/2,y:d.borderwidth/2}),b.select("rect").attr({width:B-2*d.borderwidth+f.scrollBarWidth+f.scrollBarMargin,height:H-2*d.borderwidth,x:d.borderwidth,y:d.borderwidth-V}),C.call(c.setClipUrl,n),E&&Q(Z,V),m.on("wheel",null),m.on("wheel",function(){V=o.constrain(C.attr("data-scroll")-r.event.deltaY/Y*$,-$,0),Q(Z=f.scrollBarMargin-V/$*Y,V),0!==V&&V!==-$&&r.event.preventDefault()}),P.on(".drag",null),C.on(".drag",null);var J=r.behavior.drag().on("drag",function(){Z=o.constrain(r.event.y-f.scrollBarHeight/2,f.scrollBarMargin,f.scrollBarMargin+Y),V=-(Z-f.scrollBarMargin)/Y*$,Q(Z,V)});P.call(J),C.call(J)}if(t._context.edits.legendPosition)m.classed("cursor-move",!0),l.init({element:m.node(),gd:t,prepFn:function(){var t=c.getTranslate(m);G=t.x,X=t.y},moveFn:function(t,e){var n=G+t,r=X+e;c.setTranslate(m,n,r),U=l.align(n,0,j.l,j.l+j.w,d.xanchor),W=l.align(r,0,j.t+j.h,j.t,d.yanchor)},doneFn:function(){void 0!==U&&void 0!==W&&i.relayout(t,{"legend.x":U,"legend.y":W})},clickFn:function(n,r){var i=e._infolayer.selectAll("g.traces").filter(function(){var t=this.getBoundingClientRect();return r.clientX>=t.left&&r.clientX<=t.right&&r.clientY>=t.top&&r.clientY<=t.bottom});i.size()>0&&(1===n?m._clickTimeout=setTimeout(function(){h(i,t,n)},k):2===n&&(m._clickTimeout&&clearTimeout(m._clickTimeout),h(i,t,n)))}})}function Q(t,e){C.attr("data-scroll",e).call(c.setTranslate,0,e),P.call(c.setRect,B,t,f.scrollBarWidth,f.scrollBarHeight),b.select("rect").attr({y:d.borderwidth-e})}}},{"../../constants/alignment":132,"../../constants/interactions":133,"../../lib":151,"../../lib/svg_text_utils":172,"../../plotly":189,"../../plots/plots":226,"../../registry":233,"../color":34,"../dragelement":56,"../drawing":59,"./anchor_utils":85,"./constants":87,"./get_legend_data":90,"./handle_click":91,"./helpers":92,"./style":94,d3:1}],90:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("./helpers");e.exports=function(t,e){var n,o,a={},s=[],l=!1,c={},u=0;function d(t,n){if(""!==t&&i.isGrouped(e))-1===s.indexOf(t)?(s.push(t),l=!0,a[t]=[[n]]):a[t].push([n]);else{var r="~~i"+u;s.push(r),a[r]=[[n]],u++}}for(n=0;n<t.length;n++){var h=t[n],f=h[0],p=f.trace,g=p.legendgroup;if(i.legendGetsTrace(p)&&p.showlegend)if(r.traceIs(p,"pie"))for(c[g]||(c[g]={}),o=0;o<h.length;o++){var m=h[o].label;c[g][m]||(d(g,{label:m,color:h[o].color,i:h[o].i,trace:p}),c[g][m]=!0)}else d(g,f)}if(!s.length)return[];var v,y,_=s.length;if(l&&i.isGrouped(e))for(y=new Array(_),n=0;n<_;n++)v=a[s[n]],y[n]=i.isReversed(e)?v.reverse():v;else{for(y=[new Array(_)],n=0;n<_;n++)v=a[s[n]][0],y[0][i.isReversed(e)?_-n-1:n]=v;_=1}return e._lgroupsLength=_,y}},{"../../registry":233,"./helpers":92}],91:[function(t,e,n){"use strict";var r=t("../../plotly"),i=t("../../lib"),o=t("../../registry"),a=!0;e.exports=function(t,e,n){if(!e._dragged&&!e._editing){var s,l,c,u,d,h=e._fullLayout.hiddenlabels?e._fullLayout.hiddenlabels.slice():[],f=t.data()[0][0],p=e._fullData,g=f.trace,m=g.legendgroup,v={},y=[],_=[],x=[];if(1===n&&a&&e.data&&e._context.showTips?(i.notifier(i._(e,"Double-click on legend to isolate one trace"),"long"),a=!1):a=!1,o.traceIs(g,"pie")){var b=f.label,w=h.indexOf(b);1===n?-1===w?h.push(b):h.splice(w,1):2===n&&(h=[],e.calcdata[0].forEach(function(t){b!==t.label&&h.push(t.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===h.length&&-1===w&&(h=[])),r.relayout(e,"hiddenlabels",h)}else{var k,T=m&&m.length,M=[];if(T)for(s=0;s<p.length;s++)(k=p[s]).visible&&k.legendgroup===m&&M.push(s);if(1===n){var A;switch(g.visible){case!0:A="legendonly";break;case!1:A=!1;break;case"legendonly":A=!0}if(T)for(s=0;s<p.length;s++)!1!==p[s].visible&&p[s].legendgroup===m&&E(p[s],A);else E(g,A)}else if(2===n){var L,S,C=!0;for(s=0;s<p.length;s++)if(!(p[s]===g)&&!(L=T&&p[s].legendgroup===m)&&!0===p[s].visible&&!o.traceIs(p[s],"notLegendIsolatable")){C=!1;break}for(s=0;s<p.length;s++)if(!1!==p[s].visible&&!o.traceIs(p[s],"notLegendIsolatable"))switch(g.visible){case"legendonly":E(p[s],!0);break;case!0:S=!!C||"legendonly",L=p[s]===g||T&&p[s].legendgroup===m,E(p[s],!!L||S)}}for(s=0;s<_.length;s++)if(c=_[s]){var P=c.constructUpdate(),z=Object.keys(P);for(l=0;l<z.length;l++)u=z[l],(v[u]=v[u]||[])[x[s]]=P[u]}for(d=Object.keys(v),s=0;s<d.length;s++)for(u=d[s],l=0;l<y.length;l++)v[u].hasOwnProperty(l)||(v[u][l]=void 0);r.restyle(e,v,y)}}function D(t,e,n){var r=y.indexOf(t),i=v[e];return i||(i=v[e]=[]),-1===y.indexOf(t)&&(y.push(t),r=y.length-1),i[r]=n,r}function E(t,e){var n=t._fullInput;if(o.hasTransform(n,"groupby")){var r=_[n.index];if(!r){var a=o.getTransformIndices(n,"groupby"),s=a[a.length-1];r=i.keyedContainer(n,"transforms["+s+"].styles","target","value.visible"),_[n.index]=r}var l=r.get(t._group);void 0===l&&(l=!0),!1!==l&&r.set(t._group,e),x[n.index]=D(n.index,"visible",!1!==n.visible)}else{var c=!1!==n.visible&&e;D(n.index,"visible",c)}}}},{"../../lib":151,"../../plotly":189,"../../registry":233}],92:[function(t,e,n){"use strict";n.legendGetsTrace=function(t){return t.visible&&void 0!==t.showlegend},n.isGrouped=function(t){return-1!==(t.traceorder||"").indexOf("grouped")},n.isVertical=function(t){return"h"!==t.orientation},n.isReversed=function(t){return-1!==(t.traceorder||"").indexOf("reversed")}},{}],93:[function(t,e,n){"use strict";e.exports={moduleType:"component",name:"legend",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw"),style:t("./style")}},{"./attributes":86,"./defaults":88,"./draw":89,"./style":94}],94:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../registry"),o=t("../../lib"),a=t("../drawing"),s=t("../color"),l=t("../../traces/scatter/subtypes"),c=t("../../traces/pie/style_one");e.exports=function(t,e){t.each(function(t){var e=r.select(this).selectAll("g.layers").data([0]);e.enter().append("g").classed("layers",!0),e.style("opacity",t[0].trace.opacity),e.selectAll("g.legendfill").data([t]).enter().append("g").classed("legendfill",!0),e.selectAll("g.legendlines").data([t]).enter().append("g").classed("legendlines",!0);var n=e.selectAll("g.legendsymbols").data([t]);n.enter().append("g").classed("legendsymbols",!0),n.selectAll("g.legendpoints").data([t]).enter().append("g").classed("legendpoints",!0)}).each(function(t){var e=t[0].trace,n=e.marker||{},o=n.line||{},a=r.select(this).select("g.legendpoints").selectAll("path.legendbar").data(i.traceIs(e,"bar")?[t]:[]);a.enter().append("path").classed("legendbar",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),a.exit().remove(),a.each(function(t){var e=r.select(this),i=t[0],a=(i.mlw+1||o.width+1)-1;e.style("stroke-width",a+"px").call(s.fill,i.mc||n.color),a&&e.call(s.stroke,i.mlc||o.color)})}).each(function(t){var e=t[0].trace,n=r.select(this).select("g.legendpoints").selectAll("path.legendbox").data(i.traceIs(e,"box-violin")&&e.visible?[t]:[]);n.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),n.exit().remove(),n.each(function(){var t=e.line.width,n=r.select(this);n.style("stroke-width",t+"px").call(s.fill,e.fillcolor),t&&n.call(s.stroke,e.line.color)})}).each(function(t){var e=t[0].trace,n=r.select(this).select("g.legendpoints").selectAll("path.legendpie").data(i.traceIs(e,"pie")&&e.visible?[t]:[]);n.enter().append("path").classed("legendpie",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),n.exit().remove(),n.size()&&n.call(c,t[0],e)}).each(function(t){var e=t[0].trace,n=e.visible&&e.fill&&"none"!==e.fill,i=l.hasLines(e),o=e.contours;o&&"constraint"===o.type&&(i=o.showlines,n="="!==o._operation);var s=r.select(this).select(".legendfill").selectAll("path").data(n?[t]:[]);s.enter().append("path").classed("js-fill",!0),s.exit().remove(),s.attr("d","M5,0h30v6h-30z").call(a.fillGroupStyle);var c=r.select(this).select(".legendlines").selectAll("path").data(i?[t]:[]);c.enter().append("path").classed("js-line",!0).attr("d","M5,0h30"),c.exit().remove(),c.call(a.lineGroupStyle)}).each(function(t){var n,i,s=t[0],c=s.trace,u=l.hasMarkers(c),d=l.hasText(c),h=l.hasLines(c);function f(t,e,n){var r=o.nestedProperty(c,t).get(),i=Array.isArray(r)&&e?e(r):r;if(n){if(i<n[0])return n[0];if(i>n[1])return n[1]}return i}function p(t){return t[0]}if(u||d||h){var g={},m={};u&&(g.mc=f("marker.color",p),g.mo=f("marker.opacity",o.mean,[.2,1]),g.ms=f("marker.size",o.mean,[2,16]),g.mlc=f("marker.line.color",p),g.mlw=f("marker.line.width",o.mean,[0,5]),m.marker={sizeref:1,sizemin:1,sizemode:"diameter"}),h&&(m.line={width:f("line.width",p,[0,10])}),d&&(g.tx="Aa",g.tp=f("textposition",p),g.ts=10,g.tc=f("textfont.color",p),g.tf=f("textfont.family",p)),n=[o.minExtend(s,g)],i=o.minExtend(c,m)}var v=r.select(this).select("g.legendpoints"),y=v.selectAll("path.scatterpts").data(u?n:[]);y.enter().append("path").classed("scatterpts",!0).attr("transform","translate(20,0)"),y.exit().remove(),y.call(a.pointStyle,i,e),u&&(n[0].mrc=3);var _=v.selectAll("g.pointtext").data(d?n:[]);_.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)"),_.exit().remove(),_.selectAll("text").call(a.textPointStyle,i,e)})}},{"../../lib":151,"../../registry":233,"../../traces/pie/style_one":257,"../../traces/scatter/subtypes":281,"../color":34,"../drawing":59,d3:1}],95:[function(t,e,n){"use strict";var r=t("../../plotly"),i=t("../../plots/plots"),o=t("../../plots/cartesian/axis_ids"),a=t("../../lib"),s=t("../../snapshot/download"),l=t("../../../build/ploticon"),c=a._,u=e.exports={};function d(t,e){var n,i,a=e.currentTarget,s=a.getAttribute("data-attr"),l=a.getAttribute("data-val")||!0,c=t._fullLayout,u={},d=o.list(t,null,!0),h="on";if("zoom"===s){var f,p="in"===l?.5:2,g=(1+p)/2,m=(1-p)/2;for(i=0;i<d.length;i++)if(!(n=d[i]).fixedrange)if(f=n._name,"auto"===l)u[f+".autorange"]=!0;else if("reset"===l){if(void 0===n._rangeInitial)u[f+".autorange"]=!0;else{var v=n._rangeInitial.slice();u[f+".range[0]"]=v[0],u[f+".range[1]"]=v[1]}void 0!==n._showSpikeInitial&&(u[f+".showspikes"]=n._showSpikeInitial,"on"!==h||n._showSpikeInitial||(h="off"))}else{var y=[n.r2l(n.range[0]),n.r2l(n.range[1])],_=[g*y[0]+m*y[1],g*y[1]+m*y[0]];u[f+".range[0]"]=n.l2r(_[0]),u[f+".range[1]"]=n.l2r(_[1])}c._cartesianSpikesEnabled=h}else{if("hovermode"!==s||"x"!==l&&"y"!==l){if("hovermode"===s&&"closest"===l){for(i=0;i<d.length;i++)n=d[i],"on"!==h||n.showspikes||(h="off");c._cartesianSpikesEnabled=h}}else l=c._isHoriz?"y":"x",a.setAttribute("data-val",l);u[s]=l}r.relayout(t,u)}function h(t,e){for(var n=e.currentTarget,i=n.getAttribute("data-attr"),o=n.getAttribute("data-val")||!0,a=t._fullLayout._subplots.gl3d,s={},l=i.split("."),c=0;c<a.length;c++)s[a[c]+"."+l[1]]=o;var u="pan"===o?o:"zoom";s.dragmode=u,r.relayout(t,s)}function f(t,e){for(var n=e.currentTarget.getAttribute("data-attr"),i=t._fullLayout,o=i._subplots.gl3d,s={},l=0;l<o.length;l++){var c=o[l],u=c+".camera",d=i[c]._scene;"resetDefault"===n?s[u]=null:"resetLastSave"===n&&(s[u]=a.extendDeep({},d.cameraInitial))}r.relayout(t,s)}function p(t,e){var n=e.currentTarget,i=n._previousVal||!1,o=t.layout,s=t._fullLayout,l=s._subplots.gl3d,c=["xaxis","yaxis","zaxis"],u=["showspikes","spikesides","spikethickness","spikecolor"],d={},h={},f={};if(i)f=a.extendDeep(o,i),n._previousVal=null;else{f={"allaxes.showspikes":!1};for(var p=0;p<l.length;p++){var g=l[p],m=s[g],v=d[g]={};v.hovermode=m.hovermode,f[g+".hovermode"]=!1;for(var y=0;y<3;y++){var _=c[y];h=v[_]={};for(var x=0;x<u.length;x++){var b=u[x];h[b]=m[_][b]}}}n._previousVal=a.extendDeep({},d)}r.relayout(t,f)}function g(t,e){for(var n=e.currentTarget,i=n.getAttribute("data-attr"),o=n.getAttribute("data-val")||!0,a=t._fullLayout,s=a._subplots.geo,l=0;l<s.length;l++){var c=s[l],u=a[c];if("zoom"===i){var d=u.projection.scale,h="in"===o?2*d:.5*d;r.relayout(t,c+".projection.scale",h)}else"reset"===i&&v(t,"geo")}}function m(t){var e,n=t._fullLayout;e=n._has("cartesian")?n._isHoriz?"y":"x":"closest";var i=!t._fullLayout.hovermode&&e;r.relayout(t,"hovermode",i)}function v(t,e){for(var n=t._fullLayout,i=n._subplots[e],o={},a=0;a<i.length;a++)for(var s=i[a],l=n[s]._subplot.viewInitial,c=Object.keys(l),u=0;u<c.length;u++){var d=c[u];o[s+"."+d]=l[d]}r.relayout(t,o)}u.toImage={name:"toImage",title:function(t){return c(t,"Download plot as a png")},icon:l.camera,click:function(t){var e="png";a.notifier(c(t,"Taking snapshot - this may take a few seconds"),"long"),a.isIE()&&(a.notifier(c(t,"IE only supports svg.  Changing format to svg."),"long"),e="svg"),s(t,{format:e}).then(function(e){a.notifier(c(t,"Snapshot succeeded")+" - "+e,"long")}).catch(function(){a.notifier(c(t,"Sorry, there was a problem downloading your snapshot!"),"long")})}},u.sendDataToCloud={name:"sendDataToCloud",title:function(t){return c(t,"Edit in Chart Studio")},icon:l.disk,click:function(t){i.sendDataToCloud(t)}},u.zoom2d={name:"zoom2d",title:function(t){return c(t,"Zoom")},attr:"dragmode",val:"zoom",icon:l.zoombox,click:d},u.pan2d={name:"pan2d",title:function(t){return c(t,"Pan")},attr:"dragmode",val:"pan",icon:l.pan,click:d},u.select2d={name:"select2d",title:function(t){return c(t,"Box Select")},attr:"dragmode",val:"select",icon:l.selectbox,click:d},u.lasso2d={name:"lasso2d",title:function(t){return c(t,"Lasso Select")},attr:"dragmode",val:"lasso",icon:l.lasso,click:d},u.zoomIn2d={name:"zoomIn2d",title:function(t){return c(t,"Zoom in")},attr:"zoom",val:"in",icon:l.zoom_plus,click:d},u.zoomOut2d={name:"zoomOut2d",title:function(t){return c(t,"Zoom out")},attr:"zoom",val:"out",icon:l.zoom_minus,click:d},u.autoScale2d={name:"autoScale2d",title:function(t){return c(t,"Autoscale")},attr:"zoom",val:"auto",icon:l.autoscale,click:d},u.resetScale2d={name:"resetScale2d",title:function(t){return c(t,"Reset axes")},attr:"zoom",val:"reset",icon:l.home,click:d},u.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(t){return c(t,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:l.tooltip_basic,gravity:"ne",click:d},u.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(t){return c(t,"Compare data on hover")},attr:"hovermode",val:function(t){return t._fullLayout._isHoriz?"y":"x"},icon:l.tooltip_compare,gravity:"ne",click:d},u.zoom3d={name:"zoom3d",title:function(t){return c(t,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:l.zoombox,click:h},u.pan3d={name:"pan3d",title:function(t){return c(t,"Pan")},attr:"scene.dragmode",val:"pan",icon:l.pan,click:h},u.orbitRotation={name:"orbitRotation",title:function(t){return c(t,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:l["3d_rotate"],click:h},u.tableRotation={name:"tableRotation",title:function(t){return c(t,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:l["z-axis"],click:h},u.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(t){return c(t,"Reset camera to default")},attr:"resetDefault",icon:l.home,click:f},u.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(t){return c(t,"Reset camera to last save")},attr:"resetLastSave",icon:l.movie,click:f},u.hoverClosest3d={name:"hoverClosest3d",title:function(t){return c(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:p},u.zoomInGeo={name:"zoomInGeo",title:function(t){return c(t,"Zoom in")},attr:"zoom",val:"in",icon:l.zoom_plus,click:g},u.zoomOutGeo={name:"zoomOutGeo",title:function(t){return c(t,"Zoom out")},attr:"zoom",val:"out",icon:l.zoom_minus,click:g},u.resetGeo={name:"resetGeo",title:function(t){return c(t,"Reset")},attr:"reset",val:null,icon:l.autoscale,click:g},u.hoverClosestGeo={name:"hoverClosestGeo",title:function(t){return c(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:m},u.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(t){return c(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:m},u.hoverClosestPie={name:"hoverClosestPie",title:function(t){return c(t,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:l.tooltip_basic,gravity:"ne",click:m},u.toggleHover={name:"toggleHover",title:function(t){return c(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:function(t,e){m(t),p(t,e)}},u.resetViews={name:"resetViews",title:function(t){return c(t,"Reset views")},icon:l.home,click:function(t,e){var n=e.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),d(t,e),n.setAttribute("data-attr","resetLastSave"),f(t,e),v(t,"geo"),v(t,"mapbox")}},u.toggleSpikelines={name:"toggleSpikelines",title:function(t){return c(t,"Toggle Spike Lines")},icon:l.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(t){var e=t._fullLayout;e._cartesianSpikesEnabled="on"===e._cartesianSpikesEnabled?"off":"on";var n=function(t){for(var e,n,r=t._fullLayout,i=o.list(t,null,!0),a={},s=0;s<i.length;s++)e=i[s],n=e._name,a[n+".showspikes"]="on"===r._cartesianSpikesEnabled||e._showSpikeInitial;return a}(t);r.relayout(t,n)}},u.resetViewMapbox={name:"resetViewMapbox",title:function(t){return c(t,"Reset view")},attr:"reset",icon:l.home,click:function(t){v(t,"mapbox")}}},{"../../../build/ploticon":14,"../../lib":151,"../../plotly":189,"../../plots/cartesian/axis_ids":197,"../../plots/plots":226,"../../snapshot/download":235}],96:[function(t,e,n){"use strict";n.manage=t("./manage")},{"./manage":97}],97:[function(t,e,n){"use strict";var r=t("../../plots/cartesian/axis_ids"),i=t("../../traces/scatter/subtypes"),o=t("../../registry"),a=t("./modebar"),s=t("./buttons");e.exports=function(t){var e=t._fullLayout,n=t._context,l=e._modeBar;if(n.displayModeBar){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var c,u=n.modeBarButtons;c=Array.isArray(u)&&u.length?function(t){for(var e=0;e<t.length;e++)for(var n=t[e],r=0;r<n.length;r++){var i=n[r];if("string"==typeof i){if(void 0===s[i])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));t[e][r]=s[i]}}return t}(u):function(t,e,n){var a=t._fullLayout,l=t._fullData,c=a._has("cartesian"),u=a._has("gl3d"),d=a._has("geo"),h=a._has("pie"),f=a._has("gl2d"),p=a._has("ternary"),g=a._has("mapbox"),m=a._has("polar"),v=function(t){for(var e=r.list({_fullLayout:t},null,!0),n=0;n<e.length;n++)if(!e[n].fixedrange)return!1;return!0}(a),y=[];function _(t){if(t.length){for(var n=[],r=0;r<t.length;r++){var i=t[r];-1===e.indexOf(i)&&n.push(s[i])}y.push(n)}}_(["toImage","sendDataToCloud"]);var x=[],b=[],w=[],k=[];(c||f||h||p)+d+u+g+m>1?(b=["toggleHover"],w=["resetViews"]):d?(x=["zoomInGeo","zoomOutGeo"],b=["hoverClosestGeo"],w=["resetGeo"]):u?(b=["hoverClosest3d"],w=["resetCameraDefault3d","resetCameraLastSave3d"]):g?(b=["toggleHover"],w=["resetViewMapbox"]):b=f?["hoverClosestGl2d"]:h?["hoverClosestPie"]:["toggleHover"];c&&(b=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]);!c&&!f||v||(x=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==w[0]&&(w=["resetScale2d"]));u?k=["zoom3d","pan3d","orbitRotation","tableRotation"]:(c||f)&&!v||p?k=["zoom2d","pan2d"]:g||d?k=["pan2d"]:m&&(k=["zoom2d"]);(function(t){for(var e=!1,n=0;n<t.length&&!e;n++){var r=t[n];r._module&&r._module.selectPoints&&(o.traceIs(r,"scatter-like")?(i.hasMarkers(r)||i.hasText(r))&&(e=!0):o.traceIs(r,"box-violin")&&"all"!==r.boxpoints&&"all"!==r.points||(e=!0))}return e})(l)&&k.push("select2d","lasso2d");return _(k),_(x.concat(w)),_(b),function(t,e){if(e.length)if(Array.isArray(e[0]))for(var n=0;n<e.length;n++)t.push(e[n]);else t.push(e);return t}(y,n)}(t,n.modeBarButtonsToRemove,n.modeBarButtonsToAdd),l?l.update(t,c):e._modeBar=a(t,c)}else l&&(l.destroy(),delete e._modeBar)}},{"../../plots/cartesian/axis_ids":197,"../../registry":233,"../../traces/scatter/subtypes":281,"./buttons":95,"./modebar":98}],98:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../lib"),o=t("../../../build/ploticon");function a(t){this.container=t.container,this.element=document.createElement("div"),this.update(t.graphInfo,t.buttons),this.container.appendChild(this.element)}var s=a.prototype;s.update=function(t,e){this.graphInfo=t;var n=this.graphInfo._context;"hover"===n.displayModeBar?this.element.className="modebar modebar--hover":this.element.className="modebar";var r=!this.hasButtons(e),i=this.hasLogo!==n.displaylogo;(r||i)&&(this.removeAllButtons(),this.updateButtons(e),n.displaylogo&&(this.element.appendChild(this.getLogo()),this.hasLogo=!0)),this.updateActiveButton()},s.updateButtons=function(t){var e=this;this.buttons=t,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(t){var n=e.createGroup();t.forEach(function(t){var r=t.name;if(!r)throw new Error("must provide button 'name' in button config");if(-1!==e.buttonsNames.indexOf(r))throw new Error("button name '"+r+"' is taken");e.buttonsNames.push(r);var i=e.createButton(t);e.buttonElements.push(i),n.appendChild(i)}),e.element.appendChild(n)})},s.createGroup=function(){var t=document.createElement("div");return t.className="modebar-group",t},s.createButton=function(t){var e=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var i=t.title;void 0===i?i=t.name:"function"==typeof i&&(i=i(this.graphInfo)),(i||0===i)&&n.setAttribute("data-title",i),void 0!==t.attr&&n.setAttribute("data-attr",t.attr);var a=t.val;if(void 0!==a&&("function"==typeof a&&(a=a(this.graphInfo)),n.setAttribute("data-val",a)),"function"!=typeof t.click)throw new Error("must provide button 'click' function in button config");return n.addEventListener("click",function(n){t.click(e.graphInfo,n),e.updateActiveButton(n.currentTarget)}),n.setAttribute("data-toggle",t.toggle||!1),t.toggle&&r.select(n).classed("active",!0),n.appendChild(this.createIcon(t.icon||o.question,t.name)),n.setAttribute("data-gravity",t.gravity||"n"),n},s.createIcon=function(t,e){var n=t.ascent-t.descent,r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),o=document.createElementNS(r,"path");i.setAttribute("height","1em"),i.setAttribute("width",t.width/n+"em"),i.setAttribute("viewBox",[0,0,t.width,n].join(" "));var a="toggleSpikelines"===e?"matrix(1.5 0 0 -1.5 0 "+t.ascent+")":"matrix(1 0 0 -1 0 "+t.ascent+")";return o.setAttribute("d",t.path),o.setAttribute("transform",a),i.appendChild(o),i},s.updateActiveButton=function(t){var e=this.graphInfo._fullLayout,n=void 0!==t?t.getAttribute("data-attr"):null;this.buttonElements.forEach(function(t){var o=t.getAttribute("data-val")||!0,a=t.getAttribute("data-attr"),s="true"===t.getAttribute("data-toggle"),l=r.select(t);if(s)a===n&&l.classed("active",!l.classed("active"));else{var c=null===a?a:i.nestedProperty(e,a).get();l.classed("active",c===o)}})},s.hasButtons=function(t){var e=this.buttons;if(!e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n){if(t[n].length!==e[n].length)return!1;for(var r=0;r<t[n].length;r++)if(t[n][r].name!==e[n][r].name)return!1}return!0},s.getLogo=function(){var t=this.createGroup(),e=document.createElement("a");return e.href="https://plot.ly/",e.target="_blank",e.setAttribute("data-title",i._(this.graphInfo,"Produced with Plotly")),e.className="modebar-btn plotlyjsicon modebar-btn--logo",e.appendChild(this.createIcon(o.plotlylogo)),t.appendChild(e),t},s.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},s.destroy=function(){i.removeElement(this.container.querySelector(".modebar"))},e.exports=function(t,e){var n=t._fullLayout,i=new a({graphInfo:t,container:n._paperdiv.node(),buttons:e});return n._privateplot&&r.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i}},{"../../../build/ploticon":14,"../../lib":151,d3:1}],99:[function(t,e,n){"use strict";var r=t("../../plots/font_attributes"),i=t("../color/attributes"),o=t("../../lib/extend").extendFlat,a=t("./button_attributes");a=o(a,{_isLinkedToArray:"button",description:["Sets the specifications for each buttons.","By default, a range selector comes with no buttons."].join(" ")}),e.exports={visible:{valType:"boolean",role:"info",editType:"plot",description:["Determines whether or not this range selector is visible.","Note that range selectors are only available for x axes of","`type` set to or auto-typed to *date*."].join(" ")},buttons:a,x:{valType:"number",min:-2,max:3,role:"style",editType:"plot",description:"Sets the x position (in normalized coordinates) of the range selector."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",role:"info",editType:"plot",description:["Sets the range selector's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,role:"style",editType:"plot",description:"Sets the y position (in normalized coordinates) of the range selector."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",role:"info",editType:"plot",description:["Sets the range selector's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},font:r({editType:"plot",description:"Sets the font of the range selector button text."}),bgcolor:{valType:"color",dflt:i.lightLine,role:"style",editType:"plot",description:"Sets the background color of the range selector buttons."},activecolor:{valType:"color",role:"style",editType:"plot",description:"Sets the background color of the active range selector button."},bordercolor:{valType:"color",dflt:i.defaultLine,role:"style",editType:"plot",description:"Sets the color of the border enclosing the range selector."},borderwidth:{valType:"number",min:0,dflt:0,role:"style",editType:"plot",description:"Sets the width (in px) of the border enclosing the range selector."},editType:"plot"}},{"../../lib/extend":145,"../../plots/font_attributes":220,"../color/attributes":33,"./button_attributes":100}],100:[function(t,e,n){"use strict";e.exports={step:{valType:"enumerated",role:"info",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot",description:["The unit of measurement that the `count` value will set the range by."].join(" ")},stepmode:{valType:"enumerated",role:"info",values:["backward","todate"],dflt:"backward",editType:"plot",description:["Sets the range update mode.","If *backward*, the range update shifts the start of range","back *count* times *step* milliseconds.","If *todate*, the range update shifts the start of range","back to the first timestamp from *count* times","*step* milliseconds back.","For example, with `step` set to *year* and `count` set to *1*","the range update shifts the start of the range back to","January 01 of the current year.","Month and year *todate* are currently available only","for the built-in (Gregorian) calendar."].join(" ")},count:{valType:"number",role:"info",min:0,dflt:1,editType:"plot",description:["Sets the number of steps to take to update the range.","Use with `step` to specify the update interval."].join(" ")},label:{valType:"string",role:"info",editType:"plot",description:"Sets the text label to appear on the button."},editType:"plot"}},{}],101:[function(t,e,n){"use strict";e.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],102:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../color"),o=t("./attributes"),a=t("./button_attributes"),s=t("./constants");e.exports=function(t,e,n,l,c){var u=t.rangeselector||{},d=e.rangeselector={};function h(t,e){return r.coerce(u,d,o,t,e)}if(h("visible",function(t,e,n){var i,o,s=t.buttons||[],l=e.buttons=[];function c(t,e){return r.coerce(i,o,a,t,e)}for(var u=0;u<s.length;u++)if(i=s[u],o={},r.isPlainObject(i)){var d=c("step");"all"!==d&&(!n||"gregorian"===n||"month"!==d&&"year"!==d?c("stepmode"):o.stepmode="backward",c("count")),c("label"),o._index=u,l.push(o)}return l}(u,d,c).length>0)){var f=function(t,e,n){for(var r=n.filter(function(n){return e[n].anchor===t._id}),i=0,o=0;o<r.length;o++){var a=e[r[o]].domain;a&&(i=Math.max(a[1],i))}return[t.domain[0],i+s.yPad]}(e,n,l);h("x",f[0]),h("y",f[1]),r.noneOrAll(t,e,["x","y"]),h("xanchor"),h("yanchor"),r.coerceFont(h,"font",n.font);var p=h("bgcolor");h("activecolor",i.contrast(p,s.lightAmount,s.darkAmount)),h("bordercolor"),h("borderwidth")}}},{"../../lib":151,"../color":34,"./attributes":99,"./button_attributes":100,"./constants":101}],103:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../plotly"),o=t("../../plots/plots"),a=t("../color"),s=t("../drawing"),l=t("../../lib/svg_text_utils"),c=t("../../plots/cartesian/axis_ids"),u=t("../legend/anchor_utils"),d=t("../../constants/alignment"),h=d.LINE_SPACING,f=d.FROM_TL,p=d.FROM_BR,g=t("./constants"),m=t("./get_update_object");function v(t){return t._id}function y(t,e,n){var r,i,o=t.selectAll("rect").data([0]);o.enter().append("rect").classed("selector-rect",!0),o.attr("shape-rendering","crispEdges"),o.attr({rx:g.rx,ry:g.ry}),o.call(a.stroke,e.bordercolor).call(a.fill,(r=e,i=n,i._isActive||i._isHovered?r.activecolor:r.bgcolor)).style("stroke-width",e.borderwidth+"px")}function _(t,e,n,r){var i,o=t.selectAll("text").data([0]);o.enter().append("text").classed("selector-text",!0).classed("user-select-none",!0),o.attr("text-anchor","middle"),o.call(s.font,e.font).text((i=n,i.label?i.label:"all"===i.step?"all":i.count+i.step.charAt(0))).call(function(t){l.convertToTspans(t,r)})}e.exports=function(t){var e=t._fullLayout._infolayer.selectAll(".rangeselector").data(function(t){for(var e=c.list(t,"x",!0),n=[],r=0;r<e.length;r++){var i=e[r];i.rangeselector&&i.rangeselector.visible&&n.push(i)}return n}(t),v);e.enter().append("g").classed("rangeselector",!0),e.exit().remove(),e.style({cursor:"pointer","pointer-events":"all"}),e.each(function(e){var n=r.select(this),a=e,c=a.rangeselector,d=n.selectAll("g.button").data(c.buttons);d.enter().append("g").classed("button",!0),d.exit().remove(),d.each(function(e){var n=r.select(this),o=m(a,e);e._isActive=function(t,e,n){{if("all"===e.step)return!0===t.autorange;var r=Object.keys(n);return t.range[0]===n[r[0]]&&t.range[1]===n[r[1]]}}(a,e,o),n.call(y,c,e),n.call(_,c,e,t),n.on("click",function(){t._dragged||i.relayout(t,o)}),n.on("mouseover",function(){e._isHovered=!0,n.call(y,c,e)}),n.on("mouseout",function(){e._isHovered=!1,n.call(y,c,e)})}),function(t,e,n,i,a){var c=0,d=0,m=n.borderwidth;e.each(function(){var t=r.select(this),e=t.select(".selector-text"),i=n.font.size*h,o=Math.max(i*l.lineCount(e),16)+3;d=Math.max(d,o)}),e.each(function(){var t=r.select(this),e=t.select(".selector-rect"),i=t.select(".selector-text"),o=i.node()&&s.bBox(i.node()).width,a=n.font.size*h,u=l.lineCount(i),f=Math.max(o+10,g.minButtonWidth);t.attr("transform","translate("+(m+c)+","+m+")"),e.attr({x:0,y:0,width:f,height:d}),l.positionText(i,f/2,d/2-(u-1)*a/2+3),c+=f+5});var v=t._fullLayout._size,y=v.l+v.w*n.x,_=v.t+v.h*(1-n.y),x="left";u.isRightAnchor(n)&&(y-=c,x="right");u.isCenterAnchor(n)&&(y-=c/2,x="center");var b="top";u.isBottomAnchor(n)&&(_-=d,b="bottom");u.isMiddleAnchor(n)&&(_-=d/2,b="middle");c=Math.ceil(c),d=Math.ceil(d),y=Math.round(y),_=Math.round(_),o.autoMargin(t,i+"-range-selector",{x:n.x,y:n.y,l:c*f[x],r:c*p[x],b:d*p[b],t:d*f[b]}),a.attr("transform","translate("+y+","+_+")")}(t,d,c,a._name,n)})}},{"../../constants/alignment":132,"../../lib/svg_text_utils":172,"../../plotly":189,"../../plots/cartesian/axis_ids":197,"../../plots/plots":226,"../color":34,"../drawing":59,"../legend/anchor_utils":85,"./constants":101,"./get_update_object":104,d3:1}],104:[function(t,e,n){"use strict";var r=t("d3");e.exports=function(t,e){var n=t._name,i={};if("all"===e.step)i[n+".autorange"]=!0;else{var o=function(t,e){var n,i=t.range,o=new Date(t.r2l(i[1])),a=e.step,s=e.count;switch(e.stepmode){case"backward":n=t.l2r(+r.time[a].utc.offset(o,-s));break;case"todate":var l=r.time[a].utc.offset(o,-s);n=t.l2r(+r.time[a].utc.ceil(l))}var c=i[1];return[n,c]}(t,e);i[n+".range[0]"]=o[0],i[n+".range[1]"]=o[1]}return i}},{d3:1}],105:[function(t,e,n){"use strict";e.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":99,"./defaults":102,"./draw":103}],106:[function(t,e,n){"use strict";var r=t("../color/attributes");e.exports={bgcolor:{valType:"color",dflt:r.background,role:"style",editType:"calc",description:"Sets the background color of the range slider."},bordercolor:{valType:"color",dflt:r.defaultLine,role:"style",editType:"calc",description:"Sets the border color of the range slider."},borderwidth:{valType:"integer",dflt:0,min:0,role:"style",editType:"calc",description:"Sets the border color of the range slider."},autorange:{valType:"boolean",dflt:!0,role:"style",editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range slider range is","computed in relation to the input data.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},range:{valType:"info_array",role:"info",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1},description:["Sets the range of the range slider.","If not set, defaults to the full xaxis range.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},thickness:{valType:"number",dflt:.15,min:0,max:1,role:"style",editType:"calc",description:["The height of the range slider as a fraction of the","total plot area height."].join(" ")},visible:{valType:"boolean",dflt:!0,role:"info",editType:"calc",description:["Determines whether or not the range slider will be visible.","If visible, perpendicular axes will be set to `fixedrange`"].join(" ")},editType:"calc"}},{"../color/attributes":33}],107:[function(t,e,n){"use strict";var r=t("../../plots/cartesian/axes"),i=t("./constants");e.exports=function(t){for(var e=r.list(t,"x",!0),n=0;n<e.length;n++){var o=e[n],a=o[i.name];a&&a.visible&&a.autorange&&o._min.length&&o._max.length&&(a._input.autorange=!0,a._input.range=a.range=r.getAutoRange(o))}}},{"../../plots/cartesian/axes":194,"./constants":108}],108:[function(t,e,n){"use strict";e.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskColor:"rgba(0,0,0,0.4)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],109:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./attributes");e.exports=function(t,e,n){if(t[n].rangeslider){r.isPlainObject(t[n].rangeslider)||(t[n].rangeslider={});var o=t[n].rangeslider,a=e[n],s=a.rangeslider={};l("visible")&&(l("bgcolor",e.plot_bgcolor),l("bordercolor"),l("borderwidth"),l("thickness"),l("autorange",!a.isValidRange(o.range)),l("range"),s._input=o)}function l(t,e){return r.coerce(o,s,i,t,e)}}},{"../../lib":151,"./attributes":106}],110:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../plotly"),o=t("../../plots/plots"),a=t("../../lib"),s=t("../drawing"),l=t("../color"),c=t("../../plots/cartesian"),u=t("../../plots/cartesian/axes"),d=t("../dragelement"),h=t("../../lib/setcursor"),f=t("./constants");function p(t,e,n,r){var i=t.selectAll("rect."+f.bgClassName).data([0]);i.enter().append("rect").classed(f.bgClassName,!0).attr({x:0,y:0,"shape-rendering":"crispEdges"});var o=r.borderwidth%2==0?r.borderwidth:r.borderwidth-1,a=-r._offsetShift,l=s.crispRound(e,r.borderwidth);i.attr({width:r._width+o,height:r._height+o,transform:"translate("+a+","+a+")",fill:r.bgcolor,stroke:r.bordercolor,"stroke-width":l})}function g(t,e,n,r){var i=e._fullLayout._topdefs.selectAll("#"+r._clipId).data([0]);i.enter().append("clipPath").attr("id",r._clipId).append("rect").attr({x:0,y:0}),i.select("rect").attr({width:r._width,height:r._height})}function m(t,e,n,i){var l,d=u.getSubplots(e,n),h=e.calcdata,p=t.selectAll("g."+f.rangePlotClassName).data(d,a.identity);p.enter().append("g").attr("class",function(t){return f.rangePlotClassName+" "+t}).call(s.setClipUrl,i._clipId),p.order(),p.exit().remove(),p.each(function(t,a){var s=r.select(this),d=0===a,f=u.getFromId(e,t,"y"),p=f._name,g={data:[],layout:{xaxis:{type:n.type,domain:[0,1],range:i.range.slice(),calendar:n.calendar},width:i._width,height:i._height,margin:{t:0,b:0,l:0,r:0}},_context:e._context};g.layout[p]={type:f.type,domain:[0,1],range:f.range.slice(),calendar:f.calendar},o.supplyDefaults(g);var m={id:t,plotgroup:s,xaxis:g._fullLayout.xaxis,yaxis:g._fullLayout[p]};d?l=m:(m.mainplot="xy",m.mainplotinfo=l),c.rangePlot(e,m,function(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r],o=i[0].trace;o.xaxis+o.yaxis===e&&n.push(i)}return n}(h,t))})}function v(t,e,n,r){var i=t.selectAll("rect."+f.maskMinClassName).data([0]);i.enter().append("rect").classed(f.maskMinClassName,!0).attr({x:0,y:0}).attr("shape-rendering","crispEdges"),i.attr("height",r._height).call(l.fill,f.maskColor);var o=t.selectAll("rect."+f.maskMaxClassName).data([0]);o.enter().append("rect").classed(f.maskMaxClassName,!0).attr("y",0).attr("shape-rendering","crispEdges"),o.attr("height",r._height).call(l.fill,f.maskColor)}function y(t,e,n,r){if(!e._context.staticPlot){var i=t.selectAll("rect."+f.slideBoxClassName).data([0]);i.enter().append("rect").classed(f.slideBoxClassName,!0).attr("y",0).attr("cursor",f.slideBoxCursor).attr("shape-rendering","crispEdges"),i.attr({height:r._height,fill:f.slideBoxFill})}}function _(t,e,n,r){var i=t.selectAll("g."+f.grabberMinClassName).data([0]);i.enter().append("g").classed(f.grabberMinClassName,!0);var o=t.selectAll("g."+f.grabberMaxClassName).data([0]);o.enter().append("g").classed(f.grabberMaxClassName,!0);var a={x:0,width:f.handleWidth,rx:f.handleRadius,fill:l.background,stroke:l.defaultLine,"stroke-width":f.handleStrokeWidth,"shape-rendering":"crispEdges"},s={y:Math.round(r._height/4),height:Math.round(r._height/2)},c=i.selectAll("rect."+f.handleMinClassName).data([0]);c.enter().append("rect").classed(f.handleMinClassName,!0).attr(a),c.attr(s);var u=o.selectAll("rect."+f.handleMaxClassName).data([0]);if(u.enter().append("rect").classed(f.handleMaxClassName,!0).attr(a),u.attr(s),!e._context.staticPlot){var d={width:f.grabAreaWidth,x:0,y:0,fill:f.grabAreaFill,cursor:f.grabAreaCursor},h=i.selectAll("rect."+f.grabAreaMinClassName).data([0]);h.enter().append("rect").classed(f.grabAreaMinClassName,!0).attr(d),h.attr("height",r._height);var p=o.selectAll("rect."+f.grabAreaMaxClassName).data([0]);p.enter().append("rect").classed(f.grabAreaMaxClassName,!0).attr(d),p.attr("height",r._height)}}e.exports=function(t){var e=t._fullLayout,n=function(t){var e=u.list({_fullLayout:t},"x",!0),n=f.name,r=[];if(t._has("gl2d"))return r;for(var i=0;i<e.length;i++){var o=e[i];o[n]&&o[n].visible&&r.push(o)}return r}(e);var s=e._infolayer.selectAll("g."+f.containerClassName).data(n,function(t){return t._name});s.enter().append("g").classed(f.containerClassName,!0).attr("pointer-events","all"),s.exit().each(function(t){var n=r.select(this),i=t[f.name];n.remove(),e._topdefs.select("#"+i._clipId).remove()}),s.exit().size()&&function(t){for(var e=t._fullLayout._pushmargin||{},n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];-1!==i.indexOf(f.name)&&o.autoMargin(t,i)}}(t),0!==n.length&&s.each(function(n){var s=r.select(this),l=n[f.name],c=e[u.id2name(n.anchor)];if(l.range){var x=l.range,b=n.range;x[0]=n.l2r(Math.min(n.r2l(x[0]),n.r2l(b[0]))),x[1]=n.l2r(Math.max(n.r2l(x[1]),n.r2l(b[1]))),l._input.range=x.slice()}n.cleanRange("rangeslider.range");var w=e.margin,k=e._size,T=n.domain,M=c.domain,A=(n._boundingBox||{}).height||0;l._id=f.name+n._id,l._clipId=l._id+"-"+e._uid,l._width=k.w*(T[1]-T[0]),l._height=(e.height-w.b-w.t)*l.thickness,l._offsetShift=Math.floor(l.borderwidth/2);var L=Math.round(w.l+k.w*T[0]),S=Math.round(w.t+k.h*(1-M[0])+A+l._offsetShift+f.extraPad);s.attr("transform","translate("+L+","+S+")");var C,P,z,D,E,O,I,j=n.r2l(l.range[0]),N=n.r2l(l.range[1]),R=N-j;l.p2d=function(t){return t/l._width*R+j},l.d2p=function(t){return(t-j)/R*l._width},l._rl=[j,N],s.call(p,t,n,l).call(g,t,n,l).call(m,t,n,l).call(v,t,n,l).call(y,t,n,l).call(_,t,n,l),P=t,z=n,D=l,E=(C=s).select("rect."+f.slideBoxClassName).node(),O=C.select("rect."+f.grabAreaMinClassName).node(),I=C.select("rect."+f.grabAreaMaxClassName).node(),C.on("mousedown",function(){var t=r.event,e=t.target,n=t.clientX,o=n-C.node().getBoundingClientRect().left,s=D.d2p(z._rl[0]),l=D.d2p(z._rl[1]),c=d.coverSlip();function u(t){var u,d,f,p=+t.clientX-n;switch(e){case E:f="ew-resize",u=s+p,d=l+p;break;case O:f="col-resize",u=s+p,d=l;break;case I:f="col-resize",u=s,d=l+p;break;default:f="ew-resize",u=o,d=o+p}if(d<u){var g=d;d=u,u=g}D._pixelMin=u,D._pixelMax=d,h(r.select(c),f),function(t,e,n,r){function o(t){return n.l2r(a.constrain(t,r._rl[0],r._rl[1]))}var s=o(r.p2d(r._pixelMin)),l=o(r.p2d(r._pixelMax));window.requestAnimationFrame(function(){i.relayout(e,n._name+".range",[s,l])})}(0,P,z,D)}c.addEventListener("mousemove",u),c.addEventListener("mouseup",function t(){c.removeEventListener("mousemove",u),c.removeEventListener("mouseup",t),a.removeElement(c)})}),function(t,e,n,r){var i=f.handleWidth/2;function o(t){return a.constrain(t,0,r._width)}function s(t){return a.constrain(t,-i,r._width+i)}var l=o(r.d2p(n._rl[0])),c=o(r.d2p(n._rl[1]));t.select("rect."+f.slideBoxClassName).attr("x",l).attr("width",c-l),t.select("rect."+f.maskMinClassName).attr("width",l),t.select("rect."+f.maskMaxClassName).attr("x",c).attr("width",r._width-c);var u=Math.round(s(l-i))-.5,d=Math.round(s(c-i))+.5;t.select("g."+f.grabberMinClassName).attr("transform","translate("+u+",0.5)"),t.select("g."+f.grabberMaxClassName).attr("transform","translate("+d+",0.5)")}(s,0,n,l),o.autoMargin(t,l._id,{x:T[0],y:M[0],l:0,r:0,t:0,b:l._height+w.b+A,pad:f.extraPad+2*l._offsetShift})})}},{"../../lib":151,"../../lib/setcursor":170,"../../plotly":189,"../../plots/cartesian":205,"../../plots/cartesian/axes":194,"../../plots/plots":226,"../color":34,"../dragelement":56,"../drawing":59,"./constants":108,d3:1}],111:[function(t,e,n){"use strict";e.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),calcAutorange:t("./calc_autorange"),draw:t("./draw")}},{"./attributes":106,"./calc_autorange":107,"./defaults":109,"./draw":110}],112:[function(t,e,n){"use strict";var r=t("../annotations/attributes"),i=t("../../traces/scatter/attributes").line,o=t("../drawing/attributes").dash,a=t("../../lib/extend").extendFlat;e.exports={_isLinkedToArray:"shape",visible:{valType:"boolean",role:"info",dflt:!0,editType:"calcIfAutorange+arraydraw",description:["Determines whether or not this shape is visible."].join(" ")},type:{valType:"enumerated",values:["circle","rect","path","line"],role:"info",editType:"calcIfAutorange+arraydraw",description:["Specifies the shape type to be drawn.","If *line*, a line is drawn from (`x0`,`y0`) to (`x1`,`y1`)","If *circle*, a circle is drawn from","((`x0`+`x1`)/2, (`y0`+`y1`)/2))","with radius","(|(`x0`+`x1`)/2 - `x0`|, |(`y0`+`y1`)/2 -`y0`)|)","If *rect*, a rectangle is drawn linking","(`x0`,`y0`), (`x1`,`y0`), (`x1`,`y1`), (`x0`,`y1`), (`x0`,`y0`)","If *path*, draw a custom SVG path using `path`."].join(" ")},layer:{valType:"enumerated",values:["below","above"],dflt:"above",role:"info",editType:"arraydraw",description:"Specifies whether shapes are drawn below or above traces."},xref:a({},r.xref,{description:["Sets the shape's x coordinate axis.","If set to an x axis id (e.g. *x* or *x2*), the `x` position","refers to an x coordinate","If set to *paper*, the `x` position refers to the distance from","the left side of the plotting area in normalized coordinates","where *0* (*1*) corresponds to the left (right) side.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, then you must convert","the date to unix time in milliseconds."].join(" ")}),x0:{valType:"any",role:"info",editType:"calcIfAutorange+arraydraw",description:["Sets the shape's starting x position.","See `type` for more info."].join(" ")},x1:{valType:"any",role:"info",editType:"calcIfAutorange+arraydraw",description:["Sets the shape's end x position.","See `type` for more info."].join(" ")},yref:a({},r.yref,{description:["Sets the annotation's y coordinate axis.","If set to an y axis id (e.g. *y* or *y2*), the `y` position","refers to an y coordinate","If set to *paper*, the `y` position refers to the distance from","the bottom of the plotting area in normalized coordinates","where *0* (*1*) corresponds to the bottom (top)."].join(" ")}),y0:{valType:"any",role:"info",editType:"calcIfAutorange+arraydraw",description:["Sets the shape's starting y position.","See `type` for more info."].join(" ")},y1:{valType:"any",role:"info",editType:"calcIfAutorange+arraydraw",description:["Sets the shape's end y position.","See `type` for more info."].join(" ")},path:{valType:"string",role:"info",editType:"calcIfAutorange+arraydraw",description:["For `type` *path* - a valid SVG path but with the pixel values","replaced by data values. There are a few restrictions / quirks","only absolute instructions, not relative. So the allowed segments","are: M, L, H, V, Q, C, T, S, and Z","arcs (A) are not allowed because radius rx and ry are relative.","In the future we could consider supporting relative commands,","but we would have to decide on how to handle date and log axes.","Note that even as is, Q and C Bezier paths that are smooth on","linear axes may not be smooth on log, and vice versa.",'no chained "polybezier" commands - specify the segment type for',"each one.","On category axes, values are numbers scaled to the serial numbers","of categories because using the categories themselves there would","be no way to describe fractional positions","On data axes: because space and T are both normal components of path","strings, we can't use either to separate date from time parts.","Therefore we'll use underscore for this purpose:","2015-02-21_13:45:56.789"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,role:"info",editType:"arraydraw",description:"Sets the opacity of the shape."},line:{color:a({},i.color,{editType:"arraydraw"}),width:a({},i.width,{editType:"calcIfAutorange+arraydraw"}),dash:a({},o,{editType:"arraydraw"}),role:"info",editType:"calcIfAutorange+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",role:"info",editType:"arraydraw",description:["Sets the color filling the shape's interior."].join(" ")},editType:"arraydraw"}},{"../../lib/extend":145,"../../traces/scatter/attributes":259,"../annotations/attributes":19,"../drawing/attributes":58}],113:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/cartesian/axes"),o=t("./constants"),a=t("./helpers");function s(t,e,n,r,i){var s="category"===t.type?t.r2c:t.d2c;if(void 0!==e)return[s(e),s(n)];if(r){var l,c,u,d,h=1/0,f=-1/0,p=r.match(o.segmentRE);for("date"===t.type&&(s=a.decodeDate(s)),l=0;l<p.length;l++)void 0!==(c=i[p[l].charAt(0)].drawn)&&(!(u=p[l].substr(1).match(o.paramRE))||u.length<c||((d=s(u[c]))<h&&(h=d),d>f&&(f=d)));return f>=h?[h,f]:void 0}}e.exports=function(t){var e=t._fullLayout,n=r.filterVisible(e.shapes);if(n.length&&t._fullData.length)for(var a=0;a<n.length;a++){var l,c,u=n[a],d=u.line.width/2;"paper"!==u.xref&&(c=s(l=i.getFromId(t,u.xref),u.x0,u.x1,u.path,o.paramIsX))&&i.expand(l,c,{ppad:d}),"paper"!==u.yref&&(c=s(l=i.getFromId(t,u.yref),u.y0,u.y1,u.path,o.paramIsY))&&i.expand(l,c,{ppad:d})}}},{"../../lib":151,"../../plots/cartesian/axes":194,"./constants":114,"./helpers":117}],114:[function(t,e,n){"use strict";e.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],115:[function(t,e,n){"use strict";var r=t("../../plots/array_container_defaults"),i=t("./shape_defaults");e.exports=function(t,e){r(t,e,{name:"shapes",handleItemDefaults:i})}},{"../../plots/array_container_defaults":191,"./shape_defaults":119}],116:[function(t,e,n){"use strict";var r=t("../../plotly"),i=t("../../lib"),o=t("../../plots/cartesian/axes"),a=t("../color"),s=t("../drawing"),l=t("../dragelement"),c=t("../../lib/setcursor"),u=t("./constants"),d=t("./helpers");function h(t,e){t._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+e+'"]').remove();var n=(t.layout.shapes||[])[e],i=t._fullLayout.shapes[e];if(n&&!1!==i.visible)if("below"!==i.layer)h(t._fullLayout._shapeUpperLayer);else if("paper"===i.xref||"paper"===i.yref)h(t._fullLayout._shapeLowerLayer);else{var u=t._fullLayout._plots[i.xref+i.yref];if(u)h((u.mainplotinfo||u).shapelayer);else h(t._fullLayout._shapeLowerLayer)}function h(n){var u={"data-index":e,"fill-rule":"evenodd",d:f(t,i)},h=i.line.width?i.line.color:"rgba(0,0,0,0)",g=n.append("path").attr(u).style("opacity",i.opacity).call(a.stroke,h).call(a.fill,i.fillcolor).call(s.dashLine,i.line.dash,i.line.width),m=(i.xref+i.yref).replace(/paper/g,"");g.call(s.setClipUrl,m?"clip"+t._fullLayout._uid+m:null),t._context.edits.shapePosition&&function(t,e,n,i){var a,s,u,h,g,m,v,y,_,x,b,w,k,T,M,A,L,S,C,P,z,D,E,O,I,j,N,R,B,F,H=10,q=10,Z={element:e.node(),gd:t,prepFn:function(e){O=o.getFromId(t,n.xref),I=o.getFromId(t,n.yref),j=d.getDataToPixel(t,O),N=d.getDataToPixel(t,I,!0),R=d.getPixelToData(t,O),B=d.getPixelToData(t,I,!0);var r="shapes["+i+"]";"path"===n.type?(D=n.path,E=r+".path"):(s=j(n.x0),u=N(n.y0),h=j(n.x1),g=N(n.y1),m=r+".x0",v=r+".y0",y=r+".x1",_=r+".y1");s<h?(w=s,A=r+".x0",P="x0",k=h,L=r+".x1",z="x1"):(w=h,A=r+".x1",P="x1",k=s,L=r+".x0",z="x0");u<g?(x=u,T=r+".y0",S="y0",b=g,M=r+".y1",C="y1"):(x=g,T=r+".y1",S="y1",b=u,M=r+".y0",C="y0");a={},U(e),Z.moveFn="move"===F?W:G},doneFn:function(){c(e),r.relayout(t,a)}},V=Z.element.getBoundingClientRect();function U(t){var n=V.right-V.left,r=V.bottom-V.top,i=t.clientX-V.left,o=t.clientY-V.top,a=n>H&&r>q&&!t.shiftKey?l.getCursor(i/n,1-o/r):"move";c(e,a),F=a.split("-")[0]}function W(r,i){if("path"===n.type){var o=function(t){return R(j(t)+r)};O&&"date"===O.type&&(o=d.encodeDate(o));var l=function(t){return B(N(t)+i)};I&&"date"===I.type&&(l=d.encodeDate(l)),n.path=p(D,o,l),a[E]=n.path}else a[m]=n.x0=R(s+r),a[v]=n.y0=B(u+i),a[y]=n.x1=R(h+r),a[_]=n.y1=B(g+i);e.attr("d",f(t,n))}function G(r,i){if("path"===n.type){var o=function(t){return R(j(t)+r)};O&&"date"===O.type&&(o=d.encodeDate(o));var s=function(t){return B(N(t)+i)};I&&"date"===I.type&&(s=d.encodeDate(s)),n.path=p(D,o,s),a[E]=n.path}else{var l=~F.indexOf("n")?x+i:x,c=~F.indexOf("s")?b+i:b,u=~F.indexOf("w")?w+r:w,h=~F.indexOf("e")?k+r:k;c-l>q&&(a[T]=n[S]=B(l),a[M]=n[C]=B(c)),h-u>H&&(a[A]=n[P]=R(u),a[L]=n[z]=R(h))}e.attr("d",f(t,n))}l.init(Z),e.node().onmousemove=U}(t,g,i,e)}}function f(t,e){var n,r,a,s,l,c,h,f=e.type,p=o.getFromId(t,e.xref),g=o.getFromId(t,e.yref),m=t._fullLayout._size;if(p?(n=d.shapePositionToRange(p),r=function(t){return p._offset+p.r2p(n(t,!0))}):r=function(t){return m.l+m.w*t},g?(a=d.shapePositionToRange(g),s=function(t){return g._offset+g.r2p(a(t,!0))}):s=function(t){return m.t+m.h*(1-t)},"path"===f)return p&&"date"===p.type&&(r=d.decodeDate(r)),g&&"date"===g.type&&(s=d.decodeDate(s)),l=e.path,c=r,h=s,l.replace(u.segmentRE,function(t){var e=0,n=t.charAt(0),r=u.paramIsX[n],o=u.paramIsY[n],a=u.numParams[n],s=t.substr(1).replace(u.paramRE,function(t){return r[e]?t=c(t):o[e]&&(t=h(t)),++e>a&&(t="X"),t});return e>a&&(s=s.replace(/[\s,]*X.*/,""),i.log("Ignoring extra params in segment "+t)),n+s});var v=r(e.x0),y=r(e.x1),_=s(e.y0),x=s(e.y1);if("line"===f)return"M"+v+","+_+"L"+y+","+x;if("rect"===f)return"M"+v+","+_+"H"+y+"V"+x+"H"+v+"Z";var b=(v+y)/2,w=(_+x)/2,k=Math.abs(b-v),T=Math.abs(w-_),M="A"+k+","+T,A=b+k+","+w;return"M"+A+M+" 0 1,1 "+(b+","+(w-T))+M+" 0 0,1 "+A+"Z"}function p(t,e,n){return t.replace(u.segmentRE,function(t){var r=0,i=t.charAt(0),o=u.paramIsX[i],a=u.paramIsY[i],s=u.numParams[i];return i+t.substr(1).replace(u.paramRE,function(t){return r>=s?t:(o[r]?t=e(t):a[r]&&(t=n(t)),r++,t)})})}e.exports={draw:function(t){var e=t._fullLayout;e._shapeUpperLayer.selectAll("path").remove(),e._shapeLowerLayer.selectAll("path").remove(),e._shapeSubplotLayers.selectAll("path").remove();for(var n=0;n<e.shapes.length;n++)e.shapes[n].visible&&h(t,n)},drawOne:h}},{"../../lib":151,"../../lib/setcursor":170,"../../plotly":189,"../../plots/cartesian/axes":194,"../color":34,"../dragelement":56,"../drawing":59,"./constants":114,"./helpers":117}],117:[function(t,e,n){"use strict";n.rangeToShapePosition=function(t){return"log"===t.type?t.r2d:function(t){return t}},n.shapePositionToRange=function(t){return"log"===t.type?t.d2r:function(t){return t}},n.decodeDate=function(t){return function(e){return e.replace&&(e=e.replace("_"," ")),t(e)}},n.encodeDate=function(t){return function(e){return t(e).replace(" ","_")}},n.getDataToPixel=function(t,e,r){var i,o=t._fullLayout._size;if(e){var a=n.shapePositionToRange(e);i=function(t){return e._offset+e.r2p(a(t,!0))},"date"===e.type&&(i=n.decodeDate(i))}else i=r?function(t){return o.t+o.h*(1-t)}:function(t){return o.l+o.w*t};return i},n.getPixelToData=function(t,e,r){var i,o=t._fullLayout._size;if(e){var a=n.rangeToShapePosition(e);i=function(t){return a(e.p2r(t-e._offset))}}else i=r?function(t){return 1-(t-o.t)/o.h}:function(t){return(t-o.l)/o.w};return i}},{}],118:[function(t,e,n){"use strict";var r=t("./draw");e.exports={moduleType:"component",name:"shapes",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("shapes"),calcAutorange:t("./calc_autorange"),draw:r.draw,drawOne:r.drawOne}},{"../../plots/cartesian/include_components":204,"./attributes":112,"./calc_autorange":113,"./defaults":115,"./draw":116}],119:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/cartesian/axes"),o=t("./attributes"),a=t("./helpers");e.exports=function(t,e,n,s,l){function c(n,i){return r.coerce(t,e,o,n,i)}if(s=s||{},!c("visible",!(l=l||{}).itemIsNotPlainObject))return e;c("layer"),c("opacity"),c("fillcolor"),c("line.color"),c("line.width"),c("line.dash");for(var u=c("type",t.path?"path":"rect"),d=["x","y"],h=0;h<2;h++){var f=d[h],p={_fullLayout:n},g=i.coerceRef(t,e,p,f,"","paper");if("path"!==u){var m,v,y;"paper"!==g?(m=i.getFromId(p,g),y=a.rangeToShapePosition(m),v=a.shapePositionToRange(m)):v=y=r.identity;var _=f+"0",x=f+"1",b=t[_],w=t[x];t[_]=v(t[_],!0),t[x]=v(t[x],!0),i.coercePosition(e,p,c,g,_,.25),i.coercePosition(e,p,c,g,x,.75),e[_]=y(e[_]),e[x]=y(e[x]),t[_]=b,t[x]=w}}return"path"===u?c("path"):r.noneOrAll(t,e,["x0","x1","y0","y1"]),e}},{"../../lib":151,"../../plots/cartesian/axes":194,"./attributes":112,"./helpers":117}],120:[function(t,e,n){"use strict";var r=t("../../plots/font_attributes"),i=t("../../plots/pad_attributes"),o=t("../../lib/extend").extendDeepAll,a=t("../../plot_api/edit_types").overrideAll,s=t("../../plots/animation_attributes"),l=t("./constants"),c={_isLinkedToArray:"step",method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",role:"info",description:["Sets the Plotly method to be called when the slider value is changed.","If the `skip` method is used, the API slider will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","slider events manually via JavaScript."].join(" ")},args:{valType:"info_array",role:"info",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on slide."].join(" ")},label:{valType:"string",role:"info",description:"Sets the text label to appear on the slider"},value:{valType:"string",role:"info",description:["Sets the value of the slider step, used to refer to the step programatically.","Defaults to the slider label if not provided."].join(" ")},execute:{valType:"boolean",role:"info",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_sliderchange` method and executing the API command manually without losing","the benefit of the slider automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}};e.exports=a({_isLinkedToArray:"slider",visible:{valType:"boolean",role:"info",dflt:!0,description:["Determines whether or not the slider is visible."].join(" ")},active:{valType:"number",role:"info",min:0,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},steps:c,lenmode:{valType:"enumerated",values:["fraction","pixels"],role:"info",dflt:"fraction",description:["Determines whether this slider length","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,role:"style",description:["Sets the length of the slider","This measure excludes the padding of both ends.","That is, the slider's length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",min:-2,max:3,dflt:0,role:"style",description:"Sets the x position (in normalized coordinates) of the slider."},pad:o({},i,{description:"Set the padding of the slider component along each side."},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",role:"info",description:["Sets the slider's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:0,role:"style",description:"Sets the y position (in normalized coordinates) of the slider."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",role:"info",description:["Sets the slider's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},transition:{duration:{valType:"number",role:"info",min:0,dflt:150,description:"Sets the duration of the slider transition"},easing:{valType:"enumerated",values:s.transition.easing.values,role:"info",dflt:"cubic-in-out",description:"Sets the easing function of the slider transition"}},currentvalue:{visible:{valType:"boolean",role:"info",dflt:!0,description:["Shows the currently-selected value above the slider."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",role:"info",description:["The alignment of the value readout relative to the length of the slider."].join(" ")},offset:{valType:"number",dflt:10,role:"info",description:["The amount of space, in pixels, between the current value label","and the slider."].join(" ")},prefix:{valType:"string",role:"info",description:"When currentvalue.visible is true, this sets the prefix of the label."},suffix:{valType:"string",role:"info",description:"When currentvalue.visible is true, this sets the suffix of the label."},font:r({description:"Sets the font of the current value label text."})},font:r({description:"Sets the font of the slider step labels."}),activebgcolor:{valType:"color",role:"style",dflt:l.gripBgActiveColor,description:["Sets the background color of the slider grip","while dragging."].join(" ")},bgcolor:{valType:"color",role:"style",dflt:l.railBgColor,description:"Sets the background color of the slider."},bordercolor:{valType:"color",dflt:l.railBorderColor,role:"style",description:"Sets the color of the border enclosing the slider."},borderwidth:{valType:"number",min:0,dflt:l.railBorderWidth,role:"style",description:"Sets the width (in px) of the border enclosing the slider."},ticklen:{valType:"number",min:0,dflt:l.tickLength,role:"style",description:"Sets the length in pixels of step tick marks"},tickcolor:{valType:"color",dflt:l.tickColor,role:"style",description:"Sets the color of the border enclosing the slider."},tickwidth:{valType:"number",min:0,dflt:1,role:"style",description:"Sets the tick width (in px)."},minorticklen:{valType:"number",min:0,dflt:l.minorTickLength,role:"style",description:"Sets the length in pixels of minor step tick marks"}},"arraydraw","from-root")},{"../../lib/extend":145,"../../plot_api/edit_types":178,"../../plots/animation_attributes":190,"../../plots/font_attributes":220,"../../plots/pad_attributes":225,"./constants":121}],121:[function(t,e,n){"use strict";e.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],122:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/array_container_defaults"),o=t("./attributes"),a=t("./constants").name,s=o.steps;function l(t,e,n){function i(n,i){return r.coerce(t,e,o,n,i)}i("visible",function(t,e){var n,i,o=t.steps||[],a=e.steps=[];function l(t,e){return r.coerce(n,i,s,t,e)}for(var c=0;c<o.length;c++)n=o[c],i={},l("method"),r.isPlainObject(n)&&("skip"===i.method||Array.isArray(n.args))&&(l("args"),l("label","step-"+c),l("value",i.label),l("execute"),a.push(i));return a}(t,e).length>0)&&(i("active"),i("x"),i("y"),r.noneOrAll(t,e,["x","y"]),i("xanchor"),i("yanchor"),i("len"),i("lenmode"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),r.coerceFont(i,"font",n.font),i("currentvalue.visible")&&(i("currentvalue.xanchor"),i("currentvalue.prefix"),i("currentvalue.suffix"),i("currentvalue.offset"),r.coerceFont(i,"currentvalue.font",e.font)),i("transition.duration"),i("transition.easing"),i("bgcolor"),i("activebgcolor"),i("bordercolor"),i("borderwidth"),i("ticklen"),i("tickwidth"),i("tickcolor"),i("minorticklen"))}e.exports=function(t,e){i(t,e,{name:a,handleItemDefaults:l})}},{"../../lib":151,"../../plots/array_container_defaults":191,"./attributes":120,"./constants":121}],123:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../plots/plots"),o=t("../color"),a=t("../drawing"),s=t("../../lib/svg_text_utils"),l=t("../legend/anchor_utils"),c=t("./constants"),u=t("../../constants/alignment"),d=u.LINE_SPACING,h=u.FROM_TL,f=u.FROM_BR;function p(t){return t._index}function g(t,e){var n=a.tester.selectAll("g."+c.labelGroupClass).data(e.steps);n.enter().append("g").classed(c.labelGroupClass,!0);var o=0,u=0;n.each(function(t){var n=y(r.select(this),{step:t},e).node();if(n){var i=a.bBox(n);u=Math.max(u,i.height),o=Math.max(o,i.width)}}),n.remove();var d=e._dims={};d.inputAreaWidth=Math.max(c.railWidth,c.gripHeight);var p=t._fullLayout._size;d.lx=p.l+p.w*e.x,d.ly=p.t+p.h*(1-e.y),"fraction"===e.lenmode?d.outerLength=Math.round(p.w*e.len):d.outerLength=e.len,d.inputAreaStart=0,d.inputAreaLength=Math.round(d.outerLength-e.pad.l-e.pad.r);var g=(d.inputAreaLength-2*c.stepInset)/(e.steps.length-1),v=o+c.labelPadding;if(d.labelStride=Math.max(1,Math.ceil(v/g)),d.labelHeight=u,d.currentValueMaxWidth=0,d.currentValueHeight=0,d.currentValueTotalHeight=0,d.currentValueMaxLines=1,e.currentvalue.visible){var _=a.tester.append("g");n.each(function(t){var n=m(_,e,t.label),r=n.node()&&a.bBox(n.node())||{width:0,height:0},i=s.lineCount(n);d.currentValueMaxWidth=Math.max(d.currentValueMaxWidth,Math.ceil(r.width)),d.currentValueHeight=Math.max(d.currentValueHeight,Math.ceil(r.height)),d.currentValueMaxLines=Math.max(d.currentValueMaxLines,i)}),d.currentValueTotalHeight=d.currentValueHeight+e.currentvalue.offset,_.remove()}d.height=d.currentValueTotalHeight+c.tickOffset+e.ticklen+c.labelOffset+d.labelHeight+e.pad.t+e.pad.b;var x="left";l.isRightAnchor(e)&&(d.lx-=d.outerLength,x="right"),l.isCenterAnchor(e)&&(d.lx-=d.outerLength/2,x="center");var b="top";l.isBottomAnchor(e)&&(d.ly-=d.height,b="bottom"),l.isMiddleAnchor(e)&&(d.ly-=d.height/2,b="middle"),d.outerLength=Math.ceil(d.outerLength),d.height=Math.ceil(d.height),d.lx=Math.round(d.lx),d.ly=Math.round(d.ly),i.autoMargin(t,c.autoMarginIdRoot+e._index,{x:e.x,y:e.y,l:d.outerLength*h[x],r:d.outerLength*f[x],b:d.height*f[b],t:d.height*h[b]})}function m(t,e,n){if(e.currentvalue.visible){var r,i,o=t.selectAll("text").data([0]),l=e._dims;switch(e.currentvalue.xanchor){case"right":r=l.inputAreaLength-c.currentValueInset-l.currentValueMaxWidth,i="left";break;case"center":r=.5*l.inputAreaLength,i="middle";break;default:r=c.currentValueInset,i="left"}o.enter().append("text").classed(c.labelClass,!0).classed("user-select-none",!0).attr({"text-anchor":i,"data-notex":1});var u=e.currentvalue.prefix?e.currentvalue.prefix:"";if("string"==typeof n)u+=n;else u+=e.steps[e.active].label;e.currentvalue.suffix&&(u+=e.currentvalue.suffix),o.call(a.font,e.currentvalue.font).text(u).call(s.convertToTspans,e._gd);var h=s.lineCount(o),f=(l.currentValueMaxLines+1-h)*e.currentvalue.font.size*d;return s.positionText(o,r,f),o}}function v(t,e,n){var r=t.selectAll("rect."+c.gripRectClass).data([0]);r.enter().append("rect").classed(c.gripRectClass,!0).call(w,e,t,n).style("pointer-events","all"),r.attr({width:c.gripWidth,height:c.gripHeight,rx:c.gripRadius,ry:c.gripRadius}).call(o.stroke,n.bordercolor).call(o.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px")}function y(t,e,n){var r=t.selectAll("text").data([0]);return r.enter().append("text").classed(c.labelClass,!0).classed("user-select-none",!0).attr({"text-anchor":"middle","data-notex":1}),r.call(a.font,n.font).text(e.step.label).call(s.convertToTspans,n._gd),r}function _(t,e){var n=t.selectAll("g."+c.labelsClass).data([0]),i=e._dims;n.enter().append("g").classed(c.labelsClass,!0);var o=n.selectAll("g."+c.labelGroupClass).data(i.labelSteps);o.enter().append("g").classed(c.labelGroupClass,!0),o.exit().remove(),o.each(function(t){var n=r.select(this);n.call(y,t,e),a.setTranslate(n,M(e,t.fraction),c.tickOffset+e.ticklen+e.font.size*d+c.labelOffset+i.currentValueTotalHeight)})}function x(t,e,n,r,i){var o=Math.round(r*(n.steps.length-1));o!==n.active&&b(t,e,n,o,!0,i)}function b(t,e,n,r,o,a){var s=n.active;n._input.active=n.active=r;var l=n.steps[n.active];e.call(T,n,n.active/(n.steps.length-1),a),e.call(m,n),t.emit("plotly_sliderchange",{slider:n,step:n.steps[n.active],interaction:o,previousActive:s}),l&&l.method&&o&&(e._nextMethod?(e._nextMethod.step=l,e._nextMethod.doCallback=o,e._nextMethod.doTransition=a):(e._nextMethod={step:l,doCallback:o,doTransition:a},e._nextMethodRaf=window.requestAnimationFrame(function(){var n=e._nextMethod.step;n.method&&(n.execute&&i.executeAPICommand(t,n.method,n.args),e._nextMethod=null,e._nextMethodRaf=null)})))}function w(t,e,n){var i=n.node(),a=r.select(e);function s(){return n.data()[0]}t.on("mousedown",function(){var t=s();e.emit("plotly_sliderstart",{slider:t});var l=n.select("."+c.gripRectClass);r.event.stopPropagation(),r.event.preventDefault(),l.call(o.fill,t.activebgcolor);var u=A(t,r.mouse(i)[0]);x(e,n,t,u,!0),t._dragging=!0,a.on("mousemove",function(){var t=s(),o=A(t,r.mouse(i)[0]);x(e,n,t,o,!1)}),a.on("mouseup",function(){var t=s();t._dragging=!1,l.call(o.fill,t.bgcolor),a.on("mouseup",null),a.on("mousemove",null),e.emit("plotly_sliderend",{slider:t,step:t.steps[t.active]})})})}function k(t,e){var n=t.selectAll("rect."+c.tickRectClass).data(e.steps),i=e._dims;n.enter().append("rect").classed(c.tickRectClass,!0),n.exit().remove(),n.attr({width:e.tickwidth+"px","shape-rendering":"crispEdges"}),n.each(function(t,n){var s=n%i.labelStride==0,l=r.select(this);l.attr({height:s?e.ticklen:e.minorticklen}).call(o.fill,e.tickcolor),a.setTranslate(l,M(e,n/(e.steps.length-1))-.5*e.tickwidth,(s?c.tickOffset:c.minorTickOffset)+i.currentValueTotalHeight)})}function T(t,e,n,r){var i=t.select("rect."+c.gripRectClass),o=M(e,n);if(!e._invokingCommand){var a=i;r&&e.transition.duration>0&&(a=a.transition().duration(e.transition.duration).ease(e.transition.easing)),a.attr("transform","translate("+(o-.5*c.gripWidth)+","+e._dims.currentValueTotalHeight+")")}}function M(t,e){var n=t._dims;return n.inputAreaStart+c.stepInset+(n.inputAreaLength-2*c.stepInset)*Math.min(1,Math.max(0,e))}function A(t,e){var n=t._dims;return Math.min(1,Math.max(0,(e-c.stepInset-n.inputAreaStart)/(n.inputAreaLength-2*c.stepInset-2*n.inputAreaStart)))}function L(t,e,n){var r=t.selectAll("rect."+c.railTouchRectClass).data([0]),i=n._dims;r.enter().append("rect").classed(c.railTouchRectClass,!0).call(w,e,t,n).style("pointer-events","all"),r.attr({width:i.inputAreaLength,height:Math.max(i.inputAreaWidth,c.tickOffset+n.ticklen+i.labelHeight)}).call(o.fill,n.bgcolor).attr("opacity",0),a.setTranslate(r,0,i.currentValueTotalHeight)}function S(t,e){var n=t.selectAll("rect."+c.railRectClass).data([0]),r=e._dims;n.enter().append("rect").classed(c.railRectClass,!0);var i=r.inputAreaLength-2*c.railInset;n.attr({width:i,height:c.railWidth,rx:c.railRadius,ry:c.railRadius,"shape-rendering":"crispEdges"}).call(o.stroke,e.bordercolor).call(o.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px"),a.setTranslate(n,c.railInset,.5*(r.inputAreaWidth-c.railWidth)+r.currentValueTotalHeight)}e.exports=function(t){var e=t._fullLayout,n=function(t,e){for(var n=t[c.name],r=[],i=0;i<n.length;i++){var o=n[i];o.visible&&o.steps.length&&(o._gd=e,r.push(o))}return r}(e,t),o=e._infolayer.selectAll("g."+c.containerClassName).data(n.length>0?[0]:[]);if(o.enter().append("g").classed(c.containerClassName,!0).style("cursor","ew-resize"),o.exit().remove(),o.exit().size()&&function(t){for(var e=t._fullLayout._pushmargin||{},n=Object.keys(e),r=0;r<n.length;r++){var o=n[r];-1!==o.indexOf(c.autoMarginIdRoot)&&i.autoMargin(t,o)}}(t),0!==n.length){var s=o.selectAll("g."+c.groupClassName).data(n,p);s.enter().append("g").classed(c.groupClassName,!0),s.exit().each(function(e){r.select(this).remove(),e._commandObserver.remove(),delete e._commandObserver,i.autoMargin(t,c.autoMarginIdRoot+e._index)});for(var l=0;l<n.length;l++){var u=n[l];g(t,u)}s.each(function(e){if(!(e.steps.length<2)){var n=r.select(this);!function(t){var e=t._dims;e.labelSteps=[];for(var n=t.steps.length,r=0;r<n;r+=e.labelStride)e.labelSteps.push({fraction:r/(n-1),step:t.steps[r]})}(e),i.manageCommandObserver(t,e,e.steps,function(e){var r=n.data()[0];r.active!==e.index&&(r._dragging||b(t,n,r,e.index,!1,!0))}),function(t,e,n){n.active>=n.steps.length&&(n.active=0);e.call(m,n).call(S,n).call(_,n).call(k,n).call(L,t,n).call(v,t,n);var r=n._dims;a.setTranslate(e,r.lx+n.pad.l,r.ly+n.pad.t),e.call(T,n,n.active/(n.steps.length-1),!1),e.call(m,n)}(t,r.select(this),e)}})}}},{"../../constants/alignment":132,"../../lib/svg_text_utils":172,"../../plots/plots":226,"../color":34,"../drawing":59,"../legend/anchor_utils":85,"./constants":121,d3:1}],124:[function(t,e,n){"use strict";var r=t("./constants");e.exports={moduleType:"component",name:r.name,layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":120,"./constants":121,"./defaults":122,"./draw":123}],125:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),o=t("../../plotly"),a=t("../../plots/plots"),s=t("../../lib"),l=t("../drawing"),c=t("../color"),u=t("../../lib/svg_text_utils"),d=t("../../constants/interactions"),h=e.exports={},f=/ [XY][0-9]* /;h.draw=function(t,e,n){var h,p=n.propContainer,g=n.propName,m=n.placeholder,v=n.traceIndex,y=n.avoid||{},_=n.attributes,x=n.transform,b=n.containerGroup,w=t._fullLayout,k=p.titlefont||{},T=k.family,M=k.size,A=k.color,L=1,S=!1,C=(p.title||"").trim();"title"===g?h="titleText":-1!==g.indexOf("axis")?h="axisTitleText":g.indexOf(!0)&&(h="colorbarTitleText");var P=t._context.edits[h];""===C?L=0:C.replace(f," % ")===m.replace(f," % ")&&(L=.2,S=!0,P||(C=""));var z=C||P;b||(b=w._infolayer.selectAll(".g-"+e).data([0])).enter().append("g").classed("g-"+e,!0);var D=b.selectAll("text").data(z?[0]:[]);if(D.enter().append("text"),D.text(C).attr("class",e),D.exit().remove(),!z)return b;function E(t){s.syncOrAsync([O,I],t)}function O(e){var n;return x?(n="",x.rotate&&(n+="rotate("+[x.rotate,_.x,_.y]+")"),x.offset&&(n+="translate(0, "+x.offset+")")):n=null,e.attr("transform",n),e.style({"font-family":T,"font-size":r.round(M,2)+"px",fill:c.rgb(A),opacity:L*c.opacity(A),"font-weight":a.fontWeight}).attr(_).call(u.convertToTspans,t),a.previousPromises(t)}function I(t){var e=r.select(t.node().parentNode);if(y&&y.selection&&y.side&&C){e.attr("transform",null);var n=0,o={left:"right",right:"left",top:"bottom",bottom:"top"}[y.side],a=-1!==["left","top"].indexOf(y.side)?-1:1,c=i(y.pad)?y.pad:2,u=l.bBox(e.node()),d={left:0,top:0,right:w.width,bottom:w.height},h=y.maxShift||(d[y.side]-u[y.side])*("left"===y.side||"top"===y.side?-1:1);if(h<0)n=h;else{var f=y.offsetLeft||0,p=y.offsetTop||0;u.left-=f,u.right-=f,u.top-=p,u.bottom-=p,y.selection.each(function(){var t=l.bBox(this);s.bBoxIntersect(u,t,c)&&(n=Math.max(n,a*(t[y.side]-u[o])+c))}),n=Math.min(h,n)}if(n>0||h<0){var g={left:[-n,0],right:[n,0],top:[0,-n],bottom:[0,n]}[y.side];e.attr("transform","translate("+g+")")}}}return D.call(E),P&&(C?D.on(".opacity",null):(L=0,S=!0,D.text(m).on("mouseover.opacity",function(){r.select(this).transition().duration(d.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){r.select(this).transition().duration(d.HIDE_PLACEHOLDER).style("opacity",0)})),D.call(u.makeEditable,{gd:t}).on("edit",function(e){void 0!==v?o.restyle(t,g,e,v):o.relayout(t,g,e)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(E)}).on("input",function(t){this.text(t||" ").call(u.positionText,_.x,_.y)})),D.classed("js-placeholder",S),b}},{"../../constants/interactions":133,"../../lib":151,"../../lib/svg_text_utils":172,"../../plotly":189,"../../plots/plots":226,"../color":34,"../drawing":59,d3:1,"fast-isnumeric":4}],126:[function(t,e,n){"use strict";var r=t("../../plots/font_attributes"),i=t("../color/attributes"),o=t("../../lib/extend").extendFlat,a=t("../../plot_api/edit_types").overrideAll,s=t("../../plots/pad_attributes"),l={_isLinkedToArray:"button",method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",role:"info",description:["Sets the Plotly method to be called on click.","If the `skip` method is used, the API updatemenu will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","updatemenu events manually via JavaScript."].join(" ")},args:{valType:"info_array",role:"info",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on click."].join(" ")},label:{valType:"string",role:"info",dflt:"",description:"Sets the text label to appear on the button."},execute:{valType:"boolean",role:"info",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_buttonclicked` method and executing the API command manually without losing","the benefit of the updatemenu automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}};e.exports=a({_isLinkedToArray:"updatemenu",_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean",role:"info",description:["Determines whether or not the update menu is visible."].join(" ")},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown",role:"info",description:["Determines whether the buttons are accessible via a dropdown menu","or whether the buttons are stacked horizontally or vertically"].join(" ")},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down",role:"info",description:["Determines the direction in which the buttons are laid out, whether","in a dropdown menu or a row/column of buttons. For `left` and `up`,","the buttons will still appear in left-to-right or top-to-bottom order","respectively."].join(" ")},active:{valType:"integer",role:"info",min:-1,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},showactive:{valType:"boolean",role:"info",dflt:!0,description:"Highlights active dropdown item or active button if true."},buttons:l,x:{valType:"number",min:-2,max:3,dflt:-.05,role:"style",description:"Sets the x position (in normalized coordinates) of the update menu."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right",role:"info",description:["Sets the update menu's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:1,role:"style",description:"Sets the y position (in normalized coordinates) of the update menu."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",role:"info",description:["Sets the update menu's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},pad:o({},s,{description:"Sets the padding around the buttons or dropdown menu."}),font:r({description:"Sets the font of the update menu button text."}),bgcolor:{valType:"color",role:"style",description:"Sets the background color of the update menu buttons."},bordercolor:{valType:"color",dflt:i.borderLine,role:"style",description:"Sets the color of the border enclosing the update menu."},borderwidth:{valType:"number",min:0,dflt:1,role:"style",editType:"arraydraw",description:"Sets the width (in px) of the border enclosing the update menu."}},"arraydraw","from-root")},{"../../lib/extend":145,"../../plot_api/edit_types":178,"../../plots/font_attributes":220,"../../plots/pad_attributes":225,"../color/attributes":33}],127:[function(t,e,n){"use strict";e.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}},{}],128:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/array_container_defaults"),o=t("./attributes"),a=t("./constants").name,s=o.buttons;function l(t,e,n){function i(n,i){return r.coerce(t,e,o,n,i)}i("visible",function(t,e){var n,i,o=t.buttons||[],a=e.buttons=[];function l(t,e){return r.coerce(n,i,s,t,e)}for(var c=0;c<o.length;c++)n=o[c],i={},l("method"),r.isPlainObject(n)&&("skip"===i.method||Array.isArray(n.args))&&(l("args"),l("label"),l("execute"),i._index=c,a.push(i));return a}(t,e).length>0)&&(i("active"),i("direction"),i("type"),i("showactive"),i("x"),i("y"),r.noneOrAll(t,e,["x","y"]),i("xanchor"),i("yanchor"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),r.coerceFont(i,"font",n.font),i("bgcolor",n.paper_bgcolor),i("bordercolor"),i("borderwidth"))}e.exports=function(t,e){i(t,e,{name:a,handleItemDefaults:l})}},{"../../lib":151,"../../plots/array_container_defaults":191,"./attributes":126,"./constants":127}],129:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../plots/plots"),o=t("../color"),a=t("../drawing"),s=t("../../lib/svg_text_utils"),l=t("../legend/anchor_utils"),c=t("../../constants/alignment").LINE_SPACING,u=t("./constants"),d=t("./scrollbox");function h(t){return t._index}function f(t,e){return+t.attr(u.menuIndexAttrName)===e._index}function p(t,e,n,r,i,o,a,s){e._input.active=e.active=a,"buttons"===e.type?m(t,r,null,null,e):"dropdown"===e.type&&(i.attr(u.menuIndexAttrName,"-1"),g(t,r,i,o,e),s||m(t,r,i,o,e))}function g(t,e,n,r,i){var o=e.selectAll("g."+u.headerClassName).data([0]),s=i._dims;o.enter().append("g").classed(u.headerClassName,!0).style("pointer-events","all");var l=i.active,c=i.buttons[l]||u.blankHeaderOpts,d={y:i.pad.t,yPad:0,x:i.pad.l,xPad:0,index:0},h={width:s.headerWidth,height:s.headerHeight};o.call(v,i,c,t).call(T,i,d,h);var p=e.selectAll("text."+u.headerArrowClassName).data([0]);p.enter().append("text").classed(u.headerArrowClassName,!0).classed("user-select-none",!0).attr("text-anchor","end").call(a.font,i.font).text(u.arrowSymbol[i.direction]),p.attr({x:s.headerWidth-u.arrowOffsetX+i.pad.l,y:s.headerHeight/2+u.textOffsetY+i.pad.t}),o.on("click",function(){n.call(M),n.attr(u.menuIndexAttrName,f(n,i)?-1:String(i._index)),m(t,e,n,r,i)}),o.on("mouseover",function(){o.call(b)}),o.on("mouseout",function(){o.call(w,i)}),a.setTranslate(e,s.lx,s.ly)}function m(t,e,n,o,a){n||(n=e).attr("pointer-events","all");var s=-1!=+n.attr(u.menuIndexAttrName)||"buttons"===a.type?a.buttons:[],l="dropdown"===a.type?u.dropdownButtonClassName:u.buttonClassName,c=n.selectAll("g."+l).data(s),d=c.enter().append("g").classed(l,!0),h=c.exit();"dropdown"===a.type?(d.attr("opacity","0").transition().attr("opacity","1"),h.transition().attr("opacity","0").remove()):h.remove();var f=0,g=0,m=a._dims,y=-1!==["up","down"].indexOf(a.direction);"dropdown"===a.type&&(y?g=m.headerHeight+u.gapButtonHeader:f=m.headerWidth+u.gapButtonHeader),"dropdown"===a.type&&"up"===a.direction&&(g=-u.gapButtonHeader+u.gapButton-m.openHeight),"dropdown"===a.type&&"left"===a.direction&&(f=-u.gapButtonHeader+u.gapButton-m.openWidth);var _={x:m.lx+f+a.pad.l,y:m.ly+g+a.pad.t,yPad:u.gapButton,xPad:u.gapButton,index:0},k={l:_.x+a.borderwidth,t:_.y+a.borderwidth};c.each(function(s,l){var u=r.select(this);u.call(v,a,s,t).call(T,a,_),u.on("click",function(){r.event.defaultPrevented||(p(t,a,0,e,n,o,l),s.execute&&i.executeAPICommand(t,s.method,s.args),t.emit("plotly_buttonclicked",{menu:a,button:s,active:a.active}))}),u.on("mouseover",function(){u.call(b)}),u.on("mouseout",function(){u.call(w,a),c.call(x,a)})}),c.call(x,a),y?(k.w=Math.max(m.openWidth,m.headerWidth),k.h=_.y-k.t):(k.w=_.x-k.l,k.h=Math.max(m.openHeight,m.headerHeight)),k.direction=a.direction,o&&(c.size()?function(t,e,n,r,i,o){var a,s,l,c=i.direction,d="up"===c||"down"===c,h=i._dims,f=i.active;if(d)for(s=0,l=0;l<f;l++)s+=h.heights[l]+u.gapButton;else for(a=0,l=0;l<f;l++)a+=h.widths[l]+u.gapButton;r.enable(o,a,s),r.hbar&&r.hbar.attr("opacity","0").transition().attr("opacity","1");r.vbar&&r.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,o,a,k):function(t){var e=!!t.hbar,n=!!t.vbar;e&&t.hbar.transition().attr("opacity","0").each("end",function(){e=!1,n||t.disable()});n&&t.vbar.transition().attr("opacity","0").each("end",function(){n=!1,e||t.disable()})}(o))}function v(t,e,n,r){t.call(y,e).call(_,e,n,r)}function y(t,e){var n=t.selectAll("rect").data([0]);n.enter().append("rect").classed(u.itemRectClassName,!0).attr({rx:u.rx,ry:u.ry,"shape-rendering":"crispEdges"}),n.call(o.stroke,e.bordercolor).call(o.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px")}function _(t,e,n,r){var i=t.selectAll("text").data([0]);i.enter().append("text").classed(u.itemTextClassName,!0).classed("user-select-none",!0).attr({"text-anchor":"start","data-notex":1}),i.call(a.font,e.font).text(n.label).call(s.convertToTspans,r)}function x(t,e){var n=e.active;t.each(function(t,i){var a=r.select(this);i===n&&e.showactive&&a.select("rect."+u.itemRectClassName).call(o.fill,u.activeColor)})}function b(t){t.select("rect."+u.itemRectClassName).call(o.fill,u.hoverColor)}function w(t,e){t.select("rect."+u.itemRectClassName).call(o.fill,e.bgcolor)}function k(t,e){var n=e._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},o=a.tester.selectAll("g."+u.dropdownButtonClassName).data(e.buttons);o.enter().append("g").classed(u.dropdownButtonClassName,!0);var d=-1!==["up","down"].indexOf(e.direction);o.each(function(i,o){var l=r.select(this);l.call(v,e,i,t);var h=l.select("."+u.itemTextClassName),f=h.node()&&a.bBox(h.node()).width,p=Math.max(f+u.textPadX,u.minWidth),g=e.font.size*c,m=s.lineCount(h),y=Math.max(g*m,u.minHeight)+u.textOffsetY;y=Math.ceil(y),p=Math.ceil(p),n.widths[o]=p,n.heights[o]=y,n.height1=Math.max(n.height1,y),n.width1=Math.max(n.width1,p),d?(n.totalWidth=Math.max(n.totalWidth,p),n.openWidth=n.totalWidth,n.totalHeight+=y+u.gapButton,n.openHeight+=y+u.gapButton):(n.totalWidth+=p+u.gapButton,n.openWidth+=p+u.gapButton,n.totalHeight=Math.max(n.totalHeight,y),n.openHeight=n.totalHeight)}),d?n.totalHeight-=u.gapButton:n.totalWidth-=u.gapButton,n.headerWidth=n.width1+u.arrowPadX,n.headerHeight=n.height1,"dropdown"===e.type&&(d?(n.width1+=u.arrowPadX,n.totalHeight=n.height1):n.totalWidth=n.width1,n.totalWidth+=u.arrowPadX),o.remove();var h=n.totalWidth+e.pad.l+e.pad.r,f=n.totalHeight+e.pad.t+e.pad.b,p=t._fullLayout._size;n.lx=p.l+p.w*e.x,n.ly=p.t+p.h*(1-e.y);var g="left";l.isRightAnchor(e)&&(n.lx-=h,g="right"),l.isCenterAnchor(e)&&(n.lx-=h/2,g="center");var m="top";l.isBottomAnchor(e)&&(n.ly-=f,m="bottom"),l.isMiddleAnchor(e)&&(n.ly-=f/2,m="middle"),n.totalWidth=Math.ceil(n.totalWidth),n.totalHeight=Math.ceil(n.totalHeight),n.lx=Math.round(n.lx),n.ly=Math.round(n.ly),i.autoMargin(t,u.autoMarginIdRoot+e._index,{x:e.x,y:e.y,l:h*({right:1,center:.5}[g]||0),r:h*({left:1,center:.5}[g]||0),b:f*({top:1,middle:.5}[m]||0),t:f*({bottom:1,middle:.5}[m]||0)})}function T(t,e,n,r){r=r||{};var i=t.select("."+u.itemRectClassName),o=t.select("."+u.itemTextClassName),l=e.borderwidth,d=n.index,h=e._dims;a.setTranslate(t,l+n.x,l+n.y);var f=-1!==["up","down"].indexOf(e.direction),p=r.height||(f?h.heights[d]:h.height1);i.attr({x:0,y:0,width:r.width||(f?h.width1:h.widths[d]),height:p});var g=e.font.size*c,m=(s.lineCount(o)-1)*g/2;s.positionText(o,u.textOffsetX,p/2-m+u.textOffsetY),f?n.y+=h.heights[d]+n.yPad:n.x+=h.widths[d]+n.xPad,n.index++}function M(t){t.selectAll("g."+u.dropdownButtonClassName).remove()}e.exports=function(t){var e=t._fullLayout,n=function(t){for(var e=t[u.name],n=[],r=0;r<e.length;r++){var i=e[r];i.visible&&n.push(i)}return n}(e),o=e._menulayer.selectAll("g."+u.containerClassName).data(n.length>0?[0]:[]);if(o.enter().append("g").classed(u.containerClassName,!0).style("cursor","pointer"),o.exit().remove(),o.exit().size()&&function(t){for(var e=t._fullLayout._pushmargin||{},n=Object.keys(e),r=0;r<n.length;r++){var o=n[r];-1!==o.indexOf(u.autoMarginIdRoot)&&i.autoMargin(t,o)}}(t),0!==n.length){var a=o.selectAll("g."+u.headerGroupClassName).data(n,h);a.enter().append("g").classed(u.headerGroupClassName,!0);var s=o.selectAll("g."+u.dropdownButtonGroupClassName).data([0]);s.enter().append("g").classed(u.dropdownButtonGroupClassName,!0).style("pointer-events","all");for(var l=0;l<n.length;l++){var c=n[l];k(t,c)}var v="updatemenus"+e._uid,y=new d(t,s,v);a.enter().size()&&(s.node().parentNode.appendChild(s.node()),s.call(M).attr(u.menuIndexAttrName,"-1")),a.exit().each(function(e){r.select(this).remove(),s.call(M).attr(u.menuIndexAttrName,"-1"),i.autoMargin(t,u.autoMarginIdRoot+e._index)}),a.each(function(e){var n=r.select(this),o="dropdown"===e.type?s:null;i.manageCommandObserver(t,e,e.buttons,function(r){p(t,e,e.buttons[r.index],n,o,y,r.index,!0)}),"dropdown"===e.type?(g(t,n,s,y,e),f(s,e)&&m(t,n,s,y,e)):m(t,n,null,null,e)})}}},{"../../constants/alignment":132,"../../lib/svg_text_utils":172,"../../plots/plots":226,"../color":34,"../drawing":59,"../legend/anchor_utils":85,"./constants":127,"./scrollbox":131,d3:1}],130:[function(t,e,n){arguments[4][124][0].apply(n,arguments)},{"./attributes":126,"./constants":127,"./defaults":128,"./draw":129,dup:124}],131:[function(t,e,n){"use strict";e.exports=s;var r=t("d3"),i=t("../color"),o=t("../drawing"),a=t("../../lib");function s(t,e,n){this.gd=t,this.container=e,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}s.barWidth=2,s.barLength=20,s.barRadius=2,s.barPad=1,s.barColor="#808BA4",s.prototype.enable=function(t,e,n){var a=this.gd._fullLayout,l=a.width,c=a.height;this.position=t;var u,d,h,f,p=this.position.l,g=this.position.w,m=this.position.t,v=this.position.h,y=this.position.direction,_="down"===y,x="left"===y,b="up"===y,w=g,k=v;_||x||"right"===y||b||(this.position.direction="down",_=!0),_||b?(d=(u=p)+w,_?(h=m,k=(f=Math.min(h+k,c))-h):k=(f=m+k)-(h=Math.max(f-k,0))):(f=(h=m)+k,x?w=(d=p+w)-(u=Math.max(d-w,0)):(u=p,w=(d=Math.min(u+w,l))-u)),this._box={l:u,t:h,w:w,h:k};var T=g>w,M=s.barLength+2*s.barPad,A=s.barWidth+2*s.barPad,L=p,S=m+v;S+A>c&&(S=c-A);var C=this.container.selectAll("rect.scrollbar-horizontal").data(T?[0]:[]);C.exit().on(".drag",null).remove(),C.enter().append("rect").classed("scrollbar-horizontal",!0).call(i.fill,s.barColor),T?(this.hbar=C.attr({rx:s.barRadius,ry:s.barRadius,x:L,y:S,width:M,height:A}),this._hbarXMin=L+M/2,this._hbarTranslateMax=w-M):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var P=v>k,z=s.barWidth+2*s.barPad,D=s.barLength+2*s.barPad,E=p+g,O=m;E+z>l&&(E=l-z);var I=this.container.selectAll("rect.scrollbar-vertical").data(P?[0]:[]);I.exit().on(".drag",null).remove(),I.enter().append("rect").classed("scrollbar-vertical",!0).call(i.fill,s.barColor),P?(this.vbar=I.attr({rx:s.barRadius,ry:s.barRadius,x:E,y:O,width:z,height:D}),this._vbarYMin=O+D/2,this._vbarTranslateMax=k-D):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var j=this.id,N=u-.5,R=P?d+z+.5:d+.5,B=h-.5,F=T?f+A+.5:f+.5,H=a._topdefs.selectAll("#"+j).data(T||P?[0]:[]);if(H.exit().remove(),H.enter().append("clipPath").attr("id",j).append("rect"),T||P?(this._clipRect=H.select("rect").attr({x:Math.floor(N),y:Math.floor(B),width:Math.ceil(R)-Math.floor(N),height:Math.ceil(F)-Math.floor(B)}),this.container.call(o.setClipUrl,j),this.bg.attr({x:p,y:m,width:g,height:v})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),T||P){var q=r.behavior.drag().on("dragstart",function(){r.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(q);var Z=r.behavior.drag().on("dragstart",function(){r.event.sourceEvent.preventDefault(),r.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));T&&this.hbar.on(".drag",null).call(Z),P&&this.vbar.on(".drag",null).call(Z)}this.setTranslate(e,n)},s.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},s.prototype._onBoxDrag=function(){var t=this.translateX,e=this.translateY;this.hbar&&(t-=r.event.dx),this.vbar&&(e-=r.event.dy),this.setTranslate(t,e)},s.prototype._onBoxWheel=function(){var t=this.translateX,e=this.translateY;this.hbar&&(t+=r.event.deltaY),this.vbar&&(e+=r.event.deltaY),this.setTranslate(t,e)},s.prototype._onBarDrag=function(){var t=this.translateX,e=this.translateY;if(this.hbar){var n=t+this._hbarXMin,i=n+this._hbarTranslateMax;t=(a.constrain(r.event.x,n,i)-n)/(i-n)*(this.position.w-this._box.w)}if(this.vbar){var o=e+this._vbarYMin,s=o+this._vbarTranslateMax;e=(a.constrain(r.event.y,o,s)-o)/(s-o)*(this.position.h-this._box.h)}this.setTranslate(t,e)},s.prototype.setTranslate=function(t,e){var n=this.position.w-this._box.w,r=this.position.h-this._box.h;if(t=a.constrain(t||0,0,n),e=a.constrain(e||0,0,r),this.translateX=t,this.translateY=e,this.container.call(o.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-e),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+e-.5)}),this.hbar){var i=t/n;this.hbar.call(o.setTranslate,t+i*this._hbarTranslateMax,e)}if(this.vbar){var s=e/r;this.vbar.call(o.setTranslate,t,e+s*this._vbarTranslateMax)}}},{"../../lib":151,"../color":34,"../drawing":59,d3:1}],132:[function(t,e,n){"use strict";e.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],133:[function(t,e,n){"use strict";e.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DBLCLICKDELAY:300,DESELECTDIM:.2}},{}],134:[function(t,e,n){"use strict";e.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1e4,ONEAVGYEAR:315576e5,ONEAVGMONTH:26298e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,MINUS_SIGN:"−"}},{}],135:[function(t,e,n){"use strict";e.exports={entityToUnicode:{mu:"μ","#956":"μ",amp:"&","#28":"&",lt:"<","#60":"<",gt:">","#62":">",nbsp:" ","#160":" ",times:"×","#215":"×",plusmn:"±","#177":"±",deg:"°","#176":"°"}}},{}],136:[function(t,e,n){"use strict";n.xmlns="http://www.w3.org/2000/xmlns/",n.svg="http://www.w3.org/2000/svg",n.xlink="http://www.w3.org/1999/xlink",n.svgAttrs={xmlns:n.svg,"xmlns:xlink":n.xlink}},{}],137:[function(t,e,n){"use strict";var r=t("./plotly");n.version="1.34.0",t("es6-promise").polyfill(),t("../build/plotcss"),t("./fonts/mathjax_config"),n.plot=r.plot,n.newPlot=r.newPlot,n.restyle=r.restyle,n.relayout=r.relayout,n.redraw=r.redraw,n.update=r.update,n.react=r.react,n.extendTraces=r.extendTraces,n.prependTraces=r.prependTraces,n.addTraces=r.addTraces,n.deleteTraces=r.deleteTraces,n.moveTraces=r.moveTraces,n.purge=r.purge,n.setPlotConfig=t("./plot_api/set_plot_config"),n.register=t("./plot_api/register"),n.toImage=t("./plot_api/to_image"),n.downloadImage=t("./snapshot/download"),n.validate=t("./plot_api/validate"),n.addFrames=r.addFrames,n.deleteFrames=r.deleteFrames,n.animate=r.animate,n.register(t("./traces/scatter")),n.register([t("./components/fx"),t("./components/legend"),t("./components/annotations"),t("./components/annotations3d"),t("./components/shapes"),t("./components/images"),t("./components/updatemenus"),t("./components/sliders"),t("./components/rangeslider"),t("./components/rangeselector")]),n.register([t("./locale-en"),t("./locale-en-us")]),n.Icons=t("../build/ploticon"),n.Plots=r.Plots,n.Fx=t("./components/fx"),n.Snapshot=t("./snapshot"),n.PlotSchema=t("./plot_api/plot_schema"),n.Queue=t("./lib/queue"),n.d3=t("d3")},{"../build/plotcss":13,"../build/ploticon":14,"./components/annotations":27,"./components/annotations3d":32,"./components/fx":76,"./components/images":84,"./components/legend":93,"./components/rangeselector":105,"./components/rangeslider":111,"./components/shapes":118,"./components/sliders":124,"./components/updatemenus":130,"./fonts/mathjax_config":138,"./lib/queue":165,"./locale-en":176,"./locale-en-us":175,"./plot_api/plot_schema":183,"./plot_api/register":184,"./plot_api/set_plot_config":185,"./plot_api/to_image":187,"./plot_api/validate":188,"./plotly":189,"./snapshot":238,"./snapshot/download":235,"./traces/scatter":271,d3:1,"es6-promise":2}],138:[function(t,e,n){"use strict";"undefined"!=typeof MathJax?(n.MathJax=!0,MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured()):n.MathJax=!1},{}],139:[function(t,e,n){"use strict";var r=Math.PI;n.deg2rad=function(t){return t/180*r},n.rad2deg=function(t){return t/r*180},n.wrap360=function(t){var e=t%360;return e<0?e+360:e},n.wrap180=function(t){return Math.abs(t)>180&&(t-=360*Math.round(t/360)),t}},{}],140:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../constants/numerical").BADNUM,o=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;e.exports=function(t){return"string"==typeof t&&(t=t.replace(o,"")),r(t)?Number(t):i}},{"../constants/numerical":134,"fast-isnumeric":4}],141:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("tinycolor2"),o=t("../plots/attributes"),a=t("../components/colorscale/get_scale"),s=Object.keys(t("../components/colorscale/scales")),l=t("./nested_property"),c=t("./regex").counter,u=t("../constants/interactions").DESELECTDIM,d=t("./angles").wrap180;n.valObjectMeta={data_array:{description:["An {array} of data.","The value MUST be an {array}, or we ignore it."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(t,e,n){Array.isArray(t)?e.set(t):void 0!==n&&e.set(n)}},enumerated:{description:["Enumerated value type. The available values are listed","in `values`."].join(" "),requiredOpts:["values"],otherOpts:["dflt","coerceNumber","arrayOk"],coerceFunction:function(t,e,n,r){r.coerceNumber&&(t=+t),-1===r.values.indexOf(t)?e.set(n):e.set(t)},validateFunction:function(t,e){e.coerceNumber&&(t=+t);for(var n=e.values,r=0;r<n.length;r++){var i=String(n[r]);if("/"===i.charAt(0)&&"/"===i.charAt(i.length-1)){if(new RegExp(i.substr(1,i.length-2)).test(t))return!0}else if(t===n[r])return!0}return!1}},boolean:{description:"A boolean (true/false) value.",requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(t,e,n){!0===t||!1===t?e.set(t):e.set(n)}},number:{description:["A number or a numeric value","(e.g. a number inside a string).","When applicable, values greater (less) than `max` (`min`)","are coerced to the `dflt`."].join(" "),requiredOpts:[],otherOpts:["dflt","min","max","arrayOk"],coerceFunction:function(t,e,n,i){!r(t)||void 0!==i.min&&t<i.min||void 0!==i.max&&t>i.max?e.set(n):e.set(+t)}},integer:{description:["An integer or an integer inside a string.","When applicable, values greater (less) than `max` (`min`)","are coerced to the `dflt`."].join(" "),requiredOpts:[],otherOpts:["dflt","min","max","arrayOk"],coerceFunction:function(t,e,n,i){t%1||!r(t)||void 0!==i.min&&t<i.min||void 0!==i.max&&t>i.max?e.set(n):e.set(+t)}},string:{description:["A string value.","Numbers are converted to strings except for attributes with","`strict` set to true."].join(" "),requiredOpts:[],otherOpts:["dflt","noBlank","strict","arrayOk","values"],coerceFunction:function(t,e,n,r){if("string"!=typeof t){var i="number"==typeof t;!0!==r.strict&&i?e.set(String(t)):e.set(n)}else r.noBlank&&!t?e.set(n):e.set(t)}},color:{description:["A string describing color.","Supported formats:","- hex (e.g. '#d3d3d3')","- rgb (e.g. 'rgb(255, 0, 0)')","- rgba (e.g. 'rgb(255, 0, 0, 0.5)')","- hsl (e.g. 'hsl(0, 100%, 50%)')","- hsv (e.g. 'hsv(0, 100%, 100%)')","- named colors (full list: http://www.w3.org/TR/css3-color/#svg-color)"].join(" "),requiredOpts:[],otherOpts:["dflt","arrayOk"],coerceFunction:function(t,e,n){i(t).isValid()?e.set(t):e.set(n)}},colorlist:{description:["A list of colors.","Must be an {array} containing valid colors."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(t,e,n){Array.isArray(t)&&t.length&&t.every(function(t){return i(t).isValid()})?e.set(t):e.set(n)}},colorscale:{description:["A Plotly colorscale either picked by a name:","(any of",s.join(", "),")","customized as an {array} of 2-element {arrays} where","the first element is the normalized color level value","(starting at *0* and ending at *1*),","and the second item is a valid color string."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(t,e,n){e.set(a(t,n))}},angle:{description:["A number (in degree) between -180 and 180."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(t,e,n){"auto"===t?e.set("auto"):r(t)?e.set(d(+t)):e.set(n)}},subplotid:{description:["An id string of a subplot type (given by dflt), optionally","followed by an integer >1. e.g. if dflt='geo', we can have","'geo', 'geo2', 'geo3', ..."].join(" "),requiredOpts:["dflt"],otherOpts:[],coerceFunction:function(t,e,n){"string"==typeof t&&c(n).test(t)?e.set(t):e.set(n)},validateFunction:function(t,e){var n=e.dflt;return t===n||"string"==typeof t&&!!c(n).test(t)}},flaglist:{description:["A string representing a combination of flags","(order does not matter here).","Combine any of the available `flags` with *+*.","(e.g. ('lines+markers')).","Values in `extras` cannot be combined."].join(" "),requiredOpts:["flags"],otherOpts:["dflt","extras","arrayOk"],coerceFunction:function(t,e,n,r){if("string"==typeof t)if(-1===(r.extras||[]).indexOf(t)){for(var i=t.split("+"),o=0;o<i.length;){var a=i[o];-1===r.flags.indexOf(a)||i.indexOf(a)<o?i.splice(o,1):o++}i.length?e.set(i.join("+")):e.set(n)}else e.set(t);else e.set(n)}},any:{description:"Any type.",requiredOpts:[],otherOpts:["dflt","values","arrayOk"],coerceFunction:function(t,e,n){void 0===t?e.set(n):e.set(t)}},info_array:{description:["An {array} of plot information."].join(" "),requiredOpts:["items"],otherOpts:["dflt","freeLength"],coerceFunction:function(t,e,r,i){if(Array.isArray(t)){var o=i.items,a=[];r=Array.isArray(r)?r:[];for(var s=0;s<o.length;s++)n.coerce(t,a,o,"["+s+"]",r[s]);e.set(a)}else e.set(r)},validateFunction:function(t,e){if(!Array.isArray(t))return!1;var r=e.items;if(!e.freeLength&&t.length!==r.length)return!1;for(var i=0;i<t.length;i++){if(!n.validate(t[i],e.items[i]))return!1}return!0}}},n.coerce=function(t,e,r,i,o){var a=l(r,i).get(),s=l(t,i),c=l(e,i),u=s.get();return void 0===o&&(o=a.dflt),a.arrayOk&&Array.isArray(u)?(c.set(u),u):(n.valObjectMeta[a.valType].coerceFunction(u,c,o,a),c.get())},n.coerce2=function(t,e,r,i,o){var a=l(t,i),s=n.coerce(t,e,r,i,o),c=a.get();return null!=c&&s},n.coerceFont=function(t,e,n){var r={};return n=n||{},r.family=t(e+".family",n.family),r.size=t(e+".size",n.size),r.color=t(e+".color",n.color),r},n.coerceHoverinfo=function(t,e,r){var i,a=e._module.attributes,s=a.hoverinfo?{hoverinfo:a.hoverinfo}:o,l=s.hoverinfo;if(1===r._dataLength){var c="all"===l.dflt?l.flags.slice():l.dflt.split("+");c.splice(c.indexOf("name"),1),i=c.join("+")}return n.coerce(t,e,s,"hoverinfo",i)},n.coerceSelectionMarkerOpacity=function(t,e){if(t.marker){var n,r,i=t.marker.opacity;if(void 0!==i)Array.isArray(i)||t.selected||t.unselected||(n=i,r=u*i),e("selected.marker.opacity",n),e("unselected.marker.opacity",r)}},n.validate=function(t,e){var r=n.valObjectMeta[e.valType];if(e.arrayOk&&Array.isArray(t))return!0;if(r.validateFunction)return r.validateFunction(t,e);var i={},o=i,a={set:function(t){o=t}};return r.coerceFunction(t,a,i,e),o!==i}},{"../components/colorscale/get_scale":47,"../components/colorscale/scales":53,"../constants/interactions":133,"../plots/attributes":192,"./angles":139,"./nested_property":159,"./regex":166,"fast-isnumeric":4,tinycolor2:293}],142:[function(t,e,n){"use strict";var r,i,o=t("d3"),a=t("fast-isnumeric"),s=t("./loggers"),l=t("./mod"),c=t("../constants/numerical"),u=c.BADNUM,d=c.ONEDAY,h=c.ONEHOUR,f=c.ONEMIN,p=c.ONESEC,g=c.EPOCHJD,m=t("../registry"),v=o.time.format.utc,y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,_=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,x=(new Date).getFullYear()-70;function b(t){return t&&m.componentsRegistry.calendars&&"string"==typeof t&&"gregorian"!==t}function w(t,e){return String(t+Math.pow(10,e)).substr(1)}n.dateTick0=function(t,e){return b(t)?e?m.getComponentMethod("calendars","CANONICAL_SUNDAY")[t]:m.getComponentMethod("calendars","CANONICAL_TICK")[t]:e?"2000-01-02":"2000-01-01"},n.dfltRange=function(t){return b(t)?m.getComponentMethod("calendars","DFLTRANGE")[t]:["2000-01-01","2001-01-01"]},n.isJSDate=function(t){return"object"==typeof t&&null!==t&&"function"==typeof t.getTime},n.dateTime2ms=function(t,e){if(n.isJSDate(t))return(t=Number(t)-t.getTimezoneOffset()*f)>=r&&t<=i?t:u;if("string"!=typeof t&&"number"!=typeof t)return u;t=String(t);var o=b(e),a=t.charAt(0);!o||"G"!==a&&"g"!==a||(t=t.substr(1),e="");var s=o&&"chinese"===e.substr(0,7),l=t.match(s?_:y);if(!l)return u;var c=l[1],v=l[3]||"1",w=Number(l[5]||1),k=Number(l[7]||0),T=Number(l[9]||0),M=Number(l[11]||0);if(o){if(2===c.length)return u;var A;c=Number(c);try{var L=m.getComponentMethod("calendars","getCal")(e);if(s){var S="i"===v.charAt(v.length-1);v=parseInt(v,10),A=L.newDate(c,L.toMonthIndex(c,v,S),w)}else A=L.newDate(c,Number(v),w)}catch(t){return u}return A?(A.toJD()-g)*d+k*h+T*f+M*p:u}c=2===c.length?(Number(c)+2e3-x)%100+x:Number(c),v-=1;var C=new Date(Date.UTC(2e3,v,w,k,T));return C.setUTCFullYear(c),C.getUTCMonth()!==v?u:C.getUTCDate()!==w?u:C.getTime()+M*p},r=n.MIN_MS=n.dateTime2ms("-9999"),i=n.MAX_MS=n.dateTime2ms("9999-12-31 23:59:59.9999"),n.isDateTime=function(t,e){return n.dateTime2ms(t,e)!==u};var k=90*d,T=3*h,M=5*f;function A(t,e,n,r,i){if((e||n||r||i)&&(t+=" "+w(e,2)+":"+w(n,2),(r||i)&&(t+=":"+w(r,2),i))){for(var o=4;i%10==0;)o-=1,i/=10;t+="."+w(i,o)}return t}n.ms2DateTime=function(t,e,n){if("number"!=typeof t||!(t>=r&&t<=i))return u;e||(e=0);var o,a,s,c,y,_,x=Math.floor(10*l(t+.05,1)),w=Math.round(t-x/10);if(b(n)){var L=Math.floor(w/d)+g,S=Math.floor(l(t,d));try{o=m.getComponentMethod("calendars","getCal")(n).fromJD(L).formatDate("yyyy-mm-dd")}catch(t){o=v("G%Y-%m-%d")(new Date(w))}if("-"===o.charAt(0))for(;o.length<11;)o="-0"+o.substr(1);else for(;o.length<10;)o="0"+o;a=e<k?Math.floor(S/h):0,s=e<k?Math.floor(S%h/f):0,c=e<T?Math.floor(S%f/p):0,y=e<M?S%p*10+x:0}else _=new Date(w),o=v("%Y-%m-%d")(_),a=e<k?_.getUTCHours():0,s=e<k?_.getUTCMinutes():0,c=e<T?_.getUTCSeconds():0,y=e<M?10*_.getUTCMilliseconds()+x:0;return A(o,a,s,c,y)},n.ms2DateTimeLocal=function(t){if(!(t>=r+d&&t<=i-d))return u;var e=Math.floor(10*l(t+.05,1)),n=new Date(Math.round(t-e/10));return A(o.time.format("%Y-%m-%d")(n),n.getHours(),n.getMinutes(),n.getSeconds(),10*n.getUTCMilliseconds()+e)},n.cleanDate=function(t,e,r){if(n.isJSDate(t)||"number"==typeof t){if(b(r))return s.error("JS Dates and milliseconds are incompatible with world calendars",t),e;if(!(t=n.ms2DateTimeLocal(+t))&&void 0!==e)return e}else if(!n.isDateTime(t,r))return s.error("unrecognized date",t),e;return t};var L=/%\d?f/g;function S(t,e,n,r){t=t.replace(L,function(t){var n=Math.min(+t.charAt(1)||6,6);return(e/1e3%1+2).toFixed(n).substr(2).replace(/0+$/,"")||"0"});var i=new Date(Math.floor(e+.05));if(b(r))try{t=m.getComponentMethod("calendars","worldCalFmt")(t,e,r)}catch(t){return"Invalid"}return n(t)(i)}var C=[59,59.9,59.99,59.999,59.9999];n.formatDate=function(t,e,n,r,i,o){if(i=b(i)&&i,!e)if("y"===n)e=o.year;else if("m"===n)e=o.month;else{if("d"!==n)return function(t,e){var n=l(t+.05,d),r=w(Math.floor(n/h),2)+":"+w(l(Math.floor(n/f),60),2);if("M"!==e){a(e)||(e=0);var i=(100+Math.min(l(t/p,60),C[e])).toFixed(e).substr(1);e>0&&(i=i.replace(/0+$/,"").replace(/[\.]$/,"")),r+=":"+i}return r}(t,n)+"\n"+S(o.dayMonthYear,t,r,i);e=o.dayMonth+"\n"+o.year}return S(e,t,r,i)};var P=3*d;n.incrementMonth=function(t,e,n){n=b(n)&&n;var r=l(t,d);if(t=Math.round(t-r),n)try{var i=Math.round(t/d)+g,o=m.getComponentMethod("calendars","getCal")(n),a=o.fromJD(i);return e%12?o.add(a,e,"m"):o.add(a,e/12,"y"),(a.toJD()-g)*d+r}catch(e){s.error("invalid ms "+t+" in calendar "+n)}var c=new Date(t+P);return c.setUTCMonth(c.getUTCMonth()+e)+r-P},n.findExactDates=function(t,e){for(var n,r,i=0,o=0,s=0,l=0,c=b(e)&&m.getComponentMethod("calendars","getCal")(e),u=0;u<t.length;u++)if(r=t[u],a(r)){if(!(r%d))if(c)try{1===(n=c.fromJD(r/d+g)).day()?1===n.month()?i++:o++:s++}catch(t){}else 1===(n=new Date(r)).getUTCDate()?0===n.getUTCMonth()?i++:o++:s++}else l++;s+=o+=i;var h=t.length-l;return{exactYears:i/h,exactMonths:o/h,exactDays:s/h}}},{"../constants/numerical":134,"../registry":233,"./loggers":156,"./mod":158,d3:1,"fast-isnumeric":4}],143:[function(t,e,n){"use strict";e.exports=function(t,e){return Array.isArray(t)||(t=[]),t.length=e,t}},{}],144:[function(t,e,n){"use strict";var r=t("events").EventEmitter,i={init:function(t){if(t._ev instanceof r)return t;var e=new r,n=new r;return t._ev=e,t._internalEv=n,t.on=e.on.bind(e),t.once=e.once.bind(e),t.removeListener=e.removeListener.bind(e),t.removeAllListeners=e.removeAllListeners.bind(e),t._internalOn=n.on.bind(n),t._internalOnce=n.once.bind(n),t._removeInternalListener=n.removeListener.bind(n),t._removeAllInternalListeners=n.removeAllListeners.bind(n),t.emit=function(r,i){"undefined"!=typeof jQuery&&jQuery(t).trigger(r,i),e.emit(r,i),n.emit(r,i)},t},triggerHandler:function(t,e,n){var r,i;"undefined"!=typeof jQuery&&(r=jQuery(t).triggerHandler(e,n));var o=t._ev;if(!o)return r;var a=o._events[e];if(!a)return r;"function"==typeof a&&(a=[a]);for(var s=a.pop(),l=0;l<a.length;l++)a[l](n);return i=s(n),void 0!==r?r:i},purge:function(t){return delete t._ev,delete t.on,delete t.once,delete t.removeListener,delete t.removeAllListeners,delete t.emit,delete t._ev,delete t._internalEv,delete t._internalOn,delete t._internalOnce,delete t._removeInternalListener,delete t._removeAllInternalListeners,t}};e.exports=i},{events:3}],145:[function(t,e,n){"use strict";var r=t("./is_plain_object.js"),i=Array.isArray;function o(t,e,n,a){var s,l,c,u,d,h,f=t[0],p=t.length;if(2===p&&i(f)&&i(t[1])&&0===f.length){if(function(t,e){var n,r;for(n=0;n<t.length;n++){if(null!==(r=t[n])&&"object"==typeof r)return!1;void 0!==r&&(e[n]=r)}return!0}(t[1],f))return f;f.splice(0,f.length)}for(var g=1;g<p;g++)for(l in s=t[g])c=f[l],u=s[l],a&&i(u)?f[l]=u:e&&u&&(r(u)||(d=i(u)))?(d?(d=!1,h=c&&i(c)?c:[]):h=c&&r(c)?c:{},f[l]=o([h,u],e,n,a)):(void 0!==u||n)&&(f[l]=u);return f}n.extendFlat=function(){return o(arguments,!1,!1,!1)},n.extendDeep=function(){return o(arguments,!0,!1,!1)},n.extendDeepAll=function(){return o(arguments,!0,!0,!1)},n.extendDeepNoArrays=function(){return o(arguments,!0,!1,!0)}},{"./is_plain_object.js":153}],146:[function(t,e,n){"use strict";e.exports=function(t){for(var e={},n=[],r=0,i=0;i<t.length;i++){var o=t[i];1!==e[o]&&(e[o]=1,n[r++]=o)}return n}},{}],147:[function(t,e,n){"use strict";function r(t){return!0===t.visible}function i(t){return!0===t[0].trace.visible}e.exports=function(t){for(var e,n=(e=t,Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace?i:r),o=[],a=0;a<t.length;a++){var s=t[a];n(s)&&o.push(s)}return o}},{}],148:[function(t,e,n){"use strict";var r,i,o,a=t("./mod");function s(t,e,n,r,i,o,a,s){var l=n-t,c=i-t,u=a-i,d=r-e,h=o-e,f=s-o,p=l*f-u*d;if(0===p)return null;var g=(c*f-u*h)/p,m=(c*d-l*h)/p;return m<0||m>1||g<0||g>1?null:{x:t+l*g,y:e+d*g}}function l(t,e,n,r,i){var o=r*t+i*e;if(o<0)return r*r+i*i;if(o>n){var a=r-t,s=i-e;return a*a+s*s}var l=r*e-i*t;return l*l/n}n.segmentsIntersect=s,n.segmentDistance=function(t,e,n,r,i,o,a,c){if(s(t,e,n,r,i,o,a,c))return 0;var u=n-t,d=r-e,h=a-i,f=c-o,p=u*u+d*d,g=h*h+f*f,m=Math.min(l(u,d,p,i-t,o-e),l(u,d,p,a-t,c-e),l(h,f,g,t-i,e-o),l(h,f,g,n-i,r-o));return Math.sqrt(m)},n.getTextLocation=function(t,e,n,s){if(t===i&&s===o||(r={},i=t,o=s),r[n])return r[n];var l=t.getPointAtLength(a(n-s/2,e)),c=t.getPointAtLength(a(n+s/2,e)),u=Math.atan((c.y-l.y)/(c.x-l.x)),d=t.getPointAtLength(a(n,e)),h={x:(4*d.x+l.x+c.x)/6,y:(4*d.y+l.y+c.y)/6,theta:u};return r[n]=h,h},n.clearLocationCache=function(){i=null},n.getVisibleSegment=function(t,e,n){var r,i,o=e.left,a=e.right,s=e.top,l=e.bottom,c=0,u=t.getTotalLength(),d=u;function h(e){var n=t.getPointAtLength(e);0===e?r=n:e===u&&(i=n);var c=n.x<o?o-n.x:n.x>a?n.x-a:0,d=n.y<s?s-n.y:n.y>l?n.y-l:0;return Math.sqrt(c*c+d*d)}for(var f=h(c);f;){if((c+=f+n)>d)return;f=h(c)}for(f=h(d);f;){if(c>(d-=f+n))return;f=h(d)}return{min:c,max:d,len:d-c,total:u,isClosed:0===c&&d===u&&Math.abs(r.x-i.x)<.1&&Math.abs(r.y-i.y)<.1}},n.findPointOnPath=function(t,e,n,r){for(var i,o,a,s=(r=r||{}).pathLength||t.getTotalLength(),l=r.tolerance||.001,c=r.iterationLimit||30,u=t.getPointAtLength(0)[n]>t.getPointAtLength(s)[n]?-1:1,d=0,h=0,f=s;d<c;){if(i=(h+f)/2,a=(o=t.getPointAtLength(i))[n]-e,Math.abs(a)<l)return o;u*a>0?f=i:h=i,d++}return o}},{"./mod":158}],149:[function(t,e,n){"use strict";e.exports=function(t){var e;if("string"==typeof t){if(null===(e=document.getElementById(t)))throw new Error("No DOM element with id '"+t+"' exists on the page.");return e}if(null==t)throw new Error("DOM element provided is null or undefined");return t}},{}],150:[function(t,e,n){"use strict";e.exports=function(t){return t}},{}],151:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),o=t("../constants/numerical"),a=o.FP_SAFE,s=o.BADNUM,l=e.exports={};l.nestedProperty=t("./nested_property"),l.keyedContainer=t("./keyed_container"),l.relativeAttr=t("./relative_attr"),l.isPlainObject=t("./is_plain_object"),l.isArray=t("./is_array"),l.mod=t("./mod"),l.toLogRange=t("./to_log_range"),l.relinkPrivateKeys=t("./relink_private"),l.ensureArray=t("./ensure_array");var c=t("./coerce");l.valObjectMeta=c.valObjectMeta,l.coerce=c.coerce,l.coerce2=c.coerce2,l.coerceFont=c.coerceFont,l.coerceHoverinfo=c.coerceHoverinfo,l.coerceSelectionMarkerOpacity=c.coerceSelectionMarkerOpacity,l.validate=c.validate;var u=t("./dates");l.dateTime2ms=u.dateTime2ms,l.isDateTime=u.isDateTime,l.ms2DateTime=u.ms2DateTime,l.ms2DateTimeLocal=u.ms2DateTimeLocal,l.cleanDate=u.cleanDate,l.isJSDate=u.isJSDate,l.formatDate=u.formatDate,l.incrementMonth=u.incrementMonth,l.dateTick0=u.dateTick0,l.dfltRange=u.dfltRange,l.findExactDates=u.findExactDates,l.MIN_MS=u.MIN_MS,l.MAX_MS=u.MAX_MS;var d=t("./search");l.findBin=d.findBin,l.sorterAsc=d.sorterAsc,l.sorterDes=d.sorterDes,l.distinctVals=d.distinctVals,l.roundUp=d.roundUp;var h=t("./stats");l.aggNums=h.aggNums,l.len=h.len,l.mean=h.mean,l.variance=h.variance,l.stdev=h.stdev,l.interp=h.interp;var f=t("./matrix");l.init2dArray=f.init2dArray,l.transposeRagged=f.transposeRagged,l.dot=f.dot,l.translationMatrix=f.translationMatrix,l.rotationMatrix=f.rotationMatrix,l.rotationXYMatrix=f.rotationXYMatrix,l.apply2DTransform=f.apply2DTransform,l.apply2DTransform2=f.apply2DTransform2;var p=t("./angles");l.deg2rad=p.deg2rad,l.rad2deg=p.rad2deg,l.wrap360=p.wrap360,l.wrap180=p.wrap180;var g=t("./geometry2d");l.segmentsIntersect=g.segmentsIntersect,l.segmentDistance=g.segmentDistance,l.getTextLocation=g.getTextLocation,l.clearLocationCache=g.clearLocationCache,l.getVisibleSegment=g.getVisibleSegment,l.findPointOnPath=g.findPointOnPath;var m=t("./extend");l.extendFlat=m.extendFlat,l.extendDeep=m.extendDeep,l.extendDeepAll=m.extendDeepAll,l.extendDeepNoArrays=m.extendDeepNoArrays;var v=t("./loggers");l.log=v.log,l.warn=v.warn,l.error=v.error;var y=t("./regex");l.counterRegex=y.counter;var _=t("./throttle");l.throttle=_.throttle,l.throttleDone=_.done,l.clearThrottle=_.clear,l.getGraphDiv=t("./get_graph_div"),l._=t("./localize"),l.notifier=t("./notifier"),l.filterUnique=t("./filter_unique"),l.filterVisible=t("./filter_visible"),l.pushUnique=t("./push_unique"),l.cleanNumber=t("./clean_number"),l.ensureNumber=function(t){return i(t)?(t=Number(t))<-a||t>a?s:i(t)?Number(t):s:s},l.noop=t("./noop"),l.identity=t("./identity"),l.swapAttrs=function(t,e,n,r){n||(n="x"),r||(r="y");for(var i=0;i<e.length;i++){var o=e[i],a=l.nestedProperty(t,o.replace("?",n)),s=l.nestedProperty(t,o.replace("?",r)),c=a.get();a.set(s.get()),s.set(c)}},l.raiseToTop=function(t){t.parentNode.appendChild(t)},l.cancelTransition=function(t){return t.transition().duration(0)},l.constrain=function(t,e,n){return e>n?Math.max(n,Math.min(e,t)):Math.max(e,Math.min(n,t))},l.bBoxIntersect=function(t,e,n){return n=n||0,t.left<=e.right+n&&e.left<=t.right+n&&t.top<=e.bottom+n&&e.top<=t.bottom+n},l.simpleMap=function(t,e,n,r){for(var i=t.length,o=new Array(i),a=0;a<i;a++)o[a]=e(t[a],n,r);return o},l.randstr=function t(e,n,r){if(r||(r=16),void 0===n&&(n=24),n<=0)return"0";var i,o,a=Math.log(Math.pow(2,n))/Math.log(r),s="";for(i=2;a===1/0;i*=2)a=Math.log(Math.pow(2,n/i))/Math.log(r)*i;var l=a-Math.floor(a);for(i=0;i<Math.floor(a);i++)s=Math.floor(Math.random()*r).toString(r)+s;l&&(o=Math.pow(r,l),s=Math.floor(Math.random()*o).toString(r)+s);var c=parseInt(s,r);return e&&e.indexOf(s)>-1||c!==1/0&&c>=Math.pow(2,n)?t(e,n,r):s},l.OptionControl=function(t,e){t||(t={}),e||(e="opt");var n={optionList:[],_newoption:function(r){r[e]=t,n[r.name]=r,n.optionList.push(r)}};return n["_"+e]=t,n},l.smooth=function(t,e){if((e=Math.round(e)||0)<2)return t;var n,r,i,o,a=t.length,s=2*a,l=2*e-1,c=new Array(l),u=new Array(a);for(n=0;n<l;n++)c[n]=(1-Math.cos(Math.PI*(n+1)/e))/(2*e);for(n=0;n<a;n++){for(o=0,r=0;r<l;r++)(i=n+r+1-e)<-a?i-=s*Math.round(i/s):i>=s&&(i-=s*Math.floor(i/s)),i<0?i=-1-i:i>=a&&(i=s-1-i),o+=t[i]*c[r];u[n]=o}return u},l.syncOrAsync=function(t,e,n){var r;function i(){return l.syncOrAsync(t,e,n)}for(;t.length;)if((r=(0,t.splice(0,1)[0])(e))&&r.then)return r.then(i).then(void 0,l.promiseError);return n&&n(e)},l.stripTrailingSlash=function(t){return"/"===t.substr(-1)?t.substr(0,t.length-1):t},l.noneOrAll=function(t,e,n){if(t){var r,i=!1,o=!0;for(r=0;r<n.length;r++)null!=t[n[r]]?i=!0:o=!1;if(i&&!o)for(r=0;r<n.length;r++)t[n[r]]=e[n[r]]}},l.mergeArray=function(t,e,n){if(Array.isArray(t))for(var r=Math.min(t.length,e.length),i=0;i<r;i++)e[i][n]=t[i]},l.fillArray=function(t,e,n,r){if(r=r||l.identity,Array.isArray(t))for(var i=0;i<e.length;i++)e[i][n]=r(t[i])},l.castOption=function(t,e,n,r){r=r||l.identity;var i=l.nestedProperty(t,n).get();return Array.isArray(i)?Array.isArray(e)&&Array.isArray(i[e[0]])?r(i[e[0]][e[1]]):r(i[e]):i},l.extractOption=function(t,e,n,r){if(n in t)return t[n];var i=l.nestedProperty(e,r).get();return Array.isArray(i)?void 0:i},l.tagSelected=function(t,e,n){var r,o,a,s=e.selectedpoints,l=e._indexToPoints;if(l)for(var c in r={},l)for(var u=l[c],d=0;d<u.length;d++)r[u[d]]=c;for(var h=0;h<s.length;h++){var f=s[h];if(i(a=f)&&a>=0&&a%1==0){var p=r?r[f]:f,g=n?n[p]:p;void 0!==(o=g)&&o<t.length&&(t[g].selected=1)}}},l.getTargetArray=function(t,e){var n=e.target;if("string"==typeof n&&n){var r=l.nestedProperty(t,n).get();return!!Array.isArray(r)&&r}return!!Array.isArray(n)&&n},l.minExtend=function(t,e){var n={};"object"!=typeof e&&(e={});var r,i,o,a=Object.keys(t);for(r=0;r<a.length;r++)o=t[i=a[r]],"_"!==i.charAt(0)&&"function"!=typeof o&&("module"===i?n[i]=o:Array.isArray(o)?n[i]=o.slice(0,3):n[i]=o&&"object"==typeof o?l.minExtend(t[i],e[i]):o);for(a=Object.keys(e),r=0;r<a.length;r++)"object"==typeof(o=e[i=a[r]])&&i in n&&"object"==typeof n[i]||(n[i]=o);return n},l.titleCase=function(t){return t.charAt(0).toUpperCase()+t.substr(1)},l.containsAny=function(t,e){for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n]))return!0;return!1},l.isPlotDiv=function(t){var e=r.select(t);return e.node()instanceof HTMLElement&&e.size()&&e.classed("js-plotly-plot")},l.removeElement=function(t){var e=t&&t.parentNode;e&&e.removeChild(t)},l.addStyleRule=function(t,e){if(!l.styleSheet){var n=document.createElement("style");n.appendChild(document.createTextNode("")),document.head.appendChild(n),l.styleSheet=n.sheet}var r=l.styleSheet;r.insertRule?r.insertRule(t+"{"+e+"}",0):r.addRule?r.addRule(t,e,0):l.warn("addStyleRule failed")},l.isIE=function(){return void 0!==window.navigator.msSaveBlob},l.isD3Selection=function(t){return t&&"function"==typeof t.classed},l.objectFromPath=function(t,e){for(var n,r=t.split("."),i=n={},o=0;o<r.length;o++){var a=r[o],s=null,l=r[o].match(/(.*)\[([0-9]+)\]/);l?(a=l[1],s=l[2],n=n[a]=[],o===r.length-1?n[s]=e:n[s]={},n=n[s]):(o===r.length-1?n[a]=e:n[a]={},n=n[a])}return i};var x=/^([^\[\.]+)\.(.+)?/,b=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;l.expandObjectPaths=function(t){var e,n,r,i,o,a,s;if("object"==typeof t&&!Array.isArray(t))for(n in t)t.hasOwnProperty(n)&&((e=n.match(x))?(i=t[n],r=e[1],delete t[n],t[r]=l.extendDeepNoArrays(t[r]||{},l.objectFromPath(n,l.expandObjectPaths(i))[r])):(e=n.match(b))?(i=t[n],r=e[1],o=parseInt(e[2]),delete t[n],t[r]=t[r]||[],"."===e[3]?(s=e[4],a=t[r][o]=t[r][o]||{},l.extendDeepNoArrays(a,l.objectFromPath(s,l.expandObjectPaths(i)))):t[r][o]=l.expandObjectPaths(i)):t[n]=l.expandObjectPaths(t[n]));return t},l.numSeparate=function(t,e,n){if(n||(n=!1),"string"!=typeof e||0===e.length)throw new Error("Separator string required for formatting!");"number"==typeof t&&(t=String(t));var r=/(\d+)(\d{3})/,i=e.charAt(0),o=e.charAt(1),a=t.split("."),s=a[0],l=a.length>1?i+a[1]:"";if(o&&(a.length>1||s.length>4||n))for(;r.test(s);)s=s.replace(r,"$1"+o+"$2");return s+l};var w=/%{([^\s%{}]*)}/g,k=/^\w*$/;l.templateString=function(t,e){var n={};return t.replace(w,function(t,r){return k.test(r)?e[r]||"":(n[r]=n[r]||l.nestedProperty(e,r).get,n[r]()||"")})};l.subplotSort=function(t,e){for(var n=Math.min(t.length,e.length)+1,r=0,i=0,o=0;o<n;o++){var a=t.charCodeAt(o)||0,s=e.charCodeAt(o)||0,l=a>=48&&a<=57,c=s>=48&&s<=57;if(l&&(r=10*r+a-48),c&&(i=10*i+s-48),!l||!c){if(r!==i)return r-i;if(a!==s)return a-s}}return i-r}},{"../constants/numerical":134,"./angles":139,"./clean_number":140,"./coerce":141,"./dates":142,"./ensure_array":143,"./extend":145,"./filter_unique":146,"./filter_visible":147,"./geometry2d":148,"./get_graph_div":149,"./identity":150,"./is_array":152,"./is_plain_object":153,"./keyed_container":154,"./localize":155,"./loggers":156,"./matrix":157,"./mod":158,"./nested_property":159,"./noop":160,"./notifier":161,"./push_unique":164,"./regex":166,"./relative_attr":167,"./relink_private":168,"./search":169,"./stats":171,"./throttle":173,"./to_log_range":174,d3:1,"fast-isnumeric":4}],152:[function(t,e,n){"use strict";var r="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}};e.exports=function(t){return Array.isArray(t)||r.isView(t)}},{}],153:[function(t,e,n){"use strict";e.exports=function(t){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(t):"[object Object]"===Object.prototype.toString.call(t)&&Object.getPrototypeOf(t)===Object.prototype}},{}],154:[function(t,e,n){"use strict";var r=t("./nested_property"),i=/^\w*$/;e.exports=function(t,e,n,o){var a,s;n=n||"name",o=o||"value";var l={};s=e&&e.length?r(t,e).get():t,e=e||"",s=s||[];var c={};for(a=0;a<s.length;a++)c[s[a][n]]=a;var u=i.test(o),d={set:function(t,e){var i=null===e?4:0,a=c[t];void 0===a?(i|=3,a=s.length,c[t]=a):e!==(u?s[a][o]:r(s[a],o).get())&&(i|=2);var h=s[a]=s[a]||{};return h[n]=t,u?h[o]=e:r(h,o).set(e),null!==e&&(i&=-5),l[a]=l[a]|i,d},get:function(t){var e=c[t];return void 0===e?void 0:u?s[e][o]:r(s[e],o).get()},rename:function(t,e){var r=c[t];return void 0===r?d:(l[r]=1|l[r],c[e]=r,delete c[t],s[r][n]=e,d)},remove:function(t){var e=c[t];if(void 0===e)return d;var i=s[e];if(Object.keys(i).length>2)return l[e]=2|l[e],d.set(t,null);if(u){for(a=e;a<s.length;a++)l[a]=3|l[a];for(a=e;a<s.length;a++)c[s[a][n]]--;s.splice(e,1),delete c[t]}else r(i,o).set(null),l[e]=6|l[e];return d},constructUpdate:function(){for(var t,i,a={},c=Object.keys(l),d=0;d<c.length;d++)i=c[d],t=e+"["+i+"]",s[i]?(1&l[i]&&(a[t+"."+n]=s[i][n]),2&l[i]&&(a[t+"."+o]=u?4&l[i]?null:s[i][o]:4&l[i]?null:r(s[i],o).get())):a[t]=null;return a}};return d}},{"./nested_property":159}],155:[function(t,e,n){"use strict";var r=t("../registry");e.exports=function(t,e){for(var n=t._context.locale,i=0;i<2;i++){for(var o=t._context.locales,a=0;a<2;a++){var s=(o[n]||{}).dictionary;if(s){var l=s[e];if(l)return l}o=r.localeRegistry}var c=n.split("-")[0];if(c===n)break;n=c}return e}},{"../registry":233}],156:[function(t,e,n){"use strict";var r=t("../plot_api/plot_config"),i=e.exports={};function o(t,e){if(t.apply)t.apply(t,e);else for(var n=0;n<e.length;n++)t(e[n])}i.log=function(){if(r.logging>1){for(var t=["LOG:"],e=0;e<arguments.length;e++)t.push(arguments[e]);o(console.trace||console.log,t)}},i.warn=function(){if(r.logging>0){for(var t=["WARN:"],e=0;e<arguments.length;e++)t.push(arguments[e]);o(console.trace||console.log,t)}},i.error=function(){if(r.logging>0){for(var t=["ERROR:"],e=0;e<arguments.length;e++)t.push(arguments[e]);o(console.error,t)}}},{"../plot_api/plot_config":182}],157:[function(t,e,n){"use strict";n.init2dArray=function(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=new Array(e);return n},n.transposeRagged=function(t){var e,n,r=0,i=t.length;for(e=0;e<i;e++)r=Math.max(r,t[e].length);var o=new Array(r);for(e=0;e<r;e++)for(o[e]=new Array(i),n=0;n<i;n++)o[e][n]=t[n][e];return o},n.dot=function(t,e){if(!t.length||!e.length||t.length!==e.length)return null;var r,i,o=t.length;if(t[0].length)for(r=new Array(o),i=0;i<o;i++)r[i]=n.dot(t[i],e);else if(e[0].length){var a=n.transposeRagged(e);for(r=new Array(a.length),i=0;i<a.length;i++)r[i]=n.dot(t,a[i])}else for(r=0,i=0;i<o;i++)r+=t[i]*e[i];return r},n.translationMatrix=function(t,e){return[[1,0,t],[0,1,e],[0,0,1]]},n.rotationMatrix=function(t){var e=t*Math.PI/180;return[[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]]},n.rotationXYMatrix=function(t,e,r){return n.dot(n.dot(n.translationMatrix(e,r),n.rotationMatrix(t)),n.translationMatrix(-e,-r))},n.apply2DTransform=function(t){return function(){var e=arguments;3===e.length&&(e=e[0]);var r=1===arguments.length?e[0]:[e[0],e[1]];return n.dot(t,[r[0],r[1],1]).slice(0,2)}},n.apply2DTransform2=function(t){var e=n.apply2DTransform(t);return function(t){return e(t.slice(0,2)).concat(e(t.slice(2,4)))}}},{}],158:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t%e;return n<0?n+e:n}},{}],159:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("./is_array"),o=t("./is_plain_object"),a=t("../plot_api/container_array_match");e.exports=function(t,e){if(r(e))e=String(e);else if("string"!=typeof e||"[-1]"===e.substr(e.length-4))throw"bad property string";for(var n,o,a,s=0,l=e.split(".");s<l.length;){if(n=String(l[s]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])l[s]=n[1];else{if(0!==s)throw"bad property string";l.splice(0,1)}for(o=n[2].substr(1,n[2].length-2).split("]["),a=0;a<o.length;a++)s++,l.splice(s,0,Number(o[a]))}s++}return"object"!=typeof t?{set:function(){throw"bad container"},get:function(){},astr:e,parts:l,obj:t}:{set:u(t,l,e),get:function t(e,n){return function(){var r,o,a,s,l,c=e;for(s=0;s<n.length-1;s++){if(-1===(r=n[s])){for(o=!0,a=[],l=0;l<c.length;l++)a[l]=t(c[l],n.slice(s+1))(),a[l]!==a[0]&&(o=!1);return o?a[0]:a}if("number"==typeof r&&!i(c))return;if("object"!=typeof(c=c[r])||null===c)return}if("object"==typeof c&&null!==c&&null!==(a=c[n[s]]))return a}}(t,l),astr:e,parts:l,obj:t}};var s=/(^|\.)((domain|range)(\.[xy])?|args|parallels)$/,l=/(^|\.)args\[/;function c(t,e){if(null!=(n=t)&&("object"!=typeof n||(i(n)?n.length:Object.keys(n).length))||o(t)&&"]"===e.charAt(e.length-1)||e.match(l)&&void 0!==t)return!1;var n;if(!i(t))return!0;if(e.match(s))return!0;var r=a(e);return r&&""===r.index}function u(t,e,n){return function(r){var o,a,s=t,l="",u=[[t,l]],p=c(r,n);for(a=0;a<e.length-1;a++){if("number"==typeof(o=e[a])&&!i(s))throw"array index but container is not an array";if(-1===o){if(p=!h(s,e.slice(a+1),r,n))break;return}if(!f(s,o,e[a+1],p))break;if("object"!=typeof(s=s[o])||null===s)throw"container is not an object";l=d(l,o),u.push([s,l])}p?(a===e.length-1&&delete s[e[a]],function(t){var e,n,r,o,a,s;for(e=t.length-1;e>=0;e--){if(r=t[e][0],o=t[e][1],s=!1,i(r))for(n=r.length-1;n>=0;n--)c(r[n],d(o,n))?s?r[n]=void 0:r.pop():s=!0;else if("object"==typeof r&&null!==r)for(a=Object.keys(r),s=!1,n=a.length-1;n>=0;n--)c(r[a[n]],d(o,a[n]))?delete r[a[n]]:s=!0;if(s)return}}(u)):s[e[a]]=r}}function d(t,e){var n=e;return r(e)?n="["+e+"]":t&&(n="."+e),t+n}function h(t,e,n,r){var o,a=i(n),s=!0,l=n,d=r.replace("-1",0),h=!a&&c(n,d),p=e[0];for(o=0;o<t.length;o++)d=r.replace("-1",o),a&&(h=c(l=n[o%n.length],d)),h&&(s=!1),f(t,o,p,h)&&u(t[o],e,r.replace("-1",o))(l);return s}function f(t,e,n,r){if(void 0===t[e]){if(r)return!1;t[e]="number"==typeof n?[]:{}}return!0}},{"../plot_api/container_array_match":177,"./is_array":152,"./is_plain_object":153,"fast-isnumeric":4}],160:[function(t,e,n){"use strict";e.exports=function(){}},{}],161:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),o=[];e.exports=function(t,e){if(-1===o.indexOf(t)){o.push(t);var n=1e3;i(e)?n=e:"long"===e&&(n=3e3);var a=r.select("body").selectAll(".plotly-notifier").data([0]);a.enter().append("div").classed("plotly-notifier",!0),a.selectAll(".notifier-note").data(o).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(t){var e=r.select(this);e.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){e.transition().call(s)});for(var i=e.append("p"),o=t.split(/<br\s*\/?>/g),a=0;a<o.length;a++)a&&i.append("br"),i.append("span").text(o[a]);e.transition().duration(700).style("opacity",1).transition().delay(n).call(s)})}function s(t){t.duration(700).style("opacity",0).each("end",function(t){var e=o.indexOf(t);-1!==e&&o.splice(e,1),r.select(this).remove()})}}},{d3:1,"fast-isnumeric":4}],162:[function(t,e,n){"use strict";var r=t("./setcursor"),i="data-savedcursor";e.exports=function(t,e){var n=t.attr(i);if(e){if(!n){for(var o=(t.attr("class")||"").split(" "),a=0;a<o.length;a++){var s=o[a];0===s.indexOf("cursor-")&&t.attr(i,s.substr(7)).classed(s,!1)}t.attr(i)||t.attr(i,"!!")}r(t,e)}else n&&(t.attr(i,null),"!!"===n?r(t):r(t,n))}},{"./setcursor":170}],163:[function(t,e,n){"use strict";var r=t("./matrix").dot,i=t("../constants/numerical").BADNUM,o=e.exports={};o.tester=function(t){if(Array.isArray(t[0][0]))return o.multitester(t);var e,n=t.slice(),r=n[0][0],a=r,s=n[0][1],l=s;for(n.push(n[0]),e=1;e<n.length;e++)r=Math.min(r,n[e][0]),a=Math.max(a,n[e][0]),s=Math.min(s,n[e][1]),l=Math.max(l,n[e][1]);var c,u=!1;5===n.length&&(n[0][0]===n[1][0]?n[2][0]===n[3][0]&&n[0][1]===n[3][1]&&n[1][1]===n[2][1]&&(u=!0,c=function(t){return t[0]===n[0][0]}):n[0][1]===n[1][1]&&n[2][1]===n[3][1]&&n[0][0]===n[3][0]&&n[1][0]===n[2][0]&&(u=!0,c=function(t){return t[1]===n[0][1]}));var d=!0,h=n[0];for(e=1;e<n.length;e++)if(h[0]!==n[e][0]||h[1]!==n[e][1]){d=!1;break}return{xmin:r,xmax:a,ymin:s,ymax:l,pts:n,contains:u?function(t,e){var n=t[0],o=t[1];return!(n===i||n<r||n>a||o===i||o<s||o>l||e&&c(t))}:function(t,e){var o=t[0],c=t[1];if(o===i||o<r||o>a||c===i||c<s||c>l)return!1;var u,d,h,f,p,g=n.length,m=n[0][0],v=n[0][1],y=0;for(u=1;u<g;u++)if(d=m,h=v,m=n[u][0],v=n[u][1],!(o<(f=Math.min(d,m))||o>Math.max(d,m)||c>Math.max(h,v)))if(c<Math.min(h,v))o!==f&&y++;else{if(c===(p=m===d?c:h+(o-d)*(v-h)/(m-d)))return 1!==u||!e;c<=p&&o!==f&&y++}return y%2==1},isRect:u,degenerate:d}},o.multitester=function(t){for(var e=[],n=t[0][0][0],r=n,i=t[0][0][1],a=i,s=0;s<t.length;s++){var l=o.tester(t[s]);l.subtract=t[s].subtract,e.push(l),n=Math.min(n,l.xmin),r=Math.max(r,l.xmax),i=Math.min(i,l.ymin),a=Math.max(a,l.ymax)}return{xmin:n,xmax:r,ymin:i,ymax:a,pts:[],contains:function(t,n){for(var r=!1,i=0;i<e.length;i++)e[i].contains(t,n)&&(r=!1===e[i].subtract);return r},isRect:!1,degenerate:!1}};var a=o.isSegmentBent=function(t,e,n,i){var o,a,s,l=t[e],c=[t[n][0]-l[0],t[n][1]-l[1]],u=r(c,c),d=Math.sqrt(u),h=[-c[1]/d,c[0]/d];for(o=e+1;o<n;o++)if(a=[t[o][0]-l[0],t[o][1]-l[1]],(s=r(a,c))<0||s>u||Math.abs(r(a,h))>i)return!0;return!1};o.filter=function(t,e){var n=[t[0]],r=0,i=0;function o(o){t.push(o);var s=n.length,l=r;n.splice(i+1);for(var c=l+1;c<t.length;c++)(c===t.length-1||a(t,l,c+1,e))&&(n.push(t[c]),n.length<s-2&&(r=c,i=n.length-1),l=c)}t.length>1&&o(t.pop());return{addPt:o,raw:t,filtered:n}}},{"../constants/numerical":134,"./matrix":157}],164:[function(t,e,n){"use strict";e.exports=function(t,e){if(e instanceof RegExp){var n,r=e.toString();for(n=0;n<t.length;n++)if(t[n]instanceof RegExp&&t[n].toString()===r)return t;t.push(e)}else!e&&0!==e||-1!==t.indexOf(e)||t.push(e);return t}},{}],165:[function(t,e,n){"use strict";var r=t("../lib"),i=t("../plot_api/plot_config");var o={add:function(t,e,n,r,o){var a,s;t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},s=t.undoQueue.index,t.autoplay?t.undoQueue.inSequence||(t.autoplay=!1):(!t.undoQueue.sequence||t.undoQueue.beginSequence?(a={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},t.undoQueue.queue.splice(s,t.undoQueue.queue.length-s,a),t.undoQueue.index+=1):a=t.undoQueue.queue[s-1],t.undoQueue.beginSequence=!1,a&&(a.undo.calls.unshift(e),a.undo.args.unshift(n),a.redo.calls.push(r),a.redo.args.push(o)),t.undoQueue.queue.length>i.queueLength&&(t.undoQueue.queue.shift(),t.undoQueue.index--))},startSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!0,t.undoQueue.beginSequence=!0},stopSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!1,t.undoQueue.beginSequence=!1},undo:function(t){var e,n;if(t.framework&&t.framework.isPolar)t.framework.undo();else if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index<=0)){for(t.undoQueue.index--,e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,n=0;n<e.undo.calls.length;n++)o.plotDo(t,e.undo.calls[n],e.undo.args[n]);t.undoQueue.inSequence=!1,t.autoplay=!1}},redo:function(t){var e,n;if(t.framework&&t.framework.isPolar)t.framework.redo();else if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length)){for(e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,n=0;n<e.redo.calls.length;n++)o.plotDo(t,e.redo.calls[n],e.redo.args[n]);t.undoQueue.inSequence=!1,t.autoplay=!1,t.undoQueue.index++}}};o.plotDo=function(t,e,n){t.autoplay=!0,n=function(t,e){for(var n,i=[],o=0;o<e.length;o++)n=e[o],i[o]=n===t?n:"object"==typeof n?Array.isArray(n)?r.extendDeep([],n):r.extendDeepAll({},n):n;return i}(t,n),e.apply(null,n)},e.exports=o},{"../lib":151,"../plot_api/plot_config":182}],166:[function(t,e,n){"use strict";n.counter=function(t,e,n){return new RegExp("^"+t+"([2-9]|[1-9][0-9]+)?"+(e||"")+(n?"":"$"))}},{}],167:[function(t,e,n){"use strict";var r=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,i=/^[^\.\[\]]+$/;e.exports=function(t,e){for(;e;){var n=t.match(r);if(n)t=n[1];else{if(!t.match(i))throw new Error("bad relativeAttr call:"+[t,e]);t=""}if("^"!==e.charAt(0))break;e=e.slice(1)}return t&&"["!==e.charAt(0)?t+"."+e:t+e}},{}],168:[function(t,e,n){"use strict";var r=t("./is_array"),i=t("./is_plain_object");e.exports=function t(e,n){for(var o=Object.keys(n||{}),a=0;a<o.length;a++){var s=o[a],l=n[s],c=e[s];if("_"===s.charAt(0)||"function"==typeof l){if(s in e)continue;e[s]=l}else if(r(l)&&r(c)&&i(l[0]))for(var u=0;u<l.length;u++)i(l[u])&&i(c[u])&&t(c[u],l[u]);else i(l)&&i(c)&&(t(c,l),Object.keys(c).length||delete e[s])}}},{"./is_array":152,"./is_plain_object":153}],169:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("./loggers");function o(t,e){return t<e}function a(t,e){return t<=e}function s(t,e){return t>e}function l(t,e){return t>=e}n.findBin=function(t,e,n){if(r(e.start))return n?Math.ceil((t-e.start)/e.size-1e-9)-1:Math.floor((t-e.start)/e.size+1e-9);var c,u,d=0,h=e.length,f=0,p=h>1?(e[h-1]-e[0])/(h-1):1;for(u=p>=0?n?o:a:n?l:s,t+=1e-9*p*(n?-1:1)*(p>=0?1:-1);d<h&&f++<100;)u(e[c=Math.floor((d+h)/2)],t)?d=c+1:h=c;return f>90&&i.log("Long binary search..."),d-1},n.sorterAsc=function(t,e){return t-e},n.sorterDes=function(t,e){return e-t},n.distinctVals=function(t){var e=t.slice();e.sort(n.sorterAsc);for(var r=e.length-1,i=e[r]-e[0]||1,o=i/(r||1)/1e4,a=[e[0]],s=0;s<r;s++)e[s+1]>e[s]+o&&(i=Math.min(i,e[s+1]-e[s]),a.push(e[s+1]));return{vals:a,minDiff:i}},n.roundUp=function(t,e,n){for(var r,i=0,o=e.length-1,a=0,s=n?0:1,l=n?1:0,c=n?Math.ceil:Math.floor;i<o&&a++<100;)e[r=c((i+o)/2)]<=t?i=r+s:o=r-l;return e[i]}},{"./loggers":156,"fast-isnumeric":4}],170:[function(t,e,n){"use strict";e.exports=function(t,e){(t.attr("class")||"").split(" ").forEach(function(e){0===e.indexOf("cursor-")&&t.classed(e,!1)}),e&&t.classed("cursor-"+e,!0)}},{}],171:[function(t,e,n){"use strict";var r=t("fast-isnumeric");n.aggNums=function(t,e,i,o){var a,s;if(o||(o=i.length),r(e)||(e=!1),Array.isArray(i[0])){for(s=new Array(o),a=0;a<o;a++)s[a]=n.aggNums(t,e,i[a]);i=s}for(a=0;a<o;a++)r(e)?r(i[a])&&(e=t(+e,+i[a])):e=i[a];return e},n.len=function(t){return n.aggNums(function(t){return t+1},0,t)},n.mean=function(t,e){return e||(e=n.len(t)),n.aggNums(function(t,e){return t+e},0,t)/e},n.variance=function(t,e,i){return e||(e=n.len(t)),r(i)||(i=n.mean(t,e)),n.aggNums(function(t,e){return t+Math.pow(e-i,2)},0,t)/e},n.stdev=function(t,e,r){return Math.sqrt(n.variance(t,e,r))},n.interp=function(t,e){if(!r(e))throw"n should be a finite number";if((e=e*t.length-.5)<0)return t[0];if(e>t.length-1)return t[t.length-1];var n=e%1;return n*t[Math.ceil(e)]+(1-n)*t[Math.floor(e)]}},{"fast-isnumeric":4}],172:[function(t,e,n){"use strict";var r=t("d3"),i=t("../lib"),o=t("../constants/xmlns_namespaces"),a=t("../constants/string_mappings"),s=t("../constants/alignment").LINE_SPACING;function l(t,e){return t.node().getBoundingClientRect()[e]}var c=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;n.convertToTspans=function(t,e,a){var v=t.text(),C=!t.attr("data-notex")&&"undefined"!=typeof MathJax&&v.match(c),P=r.select(t.node().parentNode);if(!P.empty()){var z=t.attr("class")?t.attr("class").split(" ")[0]:"text";return z+="-math",P.selectAll("svg."+z).remove(),P.selectAll("g."+z+"-group").remove(),t.style("display",null).attr({"data-unformatted":v,"data-math":"N"}),C?(e&&e._promises||[]).push(new Promise(function(e){t.style("display","none");var n,o,s,c,h,f=parseInt(t.node().style.fontSize,10),p={fontSize:f};n=C[2],o=p,s=function(n,r,i){P.selectAll("svg."+z).remove(),P.selectAll("g."+z+"-group").remove();var o=n&&n.select("svg");if(!o||!o.node())return D(),void e();var s=P.append("g").classed(z+"-group",!0).attr({"pointer-events":"none","data-unformatted":v,"data-math":"Y"});s.node().appendChild(o.node()),r&&r.node()&&o.node().insertBefore(r.node().cloneNode(!0),o.node().firstChild),o.attr({class:z,height:i.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var c=t.node().style.fill||"black";o.select("g").attr({fill:c,stroke:c});var u=l(o,"width"),d=l(o,"height"),h=+t.attr("x")-u*{start:0,middle:.5,end:1}[t.attr("text-anchor")||"start"],p=-(f||l(t,"height"))/4;"y"===z[0]?(s.attr({transform:"rotate("+[-90,+t.attr("x"),+t.attr("y")]+") translate("+[-u/2,p-d/2]+")"}),o.attr({x:+t.attr("x"),y:+t.attr("y")})):"l"===z[0]?o.attr({x:t.attr("x"),y:p-d/2}):"a"===z[0]?o.attr({x:0,y:p}):o.attr({x:h,y:+t.attr("y")+p-d/2}),a&&a.call(t,s),e(s)},c="math-output-"+i.randstr([],64),h=r.select("body").append("div").attr({id:c}).style({visibility:"hidden",position:"absolute"}).style({"font-size":o.fontSize+"px"}).text(n.replace(u,"\\lt ").replace(d,"\\gt ")),MathJax.Hub.Queue(["Typeset",MathJax.Hub,h.node()],function(){var t=r.select("body").select("#MathJax_SVG_glyphs");if(h.select(".MathJax_SVG").empty()||!h.select("svg").node())i.log("There was an error in the tex syntax.",n),s();else{var e=h.select("svg").node().getBoundingClientRect();s(h.select(".MathJax_SVG"),t,e)}h.remove()})})):D(),t}function D(){P.empty()||(z=t.attr("class")+"-math",P.select("svg."+z).remove()),t.text("").style("white-space","pre"),function(t,e){e=(n=e,function(t,e){if(!t)return"";for(var n=0;n<e.length;n++){var r=e[n];t=t.replace(r.regExp,r.sub)}return t}(n,y)).replace(_," ");var n;var a,l=!1,c=[],u=-1;function d(){u++;var e=document.createElementNS(o.svg,"tspan");r.select(e).attr({class:"line",dy:u*s+"em"}),t.appendChild(e),a=e;var n=c;if(c=[{node:e}],n.length>1)for(var i=1;i<n.length;i++)v(n[i])}function v(t){var e,n=t.type,i={};if("a"===n){e="a";var s=t.target,l=t.href,u=t.popup;l&&(i={"xlink:xlink:show":"_blank"===s||"_"!==s.charAt(0)?"new":"replace",target:s,"xlink:xlink:href":l},u&&(i.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+u+'");return false;'))}else e="tspan";t.style&&(i.style=t.style);var d=document.createElementNS(o.svg,e);if("sup"===n||"sub"===n){C(a,g),a.appendChild(d);var h=document.createElementNS(o.svg,"tspan");C(h,g),r.select(h).attr("dy",p[n]),i.dy=f[n],a.appendChild(d),a.appendChild(h)}else a.appendChild(d);r.select(d).attr(i),a=t.node=d,c.push(t)}function C(t,e){t.appendChild(document.createTextNode(e))}function P(t){if(1!==c.length){var n=c.pop();t!==n.type&&i.log("Start tag <"+n.type+"> doesnt match end tag <"+t+">. Pretending it did match.",e),a=c[c.length-1].node}else i.log("Ignoring unexpected end tag </"+t+">.",e)}w.test(e)?d():(a=t,c=[{node:t}]);for(var z=e.split(x),D=0;D<z.length;D++){var E=z[D],O=E.match(b),I=O&&O[2].toLowerCase(),j=h[I];if("br"===I)d();else if(void 0===j)C(a,E);else if(O[1])P(I);else{var N=O[4],R={type:I},B=L(N,k);if(B?(B=B.replace(S,"$1 fill:"),j&&(B+=";"+j)):j&&(B=j),B&&(R.style=B),"a"===I){l=!0;var F=L(N,T);if(F){var H=document.createElement("a");H.href=F,-1!==m.indexOf(H.protocol)&&(R.href=encodeURI(F),R.target=L(N,M)||"_blank",R.popup=L(N,A))}}v(R)}}return l}(t.node(),v)&&t.style("pointer-events","all"),n.positionText(t),a&&a.call(t)}};var u=/(<|&lt;|&#60;)/g,d=/(>|&gt;|&#62;)/g;var h={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},f={sub:"0.3em",sup:"-0.6em"},p={sub:"-0.21em",sup:"0.42em"},g="​",m=["http:","https:","mailto:","",void 0,":"],v=new RegExp("</?("+Object.keys(h).join("|")+")( [^>]*)?/?>","g"),y=Object.keys(a.entityToUnicode).map(function(t){return{regExp:new RegExp("&"+t+";","g"),sub:a.entityToUnicode[t]}}),_=/(\r\n?|\n)/g,x=/(<[^<>]*>)/,b=/<(\/?)([^ >]*)(\s+(.*))?>/i,w=/<br(\s+.*)?>/i,k=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,T=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,M=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,A=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function L(t,e){if(!t)return null;var n=t.match(e);return n&&(n[3]||n[4])}var S=/(^|;)\s*color:/;function C(t,e,n){var r,i,o,a=n.horizontalAlign,s=n.verticalAlign||"top",l=t.node().getBoundingClientRect(),c=e.node().getBoundingClientRect();return i="bottom"===s?function(){return l.bottom-r.height}:"middle"===s?function(){return l.top+(l.height-r.height)/2}:function(){return l.top},o="right"===a?function(){return l.right-r.width}:"center"===a?function(){return l.left+(l.width-r.width)/2}:function(){return l.left},function(){return r=this.node().getBoundingClientRect(),this.style({top:i()-c.top+"px",left:o()-c.left+"px","z-index":1e3}),this}}n.plainText=function(t){return(t||"").replace(v," ")},n.lineCount=function(t){return t.selectAll("tspan.line").size()||1},n.positionText=function(t,e,n){return t.each(function(){var t=r.select(this);function i(e,n){return void 0===n?null===(n=t.attr(e))&&(t.attr(e,0),n=0):t.attr(e,n),n}var o=i("x",e),a=i("y",n);"text"===this.nodeName&&t.selectAll("tspan.line").attr({x:o,y:a})})},n.makeEditable=function(t,e){var n=e.gd,i=e.delegate,o=r.dispatch("edit","input","cancel"),a=i||t;if(t.style({"pointer-events":i?"none":"all"}),1!==t.size())throw new Error("boo");function s(){var i,s,c,u;i=r.select(n).select(".svg-container"),s=i.append("div"),c=t.node().style,u=parseFloat(c.fontSize||12),s.classed("plugin-editable editable",!0).style({position:"absolute","font-family":c.fontFamily||"Arial","font-size":u,color:e.fill||c.fill||"black",opacity:1,"background-color":e.background||"transparent",outline:"#ffffff33 1px solid",margin:[-u/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(e.text||t.attr("data-unformatted")).call(C(t,i,e)).on("blur",function(){n._editing=!1,t.text(this.textContent).style({opacity:1});var e,i=r.select(this).attr("class");(e=i?"."+i.split(" ")[0]+"-math-group":"[class*=-math-group]")&&r.select(t.node().parentNode).select(e).style({opacity:0});var a=this.textContent;r.select(this).transition().duration(0).remove(),r.select(document).on("mouseup",null),o.edit.call(t,a)}).on("focus",function(){var t=this;n._editing=!0,r.select(document).on("mouseup",function(){if(r.event.target===t)return!1;document.activeElement===s.node()&&s.node().blur()})}).on("keyup",function(){27===r.event.which?(n._editing=!1,t.style({opacity:1}),r.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),o.cancel.call(t,this.textContent)):(o.input.call(t,this.textContent),r.select(this).call(C(t,i,e)))}).on("keydown",function(){13===r.event.which&&this.blur()}).call(l),t.style({opacity:0});var d,h=a.attr("class");(d=h?"."+h.split(" ")[0]+"-math-group":"[class*=-math-group]")&&r.select(t.node().parentNode).select(d).style({opacity:0})}function l(t){var e=t.node(),n=document.createRange();n.selectNodeContents(e);var r=window.getSelection();r.removeAllRanges(),r.addRange(n),e.focus()}return e.immediate?s():a.on("click",s),r.rebind(t,o,"on")}},{"../constants/alignment":132,"../constants/string_mappings":135,"../constants/xmlns_namespaces":136,"../lib":151,d3:1}],173:[function(t,e,n){"use strict";var r={};function i(t){t&&null!==t.timer&&(clearTimeout(t.timer),t.timer=null)}n.throttle=function(t,e,n){var o=r[t],a=Date.now();if(!o){for(var s in r)r[s].ts<a-6e4&&delete r[s];o=r[t]={ts:0,timer:null}}function l(){n(),o.ts=Date.now(),o.onDone&&(o.onDone(),o.onDone=null)}i(o),a>o.ts+e?l():o.timer=setTimeout(function(){l(),o.timer=null},e)},n.done=function(t){var e=r[t];return e&&e.timer?new Promise(function(t){var n=e.onDone;e.onDone=function(){n&&n(),t(),e.onDone=null}}):Promise.resolve()},n.clear=function(t){if(t)i(r[t]),delete r[t];else for(var e in r)n.clear(e)}},{}],174:[function(t,e,n){"use strict";var r=t("fast-isnumeric");e.exports=function(t,e){if(t>0)return Math.log(t)/Math.LN10;var n=Math.log(Math.min(e[0],e[1]))/Math.LN10;return r(n)||(n=Math.log(Math.max(e[0],e[1]))/Math.LN10-6),n}},{"fast-isnumeric":4}],175:[function(t,e,n){"use strict";e.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],176:[function(t,e,n){"use strict";e.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],177:[function(t,e,n){"use strict";var r=t("../registry");e.exports=function(t){for(var e,n,i=r.layoutArrayContainers,o=r.layoutArrayRegexes,a=t.split("[")[0],s=0;s<o.length;s++)if((n=t.match(o[s]))&&0===n.index){e=n[0];break}if(e||(e=i[i.indexOf(a)]),!e)return!1;var l=t.substr(e.length);return l?!!(n=l.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:e,index:Number(n[1]),property:n[3]||""}:{array:e,index:"",property:""}}},{"../registry":233}],178:[function(t,e,n){"use strict";var r=t("../lib"),i=r.extendFlat,o=r.isPlainObject,a={valType:"flaglist",extras:["none"],flags:["calc","calcIfAutorange","clearAxisTypes","plot","style","colorbars"],description:["trace attributes should include an `editType` string matching this flaglist.","*calc* is the most extensive: a full `Plotly.plot` starting by clearing `gd.calcdata`","to force it to be regenerated","*calcIfAutorange* does a full `Plotly.plot`, but only clears and redoes `gd.calcdata`","if there is at least one autoranged axis.","*clearAxisTypes* resets the types of the axes this trace is on, because new data could","cause the automatic axis type detection to change. Log type will not be cleared, as that","is never automatically chosen so must have been user-specified.","*plot* calls `Plotly.plot` but without first clearing `gd.calcdata`.","*style* only calls `module.style` for all trace modules and redraws the legend.","*colorbars* only redraws colorbars."].join(" ")},s={valType:"flaglist",extras:["none"],flags:["calc","calcIfAutorange","plot","legend","ticks","layoutstyle","modebar","camera","arraydraw"],description:["layout attributes should include an `editType` string matching this flaglist.","*calc* is the most extensive: a full `Plotly.plot` starting by clearing `gd.calcdata`","to force it to be regenerated","*calcIfAutorange* does a full `Plotly.plot`, but only clears and redoes `gd.calcdata`","if there is at least one autoranged axis.","*plot* calls `Plotly.plot` but without first clearing `gd.calcdata`.","*legend* only redraws the legend.","*ticks* only redraws axis ticks, labels, and gridlines.","*layoutstyle* reapplies global and SVG cartesian axis styles.","*modebar* just updates the modebar.","*camera* just updates the camera settings for gl3d scenes.","*arraydraw* allows component arrays to invoke the redraw routines just for the","component(s) that changed."].join(" ")},l=a.flags.slice().concat(["clearCalc","fullReplot"]),c=s.flags.slice().concat("layoutReplot");function u(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=!1;return e}function d(t,e,n){var r=i({},t);for(var a in r){var s=r[a];o(s)&&(r[a]=h(s,e,n,a))}return"from-root"===n&&(r.editType=e),r}function h(t,e,n,r){if(t.valType){var o=i({},t);if(o.editType=e,Array.isArray(t.items)){o.items=new Array(t.items.length);for(var a=0;a<t.items.length;a++)o.items[a]=h(t.items[a],e,"from-root")}return o}return d(t,e,"_"===r.charAt(0)?"nested":"from-root")}e.exports={traces:a,layout:s,traceFlags:function(){return u(l)},layoutFlags:function(){return u(c)},update:function(t,e){var n=e.editType;if(n&&"none"!==n)for(var r=n.split("+"),i=0;i<r.length;i++)t[r[i]]=!0},overrideAll:d}},{"../lib":151}],179:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("gl-mat4/fromQuat"),o=t("../registry"),a=t("../lib"),s=t("../plots/plots"),l=t("../plots/cartesian/axis_ids"),c=l.cleanId,u=l.getFromTrace,d=t("../components/color");function h(t,e){var n=t[e],r=e.charAt(0);n&&"paper"!==n&&(t[e]=c(n,r))}function f(t){var e="middle",n="center";return-1!==t.indexOf("top")?e="top":-1!==t.indexOf("bottom")&&(e="bottom"),-1!==t.indexOf("left")?n="left":-1!==t.indexOf("right")&&(n="right"),e+" "+n}function p(t,e){return e in t&&"object"==typeof t[e]&&0===Object.keys(t[e]).length}n.clearPromiseQueue=function(t){Array.isArray(t._promises)&&t._promises.length>0&&a.log("Clearing previous rejected promises from queue."),t._promises=[]},n.cleanLayout=function(t){var e,n;t||(t={}),t.xaxis1&&(t.xaxis||(t.xaxis=t.xaxis1),delete t.xaxis1),t.yaxis1&&(t.yaxis||(t.yaxis=t.yaxis1),delete t.yaxis1),t.scene1&&(t.scene||(t.scene=t.scene1),delete t.scene1);var r=(s.subplotsRegistry.cartesian||{}).attrRegex,o=(s.subplotsRegistry.gl3d||{}).attrRegex,l=Object.keys(t);for(e=0;e<l.length;e++){var u=l[e];if(r&&r.test(u)){var f=t[u];f.anchor&&"free"!==f.anchor&&(f.anchor=c(f.anchor)),f.overlaying&&(f.overlaying=c(f.overlaying)),f.type||(f.isdate?f.type="date":f.islog?f.type="log":!1===f.isdate&&!1===f.islog&&(f.type="linear")),"withzero"!==f.autorange&&"tozero"!==f.autorange||(f.autorange=!0,f.rangemode="tozero"),delete f.islog,delete f.isdate,delete f.categories,p(f,"domain")&&delete f.domain,void 0!==f.autotick&&(void 0===f.tickmode&&(f.tickmode=f.autotick?"auto":"linear"),delete f.autotick)}else if(o&&o.test(u)){var g=t[u],m=g.cameraposition;if(Array.isArray(m)&&4===m[0].length){var v=m[0],y=m[1],_=m[2],x=i([],v),b=[];for(n=0;n<3;++n)b[n]=y[n]+_*x[2+4*n];g.camera={eye:{x:b[0],y:b[1],z:b[2]},center:{x:y[0],y:y[1],z:y[2]},up:{x:x[1],y:x[5],z:x[9]}},delete g.cameraposition}}}var w=Array.isArray(t.annotations)?t.annotations.length:0;for(e=0;e<w;e++){var k=t.annotations[e];a.isPlainObject(k)&&(k.ref&&("paper"===k.ref?(k.xref="paper",k.yref="paper"):"data"===k.ref&&(k.xref="x",k.yref="y"),delete k.ref),h(k,"xref"),h(k,"yref"))}var T=Array.isArray(t.shapes)?t.shapes.length:0;for(e=0;e<T;e++){var M=t.shapes[e];a.isPlainObject(M)&&(h(M,"xref"),h(M,"yref"))}var A=t.legend;return A&&(A.x>3?(A.x=1.02,A.xanchor="left"):A.x<-2&&(A.x=-.02,A.xanchor="right"),A.y>3?(A.y=1.02,A.yanchor="bottom"):A.y<-2&&(A.y=-.02,A.yanchor="top")),"rotate"===t.dragmode&&(t.dragmode="orbit"),d.clean(t),t},n.cleanData=function(t,e){for(var r=[],i=t.concat(Array.isArray(e)?e:[]).filter(function(t){return"uid"in t}).map(function(t){return t.uid}),l=0;l<t.length;l++){var u,h=t[l];if(!("uid"in h)||-1!==r.indexOf(h.uid)){var g;for(u=0;u<100&&(g=a.randstr(i),-1!==r.indexOf(g));u++);h.uid=a.randstr(i),i.push(h.uid)}if(r.push(h.uid),"histogramy"===h.type&&"xbins"in h&&!("ybins"in h)&&(h.ybins=h.xbins,delete h.xbins),h.error_y&&"opacity"in h.error_y){var m=d.defaults,v=h.error_y.color||(o.traceIs(h,"bar")?d.defaultLine:m[l%m.length]);h.error_y.color=d.addOpacity(d.rgb(v),d.opacity(v)*h.error_y.opacity),delete h.error_y.opacity}if("bardir"in h&&("h"!==h.bardir||!o.traceIs(h,"bar")&&"histogram"!==h.type.substr(0,9)||(h.orientation="h",n.swapXYData(h)),delete h.bardir),"histogramy"===h.type&&n.swapXYData(h),"histogramx"!==h.type&&"histogramy"!==h.type||(h.type="histogram"),"scl"in h&&(h.colorscale=h.scl,delete h.scl),"reversescl"in h&&(h.reversescale=h.reversescl,delete h.reversescl),h.xaxis&&(h.xaxis=c(h.xaxis,"x")),h.yaxis&&(h.yaxis=c(h.yaxis,"y")),o.traceIs(h,"gl3d")&&h.scene&&(h.scene=s.subplotsRegistry.gl3d.cleanId(h.scene)),!o.traceIs(h,"pie")&&!o.traceIs(h,"bar"))if(Array.isArray(h.textposition))for(u=0;u<h.textposition.length;u++)h.textposition[u]=f(h.textposition[u]);else h.textposition&&(h.textposition=f(h.textposition));if(o.traceIs(h,"2dMap")&&("YIGnBu"===h.colorscale&&(h.colorscale="YlGnBu"),"YIOrRd"===h.colorscale&&(h.colorscale="YlOrRd")),o.traceIs(h,"markerColorscale")&&h.marker){var y=h.marker;"YIGnBu"===y.colorscale&&(y.colorscale="YlGnBu"),"YIOrRd"===y.colorscale&&(y.colorscale="YlOrRd")}if("surface"===h.type&&a.isPlainObject(h.contours)){var _=["x","y","z"];for(u=0;u<_.length;u++){var x=h.contours[_[u]];a.isPlainObject(x)&&(x.highlightColor&&(x.highlightcolor=x.highlightColor,delete x.highlightColor),x.highlightWidth&&(x.highlightwidth=x.highlightWidth,delete x.highlightWidth))}}if(Array.isArray(h.transforms)){var b=h.transforms;for(u=0;u<b.length;u++){var w=b[u];if(a.isPlainObject(w))switch(w.type){case"filter":w.filtersrc&&(w.target=w.filtersrc,delete w.filtersrc),w.calendar&&(w.valuecalendar||(w.valuecalendar=w.calendar),delete w.calendar);break;case"groupby":if(w.styles=w.styles||w.style,w.styles&&!Array.isArray(w.styles)){var k=w.styles,T=Object.keys(k);w.styles=[];for(var M=0;M<T.length;M++)w.styles.push({target:T[M],value:k[T[M]]})}}}}p(h,"line")&&delete h.line,"marker"in h&&(p(h.marker,"line")&&delete h.marker.line,p(h,"marker")&&delete h.marker),d.clean(h)}},n.swapXYData=function(t){var e;if(a.swapAttrs(t,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(t.z)&&Array.isArray(t.z[0])&&(t.transpose?delete t.transpose:t.transpose=!0),t.error_x&&t.error_y){var n=t.error_y,r="copy_ystyle"in n?n.copy_ystyle:!(n.color||n.thickness||n.width);a.swapAttrs(t,["error_?.copy_ystyle"]),r&&a.swapAttrs(t,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof t.hoverinfo){var i=t.hoverinfo.split("+");for(e=0;e<i.length;e++)"x"===i[e]?i[e]="y":"y"===i[e]&&(i[e]="x");t.hoverinfo=i.join("+")}},n.coerceTraceIndices=function(t,e){return r(e)?[e]:Array.isArray(e)&&e.length?e:t.data.map(function(t,e){return e})},n.manageArrayContainers=function(t,e,n){var i=t.obj,o=t.parts,s=o.length,l=o[s-1],c=r(l);if(c&&null===e){var u=o.slice(0,s-1).join(".");a.nestedProperty(i,u).get().splice(l,1)}else c&&void 0===t.get()?(void 0===t.get()&&(n[t.astr]=null),t.set(e)):t.set(e)};var g=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function m(t){var e=t.search(g);if(e>0)return t.substr(0,e)}n.hasParent=function(t,e){for(var n=m(e);n;){if(n in t)return!0;n=m(n)}return!1};var v=["x","y","z"];n.clearAxisTypes=function(t,e,n){for(var r=0;r<e.length;r++)for(var i=t._fullData[r],o=0;o<3;o++){var s=u(t,i,v[o]);if(s&&"log"!==s.type){var l=s._name,c=s._id.substr(1);if("scene"===c.substr(0,5)){if(void 0!==n[c])continue;l=c+"."+l}var d=l+".type";void 0===n[l]&&void 0===n[d]&&a.nestedProperty(t.layout,d).set(null)}}}},{"../components/color":34,"../lib":151,"../plots/cartesian/axis_ids":197,"../plots/plots":226,"../registry":233,"fast-isnumeric":4,"gl-mat4/fromQuat":5}],180:[function(t,e,n){"use strict";var r=t("../lib/nested_property"),i=t("../lib/is_plain_object"),o=t("../lib/noop"),a=t("../lib/loggers"),s=t("../lib/search").sorterAsc,l=t("../registry");n.containerArrayMatch=t("./container_array_match");var c=n.isAddVal=function(t){return"add"===t||i(t)},u=n.isRemoveVal=function(t){return null===t||"remove"===t};n.applyContainerArrayChanges=function(t,e,n,i){var d=e.astr,h=l.getComponentMethod(d,"supplyLayoutDefaults"),f=l.getComponentMethod(d,"draw"),p=l.getComponentMethod(d,"drawOne"),g=i.replot||i.recalc||h===o||f===o,m=t.layout,v=t._fullLayout;if(n[""]){Object.keys(n).length>1&&a.warn("Full array edits are incompatible with other edits",d);var y=n[""][""];if(u(y))e.set(null);else{if(!Array.isArray(y))return a.warn("Unrecognized full array edit value",d,y),!0;e.set(y)}return!g&&(h(m,v),f(t),!0)}var _,x,b,w,k,T,M,A=Object.keys(n).map(Number).sort(s),L=e.get(),S=L||[],C=r(v,d).get(),P=[],z=-1,D=S.length;for(_=0;_<A.length;_++)if(w=n[b=A[_]],k=Object.keys(w),T=w[""],M=c(T),b<0||b>S.length-(M?0:1))a.warn("index out of range",d,b);else if(void 0!==T)k.length>1&&a.warn("Insertion & removal are incompatible with edits to the same index.",d,b),u(T)?P.push(b):M?("add"===T&&(T={}),S.splice(b,0,T),C&&C.splice(b,0,{})):a.warn("Unrecognized full object edit value",d,b,T),-1===z&&(z=b);else for(x=0;x<k.length;x++)r(S[b],k[x]).set(w[k[x]]);for(_=P.length-1;_>=0;_--)S.splice(P[_],1),C&&C.splice(P[_],1);if(S.length?L||e.set(S):e.set(null),g)return!1;if(h(m,v),p!==o){var E;if(-1===z)E=A;else{for(D=Math.max(S.length,D),E=[],_=0;_<A.length&&!((b=A[_])>=z);_++)E.push(b);for(_=z;_<D;_++)E.push(_)}for(_=0;_<E.length;_++)p(t,E[_])}else f(t);return!0}},{"../lib/is_plain_object":153,"../lib/loggers":156,"../lib/nested_property":159,"../lib/noop":160,"../lib/search":169,"../registry":233,"./container_array_match":177}],181:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),o=t("has-hover"),a=t("../plotly"),s=t("../lib"),l=t("../lib/events"),c=t("../lib/queue"),u=t("../registry"),d=t("./plot_schema"),h=t("../plots/plots"),f=t("../plots/polar/legacy"),p=t("../plots/cartesian/graph_interact"),g=t("../components/drawing"),m=t("../components/color"),v=t("../components/errorbars"),y=t("../constants/xmlns_namespaces"),_=t("../lib/svg_text_utils"),x=t("./manage_arrays"),b=t("./helpers"),w=t("./subroutines"),k=t("./edit_types"),T=t("../plots/cartesian/constants"),M=t("../plots/cartesian/constraints"),A=M.enforce,L=M.clean,S=t("../plots/cartesian/axis_ids"),C=0;function P(t,e){try{t._fullLayout._paper.style("background",e)}catch(t){s.error(t)}}function z(t,e){P(t,m.combine(e,"white"))}function D(t,e){t._context||(t._context=s.extendDeep({},a.defaultConfig));var n,r,i,l=t._context;if(e){for(r=Object.keys(e),n=0;n<r.length;n++)"editable"!==(i=r[n])&&"edits"!==i&&i in l&&("setBackground"===i&&"opaque"===e[i]?l[i]=z:l[i]=e[i]);e.plot3dPixelRatio&&!l.plotGlPixelRatio&&(l.plotGlPixelRatio=l.plot3dPixelRatio);var c=e.editable;if(void 0!==c)for(l.editable=c,r=Object.keys(l.edits),n=0;n<r.length;n++)l.edits[r[n]]=c;if(e.edits)for(r=Object.keys(e.edits),n=0;n<r.length;n++)(i=r[n])in l.edits&&(l.edits[i]=e.edits[i])}l.staticPlot&&(l.editable=!1,l.edits={},l.autosizable=!1,l.scrollZoom=!1,l.doubleClick=!1,l.showTips=!1,l.showLink=!1,l.displayModeBar=!1),"hover"!==l.displayModeBar||o||(l.displayModeBar=!0),"transparent"!==l.setBackground&&"function"==typeof l.setBackground||(l.setBackground=P)}function E(t,e){var n,r,i=e+1,o=[];for(n=0;n<t.length;n++)(r=t[n])<0?o.push(i+r):o.push(r);return o}function O(t,e,n){var r,i;for(r=0;r<e.length;r++){if((i=e[r])!==parseInt(i,10))throw new Error("all values in "+n+" must be integers");if(i>=t.data.length||i<-t.data.length)throw new Error(n+" must be valid indices for gd.data.");if(e.indexOf(i,r+1)>-1||i>=0&&e.indexOf(-t.data.length+i)>-1||i<0&&e.indexOf(t.data.length+i)>-1)throw new Error("each index in "+n+" must be unique.")}}function I(t,e,n){if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("currentIndices is a required argument.");if(Array.isArray(e)||(e=[e]),O(t,e,"currentIndices"),void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&O(t,n,"newIndices"),void 0!==n&&e.length!==n.length)throw new Error("current and new indices must be of equal length.")}function j(t,e,n,r,o,a){!function(t,e,n,r){var i=s.isPlainObject(r);if(!Array.isArray(t.data))throw new Error("gd.data must be an array");if(!s.isPlainObject(e))throw new Error("update must be a key:value object");if(void 0===n)throw new Error("indices must be an integer or array of integers");for(var o in O(t,n,"indices"),e){if(!Array.isArray(e[o])||e[o].length!==n.length)throw new Error("attribute "+o+" must be an array of length equal to indices array length");if(i&&(!(o in r)||!Array.isArray(r[o])||r[o].length!==e[o].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(t,e,n,r);for(var l,c,u,d=function(t,e,n,r){var o,a,l,c,u,d=s.isPlainObject(r),h=[];for(var f in Array.isArray(n)||(n=[n]),n=E(n,t.data.length-1),e)for(var p=0;p<n.length;p++){if(o=t.data[n[p]],a=(l=s.nestedProperty(o,f)).get(),c=e[f][p],!Array.isArray(c))throw new Error("attribute: "+f+" index: "+p+" must be an array");if(!Array.isArray(a))throw new Error("cannot extend missing or non-array attribute: "+f);u=d?r[f][p]:r,i(u)||(u=-1),h.push({prop:l,target:a,insert:c,maxp:Math.floor(u)})}return h}(t,e,n,r),h=[],f={},p={},g=0;g<d.length;g++)c=d[g].prop,u=d[g].maxp,l=o(d[g].target,d[g].insert),u>=0&&u<l.length&&(h=a(l,u)),u=d[g].target.length,c.set(l),Array.isArray(f[c.astr])||(f[c.astr]=[]),Array.isArray(p[c.astr])||(p[c.astr]=[]),f[c.astr].push(h),p[c.astr].push(u);return{update:f,maxPoints:p}}function N(t){return void 0===t?null:t}function R(t,e,n){var r,i,o=t._fullLayout,l=t._fullData,c=t.data,f=k.traceFlags(),p={},g={};function m(){return n.map(function(){})}function v(t){var e=a.Axes.id2name(t);-1===i.indexOf(e)&&i.push(e)}function y(t){return"LAYOUT"+t+".autorange"}function _(t){return"LAYOUT"+t+".range"}function x(r,i,o){var a;Array.isArray(r)?r.forEach(function(t){x(t,i,o)}):r in e||b.hasParent(e,r)||(a="LAYOUT"===r.substr(0,6)?s.nestedProperty(t.layout,r.replace("LAYOUT","")):s.nestedProperty(c[n[o]],r),r in g||(g[r]=m()),void 0===g[r][o]&&(g[r][o]=N(a.get())),void 0!==i&&a.set(i))}for(var w in e){if(b.hasParent(e,w))throw new Error("cannot set "+w+"and a parent attribute simultaneously");var T,M,A,L,S,C,P=e[w];if(p[w]=P,"LAYOUT"!==w.substr(0,6)){for(g[w]=m(),r=0;r<n.length;r++)if(T=c[n[r]],M=l[n[r]],L=(A=s.nestedProperty(T,w)).get(),void 0!==(S=Array.isArray(P)?P[r%P.length]:P)){if((C=d.getTraceValObject(M,A.parts))&&C.impliedEdits&&null!==S)for(var z in C.impliedEdits)x(s.relativeAttr(w,z),C.impliedEdits[z],r);else if("colorbar.thicknessmode"===w&&A.get()!==S&&-1!==["fraction","pixels"].indexOf(S)&&M.colorbar){var D=-1!==["top","bottom"].indexOf(M.colorbar.orient)?o.height-o.margin.t-o.margin.b:o.width-o.margin.l-o.margin.r;x("colorbar.thickness",M.colorbar.thickness*("fraction"===S?1/D:D),r)}else if("colorbar.lenmode"===w&&A.get()!==S&&-1!==["fraction","pixels"].indexOf(S)&&M.colorbar){var E=-1!==["top","bottom"].indexOf(M.colorbar.orient)?o.width-o.margin.l-o.margin.r:o.height-o.margin.t-o.margin.b;x("colorbar.len",M.colorbar.len*("fraction"===S?1/E:E),r)}else"colorbar.tick0"!==w&&"colorbar.dtick"!==w||x("colorbar.tickmode","linear",r);if("type"===w&&"pie"===S!=("pie"===L)){var O="x",I="y";"bar"!==S&&"bar"!==L||"h"!==T.orientation||(O="y",I="x"),s.swapAttrs(T,["?","?src"],"labels",O),s.swapAttrs(T,["d?","?0"],"label",O),s.swapAttrs(T,["?","?src"],"values",I),"pie"===L?(s.nestedProperty(T,"marker.color").set(s.nestedProperty(T,"marker.colors").get()),o._pielayer.selectAll("g.trace").remove()):u.traceIs(T,"cartesian")&&s.nestedProperty(T,"marker.colors").set(s.nestedProperty(T,"marker.color").get())}g[w][r]=N(L);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(w)){if("orientation"===w){A.set(S);var j=T.x&&!T.y?"h":"v";if((A.get()||j)===M.orientation)continue}else"orientationaxes"===w&&(T.orientation={v:"h",h:"v"}[M.orientation]);b.swapXYData(T),f.calc=f.clearAxisTypes=!0}else-1!==h.dataArrayContainers.indexOf(A.parts[0])?(b.manageArrayContainers(A,S,g),f.calc=!0):(C?C.arrayOk&&(Array.isArray(S)||Array.isArray(L))?f.calc=!0:k.update(f,C):f.calc=!0,A.set(S))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(w)&&a.Axes.swap(t,n),"orientationaxes"===w){var R=s.nestedProperty(t.layout,"hovermode");"x"===R.get()?R.set("y"):"y"===R.get()&&R.set("x")}if(-1!==["orientation","type"].indexOf(w)){for(i=[],r=0;r<n.length;r++){var B=c[n[r]];u.traceIs(B,"cartesian")&&(v(B.xaxis||"x"),v(B.yaxis||"y"),"type"===w&&x(["autobinx","autobiny"],!0,r))}x(i.map(y),!0,0),x(i.map(_),[0,1],0)}}else A=s.nestedProperty(t.layout,w.replace("LAYOUT","")),g[w]=[N(A.get())],A.set(Array.isArray(P)?P[0]:P),f.calc=!0}var F=!1,H=a.Axes.list(t);for(r=0;r<H.length;r++)if(H[r].autorange){F=!0;break}return(f.calc||f.calcIfAutorange&&F)&&(f.clearCalc=!0),(f.calc||f.plot||f.calcIfAutorange)&&(f.fullReplot=!0),{flags:f,undoit:g,redoit:p,traces:n,eventData:s.extendDeepNoArrays([],[p,n])}}function B(t,e){var n,r,i,o=t.layout,l=t._fullLayout,c=Object.keys(e),f=a.Axes.list(t),p={};for(r=0;r<c.length;r++)if(0===c[r].indexOf("allaxes")){for(i=0;i<f.length;i++){var g=f[i]._id.substr(1),m=-1!==g.indexOf("scene")?g+".":"",v=c[r].replace("allaxes",m+f[i]._name);e[v]||(e[v]=e[c[r]])}delete e[c[r]]}var y=k.layoutFlags(),_={},w={};function M(t,n){if(Array.isArray(t))t.forEach(function(t){M(t,n)});else if(!(t in e||b.hasParent(e,t))){var r=s.nestedProperty(o,t);t in w||(w[t]=N(r.get())),void 0!==n&&r.set(n)}}var A,L={};function C(t){var e=S.name2id(t.split(".")[0]);return L[e]=1,e}for(var P in e){if(b.hasParent(e,P))throw new Error("cannot set "+P+"and a parent attribute simultaneously");var z=s.nestedProperty(o,P),D=e[P],E=z.parts.length,O="string"==typeof z.parts[E-1]?E-1:E-2,I=z.parts[O],j=z.parts[O-1]+"."+I,R=z.parts.slice(0,O).join("."),B=s.nestedProperty(t.layout,R).get(),H=s.nestedProperty(l,R).get(),q=z.get();if(void 0!==D){_[P]=D,w[P]="reverse"===I?D:N(q);var Z=d.getLayoutValObject(l,z.parts);if(Z&&Z.impliedEdits&&null!==D)for(var V in Z.impliedEdits)M(s.relativeAttr(P,V),Z.impliedEdits[V]);if(-1!==["width","height"].indexOf(P)&&null===D)l[P]=t._initialAutoSize[P];else if(j.match(/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/))C(j),s.nestedProperty(l,R+"._inputRange").set(null);else if(j.match(/^[xyz]axis[0-9]*\.autorange$/)){C(j),s.nestedProperty(l,R+"._inputRange").set(null);var U=s.nestedProperty(l,R).get();U._inputDomain&&(U._input.domain=U._inputDomain.slice())}else j.match(/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/)&&s.nestedProperty(l,R+"._inputDomain").set(null);if("type"===I){var W=B,G="linear"===H.type&&"log"===D,X="log"===H.type&&"linear"===D;if(G||X){if(W&&W.range)if(H.autorange)G&&(W.range=W.range[1]>W.range[0]?[1,2]:[2,1]);else{var Y=W.range[0],$=W.range[1];G?(Y<=0&&$<=0&&M(R+".autorange",!0),Y<=0?Y=$/1e6:$<=0&&($=Y/1e6),M(R+".range[0]",Math.log(Y)/Math.LN10),M(R+".range[1]",Math.log($)/Math.LN10)):(M(R+".range[0]",Math.pow(10,Y)),M(R+".range[1]",Math.pow(10,$)))}else M(R+".autorange",!0);Array.isArray(l._subplots.polar)&&l._subplots.polar.length&&l[z.parts[0]]&&"radialaxis"===z.parts[1]&&delete l[z.parts[0]]._subplot.viewInitial["radialaxis.range"],u.getComponentMethod("annotations","convertCoords")(t,H,D,M),u.getComponentMethod("images","convertCoords")(t,H,D,M)}else M(R+".autorange",!0),M(R+".range",null);s.nestedProperty(l,R+"._inputRange").set(null)}else if(I.match(T.AX_NAME_PATTERN)){var J=s.nestedProperty(l,P).get(),Q=(D||{}).type;Q&&"-"!==Q||(Q="linear"),u.getComponentMethod("annotations","convertCoords")(t,J,Q,M),u.getComponentMethod("images","convertCoords")(t,J,Q,M)}var K=x.containerArrayMatch(P);if(K){n=K.array,r=K.index;var tt=K.property,et=(s.nestedProperty(o,n)||[])[r]||{},nt=et,rt=Z||{editType:"calc"},it=-1!==rt.editType.indexOf("calcIfAutorange");""===r?(it?y.calc=!0:k.update(y,rt),it=!1):""===tt&&(nt=D,x.isAddVal(D)?w[P]=null:x.isRemoveVal(D)?(w[P]=et,nt=et):s.warn("unrecognized full object value",e)),it&&(F(t,nt,"x")||F(t,nt,"y"))?y.calc=!0:k.update(y,rt),p[n]||(p[n]={});var ot=p[n][r];ot||(ot=p[n][r]={}),ot[tt]=D,delete e[P]}else"reverse"===I?(B.range?B.range.reverse():(M(R+".autorange",!0),B.range=[1,0]),H.autorange?y.calc=!0:y.plot=!0):((!l._has("gl2d")&&!l._has("regl")||"dragmode"!==P||"lasso"!==D&&"select"!==D||"lasso"===q||"select"===q)&&Z?k.update(y,Z):y.calc=!0,z.set(D))}}for(n in p){x.applyContainerArrayChanges(t,s.nestedProperty(o,n),p[n],y)||(y.plot=!0)}var at=l._axisConstraintGroups||[];for(A in L)for(r=0;r<at.length;r++){var st=at[r];if(st[A])for(var lt in y.calc=!0,st)L[lt]||(S.getFromId(t,lt)._constraintShrinkable=!0)}var ct=l.width,ut=l.height;return t.layout.autosize&&h.plotAutoSize(t,t.layout,l),(e.height||e.width||l.width!==ct||l.height!==ut)&&(y.calc=!0),(y.plot||y.calc)&&(y.layoutReplot=!0),{flags:y,undoit:w,redoit:_,eventData:s.extendDeep({},_)}}function F(t,e,n){if(!s.isPlainObject(e))return!1;var r=e[n+"ref"]||n,i=a.Axes.getFromId(t,r);return i||r.charAt(0)!==n||(i=a.Axes.getFromId(t,n)),(i||{}).autorange}function H(t,e,n,r){var i,o,a=r.getValObject,l=r.flags,c=r.immutable,u=r.inArray,d=r.arrayIndex,h=r.gd,f=r.autoranged;function p(){var t=i.editType;-1!==t.indexOf("calcIfAutorange")&&(f||void 0===f&&(F(h,e,"x")||F(h,e,"y")))?l.calc=!0:u&&-1!==t.indexOf("arraydraw")?s.pushUnique(l.arrays[u],d):k.update(l,i)}function g(t){return"data_array"===t.valType||t.arrayOk}var m=e._fullInput,v=t._fullInput;for(o in m&&m!==e&&(e=m),v&&v!==t&&(t=v),t){if(l.calc)return;var y=t[o],_=e[o];if("_"!==o.charAt(0)&&"function"!=typeof y&&y!==_){if("tick0"===o||"dtick"===o){var x=e.tickmode;if("auto"===x||"array"===x||!x)continue}if(("range"!==o||!e.autorange)&&("zmin"!==o&&"zmax"!==o||"contourcarpet"!==e.type)){var b=n.concat(o);if(i=a(b)){var w,T=i.valType,M=g(i),A=Array.isArray(y),L=Array.isArray(_);if(A&&L){var S="_input_"+o,C=t[S],P=e[S];if(Array.isArray(C)&&C===P)continue}if(void 0===_)M&&A?l.calc=!0:p();else if(i._isLinkedToArray){var z=[],D=!1;u||(l.arrays[o]=z);var E=Math.min(y.length,_.length),O=Math.max(y.length,_.length);if(E!==O){if("arraydraw"!==i.editType){p();continue}D=!0}for(w=0;w<E;w++)H(y[w],_[w],b.concat(w),s.extendFlat({inArray:o,arrayIndex:w},r));if(D)for(w=E;w<O;w++)z.push(w)}else!T&&s.isPlainObject(y)?H(y,_,b,r):M?A&&L?c&&(l.calc=!0):A!==L?l.calc=!0:p():A&&L&&y.length===_.length&&String(y)===String(_)||p()}}}}for(o in e)if(!(o in t)){if(g(i=a(n.concat(o)))&&Array.isArray(e[o]))return void(l.calc=!0);p()}}function q(t){var e=r.select(t),n=t._fullLayout;if(n._container=e.selectAll(".plot-container").data([0]),n._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),n._paperdiv=n._container.selectAll(".svg-container").data([0]),n._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative"),n._glcontainer=n._paperdiv.selectAll(".gl-container").data([{}]),n._glcontainer.enter().append("div").classed("gl-container",!0),n._glcanvas=null,n._paperdiv.selectAll(".main-svg").remove(),n._paper=n._paperdiv.insert("svg",":first-child").classed("main-svg",!0),n._toppaper=n._paperdiv.append("svg").classed("main-svg",!0),!n._uid){var i=[];r.selectAll("defs").each(function(){this.id&&i.push(this.id.split("-")[1])}),n._uid=s.randstr(i)}n._paperdiv.selectAll(".main-svg").attr(y.svgAttrs),n._defs=n._paper.append("defs").attr("id","defs-"+n._uid),n._clips=n._defs.append("g").classed("clips",!0),n._topdefs=n._toppaper.append("defs").attr("id","topdefs-"+n._uid),n._topclips=n._topdefs.append("g").classed("clips",!0),n._bgLayer=n._paper.append("g").classed("bglayer",!0),n._draggers=n._paper.append("g").classed("draglayer",!0);var o=n._paper.append("g").classed("layer-below",!0);n._imageLowerLayer=o.append("g").classed("imagelayer",!0),n._shapeLowerLayer=o.append("g").classed("shapelayer",!0),n._cartesianlayer=n._paper.append("g").classed("cartesianlayer",!0),n._polarlayer=n._paper.append("g").classed("polarlayer",!0),n._ternarylayer=n._paper.append("g").classed("ternarylayer",!0),n._geolayer=n._paper.append("g").classed("geolayer",!0),n._pielayer=n._paper.append("g").classed("pielayer",!0),n._glimages=n._paper.append("g").classed("glimages",!0);var a=n._toppaper.append("g").classed("layer-above",!0);n._imageUpperLayer=a.append("g").classed("imagelayer",!0),n._shapeUpperLayer=a.append("g").classed("shapelayer",!0),n._infolayer=n._toppaper.append("g").classed("infolayer",!0),n._menulayer=n._toppaper.append("g").classed("menulayer",!0),n._zoomlayer=n._toppaper.append("g").classed("zoomlayer",!0),n._hoverlayer=n._toppaper.append("g").classed("hoverlayer",!0),t.emit("plotly_framework")}a.plot=function(t,e,n,i){var o;if(t=s.getGraphDiv(t),l.init(t),s.isPlainObject(e)){var c=e;e=c.data,n=c.layout,i=c.config,o=c.frames}if(!1===l.triggerHandler(t,"plotly_beforeplot",[e,n,i]))return Promise.reject();e||n||s.isPlotDiv(t)||s.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",t),D(t,i),n||(n={}),r.select(t).classed("js-plotly-plot",!0),g.makeTester(),Array.isArray(t._promises)||(t._promises=[]);var d=0===(t.data||[]).length&&Array.isArray(e);if(Array.isArray(e)&&(b.cleanData(e,t.data),d?t.data=e:t.data.push.apply(t.data,e),t.empty=!1),t.layout&&!d||(t.layout=b.cleanLayout(n)),t._dragging&&!t._transitioning)return t._replotPending=!0,Promise.reject();t._replotPending=!1,h.supplyDefaults(t);var m=t._fullLayout;if(!m._has("polar")&&e&&e[0]&&e[0].r)return s.log("Legacy polar charts are deprecated!"),function(t,e,n){var i=r.select(t).selectAll(".plot-container").data([0]);i.enter().insert("div",":first-child").classed("plot-container plotly",!0);var o=i.selectAll(".svg-container").data([0]);o.enter().append("div").classed("svg-container",!0).style("position","relative"),o.html(""),e&&(t.data=e);n&&(t.layout=n);f.manager.fillLayout(t),o.style({width:t._fullLayout.width+"px",height:t._fullLayout.height+"px"}),t.framework=f.manager.framework(t),t.framework({data:t.data,layout:t.layout},o.node()),t.framework.setUndoPoint();var a=t.framework.svg(),l=1,c=t._fullLayout.title;""!==c&&c||(l=0);var u=function(){this.call(_.convertToTspans,t)},d=a.select(".title-group text").call(u);if(t._context.edits.titleText){var p=s._(t,"Click to enter Plot title");c&&c!==p||(l=.2,d.attr({"data-unformatted":p}).text(p).style({opacity:l}).on("mouseover.opacity",function(){r.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){r.select(this).transition().duration(1e3).style("opacity",0)}));var g=function(){this.call(_.makeEditable,{gd:t}).on("edit",function(e){t.framework({layout:{title:e}}),this.text(e).call(u),this.call(g)}).on("cancel",function(){var t=this.attr("data-unformatted");this.text(t).call(u)})};d.call(g)}return t._context.setBackground(t,t._fullLayout.paper_bgcolor),h.addLinks(t),Promise.resolve()}(t,e,n);m._replotting=!0,d&&q(t),t.framework!==q&&(t.framework=q,q(t)),g.initGradients(t),d&&a.Axes.saveShowSpikeInitial(t);var y=!t.calcdata||t.calcdata.length!==(t._fullData||[]).length;y&&h.doCalcdata(t);for(var x=0;x<t.calcdata.length;x++)t.calcdata[x][0].trace=t._fullData[x];var k=JSON.stringify(m._size);function T(){var e,n,r,i=t.calcdata;for(u.getComponentMethod("legend","draw")(t),u.getComponentMethod("rangeselector","draw")(t),u.getComponentMethod("sliders","draw")(t),u.getComponentMethod("updatemenus","draw")(t),e=0;e<i.length;e++)!0===(r=(n=i[e])[0].trace).visible&&r._module.colorbar?r._module.colorbar(t,n):h.autoMargin(t,"cb"+r.uid);return h.doAutoMargin(t),h.previousPromises(t)}function M(){if(!t._transitioning){for(var e=a.Axes.list(t,"",!0),n=0;n<e.length;n++){var r=e[n];L(t,r),a.Axes.doAutoRange(r)}A(t),d&&a.Axes.saveRangeInitial(t)}}var S=[h.previousPromises,function(){if(o)return a.addFrames(t,o)},function(){for(var e=m._basePlotModules,n=0;n<e.length;n++)e[n].drawFramework&&e[n].drawFramework(t);return!m._glcanvas&&m._has("gl")&&(m._glcanvas=m._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(t){return t.key}),m._glcanvas.enter().append("canvas").attr("class",function(t){return"gl-canvas gl-canvas-"+t.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"visible","pointer-events":"none"})),m._glcanvas&&m._glcanvas.attr("width",m.width).attr("height",m.height),s.syncOrAsync([w.layoutStyles],t)},T,function(){if(JSON.stringify(m._size)!==k)return s.syncOrAsync([T,w.layoutStyles],t)},function(){if(y){var e,n,r,i=m._subplots.cartesian,o=m._modules,a=[];for(r=0;r<o.length;r++)s.pushUnique(a,o[r].setPositions);if(a.length)for(n=0;n<i.length;n++)for(e=m._plots[i[n]],r=0;r<a.length;r++)a[r](t,e);return v.calc(t),s.syncOrAsync([u.getComponentMethod("shapes","calcAutorange"),u.getComponentMethod("annotations","calcAutorange"),M,u.getComponentMethod("rangeslider","calcAutorange")],t)}A(t)},w.layoutStyles,function(){return a.Axes.doTicks(t,"redraw")},function(){var e,n=t.calcdata,r=m._infolayer.selectAll("g.rangeslider-container");for(e=0;e<n.length;e++){var i=n[e][0].trace,o=!0===i.visible,a=i.uid;if(!o||!u.traceIs(i,"2dMap")){var s=".hm"+a+",.contour"+a+",#clip"+a;m._paper.selectAll(s).remove(),r.selectAll(s).remove()}o&&i._module.colorbar||m._infolayer.selectAll(".cb"+a).remove()}var l=m._basePlotModules;for(e=0;e<l.length;e++)l[e].plot(t);var c=m._paper.selectAll(".layer-subplot");return m._shapeSubplotLayers=c.selectAll(".shapelayer"),h.style(t),u.getComponentMethod("shapes","draw")(t),u.getComponentMethod("annotations","draw")(t),h.addLinks(t),m._replotting=!1,h.previousPromises(t)},function(){u.getComponentMethod("shapes","draw")(t),u.getComponentMethod("images","draw")(t),u.getComponentMethod("annotations","draw")(t),u.getComponentMethod("legend","draw")(t),u.getComponentMethod("rangeslider","draw")(t),u.getComponentMethod("rangeselector","draw")(t),u.getComponentMethod("sliders","draw")(t),u.getComponentMethod("updatemenus","draw")(t)},p,h.rehover,h.previousPromises],C=s.syncOrAsync(S,t);return C&&C.then||(C=Promise.resolve()),C.then(function(){return t.emit("plotly_afterplot"),t})},a.redraw=function(t){if(t=s.getGraphDiv(t),!s.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);return b.cleanData(t.data,t.data),b.cleanLayout(t.layout),t.calcdata=void 0,a.plot(t).then(function(){return t.emit("plotly_redraw"),t})},a.newPlot=function(t,e,n,r){return t=s.getGraphDiv(t),h.cleanPlot([],{},t._fullData||{},t._fullLayout||{}),h.purge(t),a.plot(t,e,n,r)},a.extendTraces=function t(e,n,r,i){var o=j(e=s.getGraphDiv(e),n,r,i,function(t,e){return t.concat(e)},function(t,e){return t.splice(0,t.length-e)}),l=a.redraw(e),u=[e,o.update,r,o.maxPoints];return c.add(e,a.prependTraces,u,t,arguments),l},a.prependTraces=function t(e,n,r,i){var o=j(e=s.getGraphDiv(e),n,r,i,function(t,e){return e.concat(t)},function(t,e){return t.splice(e,t.length)}),l=a.redraw(e),u=[e,o.update,r,o.maxPoints];return c.add(e,a.extendTraces,u,t,arguments),l},a.addTraces=function t(e,n,r){e=s.getGraphDiv(e);var i,o,l=[],u=a.deleteTraces,d=t,h=[e,l],f=[e,n];for(function(t,e,n){var r,i;if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("traces must be defined.");for(Array.isArray(e)||(e=[e]),r=0;r<e.length;r++)if("object"!=typeof(i=e[r])||Array.isArray(i)||null===i)throw new Error("all values in traces array must be non-array objects");if(void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&n.length!==e.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(e,n,r),Array.isArray(n)||(n=[n]),n=n.map(function(t){return s.extendFlat({},t)}),b.cleanData(n,e.data),i=0;i<n.length;i++)e.data.push(n[i]);for(i=0;i<n.length;i++)l.push(-n.length+i);if(void 0===r)return o=a.redraw(e),c.add(e,u,h,d,f),o;Array.isArray(r)||(r=[r]);try{I(e,l,r)}catch(t){throw e.data.splice(e.data.length-n.length,n.length),t}return c.startSequence(e),c.add(e,u,h,d,f),o=a.moveTraces(e,l,r),c.stopSequence(e),o},a.deleteTraces=function t(e,n){e=s.getGraphDiv(e);var r,i,o=[],l=a.addTraces,u=t,d=[e,o,n],h=[e,n];if(void 0===n)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(n)||(n=[n]),O(e,n,"indices"),(n=E(n,e.data.length-1)).sort(s.sorterDes),r=0;r<n.length;r+=1)i=e.data.splice(n[r],1)[0],o.push(i);var f=a.redraw(e);return c.add(e,l,d,u,h),f},a.moveTraces=function t(e,n,r){var i,o=[],l=[],u=t,d=t,h=[e=s.getGraphDiv(e),r,n],f=[e,n,r];if(I(e,n,r),n=Array.isArray(n)?n:[n],void 0===r)for(r=[],i=0;i<n.length;i++)r.push(-n.length+i);for(r=Array.isArray(r)?r:[r],n=E(n,e.data.length-1),r=E(r,e.data.length-1),i=0;i<e.data.length;i++)-1===n.indexOf(i)&&o.push(e.data[i]);for(i=0;i<n.length;i++)l.push({newIndex:r[i],trace:e.data[n[i]]});for(l.sort(function(t,e){return t.newIndex-e.newIndex}),i=0;i<l.length;i+=1)o.splice(l[i].newIndex,0,l[i].trace);e.data=o;var p=a.redraw(e);return c.add(e,u,h,d,f),p},a.restyle=function t(e,n,r,i){e=s.getGraphDiv(e),b.clearPromiseQueue(e);var o={};if("string"==typeof n)o[n]=r;else{if(!s.isPlainObject(n))return s.warn("Restyle fail.",n,r,i),Promise.reject();o=s.extendFlat({},n),void 0===i&&(i=r)}Object.keys(o).length&&(e.changed=!0);var l=b.coerceTraceIndices(e,i),u=R(e,o,l),d=u.flags;d.clearCalc&&(e.calcdata=void 0),d.clearAxisTypes&&b.clearAxisTypes(e,l,{});var f=[];d.fullReplot?f.push(a.plot):(f.push(h.previousPromises),h.supplyDefaults(e),d.style&&f.push(w.doTraceStyle),d.colorbars&&f.push(w.doColorBars)),f.push(h.rehover),c.add(e,t,[e,u.undoit,u.traces],t,[e,u.redoit,u.traces]);var p=s.syncOrAsync(f,e);return p&&p.then||(p=Promise.resolve()),p.then(function(){return e.emit("plotly_restyle",u.eventData),e})},a.relayout=function t(e,n,r){if(e=s.getGraphDiv(e),b.clearPromiseQueue(e),e.framework&&e.framework.isPolar)return Promise.resolve(e);var i={};if("string"==typeof n)i[n]=r;else{if(!s.isPlainObject(n))return s.warn("Relayout fail.",n,r),Promise.reject();i=s.extendFlat({},n)}Object.keys(i).length&&(e.changed=!0);var o=B(e,i),a=o.flags;a.calc&&(e.calcdata=void 0);var l=[h.previousPromises];a.layoutReplot?l.push(w.layoutReplot):Object.keys(i).length&&(h.supplyDefaults(e),a.legend&&l.push(w.doLegend),a.layoutstyle&&l.push(w.layoutStyles),a.ticks&&l.push(w.doTicksRelayout),a.modebar&&l.push(w.doModeBar),a.camera&&l.push(w.doCamera)),l.push(h.rehover),c.add(e,t,[e,o.undoit],t,[e,o.redoit]);var u=s.syncOrAsync(l,e);return u&&u.then||(u=Promise.resolve(e)),u.then(function(){return e.emit("plotly_relayout",o.eventData),e})},a.update=function t(e,n,r,i){if(e=s.getGraphDiv(e),b.clearPromiseQueue(e),e.framework&&e.framework.isPolar)return Promise.resolve(e);s.isPlainObject(n)||(n={}),s.isPlainObject(r)||(r={}),Object.keys(n).length&&(e.changed=!0),Object.keys(r).length&&(e.changed=!0);var o=b.coerceTraceIndices(e,i),l=R(e,s.extendFlat({},n),o),u=l.flags,d=B(e,s.extendFlat({},r)),f=d.flags;(u.clearCalc||f.calc)&&(e.calcdata=void 0),u.clearAxisTypes&&b.clearAxisTypes(e,o,r);var p=[];if(u.fullReplot&&f.layoutReplot){var g=e.data,m=e.layout;e.data=void 0,e.layout=void 0,p.push(function(){return a.plot(e,g,m)})}else u.fullReplot?p.push(a.plot):f.layoutReplot?p.push(w.layoutReplot):(p.push(h.previousPromises),h.supplyDefaults(e),u.style&&p.push(w.doTraceStyle),u.colorbars&&p.push(w.doColorBars),f.legend&&p.push(w.doLegend),f.layoutstyle&&p.push(w.layoutStyles),f.ticks&&p.push(w.doTicksRelayout),f.modebar&&p.push(w.doModeBar),f.camera&&p.push(w.doCamera));p.push(h.rehover),c.add(e,t,[e,l.undoit,d.undoit,l.traces],t,[e,l.redoit,d.redoit,l.traces]);var v=s.syncOrAsync(p,e);return v&&v.then||(v=Promise.resolve(e)),v.then(function(){return e.emit("plotly_update",{data:l.eventData,layout:d.eventData}),e})},a.react=function(t,e,n,r){var i,o;var l=(t=s.getGraphDiv(t))._fullData,c=t._fullLayout;if(s.isPlotDiv(t)&&l&&c){if(s.isPlainObject(e)){var f=e;e=f.data,n=f.layout,r=f.config,i=f.frames}var p=!1;if(r){var g=s.extendDeep({},t._context);t._context=void 0,D(t,r),p=function t(e,n){var r;for(r in e){var i=e[r],o=n[r];if(i!==o)if(s.isPlainObject(i)&&s.isPlainObject(o)){if(t(i,o))return!0}else{if(!Array.isArray(i)||!Array.isArray(o))return!0;if(i.length!==o.length)return!0;for(var a=0;a<i.length;a++)if(i[a]!==o[a]){if(!s.isPlainObject(i[a])||!s.isPlainObject(o[a]))return!0;if(t(i[a],o[a]))return!0}}}}(g,t._context)}t.data=e||[],b.cleanData(t.data,[]),t.layout=n||{},b.cleanLayout(t.layout),h.supplyDefaults(t);var m=t._fullData,v=t._fullLayout,y=void 0===v.datarevision,_=function(t,e,n,r){if(e.length!==n.length)return{fullReplot:!0,clearCalc:!0};var i,o,s=k.traceFlags();s.arrays={};var l={getValObject:function(t){return d.getTraceValObject(o,t)},flags:s,immutable:r,gd:t};for(i=0;i<e.length;i++)o=n[i],l.autoranged=!!o.xaxis&&(a.Axes.getFromId(t,o.xaxis).autorange||a.Axes.getFromId(t,o.yaxis).autorange),H(e[i],o,[],l);(s.calc||s.plot||s.calcIfAutorange)&&(s.fullReplot=!0);return s}(t,l,m,y),x=function(t,e,n,r){var i=k.layoutFlags();i.arrays={},H(e,n,[],{getValObject:function(t){return d.getLayoutValObject(n,t)},flags:i,immutable:r,gd:t}),(i.plot||i.calc)&&(i.layoutReplot=!0);return i}(t,c,v,y);(_.calc||x.calc)&&(t.calcdata=void 0);var T=[];if(i&&(t._transitionData={},h.createTransitionData(t),T.push(function(){return a.addFrames(t,i)})),_.fullReplot||x.layoutReplot||p)t._fullLayout._skipDefaults=!0,T.push(a.plot);else{for(var M in x.arrays){var A=x.arrays[M];if(A.length){var L=u.getComponentMethod(M,"drawOne");if(L!==s.noop)for(var S=0;S<A.length;S++)L(t,A[S]);else{var C=u.getComponentMethod(M,"draw");if(C===s.noop)throw new Error("cannot draw components: "+M);C(t)}}}T.push(h.previousPromises),_.style&&T.push(w.doTraceStyle),_.colorbars&&T.push(w.doColorBars),x.legend&&T.push(w.doLegend),x.layoutstyle&&T.push(w.layoutStyles),x.ticks&&T.push(w.doTicksRelayout),x.modebar&&T.push(w.doModeBar),x.camera&&T.push(w.doCamera)}T.push(h.rehover),(o=s.syncOrAsync(T,t))&&o.then||(o=Promise.resolve(t))}else o=a.newPlot(t,e,n,r);return o.then(function(){return t.emit("plotly_react",{data:e,layout:n}),t})},a.animate=function(t,e,n){if(t=s.getGraphDiv(t),!s.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before animating it. For more details, see https://plot.ly/javascript/animations/");var r=t._transitionData;r._frameQueue||(r._frameQueue=[]);var i=(n=h.supplyAnimationDefaults(n)).transition,o=n.frame;function a(t,e){var n=0;return function(){if(t&&++n===e)return t()}}return void 0===r._frameWaitingCnt&&(r._frameWaitingCnt=0),new Promise(function(l,c){var u,d,f=0;function p(t){return Array.isArray(i)?f>=i.length?t.transitionOpts=i[f]:t.transitionOpts=i[0]:t.transitionOpts=i,f++,t}var g=[],m=null==e,v=Array.isArray(e);if(!m&&!v&&s.isPlainObject(e))g.push({type:"object",data:p(s.extendFlat({},e))});else if(m||-1!==["string","number"].indexOf(typeof e))for(u=0;u<r._frames.length;u++)(d=r._frames[u])&&(m||String(d.group)===String(e))&&g.push({type:"byname",name:String(d.name),data:p({name:d.name})});else if(v)for(u=0;u<e.length;u++){var y=e[u];-1!==["number","string"].indexOf(typeof y)?(y=String(y),g.push({type:"byname",name:y,data:p({name:y})})):s.isPlainObject(y)&&g.push({type:"object",data:p(s.extendFlat({},y))})}for(u=0;u<g.length;u++)if("byname"===(d=g[u]).type&&!r._frameHash[d.data.name])return s.warn('animate failure: frame not found: "'+d.data.name+'"'),void c();-1!==["next","immediate"].indexOf(n.mode)&&function(){if(0!==r._frameQueue.length){for(;r._frameQueue.length;){var e=r._frameQueue.pop();e.onInterrupt&&e.onInterrupt()}t.emit("plotly_animationinterrupted",[])}}(),"reverse"===n.direction&&g.reverse();var _=t._fullLayout._currentFrame;if(_&&n.fromcurrent){var x=-1;for(u=0;u<g.length;u++)if("byname"===(d=g[u]).type&&d.name===_){x=u;break}if(x>0&&x<g.length-1){var w=[];for(u=0;u<g.length;u++)d=g[u],("byname"!==g[u].type||u>x)&&w.push(d);g=w}}g.length>0?function(e){if(0!==e.length){for(var s=0;s<e.length;s++){var u;u="byname"===e[s].type?h.computeFrame(t,e[s].name):e[s].data;var d=(m=s,Array.isArray(o)?m>=o.length?o[0]:o[m]:o),f=(g=s,Array.isArray(i)?g>=i.length?i[0]:i[g]:i);f.duration=Math.min(f.duration,d.duration);var p={frame:u,name:e[s].name,frameOpts:d,transitionOpts:f};s===e.length-1&&(p.onComplete=a(l,2),p.onInterrupt=c),r._frameQueue.push(p)}var g,m;"immediate"===n.mode&&(r._lastFrameAt=-1/0),r._animationRaf||function(){t.emit("plotly_animating"),r._lastFrameAt=-1/0,r._timeToNext=0,r._runningTransitions=0,r._currentFrame=null;var e=function(){r._animationRaf=window.requestAnimationFrame(e),Date.now()-r._lastFrameAt>r._timeToNext&&function(){r._currentFrame&&r._currentFrame.onComplete&&r._currentFrame.onComplete();var e=r._currentFrame=r._frameQueue.shift();if(e){var n=e.name?e.name.toString():null;t._fullLayout._currentFrame=n,r._lastFrameAt=Date.now(),r._timeToNext=e.frameOpts.duration,h.transition(t,e.frame.data,e.frame.layout,b.coerceTraceIndices(t,e.frame.traces),e.frameOpts,e.transitionOpts).then(function(){e.onComplete&&e.onComplete()}),t.emit("plotly_animatingframe",{name:n,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})}else t.emit("plotly_animated"),window.cancelAnimationFrame(r._animationRaf),r._animationRaf=null}()};e()}()}}(g):(t.emit("plotly_animated"),l())})},a.addFrames=function(t,e,n){if(t=s.getGraphDiv(t),null==e)return Promise.resolve();if(!s.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plot.ly/javascript/animations/");var r,i,o,a,l=t._transitionData._frames,u=t._transitionData._frameHash;if(!Array.isArray(e))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+e);var d=l.length+2*e.length,f=[],p={};for(r=e.length-1;r>=0;r--)if(s.isPlainObject(e[r])){var g=e[r].name,m=(u[g]||p[g]||{}).name,v=e[r].name,y=u[m]||p[m];m&&v&&"number"==typeof v&&y&&C<5&&(C++,s.warn('addFrames: overwriting frame "'+(u[m]||p[m]).name+'" with a frame whose name of type "number" also equates to "'+m+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===C&&s.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),p[g]={name:g},f.push({frame:h.supplyFrameDefaults(e[r]),index:n&&void 0!==n[r]&&null!==n[r]?n[r]:d+r})}f.sort(function(t,e){return t.index>e.index?-1:t.index<e.index?1:0});var _=[],x=[],b=l.length;for(r=f.length-1;r>=0;r--){if("number"==typeof(i=f[r].frame).name&&s.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!i.name)for(;u[i.name="frame "+t._transitionData._counter++];);if(u[i.name]){for(o=0;o<l.length&&(l[o]||{}).name!==i.name;o++);_.push({type:"replace",index:o,value:i}),x.unshift({type:"replace",index:o,value:l[o]})}else a=Math.max(0,Math.min(f[r].index,b)),_.push({type:"insert",index:a,value:i}),x.unshift({type:"delete",index:a}),b++}var w=h.modifyFrames,k=h.modifyFrames,T=[t,x],M=[t,_];return c&&c.add(t,w,T,k,M),h.modifyFrames(t,_)},a.deleteFrames=function(t,e){if(t=s.getGraphDiv(t),!s.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);var n,r,i=t._transitionData._frames,o=[],a=[];if(!e)for(e=[],n=0;n<i.length;n++)e.push(n);for((e=e.slice(0)).sort(),n=e.length-1;n>=0;n--)r=e[n],o.push({type:"delete",index:r}),a.unshift({type:"insert",index:r,value:i[r]});var l=h.modifyFrames,u=h.modifyFrames,d=[t,a],f=[t,o];return c&&c.add(t,l,d,u,f),h.modifyFrames(t,o)},a.purge=function(t){var e=(t=s.getGraphDiv(t))._fullLayout||{},n=t._fullData||[];return h.cleanPlot([],{},n,e),h.purge(t),l.purge(t),e._container&&e._container.remove(),delete t._context,t}},{"../components/color":34,"../components/drawing":59,"../components/errorbars":65,"../constants/xmlns_namespaces":136,"../lib":151,"../lib/events":144,"../lib/queue":165,"../lib/svg_text_utils":172,"../plotly":189,"../plots/cartesian/axis_ids":197,"../plots/cartesian/constants":199,"../plots/cartesian/constraints":201,"../plots/cartesian/graph_interact":203,"../plots/plots":226,"../plots/polar/legacy":229,"../registry":233,"./edit_types":178,"./helpers":179,"./manage_arrays":180,"./plot_schema":183,"./subroutines":186,d3:1,"fast-isnumeric":4,"has-hover":6}],182:[function(t,e,n){"use strict";e.exports={staticPlot:!1,editable:!1,edits:{annotationPosition:!1,annotationTail:!1,annotationText:!1,axisTitleText:!1,colorbarPosition:!1,colorbarTitleText:!1,legendPosition:!1,legendText:!1,shapePosition:!1,titleText:!1},autosizable:!1,queueLength:0,fillFrame:!1,frameMargins:0,scrollZoom:!1,doubleClick:"reset+autosize",showTips:!0,showAxisDragHandles:!0,showAxisRangeEntryBoxes:!0,showLink:!1,sendData:!0,linkText:"Edit chart",showSources:!1,displayModeBar:"hover",modeBarButtonsToRemove:[],modeBarButtonsToAdd:[],modeBarButtons:!1,displaylogo:!0,plotGlPixelRatio:2,setBackground:"transparent",topojsonURL:"https://cdn.plot.ly/",mapboxAccessToken:null,logging:1,globalTransforms:[],locale:"en-US",locales:{}}},{}],183:[function(t,e,n){"use strict";var r=t("../registry"),i=t("../lib"),o=t("../plots/attributes"),a=t("../plots/layout_attributes"),s=t("../plots/frame_attributes"),l=t("../plots/animation_attributes"),c=t("../plots/polar/legacy/area_attributes"),u=t("../plots/polar/legacy/axis_attributes"),d=t("./edit_types"),h=i.extendFlat,f=i.extendDeepAll,p="_isSubplotObj",g="_isLinkedToArray",m="_deprecated",v=[p,g,"_arrayAttrRegexps",m];function y(t,e,n){if(!t)return!1;if(t._isLinkedToArray)if(_(e[n]))n++;else if(n<e.length)return!1;for(;n<e.length;n++){var r=t[e[n]];if(!i.isPlainObject(r))break;if(t=r,n===e.length-1)break;if(t._isLinkedToArray){if(!_(e[++n]))return!1}else if("info_array"===t.valType){var o=e[++n];if(!_(o)||o>=t.items.length)return!1;t=t.items[o]}}return t}function _(t){return t===Math.round(t)&&t>=0}function x(t){var e;return function(t){function e(t){return{valType:"string",role:"info",description:["Sets the source reference on plot.ly for ",t,"."].join(" "),editType:"none"}}n.crawl(t,function(t,r,o){n.isValObject(t)?"data_array"===t.valType?(t.role="data",o[r+"src"]=e(r)):!0===t.arrayOk&&(o[r+"src"]=e(r)):i.isPlainObject(t)&&(t.role="object")})}(t),e=t,n.crawl(e,function(t,e,n){if(t){var r=t[g];r&&(delete t[g],n[e]={items:{}},n[e].items[r]=t,n[e].role="object")}}),t}function b(t,e,n){var r=i.nestedProperty(t,n),o=f({},e.layoutAttributes);o[p]=!0,r.set(o)}function w(t,e,n){var r=i.nestedProperty(t,n);r.set(f(r.get()||{},e))}n.IS_SUBPLOT_OBJ=p,n.IS_LINKED_TO_ARRAY=g,n.DEPRECATED=m,n.UNDERSCORE_ATTRS=v,n.get=function(){var t={};r.allTypes.concat("area").forEach(function(e){t[e]=function(t){var e,n;"area"===t?(e={attributes:c},n={}):(e=r.modules[t]._module,n=e.basePlotModule);var i={type:null};f(i,o),f(i,e.attributes),n.attributes&&f(i,n.attributes);i.type=t;var a={meta:e.meta||{},attributes:x(i)};if(e.layoutAttributes){var s={};f(s,e.layoutAttributes),a.layoutAttributes=x(s)}return a}(e)});var e,n={};return Object.keys(r.transformsRegistry).forEach(function(t){var e,i,o;n[t]=(e=t,i=r.transformsRegistry[e],o=f({},i.attributes),Object.keys(r.componentsRegistry).forEach(function(t){var n=r.componentsRegistry[t];n.schema&&n.schema.transforms&&n.schema.transforms[e]&&Object.keys(n.schema.transforms[e]).forEach(function(t){w(o,n.schema.transforms[e][t],t)})}),{attributes:x(o)})}),{defs:{valObjects:i.valObjectMeta,metaKeys:v.concat(["description","role","editType","impliedEdits"]),editType:{traces:d.traces,layout:d.layout},impliedEdits:{description:["Sometimes when an attribute is changed, other attributes","must be altered as well in order to achieve the intended","result. For example, when `range` is specified, it is","important to set `autorange` to `false` or the new `range`","value would be lost in the redraw. `impliedEdits` is the","mechanism to do this: `impliedEdits: {autorange: false}`.","Each key is a relative paths to the attribute string to","change, using *^* to ascend into the parent container,","for example `range[0]` has `impliedEdits: {*^autorange*: false}`.","A value of `undefined` means that the attribute will not be","changed, but its previous value should be recorded in case","we want to reverse this change later. For example, `autorange`","has `impliedEdits: {*range[0]*: undefined, *range[1]*:undefined}","because the range will likely be changed by redraw."].join(" ")}},traces:t,layout:function(){var t,e,n={};for(t in f(n,a),r.subplotsRegistry)if((e=r.subplotsRegistry[t]).layoutAttributes)if("cartesian"===e.name)b(n,e,"xaxis"),b(n,e,"yaxis");else{var i="subplot"===e.attr?e.name:e.attr;b(n,e,i)}for(t in c=n,h(c,{radialaxis:u.radialaxis,angularaxis:u.angularaxis}),h(c,u.layout),n=c,r.componentsRegistry){var o=(e=r.componentsRegistry[t]).schema;if(o&&(o.subplots||o.layout)){var s=o.subplots;if(s&&s.xaxis&&!s.yaxis)for(var l in s.xaxis)delete n.yaxis[l]}else e.layoutAttributes&&w(n,e.layoutAttributes,e.name)}var c;return{layoutAttributes:x(n)}}(),transforms:n,frames:(e={frames:i.extendDeepAll({},s)},x(e),e.frames),animation:x(l)}},n.crawl=function(t,e,r,o){var a=r||0;o=o||"",Object.keys(t).forEach(function(r){var s=t[r];if(-1===v.indexOf(r)){var l=(o?o+".":"")+r;e(s,r,t,a,l),n.isValObject(s)||i.isPlainObject(s)&&"impliedEdits"!==r&&n.crawl(s,e,a+1,l)}})},n.isValObject=function(t){return t&&void 0!==t.valType},n.findArrayAttributes=function(t){var e=[],r=[];function a(n,o,a,s){if(r=r.slice(0,s).concat([o]),n&&("data_array"===n.valType||!0===n.arrayOk)&&!("colorbar"===r[s-1]&&("ticktext"===o||"tickvals"===o))){var l=r.join("."),c=i.nestedProperty(t,l).get();Array.isArray(c)&&e.push(l)}}if(n.crawl(o,a),t._module&&t._module.attributes&&n.crawl(t._module.attributes,a),t.transforms)for(var s=t.transforms,l=0;l<s.length;l++){var c=s[l]._module;c&&(r=["transforms["+l+"]"],n.crawl(c.attributes,a,1))}return t._fullInput&&t._fullInput._module&&t._fullInput._module.attributes&&(n.crawl(t._fullInput._module.attributes,a),e=i.filterUnique(e)),e},n.getTraceValObject=function(t,e){var n,i,a=e[0],s=1;if("transforms"===a){if(!Array.isArray(t.transforms))return!1;var l=e[1];if(!_(l)||l>=t.transforms.length)return!1;i=(n=(r.transformsRegistry[t.transforms[l].type]||{}).attributes)&&n[e[2]],s=3}else if("area"===t.type)i=c[a];else{var u=t._module;if(u||(u=(r.modules[t.type||o.type.dflt]||{})._module),!u)return!1;if(!(i=(n=u.attributes)&&n[a])){var d=u.basePlotModule;d&&d.attributes&&(i=d.attributes[a])}i||(i=o[a])}return y(i,e,s)},n.getLayoutValObject=function(t,e){return y(function(t,e){var n,i,o,s,l=t._basePlotModules;if(l){var c;for(n=0;n<l.length;n++){if((o=l[n]).attrRegex&&o.attrRegex.test(e)){if(o.layoutAttrOverrides)return o.layoutAttrOverrides;!c&&o.layoutAttributes&&(c=o.layoutAttributes)}var d=o.baseLayoutAttrOverrides;if(d&&e in d)return d[e]}if(c)return c}var h=t._modules;if(h)for(n=0;n<h.length;n++)if((s=h[n].layoutAttributes)&&e in s)return s[e];for(i in r.componentsRegistry)if(!(o=r.componentsRegistry[i]).schema&&e===o.name)return o.layoutAttributes;if(e in a)return a[e];if("radialaxis"===e||"angularaxis"===e)return u[e];return u.layout[e]||!1}(t,e[0]),e,1)}},{"../lib":151,"../plots/animation_attributes":190,"../plots/attributes":192,"../plots/frame_attributes":221,"../plots/layout_attributes":224,"../plots/polar/legacy/area_attributes":227,"../plots/polar/legacy/axis_attributes":228,"../registry":233,"./edit_types":178}],184:[function(t,e,n){"use strict";var r=t("../registry"),i=t("../lib");function o(t){r.register(t,t.name,t.categories,t.meta),r.subplotsRegistry[t.basePlotModule.name]||r.registerSubplot(t.basePlotModule)}function a(t){if("string"!=typeof t.name)throw new Error("Transform module *name* must be a string.");var e="Transform module "+t.name,n="function"==typeof t.transform,o="function"==typeof t.calcTransform;if(!n&&!o)throw new Error(e+" is missing a *transform* or *calcTransform* method.");n&&o&&i.log([e+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),i.isPlainObject(t.attributes)||i.log(e+" registered without an *attributes* object."),"function"!=typeof t.supplyDefaults&&i.log(e+" registered without a *supplyDefaults* method."),r.registerTransform(t)}function s(t){if("string"!=typeof t.name)throw new Error("Component module *name* must be a string.");r.registerComponent(t)}e.exports=function(t){if(!t)throw new Error("No argument passed to Plotly.register.");t&&!Array.isArray(t)&&(t=[t]);for(var e=0;e<t.length;e++){var n=t[e];if(!n)throw new Error("Invalid module was attempted to be registered!");switch(n.moduleType){case"trace":o(n);break;case"transform":a(n);break;case"component":s(n);break;case"locale":r.registerLocale(n);break;default:throw new Error("Invalid module was attempted to be registered!")}}}},{"../lib":151,"../registry":233}],185:[function(t,e,n){"use strict";var r=t("../plotly"),i=t("../lib");e.exports=function(t){return i.extendFlat(r.defaultConfig,t)}},{"../lib":151,"../plotly":189}],186:[function(t,e,n){"use strict";var r=t("d3"),i=t("../plotly"),o=t("../registry"),a=t("../plots/plots"),s=t("../lib"),l=t("../components/color"),c=t("../components/drawing"),u=t("../components/titles"),d=t("../components/modebar"),h=t("../plots/cartesian/graph_interact"),f=t("../plots/cartesian/constants"),p=t("../constants/alignment");function g(t,e){return(t.ticks||t.showline)&&(e===t._mainSubplot||"all"===t.mirror||"allticks"===t.mirror)}function m(t,e,n){if(!n.showline||!n._lw)return!1;if("all"===n.mirror||"allticks"===n.mirror)return!0;var r=n._anchorAxis;if(!r)return!1;var i=p.FROM_BL[e];return n.side===e?r.domain[i]===t.domain[i]:n.mirror&&r.domain[1-i]===t.domain[1-i]}function v(t,e,n,r){if(m(t,e,n))return n._lw;for(var i=0;i<r.length;i++){var o=r[i];if(o._mainAxis===n._mainAxis&&m(t,e,o))return o._lw}return 0}n.layoutStyles=function(t){return s.syncOrAsync([a.doAutoMargin,n.lsInner],t)},n.lsInner=function(t){var e,o=t._fullLayout,a=o._size,s=a.p,u=i.Axes.list(t),h=o._has("cartesian");function m(t,e,n){var r=t._lw/2;return"x"===t._id.charAt(0)?e?"top"===n?e._offset-s-r:e._offset+e._length+s+r:a.t+a.h*(1-(t.position||0))+r%1:e?"right"===n?e._offset+e._length+s+r:e._offset-s-r:a.l+a.w*(t.position||0)+r%1}for(e=0;e<u.length;e++){var y=u[e];y.setScale();var _=y._anchorAxis;y._linepositions={},y._lw=c.crispRound(t,y.linewidth,1),y._mainLinePosition=m(y,_,y.side),y._mainMirrorPosition=y.mirror&&_?m(y,_,p.OPPOSITE_SIDE[y.side]):null}o._paperdiv.style({width:o.width+"px",height:o.height+"px"}).selectAll(".main-svg").call(c.setSize,o.width,o.height),t._context.setBackground(t,o.paper_bgcolor);var x=o._paper.selectAll("g.subplot"),b=[],w=[];x.each(function(t){var e=o._plots[t];if(e.mainplot)return e.bg&&e.bg.remove(),void(e.bg=void 0);var n=e.xaxis.domain,r=e.yaxis.domain,i=[];!function(t,e,n){for(var r=0;r<n.length;r++){var i=n[r][0],o=n[r][1];if(!(i[0]>=t[1]||i[1]<=t[0])&&o[0]<e[1]&&o[1]>e[0])return!0}return!1}(n,r,w)?(b.push(t),w.push([n,r])):i=[0];var a=e.plotgroup.selectAll(".bg").data(i);a.enter().append("rect").classed("bg",!0),a.exit().remove(),a.each(function(){e.bg=a;var t=e.plotgroup.node();t.insertBefore(this,t.childNodes[0])})});var k=o._bgLayer.selectAll(".bg").data(b);return k.enter().append("rect").classed("bg",!0),k.exit().remove(),k.each(function(t){o._plots[t].bg=r.select(this)}),x.each(function(t){var n=o._plots[t],r=n.xaxis,i=n.yaxis;n.bg&&h&&n.bg.call(c.setRect,r._offset-s,i._offset-s,r._length+2*s,i._length+2*s).call(l.fill,o.plot_bgcolor).style("stroke-width",0),n.clipId="clip"+o._uid+t+"plot";var a,d,p=o._clips.selectAll("#"+n.clipId).data([0]);for(p.enter().append("clipPath").attr({class:"plotclip",id:n.clipId}).append("rect"),p.selectAll("rect").attr({width:r._length,height:i._length}),c.setTranslate(n.plot,r._offset,i._offset),n._hasClipOnAxisFalse?(a=null,d=n.clipId):(a=n.clipId,d=null),c.setClipUrl(n.plot,a),e=0;e<f.traceLayerClasses.length;e++){var y=f.traceLayerClasses[e];"scatterlayer"!==y&&n.plot.selectAll("g."+y).call(c.setClipUrl,d)}if(n.layerClipId=d,h){var _,x,b,w,k,T,M,A,L,S,C,P,z;if(g(r,t)){k=v(r,"left",i,u),_=r._offset-(k?s+k:0),T=v(r,"right",i,u),x=r._offset+r._length+(T?s+T:0),b=m(r,i,"bottom"),w=m(r,i,"top"),(z=!r._anchorAxis||t!==r._mainSubplot)&&r.ticks&&"allticks"===r.mirror&&(r._linepositions[t]=[b,w]);var D=j(r,O,function(t){return"M"+r._offset+","+t+"h"+r._length});z&&r.showline&&("all"===r.mirror||"allticks"===r.mirror)&&(D+=O(b)+O(w)),n.xlines.attr("d",D||"M0,0").style("stroke-width",r._lw+"px").call(l.stroke,r.showline?r.linecolor:"rgba(0,0,0,0)")}if(g(i,t)){C=v(i,"bottom",r,u),M=i._offset+i._length+(C?s:0),P=v(i,"top",r,u),A=i._offset-(P?s:0),L=m(i,r,"left"),S=m(i,r,"right"),(z=!i._anchorAxis||t!==r._mainSubplot)&&i.ticks&&"allticks"===i.mirror&&(i._linepositions[t]=[L,S]);var E=j(i,I,function(t){return"M"+t+","+i._offset+"v"+i._length});z&&i.showline&&("all"===i.mirror||"allticks"===i.mirror)&&(E+=I(L)+I(S)),n.ylines.attr("d",E||"M0,0").style("stroke-width",i._lw+"px").call(l.stroke,i.showline?i.linecolor:"rgba(0,0,0,0)")}}function O(t){return"M"+_+","+t+"H"+x}function I(t){return"M"+t+","+A+"V"+M}function j(e,n,r){if(!e.showline||t!==e._mainSubplot)return"";if(!e._anchorAxis)return r(e._mainLinePosition);var i=n(e._mainLinePosition);return e.mirror&&(i+=n(e._mainMirrorPosition)),i}}),i.Axes.makeClipPaths(t),n.drawMainTitle(t),d.manage(t),t._promises.length&&Promise.all(t._promises)},n.drawMainTitle=function(t){var e=t._fullLayout;u.draw(t,"gtitle",{propContainer:e,propName:"title",placeholder:e._dfltTitle.plot,attributes:{x:e.width/2,y:e._size.t/2,"text-anchor":"middle"}})},n.doTraceStyle=function(t){for(var e=0;e<t.calcdata.length;e++){var n=t.calcdata[e],r=(((n[0]||{}).trace||{})._module||{}).arraysToCalcdata;r&&r(n,n[0].trace)}return a.style(t),o.getComponentMethod("legend","draw")(t),a.previousPromises(t)},n.doColorBars=function(t){for(var e=0;e<t.calcdata.length;e++){var n=t.calcdata[e][0];if((n.t||{}).cb){var r=n.trace,i=n.t.cb;o.traceIs(r,"contour")&&i.line({width:!1!==r.contours.showlines?r.line.width:0,dash:r.line.dash,color:"line"===r.contours.coloring?i._opts.line.color:r.line.color}),o.traceIs(r,"markerColorscale")?i.options(r.marker.colorbar)():i.options(r.colorbar)()}}return a.previousPromises(t)},n.layoutReplot=function(t){var e=t.layout;return t.layout=void 0,i.plot(t,"",e)},n.doLegend=function(t){return o.getComponentMethod("legend","draw")(t),a.previousPromises(t)},n.doTicksRelayout=function(t){return i.Axes.doTicks(t,"redraw"),n.drawMainTitle(t),a.previousPromises(t)},n.doModeBar=function(t){var e=t._fullLayout;d.manage(t),h(t);for(var n=0;n<e._basePlotModules.length;n++){var r=e._basePlotModules[n].updateFx;r&&r(e)}return a.previousPromises(t)},n.doCamera=function(t){for(var e=t._fullLayout,n=e._subplots.gl3d,r=0;r<n.length;r++){var i=e[n[r]];i._scene.setCamera(i.camera)}}},{"../components/color":34,"../components/drawing":59,"../components/modebar":96,"../components/titles":125,"../constants/alignment":132,"../lib":151,"../plotly":189,"../plots/cartesian/constants":199,"../plots/cartesian/graph_interact":203,"../plots/plots":226,"../registry":233,d3:1}],187:[function(t,e,n){"use strict";var r=t("../plotly"),i=t("../lib"),o=t("../snapshot/helpers"),a=t("../snapshot/tosvg"),s=t("../snapshot/svgtoimg"),l={format:{valType:"enumerated",values:["png","jpeg","webp","svg"],dflt:"png",description:"Sets the format of exported image."},width:{valType:"number",min:1,description:["Sets the exported image width.","Defaults to the value found in `layout.width`"].join(" ")},height:{valType:"number",min:1,description:["Sets the exported image height.","Defaults to the value found in `layout.height`"].join(" ")},scale:{valType:"number",min:0,dflt:1,description:["Sets a scaling for the generated image.","If set, all features of a graphs (e.g. text, line width)","are scaled, unlike simply setting","a bigger *width* and *height*."].join(" ")},setBackground:{valType:"any",dflt:!1,description:["Sets the image background mode.","By default, the image background is determined by `layout.paper_bgcolor`,","the *transparent* mode.","One might consider setting `setBackground` to *opaque*","when exporting a *jpeg* image as JPEGs do not support opacity."].join(" ")},imageDataOnly:{valType:"boolean",dflt:!1,description:["Determines whether or not the return value is prefixed by","the image format's corresponding 'data:image;' spec."].join(" ")}},c=/^data:image\/\w+;base64,/;e.exports=function(t,e){var n,u,d;function h(t){return!(t in e)||i.validate(e[t],l[t])}if(e=e||{},i.isPlainObject(t)?(n=t.data||[],u=t.layout||{},d=t.config||{}):(t=i.getGraphDiv(t),n=i.extendDeep([],t.data),u=i.extendDeep({},t.layout),d=t._context),!h("width")||!h("height"))throw new Error("Height and width should be pixel values.");if(!h("format"))throw new Error("Image format is not jpeg, png, svg or webp.");var f={};function p(t,n){return i.coerce(e,f,l,t,n)}var g=p("format"),m=p("width"),v=p("height"),y=p("scale"),_=p("setBackground"),x=p("imageDataOnly"),b=document.createElement("div");b.style.position="absolute",b.style.left="-5000px",document.body.appendChild(b);var w=i.extendFlat({},u);m&&(w.width=m),v&&(w.height=v);var k=i.extendFlat({},d,{staticPlot:!0,setBackground:_}),T=o.getRedrawFunc(b);function M(){return new Promise(function(t){setTimeout(t,o.getDelay(b._fullLayout))})}function A(){return new Promise(function(t,e){var n=a(b,g,y),o=b._fullLayout.width,l=b._fullLayout.height;if(r.purge(b),document.body.removeChild(b),"svg"===g)return t(x?n:"data:image/svg+xml,"+encodeURIComponent(n));var c=document.createElement("canvas");c.id=i.randstr(),s({format:g,width:o,height:l,scale:y,canvas:c,svg:n,promise:!0}).then(t).catch(e)})}return new Promise(function(t,e){r.plot(b,n,w,k).then(T).then(M).then(A).then(function(e){var n;t((n=e,x?n.replace(c,""):n))}).catch(function(t){e(t)})})}},{"../lib":151,"../plotly":189,"../snapshot/helpers":237,"../snapshot/svgtoimg":239,"../snapshot/tosvg":241}],188:[function(t,e,n){"use strict";var r=t("../lib"),i=t("../plots/plots"),o=t("./plot_schema"),a=t("./plot_config"),s=r.isPlainObject,l=Array.isArray;function c(t,e,n,i,o,a){a=a||[];for(var u,d,p=Object.keys(t),m=0;m<p.length;m++){var v=p[m];if("transforms"!==v){var y=a.slice();y.push(v);var _=t[v],x=e[v],b=(u=n,void 0,d=g(v),u[d.keyMinusId]),w="info_array"===(b||{}).valType,k="colorscale"===(b||{}).valType;if(f(n,v))if(s(_)&&s(x))c(_,x,b,i,o,y);else if(b.items&&!w&&l(_)){var T,M,A=b.items,L=A[Object.keys(A)[0]],S=[];for(T=0;T<x.length;T++){var C=x[T]._index||T;(M=y.slice()).push(C),s(_[C])&&s(x[T])&&(S.push(C),c(_[C],x[T],L,i,o,M))}for(T=0;T<_.length;T++)(M=y.slice()).push(T),s(_[T])?-1===S.indexOf(T)&&i.push(h("unused",o,M)):i.push(h("object",o,M,_[T]))}else!s(_)&&s(x)?i.push(h("object",o,y,_)):l(_)||!l(x)||w||k?v in e?r.validate(_,b)?"enumerated"===b.valType&&(b.coerceNumber&&_!==+x||_!==x)&&i.push(h("dynamic",o,y,_,x)):i.push(h("value",o,y,_)):i.push(h("unused",o,y,_)):i.push(h("array",o,y,_));else i.push(h("schema",o,y))}}return i}e.exports=function(t,e){var n,u,d=o.get(),f=[],p={_context:r.extendFlat({},a)};l(t)?(p.data=r.extendDeep([],t),n=t):(p.data=[],n=[],f.push(h("array","data"))),s(e)?(p.layout=r.extendDeep({},e),u=e):(p.layout={},u={},arguments.length>1&&f.push(h("object","layout"))),i.supplyDefaults(p);for(var g=p._fullData,m=n.length,v=0;v<m;v++){var y=n[v],_=["data",v];if(s(y)){var x=g[v],b=x.type,w=d.traces[b].attributes;w.type={valType:"enumerated",values:[b]},!1===x.visible&&!1!==y.visible&&f.push(h("invisible",_)),c(y,x,w,f,_);var k=y.transforms,T=x.transforms;if(k){l(k)||f.push(h("array",_,["transforms"])),_.push("transforms");for(var M=0;M<k.length;M++){var A=["transforms",M],L=k[M].type;if(s(k[M])){var S=d.transforms[L]?d.transforms[L].attributes:{};S.type={valType:"enumerated",values:Object.keys(d.transforms)},c(k[M],T[M],S,f,_,A)}else f.push(h("object",_,A))}}}else f.push(h("object",_))}return c(u,p._fullLayout,function(t,e){for(var n=0;n<e.length;n++){var i=e[n].type,o=t.traces[i].layoutAttributes;o&&r.extendFlat(t.layout.layoutAttributes,o)}return t.layout.layoutAttributes}(d,g),f,"layout"),0===f.length?void 0:f};var u={object:function(t,e){return("layout"===t&&""===e?"The layout argument":"data"===t[0]&&""===e?"Trace "+t[1]+" in the data argument":d(t)+"key "+e)+" must be linked to an object container"},array:function(t,e){return("data"===t?"The data argument":d(t)+"key "+e)+" must be linked to an array container"},schema:function(t,e){return d(t)+"key "+e+" is not part of the schema"},unused:function(t,e,n){var r=s(n)?"container":"key";return d(t)+r+" "+e+" did not get coerced"},dynamic:function(t,e,n,r){return[d(t)+"key",e,"(set to '"+n+"')","got reset to","'"+r+"'","during defaults."].join(" ")},invisible:function(t){return"Trace "+t[1]+" got defaulted to be not visible"},value:function(t,e,n){return[d(t)+"key "+e,"is set to an invalid value ("+n+")"].join(" ")}};function d(t){return l(t)?"In data trace "+t[1]+", ":"In "+t+", "}function h(t,e,n,i,o){var a,s;n=n||"",l(e)?(a=e[0],s=e[1]):(a=e,s=null);var c=function(t){if(!l(t))return String(t);for(var e="",n=0;n<t.length;n++){var r=t[n];"number"==typeof r?e=e.substr(0,e.length-1)+"["+r+"]":e+=r,n<t.length-1&&(e+=".")}return e}(n),d=u[t](e,c,i,o);return r.log(d),{code:t,container:a,trace:s,path:n,astr:c,msg:d}}function f(t,e){var n=g(e),r=n.keyMinusId,i=n.id;return!!(r in t&&t[r]._isSubplotObj&&i)||e in t}var p=r.counterRegex("([a-z]+)");function g(t){var e=t.match(p);return{keyMinusId:e&&e[1],id:e&&e[2]}}},{"../lib":151,"../plots/plots":226,"./plot_config":182,"./plot_schema":183}],189:[function(t,e,n){"use strict";n.defaultConfig=t("./plot_api/plot_config"),n.Plots=t("./plots/plots"),n.Axes=t("./plots/cartesian/axes"),n.ModeBar=t("./components/modebar"),t("./plot_api/plot_api")},{"./components/modebar":96,"./plot_api/plot_api":181,"./plot_api/plot_config":182,"./plots/cartesian/axes":194,"./plots/plots":226}],190:[function(t,e,n){"use strict";e.exports={mode:{valType:"enumerated",dflt:"afterall",role:"info",values:["immediate","next","afterall"],description:["Describes how a new animate call interacts with currently-running","animations. If `immediate`, current animations are interrupted and","the new animation is started. If `next`, the current frame is allowed","to complete, after which the new animation is started. If `afterall`","all existing frames are animated to completion before the new animation","is started."].join(" ")},direction:{valType:"enumerated",role:"info",values:["forward","reverse"],dflt:"forward",description:["The direction in which to play the frames triggered by the animation call"].join(" ")},fromcurrent:{valType:"boolean",dflt:!1,role:"info",description:["Play frames starting at the current frame instead of the beginning."].join(" ")},frame:{duration:{valType:"number",role:"info",min:0,dflt:500,description:["The duration in milliseconds of each frame. If greater than the frame","duration, it will be limited to the frame duration."].join(" ")},redraw:{valType:"boolean",role:"info",dflt:!0,description:["Redraw the plot at completion of the transition. This is desirable","for transitions that include properties that cannot be transitioned,","but may significantly slow down updates that do not require a full","redraw of the plot"].join(" ")}},transition:{duration:{valType:"number",role:"info",min:0,dflt:500,description:["The duration of the transition, in milliseconds. If equal to zero,","updates are synchronous."].join(" ")},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],role:"info",description:"The easing function used for the transition"}}}},{}],191:[function(t,e,n){"use strict";var r=t("../lib");e.exports=function(t,e,n){var i,o=n.name,a=e[o],s=r.isArray(t[o])?t[o]:[],l=e[o]=[];for(i=0;i<s.length;i++){var c=s[i],u={},d={};r.isPlainObject(c)||(d.itemIsNotPlainObject=!0,c={}),n.handleItemDefaults(c,u,e,n,d),u._input=c,u._index=i,l.push(u)}if(r.isArray(a)){var h=Math.min(a.length,l.length);for(i=0;i<h;i++)r.relinkPrivateKeys(l[i],a[i])}}},{"../lib":151}],192:[function(t,e,n){"use strict";var r=t("../components/fx/attributes");e.exports={type:{valType:"enumerated",role:"info",values:[],dflt:"scatter",editType:"calc+clearAxisTypes"},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],role:"info",dflt:!0,editType:"calc",description:["Determines whether or not this trace is visible.","If *legendonly*, the trace is not drawn,","but can appear as a legend item","(provided that the legend itself is visible)."].join(" ")},showlegend:{valType:"boolean",role:"info",dflt:!0,editType:"style",description:["Determines whether or not an item corresponding to this","trace is shown in the legend."].join(" ")},legendgroup:{valType:"string",role:"info",dflt:"",editType:"style",description:["Sets the legend group for this trace.","Traces part of the same legend group hide/show at the same time","when toggling legend items."].join(" ")},opacity:{valType:"number",role:"style",min:0,max:1,dflt:1,editType:"style",description:"Sets the opacity of the trace."},name:{valType:"string",role:"info",editType:"style",description:["Sets the trace name.","The trace name appear as the legend item and on hover."].join(" ")},uid:{valType:"string",role:"info",dflt:"",editType:"calc"},ids:{valType:"data_array",editType:"calc",description:["Assigns id labels to each datum.","These ids for object constancy of data points during animation."].join(" ")},customdata:{valType:"data_array",editType:"calc",description:["Assigns extra data each datum.","This may be useful when listening to hover, click and selection events.","Note that, *scatter* traces also appends customdata items in the markers","DOM elements"].join(" ")},selectedpoints:{valType:"any",role:"info",editType:"calc",description:["Array containing integer indices of selected points.","Has an effect only for traces that support selections.","Note that an empty array means an empty selection where the `unselected`","are turned on for all points, whereas, any other non-array values means no","selection all where the `selected` and `unselected` styles have no effect."].join(" ")},hoverinfo:{valType:"flaglist",role:"info",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none",description:["Determines which trace information appear on hover.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired."].join(" ")},hoverlabel:r.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,role:"info",editType:"calc",description:["The stream id number links a data trace on a plot with a stream.","See https://plot.ly/settings for more details."].join(" ")},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,role:"info",editType:"calc",description:["Sets the maximum number of points to keep on the plots from an","incoming stream.","If `maxpoints` is set to *50*, only the newest 50 points will","be displayed on the plot."].join(" ")},editType:"calc"}}},{"../components/fx/attributes":68}],193:[function(t,e,n){"use strict";e.exports={xaxis:{valType:"subplotid",role:"info",dflt:"x",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's x coordinates and","a 2D cartesian x axis.","If *x* (the default value), the x coordinates refer to","`layout.xaxis`.","If *x2*, the x coordinates refer to `layout.xaxis2`, and so on."].join(" ")},yaxis:{valType:"subplotid",role:"info",dflt:"y",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's y coordinates and","a 2D cartesian y axis.","If *y* (the default value), the y coordinates refer to","`layout.yaxis`.","If *y2*, the y coordinates refer to `layout.xaxis2`, and so on."].join(" ")}}},{}],194:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),o=t("../../registry"),a=t("../../lib"),s=t("../../lib/svg_text_utils"),l=t("../../components/titles"),c=t("../../components/color"),u=t("../../components/drawing"),d=t("../../constants/numerical"),h=d.FP_SAFE,f=d.ONEAVGYEAR,p=d.ONEAVGMONTH,g=d.ONEDAY,m=d.ONEHOUR,v=d.ONEMIN,y=d.ONESEC,_=d.MINUS_SIGN,x=d.BADNUM,b=t("../../constants/alignment").MID_SHIFT,w=e.exports={};w.setConvert=t("./set_convert");var k=t("./axis_autotype"),T=t("./axis_ids");w.id2name=T.id2name,w.cleanId=T.cleanId,w.list=T.list,w.listIds=T.listIds,w.getFromId=T.getFromId,w.getFromTrace=T.getFromTrace,w.coerceRef=function(t,e,n,r,i,o){var s=r.charAt(r.length-1),l=n._fullLayout._subplots[s+"axis"],c=r+"ref",u={};return i||(i=l[0]||o),o||(o=i),u[c]={valType:"enumerated",values:l.concat(o?[o]:[]),dflt:i},a.coerce(t,e,u,c)},w.coercePosition=function(t,e,n,r,i,o){var s,l;if("paper"===r||"pixel"===r)s=a.ensureNumber,l=n(i,o);else{var c=w.getFromId(e,r);l=n(i,o=c.fraction2r(o)),s=c.cleanPos}t[i]=s(l)},w.cleanPosition=function(t,e,n){return("paper"===n||"pixel"===n?a.ensureNumber:w.getFromId(e,n).cleanPos)(t)};var M=w.getDataConversions=function(t,e,n,r){var i,o="x"===n||"y"===n||"z"===n?n:r;if(Array.isArray(o)){if(i={type:k(r),_categories:[]},w.setConvert(i),"category"===i.type)for(var a=0;a<r.length;a++)i.d2c(r[a])}else i=w.getFromTrace(t,e,o);return i?{d2c:i.d2c,c2d:i.c2d}:"ids"===o?{d2c:L,c2d:L}:{d2c:A,c2d:A}};function A(t){return+t}function L(t){return String(t)}w.getDataToCoordFunc=function(t,e,n,r){return M(t,e,n,r).d2c},w.counterLetter=function(t){var e=t.charAt(0);return"x"===e?"y":"y"===e?"x":void 0},w.minDtick=function(t,e,n,r){-1===["log","category"].indexOf(t.type)&&r?void 0===t._minDtick?(t._minDtick=e,t._forceTick0=n):t._minDtick&&((t._minDtick/e+1e-6)%1<2e-6&&((n-t._forceTick0)/e%1+1.000001)%1<2e-6?(t._minDtick=e,t._forceTick0=n):((e/t._minDtick+1e-6)%1>2e-6||((n-t._forceTick0)/t._minDtick%1+1.000001)%1>2e-6)&&(t._minDtick=0)):t._minDtick=0},w.getAutoRange=function(t){var e,n=[],r=t._min[0].val,i=t._max[0].val;for(e=1;e<t._min.length&&r===i;e++)r=Math.min(r,t._min[e].val);for(e=1;e<t._max.length&&r===i;e++)i=Math.max(i,t._max[e].val);var o,s,l,c,u,d,h,f=0,p=!1;if(t.range){var g=a.simpleMap(t.range,t.r2l);p=g[1]<g[0]}for("reversed"===t.autorange&&(p=!0,t.autorange=!0),e=0;e<t._min.length;e++)for(s=t._min[e],o=0;o<t._max.length;o++)h=(l=t._max[o]).val-s.val,d=t._length-s.pad-l.pad,h>0&&d>0&&h/d>f&&(c=s,u=l,f=h/d);if(r===i){var m=r-1,v=r+1;n="tozero"===t.rangemode?r<0?[m,0]:[0,v]:"nonnegative"===t.rangemode?[Math.max(0,m),Math.max(0,v)]:[m,v]}else f&&("linear"!==t.type&&"-"!==t.type||("tozero"===t.rangemode?(c.val>=0&&(c={val:0,pad:0}),u.val<=0&&(u={val:0,pad:0})):"nonnegative"===t.rangemode&&(c.val-f*c.pad<0&&(c={val:0,pad:0}),u.val<0&&(u={val:1,pad:0})),f=(u.val-c.val)/(t._length-c.pad-u.pad)),n=[c.val-f*c.pad,u.val+f*u.pad]);return n[0]===n[1]&&("tozero"===t.rangemode?n=n[0]<0?[n[0],0]:n[0]>0?[0,n[0]]:[0,1]:(n=[n[0]-1,n[0]+1],"nonnegative"===t.rangemode&&(n[0]=Math.max(0,n[0])))),p&&n.reverse(),a.simpleMap(n,t.l2r||Number)},w.doAutoRange=function(t){t._length||t.setScale();var e=t._min&&t._max&&t._min.length&&t._max.length;if(t.autorange&&e){t.range=w.getAutoRange(t),t._r=t.range.slice(),t._rl=a.simpleMap(t._r,t.r2l);var n=t._input;n.range=t.range.slice(),n.autorange=t.autorange}},w.saveRangeInitial=function(t,e){for(var n=w.list(t,"",!0),r=!1,i=0;i<n.length;i++){var o=n[i],a=void 0===o._rangeInitial,s=a||!(o.range[0]===o._rangeInitial[0]&&o.range[1]===o._rangeInitial[1]);(a&&!1===o.autorange||e&&s)&&(o._rangeInitial=o.range.slice(),r=!0)}return r},w.saveShowSpikeInitial=function(t,e){for(var n=w.list(t,"",!0),r=!1,i="on",o=0;o<n.length;o++){var a=n[o],s=void 0===a._showSpikeInitial,l=s||!(a.showspikes===a._showspikes);(s||e&&l)&&(a._showSpikeInitial=a.showspikes,r=!0),"on"!==i||a.showspikes||(i="off")}return t._fullLayout._cartesianSpikesEnabled=i,r},w.expand=function(t,e,n){if((t.autorange||!!a.nestedProperty(t,"rangeslider.autorange").get())&&e){t._min||(t._min=[]),t._max||(t._max=[]),n||(n={}),t._m||t.setScale();var r,o,s,l,c,u,d,f,p,g,m,v=e.length,y=n.padded?.05*t._length:0,_=n.tozero&&("linear"===t.type||"-"===t.type);y&&"domain"===t.constrain&&t._inputDomain&&(y*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0]));var x=T((t._m>0?n.ppadplus:n.ppadminus)||n.ppad||0),b=T((t._m>0?n.ppadminus:n.ppadplus)||n.ppad||0),w=T(n.vpadplus||n.vpad),k=T(n.vpadminus||n.vpad);for(r=0;r<6;r++)M(r);for(r=v-1;r>5;r--)M(r)}function T(t){if(Array.isArray(t))return function(e){return Math.max(Number(t[e]||0),0)};var e=Math.max(Number(t||0),0);return function(){return e}}function M(n){if(l=e[n],i(l)){if(d=x(n)+y,f=b(n)+y,g=l-k(n),m=l+w(n),"log"===t.type&&g<m/10&&(g=m/10),c=t.c2l(g),u=t.c2l(m),_&&(c=Math.min(0,c),u=Math.max(0,u)),r(c)){for(p=!0,o=0;o<t._min.length&&p;o++)(s=t._min[o]).val<=c&&s.pad>=f?p=!1:s.val>=c&&s.pad<=f&&(t._min.splice(o,1),o--);p&&t._min.push({val:c,pad:_&&0===c?0:f})}if(r(u)){for(p=!0,o=0;o<t._max.length&&p;o++)(s=t._max[o]).val>=u&&s.pad>=d?p=!1:s.val<=u&&s.pad<=d&&(t._max.splice(o,1),o--);p&&t._max.push({val:u,pad:_&&0===u?0:d})}}function r(t){return i(t)&&Math.abs(t)<h}}},w.autoBin=function(t,e,n,r,o){var s,l,c=a.aggNums(Math.min,null,t),u=a.aggNums(Math.max,null,t);if(o||(o=e.calendar),"category"===e.type)return{start:c-.5,end:u+.5,size:1,_count:u-c+1};if(n)s=(u-c)/n;else{var d=a.distinctVals(t),h=Math.pow(10,Math.floor(Math.log(d.minDiff)/Math.LN10)),f=h*a.roundUp(d.minDiff/h,[.9,1.9,4.9,9.9],!0);s=Math.max(f,2*a.stdev(t)/Math.pow(t.length,r?.25:.4)),i(s)||(s=1)}l="log"===e.type?{type:"linear",range:[c,u]}:{type:e.type,range:a.simpleMap([c,u],e.c2r,0,o),calendar:o},w.setConvert(l),w.autoTicks(l,s);var p,m,v=w.tickIncrement(w.tickFirst(l),l.dtick,"reverse",o);if("number"==typeof l.dtick)p=(v=function(t,e,n,r,o){var a=0,s=0,l=0,c=0;function u(e){return(1+100*(e-t)/n.dtick)%100<2}for(var d=0;d<e.length;d++)e[d]%1==0?l++:i(e[d])||c++,u(e[d])&&a++,u(e[d]+n.dtick/2)&&s++;var h=e.length-c;if(l===h&&"date"!==n.type)n.dtick<1?t=r-.5*n.dtick:(t-=.5)+n.dtick<r&&(t+=n.dtick);else if(s<.1*h&&(a>.3*h||u(r)||u(o))){var f=n.dtick/2;t+=t+f<r?f:-f}return t}(v,t,l,c,u))+(m=1+Math.floor((u-v)/l.dtick))*l.dtick;else for("M"===l.dtick.charAt(0)&&(v=function(t,e,n,r,i){var o=a.findExactDates(e,i);if(o.exactDays>.8){var s=Number(n.substr(1));o.exactYears>.8&&s%12==0?t=w.tickIncrement(t,"M6","reverse")+1.5*g:o.exactMonths>.8?t=w.tickIncrement(t,"M1","reverse")+15.5*g:t-=g/2;var l=w.tickIncrement(t,n);if(l<=r)return l}return t}(v,t,l.dtick,c,o)),p=v,m=0;p<=u;)p=w.tickIncrement(p,l.dtick,!1,o),m++;return{start:e.c2r(v,0,o),end:e.c2r(p,0,o),size:l.dtick,_count:m}},w.calcTicks=function(t){var e=a.simpleMap(t.range,t.r2l);if("auto"===t.tickmode||!t.dtick){var n,r=t.nticks;r||("category"===t.type?(n=t.tickfont?1.2*(t.tickfont.size||12):15,r=t._length/n):(n="y"===t._id.charAt(0)?40:80,r=a.constrain(t._length/n,4,9)+1),"radialaxis"===t._name&&(r*=2)),"array"===t.tickmode&&(r*=100),w.autoTicks(t,Math.abs(e[1]-e[0])/r),t._minDtick>0&&t.dtick<2*t._minDtick&&(t.dtick=t._minDtick,t.tick0=t.l2r(t._forceTick0))}if(t.tick0||(t.tick0="date"===t.type?"2000-01-01":0),j(t),"array"===t.tickmode)return function(t){var e,n,r=t.tickvals,i=t.ticktext,o=new Array(r.length),s=a.simpleMap(t.range,t.r2l),l=1.0001*s[0]-1e-4*s[1],c=1.0001*s[1]-1e-4*s[0],u=Math.min(l,c),d=Math.max(l,c),h=0;Array.isArray(i)||(i=[]);var f="category"===t.type?t.d2l_noadd:t.d2l;"log"===t.type&&"L"!==String(t.dtick).charAt(0)&&(t.dtick="L"+Math.pow(10,Math.floor(Math.min(t.range[0],t.range[1]))-1));for(n=0;n<r.length;n++)(e=f(r[n]))>u&&e<d&&(void 0===i[n]?o[h]=w.tickText(t,e):o[h]=N(t,e,String(i[n])),h++);h<r.length&&o.splice(h,r.length-h);return o}(t);t._tmin=w.tickFirst(t);var i=e[1]<e[0],o=[],s=1.0001*e[1]-1e-4*e[0];"category"===t.type&&(s=i?Math.max(-.5,s):Math.min(t._categories.length-.5,s));for(var l=null,c=Math.max(1e3,t._length||0),u=t._tmin;(i?u>=s:u<=s)&&!(o.length>c||u===l);u=w.tickIncrement(u,t.dtick,i,t.calendar))l=u,o.push(u);"angular"===t._id&&360===Math.abs(e[1]-e[0])&&o.pop(),t._tmax=o[o.length-1],t._prevDateHead="",t._inCalcTicks=!0;for(var d=new Array(o.length),h=0;h<o.length;h++)d[h]=w.tickText(t,o[h]);return t._inCalcTicks=!1,d};var S=[2,5,10],C=[1,2,3,6,12],P=[1,2,5,10,15,30],z=[1,2,3,7,14],D=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],E=[-.301,0,.301,.699,1],O=[15,30,45,90,180];function I(t,e,n){return e*a.roundUp(t/e,n)}function j(t){var e=t.dtick;if(t._tickexponent=0,i(e)||"string"==typeof e||(e=1),"category"===t.type&&(t._tickround=null),"date"===t.type){var n=t.r2l(t.tick0),r=t.l2r(n).replace(/(^-|i)/g,""),o=r.length;if("M"===String(e).charAt(0))o>10||"01-01"!==r.substr(5)?t._tickround="d":t._tickround=+e.substr(1)%12==0?"y":"m";else if(e>=g&&o<=10||e>=15*g)t._tickround="d";else if(e>=v&&o<=16||e>=m)t._tickround="M";else if(e>=y&&o<=19||e>=v)t._tickround="S";else{var a=t.l2r(n+e).replace(/^-/,"").length;t._tickround=Math.max(o,a)-20}}else if(i(e)||"L"===e.charAt(0)){var s=t.range.map(t.r2d||Number);i(e)||(e=Number(e.substr(1))),t._tickround=2-Math.floor(Math.log(e)/Math.LN10+.01);var l=Math.max(Math.abs(s[0]),Math.abs(s[1])),c=Math.floor(Math.log(l)/Math.LN10+.01);Math.abs(c)>3&&(B(t.exponentformat)&&!F(c)?t._tickexponent=3*Math.round((c-1)/3):t._tickexponent=c)}else t._tickround=null}function N(t,e,n){var r=t.tickfont||{};return{x:e,dx:0,dy:0,text:n||"",fontSize:r.size,font:r.family,fontColor:r.color}}w.autoTicks=function(t,e){var n;function r(t){return Math.pow(t,Math.floor(Math.log(e)/Math.LN10))}if("date"===t.type){t.tick0=a.dateTick0(t.calendar);var o=2*e;o>f?(e/=f,n=r(10),t.dtick="M"+12*I(e,n,S)):o>p?(e/=p,t.dtick="M"+I(e,1,C)):o>g?(t.dtick=I(e,g,z),t.tick0=a.dateTick0(t.calendar,!0)):o>m?t.dtick=I(e,m,C):o>v?t.dtick=I(e,v,P):o>y?t.dtick=I(e,y,P):(n=r(10),t.dtick=I(e,n,S))}else if("log"===t.type){t.tick0=0;var s=a.simpleMap(t.range,t.r2l);if(e>.7)t.dtick=Math.ceil(e);else if(Math.abs(s[1]-s[0])<1){var l=1.5*Math.abs((s[1]-s[0])/e);e=Math.abs(Math.pow(10,s[1])-Math.pow(10,s[0]))/l,n=r(10),t.dtick="L"+I(e,n,S)}else t.dtick=e>.3?"D2":"D1"}else"category"===t.type?(t.tick0=0,t.dtick=Math.ceil(Math.max(e,1))):"angular"===t._id?(t.tick0=0,n=1,t.dtick=I(e,n,O)):(t.tick0=0,n=r(10),t.dtick=I(e,n,S));if(0===t.dtick&&(t.dtick=1),!i(t.dtick)&&"string"!=typeof t.dtick){var c=t.dtick;throw t.dtick=1,"ax.dtick error: "+String(c)}},w.tickIncrement=function(t,e,n,o){var s=n?-1:1;if(i(e))return t+s*e;var l=e.charAt(0),c=s*Number(e.substr(1));if("M"===l)return a.incrementMonth(t,c,o);if("L"===l)return Math.log(Math.pow(10,t)+c)/Math.LN10;if("D"===l){var u="D2"===e?E:D,d=t+.01*s,h=a.roundUp(a.mod(d,1),u,n);return Math.floor(d)+Math.log(r.round(Math.pow(10,h),1))/Math.LN10}throw"unrecognized dtick "+String(e)},w.tickFirst=function(t){var e=t.r2l||Number,n=a.simpleMap(t.range,e),o=n[1]<n[0],s=o?Math.floor:Math.ceil,l=1.0001*n[0]-1e-4*n[1],c=t.dtick,u=e(t.tick0);if(i(c)){var d=s((l-u)/c)*c+u;return"category"===t.type&&(d=a.constrain(d,0,t._categories.length-1)),d}var h=c.charAt(0),f=Number(c.substr(1));if("M"===h){for(var p,g,m,v=0,y=u;v<10;){if(((p=w.tickIncrement(y,c,o,t.calendar))-l)*(y-l)<=0)return o?Math.min(y,p):Math.max(y,p);g=(l-(y+p)/2)/(p-y),m=h+(Math.abs(Math.round(g))||1)*f,y=w.tickIncrement(y,m,g<0?!o:o,t.calendar),v++}return a.error("tickFirst did not converge",t),y}if("L"===h)return Math.log(s((Math.pow(10,l)-u)/f)*f+u)/Math.LN10;if("D"===h){var _="D2"===c?E:D,x=a.roundUp(a.mod(l,1),_,o);return Math.floor(l)+Math.log(r.round(Math.pow(10,x),1))/Math.LN10}throw"unrecognized dtick "+String(c)},w.tickText=function(t,e,n){var r,o,s=N(t,e),l="array"===t.tickmode,c=n||l,u="category"===t.type?t.d2l_noadd:t.d2l;if(l&&Array.isArray(t.ticktext)){var d=a.simpleMap(t.range,t.r2l),h=Math.abs(d[1]-d[0])/1e4;for(o=0;o<t.ticktext.length&&!(Math.abs(e-u(t.tickvals[o]))<h);o++);if(o<t.ticktext.length)return s.text=String(t.ticktext[o]),s}function f(r){var i;return void 0===r||(n?"none"===r:(i={first:t._tmin,last:t._tmax}[r],"all"!==r&&e!==i))}return r=n?"never":"none"!==t.exponentformat&&f(t.showexponent)?"hide":"","date"===t.type?function(t,e,n,r){var o=t._tickround,s=n&&t.hoverformat||w.getTickFormat(t);r&&(o=i(o)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[o]);var l,c=a.formatDate(e.x,s,o,t._dateFormat,t.calendar,t._extraFormat),u=c.indexOf("\n");-1!==u&&(l=c.substr(u+1),c=c.substr(0,u));r&&("00:00:00"===c||"00:00"===c?(c=l,l=""):8===c.length&&(c=c.replace(/:00$/,"")));l&&(n?"d"===o?c+=", "+l:c=l+(c?", "+c:""):t._inCalcTicks&&l===t._prevDateHead||(c+="<br>"+l,t._prevDateHead=l));e.text=c}(t,s,n,c):"log"===t.type?function(t,e,n,r,o){var s=t.dtick,l=e.x,c=t.tickformat;"never"===o&&(o="");!r||"string"==typeof s&&"L"===s.charAt(0)||(s="L3");if(c||"string"==typeof s&&"L"===s.charAt(0))e.text=H(Math.pow(10,l),t,o,r);else if(i(s)||"D"===s.charAt(0)&&a.mod(l+.01,1)<.1){var u=Math.round(l);-1!==["e","E","power"].indexOf(t.exponentformat)||B(t.exponentformat)&&F(u)?(e.text=0===u?1:1===u?"10":u>1?"10<sup>"+u+"</sup>":"10<sup>"+_+-u+"</sup>",e.fontSize*=1.25):(e.text=H(Math.pow(10,l),t,"","fakehover"),"D1"===s&&"y"===t._id.charAt(0)&&(e.dy-=e.fontSize/6))}else{if("D"!==s.charAt(0))throw"unrecognized dtick "+String(s);e.text=String(Math.round(Math.pow(10,a.mod(l,1)))),e.fontSize*=.75}if("D1"===t.dtick){var d=String(e.text).charAt(0);"0"!==d&&"1"!==d||("y"===t._id.charAt(0)?e.dx-=e.fontSize/4:(e.dy+=e.fontSize/2,e.dx+=(t.range[1]>t.range[0]?1:-1)*e.fontSize*(l<0?.5:.25)))}}(t,s,0,c,r):"category"===t.type?function(t,e){var n=t._categories[Math.round(e.x)];void 0===n&&(n="");e.text=String(n)}(t,s):"angular"===t._id?function(t,e,n,r,i){if("radians"!==t.thetaunit||n)e.text=H(e.x,t,i,r);else{var o=e.x/180;if(0===o)e.text="0";else{var s=function(t){function e(t,e){return Math.abs(t-e)<=1e-6}var n=function(t){var n=1;for(;!e(Math.round(t*n)/n,t);)n*=10;return n}(t),r=t*n,i=Math.abs(function t(n,r){return e(r,0)?n:t(r,n%r)}(r,n));return[Math.round(r/i),Math.round(n/i)]}(o);if(s[1]>=100)e.text=H(a.deg2rad(e.x),t,i,r);else{var l=e.x<0;1===s[1]?1===s[0]?e.text="π":e.text=s[0]+"π":e.text=["<sup>",s[0],"</sup>","⁄","<sub>",s[1],"</sub>","π"].join(""),l&&(e.text=_+e.text)}}}}(t,s,n,c,r):function(t,e,n,r,i){"never"===i?i="":"all"===t.showexponent&&Math.abs(e.x/t.dtick)<1e-6&&(i="hide");e.text=H(e.x,t,i,r)}(t,s,0,c,r),t.tickprefix&&!f(t.showtickprefix)&&(s.text=t.tickprefix+s.text),t.ticksuffix&&!f(t.showticksuffix)&&(s.text+=t.ticksuffix),s},w.hoverLabelText=function(t,e,n){if(n!==x&&n!==e)return w.hoverLabelText(t,e)+" - "+w.hoverLabelText(t,n);var r="log"===t.type&&e<=0,i=w.tickText(t,t.c2l(r?-e:e),"hover").text;return r?0===e?"0":_+i:i};var R=["f","p","n","μ","m","","k","M","G","T"];function B(t){return"SI"===t||"B"===t}function F(t){return t>14||t<-15}function H(t,e,n,r){var o=t<0,s=e._tickround,l=n||e.exponentformat||"B",c=e._tickexponent,u=w.getTickFormat(e),d=e.separatethousands;if(r){var h={exponentformat:e.exponentformat,dtick:"none"===e.showexponent?e.dtick:i(t)&&Math.abs(t)||1,range:"none"===e.showexponent?e.range.map(e.r2d):[0,t||1]};j(h),s=(Number(h._tickround)||0)+4,c=h._tickexponent,e.hoverformat&&(u=e.hoverformat)}if(u)return e._numFormat(u)(t).replace(/-/g,_);var f,p=Math.pow(10,-s)/2;if("none"===l&&(c=0),(t=Math.abs(t))<p)t="0",o=!1;else{if(t+=p,c&&(t*=Math.pow(10,-c),s+=c),0===s)t=String(Math.floor(t));else if(s<0){t=(t=String(Math.round(t))).substr(0,t.length+s);for(var g=s;g<0;g++)t+="0"}else{var m=(t=String(t)).indexOf(".")+1;m&&(t=t.substr(0,m+s).replace(/\.?0+$/,""))}t=a.numSeparate(t,e._separators,d)}c&&"hide"!==l&&(B(l)&&F(c)&&(l="power"),f=c<0?_+-c:"power"!==l?"+"+c:String(c),"e"===l?t+="e"+f:"E"===l?t+="E"+f:"power"===l?t+="×10<sup>"+f+"</sup>":"B"===l&&9===c?t+="B":B(l)&&(t+=R[c/3+5]));return o?_+t:t}function q(t,e){for(var n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n])}function Z(t,e,n){var r,i,o=[],s=[],l=t.layout;for(r=0;r<e.length;r++)o.push(w.getFromId(t,e[r]));for(r=0;r<n.length;r++)s.push(w.getFromId(t,n[r]));var c=Object.keys(o[0]),u=["anchor","domain","overlaying","position","side","tickangle"],d=["linear","log"];for(r=0;r<c.length;r++){var h=c[r],f=o[0][h],p=s[0][h],g=!0,m=!1,v=!1;if("_"!==h.charAt(0)&&"function"!=typeof f&&-1===u.indexOf(h)){for(i=1;i<o.length&&g;i++){var y=o[i][h];"type"===h&&-1!==d.indexOf(f)&&-1!==d.indexOf(y)&&f!==y?m=!0:y!==f&&(g=!1)}for(i=1;i<s.length&&g;i++){var _=s[i][h];"type"===h&&-1!==d.indexOf(p)&&-1!==d.indexOf(_)&&p!==_?v=!0:s[i][h]!==p&&(g=!1)}g&&(m&&(l[o[0]._name].type="linear"),v&&(l[s[0]._name].type="linear"),V(l,h,o,s,t._fullLayout._dfltTitle))}}for(r=0;r<t._fullLayout.annotations.length;r++){var x=t._fullLayout.annotations[r];-1!==e.indexOf(x.xref)&&-1!==n.indexOf(x.yref)&&a.swapAttrs(l.annotations[r],["?"])}}function V(t,e,n,r,i){var o,s=a.nestedProperty,l=s(t[n[0]._name],e).get(),c=s(t[r[0]._name],e).get();for("title"===e&&(l===i.x&&(l=i.y),c===i.y&&(c=i.x)),o=0;o<n.length;o++)s(t,n[o]._name+"."+e).set(c);for(o=0;o<r.length;o++)s(t,r[o]._name+"."+e).set(l)}w.getTickFormat=function(t){var e,n,r,i,o,a,s,l,c,u,d,h,f;function g(t){return"string"!=typeof t?t:Number(t.replace("M",""))*p}function m(t,e){var n=["L","D"];if(typeof t==typeof e){if("number"==typeof t)return t-e;var r=n.indexOf(t.charAt(0)),i=n.indexOf(e.charAt(0));return r===i?Number(t.replace(/(L|D)/g,""))-Number(e.replace(/(L|D)/g,"")):r-i}return"number"==typeof t?1:-1}if(t.tickformatstops&&t.tickformatstops.length>0)switch(t.type){case"date":case"linear":for(e=0;e<t.tickformatstops.length;e++)if(c=t.dtick,u=t.tickformatstops[e].dtickrange,d=void 0,void 0,void 0,d=g||function(t){return t},h=u[0],f=u[1],(!h&&"number"!=typeof h||d(h)<=d(c))&&(!f&&"number"!=typeof f||d(f)>=d(c))){n=t.tickformatstops[e];break}break;case"log":for(e=0;e<t.tickformatstops.length;e++)if(r=t.dtick,i=t.tickformatstops[e].dtickrange,void 0,void 0,void 0,void 0,o=null===i[0],a=null===i[1],s=m(r,i[0])>=0,l=m(r,i[1])<=0,(o||s)&&(a||l)){n=t.tickformatstops[e];break}}return n?n.value:t.tickformat},w.getSubplots=function(t,e){var n=t._fullLayout._subplots,r=n.cartesian.concat(n.gl2d||[]),i=e?w.findSubplotsWithAxis(r,e):r;return i.sort(function(t,e){var n=t.substr(1).split("y"),r=e.substr(1).split("y");return n[0]===r[0]?+n[1]-+r[1]:+n[0]-+r[0]}),i},w.findSubplotsWithAxis=function(t,e){for(var n=new RegExp("x"===e._id.charAt(0)?"^"+e._id+"y":e._id+"$"),r=[],i=0;i<t.length;i++){var o=t[i];n.test(o)&&r.push(o)}return r},w.makeClipPaths=function(t){var e,n,i=t._fullLayout,o={_offset:0,_length:i.width,_id:""},a={_offset:0,_length:i.height,_id:""},s=w.list(t,"x",!0),l=w.list(t,"y",!0),c=[];for(e=0;e<s.length;e++)for(c.push({x:s[e],y:a}),n=0;n<l.length;n++)0===e&&c.push({x:o,y:l[n]}),c.push({x:s[e],y:l[n]});var u=i._clips.selectAll(".axesclip").data(c,function(t){return t.x._id+t.y._id});u.enter().append("clipPath").classed("axesclip",!0).attr("id",function(t){return"clip"+i._uid+t.x._id+t.y._id}).append("rect"),u.exit().remove(),u.each(function(t){r.select(this).select("rect").attr({x:t.x._offset||0,y:t.y._offset||0,width:t.x._length||1,height:t.y._length||1})})},w.doTicks=function(t,e,n){var d,h=t._fullLayout,f=!1;if("object"==typeof e)e=(d=e)._id,f=!0;else if(d=w.getFromId(t,e),"redraw"===e&&h._paper.selectAll("g.subplot").each(function(t){var e=h._plots[t],n=e.xaxis,r=e.yaxis;e.xaxislayer.selectAll("."+n._id+"tick").remove(),e.yaxislayer.selectAll("."+r._id+"tick").remove(),e.gridlayer.selectAll("path").remove(),e.zerolinelayer.selectAll("path").remove(),h._infolayer.select(".g-"+n._id+"title").remove(),h._infolayer.select(".g-"+r._id+"title").remove()}),!e||"redraw"===e)return a.syncOrAsync(w.list(t,"",!0).map(function(n){return function(){if(n._id){var r=w.doTicks(t,n._id);return"redraw"===e&&(n._r=n.range.slice(),n._rl=a.simpleMap(n._r,n.r2l)),r}}}));d.setScale();var p,g,m,v,y,_=e.charAt(0),x=w.counterLetter(e),k=w.calcTicks(d),M=function(t){return[t.text,t.x,d.mirror,t.font,t.fontSize,t.fontColor].join("_")},A=e+"tick",L=e+"grid",S=e+"zl",C=(d.linewidth||1)/2,P="outside"===d.ticks?d.ticklen:0,z=0,D=u.crispRound(t,d.gridwidth,1),E=u.crispRound(t,d.zerolinewidth,D),O=u.crispRound(t,d.tickwidth,1);if(d._counterangle&&"outside"===d.ticks){var I=d._counterangle*Math.PI/180;P=d.ticklen*Math.cos(I)+1,z=d.ticklen*Math.sin(I)}if(d.showticklabels&&("outside"===d.ticks||d.showline)&&(P+=.2*d.tickfont.size),"x"===_)p=["bottom","top"],g=d._transfn||function(t){return"translate("+(d._offset+d.l2p(t.x))+",0)"},m=function(t,e){if(d._counterangle){var n=d._counterangle*Math.PI/180;return"M0,"+t+"l"+Math.sin(n)*e+","+Math.cos(n)*e}return"M0,"+t+"v"+e};else if("y"===_)p=["left","right"],g=d._transfn||function(t){return"translate(0,"+(d._offset+d.l2p(t.x))+")"},m=function(t,e){if(d._counterangle){var n=d._counterangle*Math.PI/180;return"M"+t+",0l"+Math.cos(n)*e+","+-Math.sin(n)*e}return"M"+t+",0h"+e};else{if("angular"!==e)return void a.warn("Unrecognized doTicks axis:",e);p=["left","right"],g=d._transfn,m=function(t,e){return"M"+t+",0h"+e}}var j=d.side||p[0],N=[-1,1,j===p[1]?1:-1];if("inside"!==d.ticks==("x"===_)&&(N=N.map(function(t){return-t})),d.visible){d._tickFilter&&(k=k.filter(d._tickFilter));var R=k.filter(U);if("angular"===d._id&&(R=k),f){if(W(d._axislayer,m(d._pos+C*N[2],N[2]*d.ticklen)),d._counteraxis)Y({gridlayer:d._gridlayer,zerolinelayer:d._zerolinelayer},d._counteraxis);return G(d._axislayer,d._pos)}if(h._has("cartesian")){v=w.getSubplots(t,d);var B={};v.map(function(t){var e=h._plots[t],n=e[x+"axis"],r=n._mainAxis._id;B[r]||(B[r]=1,Y(e,n,t))});var F=d._mainSubplot,H=h._plots[F],q=[];if(d.ticks){var Z=N[2],V=m(d._mainLinePosition+C*Z,Z*d.ticklen);d._anchorAxis&&d.mirror&&!0!==d.mirror&&(V+=m(d._mainMirrorPosition-C*Z,-Z*d.ticklen)),W(H[_+"axislayer"],V),q=Object.keys(d._linepositions)}return q.map(function(t){var e=h._plots[t][_+"axislayer"],n=d._linepositions[t]||[];function r(t){var e=N[t];return m(n[t]+C*e,e*d.ticklen)}W(e,r(0)+r(1))}),G(H[_+"axislayer"],d._mainLinePosition)}}function U(t){var e=d.l2p(t.x);return e>1&&e<d._length-1}function W(t,e){var n=t.selectAll("path."+A).data("inside"===d.ticks?R:k,M);e&&d.ticks?(n.enter().append("path").classed(A,1).classed("ticks",1).classed("crisp",1).call(c.stroke,d.tickcolor).style("stroke-width",O+"px").attr("d",e),n.attr("transform",g),n.exit().remove()):n.remove()}function G(n,o){var l,c,f,p,m,x=n.selectAll("g."+A).data(k,M);if(!i(o))return x.remove(),void X();if(!d.showticklabels)return x.remove(),X(),void D();"x"===_?(l=function(t){return t.dx+z*m},p=o+(P+C)*(m="bottom"===j?1:-1),c=function(t){return t.dy+p+t.fontSize*("bottom"===j?1:-.2)},f=function(t){return i(t)&&0!==t&&180!==t?t*m<0?"end":"start":"middle"}):"y"===_?(m="right"===j?1:-1,c=function(t){return t.dy+t.fontSize*b-z*m},l=function(t){return t.dx+o+(P+C+(90===Math.abs(d.tickangle)?t.fontSize/2:0))*m},f=function(t){return i(t)&&90===Math.abs(t)?"middle":"right"===j?"start":"end"}):"angular"===e&&(d._labelShift=z,d._labelStandoff=P,d._pad=C,l=d._labelx,c=d._labely,f=d._labelanchor);var w=0,T=0,L=[];function S(t,e){t.each(function(t){var n=f(e,t),o=r.select(this),a=o.select(".text-math-group"),s=g(t)+(i(e)&&0!=+e?" rotate("+e+","+l(t)+","+(c(t)-t.fontSize/2)+")":"");if(a.empty())o.select("text").attr({transform:s,"text-anchor":n});else{var d=u.bBox(a.node()).width*{end:-.5,start:.5}[n];a.attr("transform",s+(d?"translate("+d+",0)":""))}})}function D(){if(d.showticklabels){var e=t.getBoundingClientRect(),r=n.node().getBoundingClientRect();d._boundingBox={width:r.width,height:r.height,left:r.left-e.left,right:r.right-e.left,top:r.top-e.top,bottom:r.bottom-e.top}}else{var i,o=h._size;"x"===_?(i="free"===d.anchor?o.t+o.h*(1-d.position):o.t+o.h*(1-d._anchorAxis.domain[{bottom:0,top:1}[d.side]]),d._boundingBox={top:i,bottom:i,left:d._offset,right:d._offset+d._length,width:d._length,height:0}):(i="free"===d.anchor?o.l+o.w*d.position:o.l+o.w*d._anchorAxis.domain[{left:0,right:1}[d.side]],d._boundingBox={left:i,right:i,bottom:d._offset+d._length,top:d._offset,height:d._length,width:0})}if(v){var a=d._counterSpan=[1/0,-1/0];for(y=0;y<v.length;y++){var s=h._plots[v[y]]["x"===_?"yaxis":"xaxis"];l(a,[s._offset,s._offset+s._length])}"free"===d.anchor&&l(a,"x"===_?[d._boundingBox.bottom,d._boundingBox.top]:[d._boundingBox.right,d._boundingBox.left])}function l(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.max(t[1],e[1])}}x.enter().append("g").classed(A,1).append("text").attr("text-anchor","middle").each(function(e){var n=r.select(this),i=t._promises.length;n.call(s.positionText,l(e),c(e)).call(u.font,e.font,e.fontSize,e.fontColor).text(e.text).call(s.convertToTspans,t),(i=t._promises[i])?L.push(t._promises.pop().then(function(){S(n,d.tickangle)})):S(n,d.tickangle)}),x.exit().remove(),x.each(function(t){w=Math.max(w,t.fontSize)}),"angular"===e&&x.each(function(t){r.select(this).select("text").call(s.positionText,l(t),c(t))}),S(x,d._lastangle||d.tickangle);var E=a.syncOrAsync([function(){return L.length&&Promise.all(L)},function(){if(S(x,d.tickangle),"x"===_&&!i(d.tickangle)&&("log"!==d.type||"D"!==String(d.dtick).charAt(0))){var t=[];for(x.each(function(e){var n=r.select(this),i=n.select(".text-math-group"),o=d.l2p(e.x);i.empty()&&(i=n.select("text"));var a=u.bBox(i.node());t.push({top:0,bottom:10,height:10,left:o-a.width/2,right:o+a.width/2+2,width:a.width+2})}),y=0;y<t.length-1;y++)if(a.bBoxIntersect(t[y],t[y+1])){T=30;break}T&&(Math.abs((k[k.length-1].x-k[0].x)*d._m)/(k.length-1)<2.5*w&&(T=90),S(x,T)),d._lastangle=T}return X(),e+" done"},D]);return E&&E.then&&t._promises.push(E),E}function X(){if(!n){var i,o,a,s,c=T.getFromId(t,e),d=r.select(t).selectAll("g."+e+"tick"),f={selection:d,side:c.side},p=e.charAt(0),g=t._fullLayout._size,m=c.titlefont.size;if(d.size()){var v=u.getTranslate(d.node().parentNode);f.offsetLeft=v.x,f.offsetTop=v.y}var y=10+1.5*m+(c.linewidth?c.linewidth-1:0);"x"===p?(o="free"===c.anchor?{_offset:g.t+(1-(c.position||0))*g.h,_length:0}:T.getFromId(t,c.anchor),a=c._offset+c._length/2,s="top"===c.side?-y-m*(c.showticklabels?1:0):o._length+y+m*(c.showticklabels?1.5:.5),s+=o._offset,c.rangeslider&&c.rangeslider.visible&&c._boundingBox&&(s+=(h.height-h.margin.b-h.margin.t)*c.rangeslider.thickness+c._boundingBox.height),f.side||(f.side="bottom")):(o="free"===c.anchor?{_offset:g.l+(c.position||0)*g.w,_length:0}:T.getFromId(t,c.anchor),s=c._offset+c._length/2,a="right"===c.side?o._length+y+m*(c.showticklabels?1:.5):-y-m*(c.showticklabels?.5:0),a+=o._offset,i={rotate:"-90",offset:0},f.side||(f.side="left")),l.draw(t,e+"title",{propContainer:c,propName:c._name+".title",placeholder:h._dfltTitle[p],avoid:f,transform:i,attributes:{x:a,y:s,"text-anchor":"middle"}})}}function Y(n,i,s){var l,u,h=n.gridlayer.selectAll("."+e),f=n.zerolinelayer,p=n["hidegrid"+_]?[]:R,m=d._gridpath||("x"===_?"M0,"+i._offset+"v":"M"+i._offset+",0h")+i._length,v=h.selectAll("path."+L).data(!1===d.showgrid?[]:p,M);if(v.enter().append("path").classed(L,1).classed("crisp",1).attr("d",m).each(function(t){d.zeroline&&("linear"===d.type||"-"===d.type)&&Math.abs(t.x)<d.dtick/100&&r.select(this).remove()}),v.attr("transform",g).call(c.stroke,d.gridcolor||"#ddd").style("stroke-width",D+"px"),"function"==typeof m&&v.attr("d",m),v.exit().remove(),f){for(var y=!1,x=0;x<t._fullData.length;x++)if(l=t._fullData[x],u=s,!0===l.visible&&l.xaxis+l.yaxis===u&&(o.traceIs(l,"bar")&&l.orientation==={x:"h",y:"v"}[_]||l.fill&&l.fill.charAt(l.fill.length-1)===_)){y=!0;break}var b=a.simpleMap(d.range,d.r2l),w=b[0]*b[1]<=0&&d.zeroline&&("linear"===d.type||"-"===d.type)&&p.length&&(y||U({x:0})||!d.showline),k=f.selectAll("path."+S).data(w?[{x:0,id:e}]:[]);k.enter().append("path").classed(S,1).classed("zl",1).classed("crisp",1).attr("d",m).each(function(){f.selectAll("path").sort(function(t,e){return T.idSort(t.id,e.id)})}),k.attr("transform",g).call(c.stroke,d.zerolinecolor||c.defaultLine).style("stroke-width",E+"px"),k.exit().remove()}}},w.swap=function(t,e){for(var n=function(t,e){var n,r,i=[];for(n=0;n<e.length;n++){var o=[],a=t._fullData[e[n]].xaxis,s=t._fullData[e[n]].yaxis;if(a&&s){for(r=0;r<i.length;r++)-1===i[r].x.indexOf(a)&&-1===i[r].y.indexOf(s)||o.push(r);if(o.length){var l,c=i[o[0]];if(o.length>1)for(r=1;r<o.length;r++)l=i[o[r]],q(c.x,l.x),q(c.y,l.y);q(c.x,[a]),q(c.y,[s])}else i.push({x:[a],y:[s]})}}return i}(t,e),r=0;r<n.length;r++)Z(t,n[r].x,n[r].y)}},{"../../components/color":34,"../../components/drawing":59,"../../components/titles":125,"../../constants/alignment":132,"../../constants/numerical":134,"../../lib":151,"../../lib/svg_text_utils":172,"../../registry":233,"./axis_autotype":195,"./axis_ids":197,"./set_convert":213,d3:1,"fast-isnumeric":4}],195:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib"),o=t("../../constants/numerical").BADNUM;e.exports=function(t,e){return function(t,e){for(var n,o=0,a=0,s=Math.max(1,(t.length-1)/1e3),l=0;l<t.length;l+=s)n=t[Math.round(l)],i.isDateTime(n,e)&&(o+=1),r(n)&&(a+=1);return o>2*a}(t,e)?"date":function(t){for(var e,n=Math.max(1,(t.length-1)/1e3),r=0,a=0,s=0;s<t.length;s+=n)e=t[Math.round(s)],i.cleanNumber(e)!==o?r++:"string"==typeof e&&""!==e&&"None"!==e&&a++;return a>2*r}(t)?"category":function(t){if(!t)return!1;for(var e=0;e<t.length;e++)if(r(t[e]))return!0;return!1}(t)?"linear":"-"}},{"../../constants/numerical":134,"../../lib":151,"fast-isnumeric":4}],196:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("../../lib"),o=t("./layout_attributes"),a=t("./tick_value_defaults"),s=t("./tick_mark_defaults"),l=t("./tick_label_defaults"),c=t("./category_order_defaults"),u=t("./line_grid_defaults"),d=t("./set_convert"),h=t("./ordered_categories");e.exports=function(t,e,n,f,p){var g=f.letter,m=f.font||{},v=n("visible",!f.cheateronly),y=e.type;"date"===y&&r.getComponentMethod("calendars","handleDefaults")(t,e,"calendar",f.calendar);if(d(e,p),n("autorange",!e.isValidRange(t.range))&&n("rangemode"),n("range"),e.cleanRange(),c(t,e,n),e._initialCategories="category"===y?h(g,e.categoryorder,e.categoryarray,f.data):[],"category"===y||f.noHover||n("hoverformat"),!v)return e;var _=n("color"),x=_===t.color?_:m.color;return n("title",p._dfltTitle[g]),i.coerceFont(n,"titlefont",{family:m.family,size:Math.round(1.2*m.size),color:x}),a(t,e,n,y),l(t,e,n,y,f),s(t,e,n,f),u(t,e,n,{dfltColor:_,bgColor:f.bgColor,showGrid:f.showGrid,attributes:o}),(e.showline||e.ticks)&&n("mirror"),e}},{"../../lib":151,"../../registry":233,"./category_order_defaults":198,"./layout_attributes":206,"./line_grid_defaults":208,"./ordered_categories":209,"./set_convert":213,"./tick_label_defaults":214,"./tick_mark_defaults":215,"./tick_value_defaults":216}],197:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("./constants");n.id2name=function(t){if("string"==typeof t&&t.match(i.AX_ID_PATTERN)){var e=t.substr(1);return"1"===e&&(e=""),t.charAt(0)+"axis"+e}},n.name2id=function(t){if(t.match(i.AX_NAME_PATTERN)){var e=t.substr(5);return"1"===e&&(e=""),t.charAt(0)+e}},n.cleanId=function(t,e){if(t.match(i.AX_ID_PATTERN)&&(!e||t.charAt(0)===e)){var n=t.substr(1).replace(/^0+/,"");return"1"===n&&(n=""),t.charAt(0)+n}},n.list=function(t,e,r){var i=t._fullLayout;if(!i)return[];var o,a=n.listIds(t,e),s=new Array(a.length);for(o=0;o<a.length;o++){var l=a[o];s[o]=i[l.charAt(0)+"axis"+l.substr(1)]}if(!r){var c=i._subplots.gl3d||[];for(o=0;o<c.length;o++){var u=i[c[o]];e?s.push(u[e+"axis"]):s.push(u.xaxis,u.yaxis,u.zaxis)}}return s},n.listIds=function(t,e){var n=t._fullLayout;if(!n)return[];var r=n._subplots;return e?r[e+"axis"]:r.xaxis.concat(r.yaxis)},n.getFromId=function(t,e,r){var i=t._fullLayout;return"x"===r?e=e.replace(/y[0-9]*/,""):"y"===r&&(e=e.replace(/x[0-9]*/,"")),i[n.id2name(e)]},n.getFromTrace=function(t,e,i){var o=t._fullLayout,a=null;if(r.traceIs(e,"gl3d")){var s=e.scene;"scene"===s.substr(0,5)&&(a=o[s][i+"axis"])}else a=n.getFromId(t,e[i+"axis"]||i);return a},n.idSort=function(t,e){var n=t.charAt(0),r=e.charAt(0);return n!==r?n>r?1:-1:+(t.substr(1)||1)-+(e.substr(1)||1)}},{"../../registry":233,"./constants":199}],198:[function(t,e,n){"use strict";e.exports=function(t,e,n){if("category"===e.type){var r,i=t.categoryarray,o=Array.isArray(i)&&i.length>0;o&&(r="array");var a=n("categoryorder",r);"array"===a&&n("categoryarray"),o||"array"!==a||(e.categoryorder="trace")}}},{}],199:[function(t,e,n){"use strict";var r=t("../../lib").counterRegex;e.exports={idRegex:{x:r("x"),y:r("y")},attrRegex:r("[xy]axis"),xAxisMatch:r("xaxis"),yAxisMatch:r("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","maplayer","barlayer","carpetlayer","violinlayer","boxlayer","scatterlayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib":151}],200:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./axis_ids").id2name;e.exports=function(t,e,n,o,a){var s=a._axisConstraintGroups,l=e._id,c=l.charAt(0);if(!e.fixedrange&&(n("constrain"),r.coerce(t,e,{constraintoward:{valType:"enumerated",values:"x"===c?["left","center","right"]:["bottom","middle","top"],dflt:"x"===c?"center":"middle"}},"constraintoward"),t.scaleanchor)){var u=function(t,e,n,r){var o,a,s,l,c=r[i(e)].type,u=[];for(a=0;a<n.length;a++)(s=n[a])!==e&&((l=r[i(s)]).type!==c||l.fixedrange||u.push(s));for(o=0;o<t.length;o++)if(t[o][e]){var d=t[o],h=[];for(a=0;a<u.length;a++)s=u[a],d[s]||h.push(s);return{linkableAxes:h,thisGroup:d}}return{linkableAxes:u,thisGroup:null}}(s,l,o,a),d=r.coerce(t,e,{scaleanchor:{valType:"enumerated",values:u.linkableAxes}},"scaleanchor");if(d){var h=n("scaleratio");h||(h=e.scaleratio=1),function(t,e,n,r,i){var o,a,s,l,c;null===e?((e={})[n]=1,c=t.length,t.push(e)):c=t.indexOf(e);var u=Object.keys(e);for(o=0;o<t.length;o++)if(s=t[o],o!==c&&s[r]){var d=s[r];for(a=0;a<u.length;a++)l=u[a],s[l]=d*i*e[l];return void t.splice(c,1)}if(1!==i)for(a=0;a<u.length;a++)e[u[a]]*=i;e[r]=1}(s,u.thisGroup,l,d,h)}else-1!==o.indexOf(t.scaleanchor)&&r.warn("ignored "+e._name+'.scaleanchor: "'+t.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because the targetaxis has fixed range.')}}},{"../../lib":151,"./axis_ids":197}],201:[function(t,e,n){"use strict";var r=t("./axis_ids").id2name,i=t("./scale_zoom"),o=t("../../constants/numerical").ALMOST_EQUAL,a=t("../../constants/alignment").FROM_BL;function s(t,e){var n=t._inputDomain,r=a[t.constraintoward],i=n[0]+(n[1]-n[0])*r;t.domain=t._input.domain=[i+(n[0]-i)/e,i+(n[1]-i)/e]}n.enforce=function(t){var e,n,a,l,c,u,d,h=t._fullLayout,f=h._axisConstraintGroups||[];for(e=0;e<f.length;e++){var p=f[e],g=Object.keys(p),m=1/0,v=0,y=1/0,_={},x={},b=!1;for(n=0;n<g.length;n++)x[a=g[n]]=l=h[r(a)],l._inputDomain?l.domain=l._inputDomain.slice():l._inputDomain=l.domain.slice(),l._inputRange||(l._inputRange=l.range.slice()),l.setScale(),_[a]=c=Math.abs(l._m)/p[a],m=Math.min(m,c),"domain"!==l.constrain&&l._constraintShrinkable||(y=Math.min(y,c)),delete l._constraintShrinkable,v=Math.max(v,c),"domain"===l.constrain&&(b=!0);if(!(m>o*v)||b)for(n=0;n<g.length;n++)if(c=_[a=g[n]],u=(l=x[a]).constrain,c!==y||"domain"===u)if(d=c/y,"range"===u)i(l,d);else{var w=l._inputDomain,k=(l.domain[1]-l.domain[0])/(w[1]-w[0]),T=(l.r2l(l.range[1])-l.r2l(l.range[0]))/(l.r2l(l._inputRange[1])-l.r2l(l._inputRange[0]));if((d/=k)*T<1){l.domain=l._input.domain=w.slice(),i(l,d);continue}if(T<1&&(l.range=l._input.range=l._inputRange.slice(),d*=T),l.autorange&&l._min.length&&l._max.length){var M=l.r2l(l.range[0]),A=l.r2l(l.range[1]),L=(M+A)/2,S=L,C=L,P=Math.abs(A-L),z=L-P*d*1.0001,D=L+P*d*1.0001;s(l,d),l.setScale();var E,O,I=Math.abs(l._m);for(O=0;O<l._min.length;O++)(E=l._min[O].val-l._min[O].pad/I)>z&&E<S&&(S=E);for(O=0;O<l._max.length;O++)(E=l._max[O].val+l._max[O].pad/I)<D&&E>C&&(C=E);d/=(C-S)/(2*P),S=l.l2r(S),C=l.l2r(C),l.range=l._input.range=M<A?[S,C]:[C,S]}s(l,d)}}},n.clean=function(t,e){if(e._inputDomain){for(var n=!1,r=e._id,i=t._fullLayout._axisConstraintGroups,o=0;o<i.length;o++)if(i[o][r]){n=!0;break}n&&"domain"===e.constrain||(e._input.domain=e.domain=e._inputDomain,delete e._inputDomain)}}},{"../../constants/alignment":132,"../../constants/numerical":134,"./axis_ids":197,"./scale_zoom":211}],202:[function(t,e,n){"use strict";var r=t("d3"),i=t("tinycolor2"),o=t("has-passive-events"),a=t("../../plotly"),s=t("../../registry"),l=t("../../lib"),c=t("../../lib/svg_text_utils"),u=t("../../components/color"),d=t("../../components/drawing"),h=t("../../components/fx"),f=t("../../lib/setcursor"),p=t("../../components/dragelement"),g=t("../../constants/alignment").FROM_TL,m=t("../plots"),v=t("./axes").doTicks,y=t("./axis_ids").getFromId,_=t("./select"),x=t("./scale_zoom"),b=t("./constants"),w=b.MINDRAG,k=b.MINZOOM,T=!0;function M(t,e,n,r){var i=t.draglayer.selectAll("."+n).data([0]);return i.enter().append(e).classed("drag",!0).classed(n,!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id),i.call(f,r),i.node()}function A(t,e,n,i,o,a,s){var l=M(t,"rect",e,n);return r.select(l).call(d.setRect,i,o,a,s),l}function L(t,e){for(var n=0;n<t.length;n++)if(!t[n].fixedrange)return e;return""}function S(t,e,n,r,i){var o,a,s,l;for(o=0;o<t.length;o++)(a=t[o]).fixedrange||(s=a._rl[0],l=a._rl[1]-s,a.range=[a.l2r(s+l*e),a.l2r(s+l*n)],r[a._name+".range[0]"]=a.range[0],r[a._name+".range[1]"]=a.range[1]);if(i&&i.length){var c=(e+(1-n))/2;S(i,c,1-c,r)}}function C(t,e){for(var n=0;n<t.length;n++){var r=t[n];r.fixedrange||(r.range=[r.l2r(r._rl[0]-e/r._m),r.l2r(r._rl[1]-e/r._m)])}}function P(t,e,n,r,i){return t.append("path").attr("class","zoombox").style({fill:e>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+n+", "+r+")").attr("d",i+"Z")}function z(t,e,n){return t.append("path").attr("class","zoombox-corners").style({fill:u.background,stroke:u.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+e+", "+n+")").attr("d","M0,0Z")}function D(t){t.selectAll(".select-outline").remove()}function E(t,e,n,r,i,o){t.attr("d",r+"M"+n.l+","+n.t+"v"+n.h+"h"+n.w+"v-"+n.h+"h-"+n.w+"Z"),O(t,e,i,o)}function O(t,e,n,r){n||(t.transition().style("fill",r>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),e.transition().style("opacity",1).duration(200))}function I(t){r.select(t).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function j(t){T&&t.data&&t._context.showTips&&(l.notifier(l._(t,"Double-click to zoom back out"),"long"),T=!1)}function N(t){return"lasso"===t||"select"===t}function R(t){var e=Math.floor(Math.min(t.b-t.t,t.r-t.l,k)/2);return"M"+(t.l-3.5)+","+(t.t-.5+e)+"h3v"+-e+"h"+e+"v-3h-"+(e+3)+"ZM"+(t.r+3.5)+","+(t.t-.5+e)+"h-3v"+-e+"h"+-e+"v-3h"+(e+3)+"ZM"+(t.r+3.5)+","+(t.b+.5-e)+"h-3v"+e+"h"+-e+"v3h"+(e+3)+"ZM"+(t.l-3.5)+","+(t.b+.5-e)+"h3v"+e+"h"+e+"v3h-"+(e+3)+"Z"}function B(t,e){if(o){var n=void 0!==t.onwheel?"wheel":"mousewheel";t._onwheel&&t.removeEventListener(n,t._onwheel),t._onwheel=e,t.addEventListener(n,e,{passive:!1})}else void 0!==t.onwheel?t.onwheel=e:void 0!==t.onmousewheel&&(t.onmousewheel=e)}e.exports={makeDragBox:function(t,e,n,o,u,f,T,M){var O,F,H,q,Z,V,U,W,G,X,Y,$,J,Q=t._fullLayout,K=t._fullLayout._zoomlayer,tt=T+M==="nsew",et=1===(T+M).length;function nt(){F=[e.xaxis],H=[e.yaxis];var n=F[0],r=H[0];V=n._length,U=r._length;var i,o,a=Q._axisConstraintGroups,s=[n._id],c=[r._id];O=[e].concat(T&&M?e.overlays:[]);for(var u=1;u<O.length;u++){var d=O[u].xaxis,h=O[u].yaxis;-1===F.indexOf(d)&&(F.push(d),s.push(d._id)),-1===H.indexOf(h)&&(H.push(h),c.push(h._id))}W=L(F,M),G=L(H,T),i=G+W,o=Q.dragmode,X=i?"nsew"===i?"pan"===o?"move":"crosshair":i.toLowerCase()+"-resize":"pointer",q=n._offset,Z=r._offset;var f=function(t,e,n){var r,i,o,a,s,c,u=!1,d={},h={};for(r=0;r<t.length;r++){for(a=t[r],i=0;i<e.length;i++)if(a[e[i]]){for(s in a)-1===("x"===s.charAt(0)?e:n).indexOf(s)&&(d[s]=1);for(o=0;o<n.length;o++)a[n[o]]&&(u=!0)}for(i=0;i<n.length;i++)if(a[n[i]])for(c in a)-1===("x"===c.charAt(0)?e:n).indexOf(c)&&(h[c]=1)}return u&&(l.extendFlat(d,h),h={}),{x:d,y:h,xy:u}}(a,s,c);for(var p in Y=f.xy,$=[],f.x)$.push(y(t,p));for(var g in J=[],f.y)J.push(y(t,g))}nt();var rt=A(e,T+M+"drag",X,n,o,u,f),it=!G&&!W;if(it&&!tt)return rt.onmousedown=null,rt.style.pointerEvents="none",rt;var ot,at,st,lt,ct,ut,dt,ht,ft,pt={element:rt,gd:t,plotinfo:e,prepFn:function(e,n,r){var o,a,s,l=t._fullLayout.dragmode;it||(tt?e.shiftKey?"pan"===l?l="zoom":N(l)||(l="pan"):e.ctrlKey&&(l="pan"):l="pan"),pt.minDrag="lasso"===l?1:void 0,N(l)?(pt.xaxes=F,pt.yaxes=H,_(e,n,r,pt,l)):it?D(K):"zoom"===l?(pt.moveFn=mt,pt.doneFn=vt,pt.minDrag=1,o=n,a=r,s=rt.getBoundingClientRect(),ot=o-s.left,at=a-s.top,st={l:ot,r:ot,w:0,t:at,b:at,h:0},lt=t._hmpixcount?t._hmlumcount/t._hmpixcount:i(t._fullLayout.plot_bgcolor).getLuminance(),ut=!1,dt="xy",ht=P(K,lt,q,Z,ct="M0,0H"+V+"V"+U+"H0V0"),ft=z(K,q,Z),D(K)):"pan"===l&&(pt.moveFn=wt,pt.doneFn=Tt,D(K))},clickFn:function(n,i){if(I(t),2!==n||et||function(){if(!t._transitioningWithDuration){var e,n,r,i=t._context.doubleClick,o=(W?F:[]).concat(G?H:[]),s={};if("reset+autosize"===i)for(i="autosize",n=0;n<o.length;n++)if((e=o[n])._rangeInitial&&(e.range[0]!==e._rangeInitial[0]||e.range[1]!==e._rangeInitial[1])||!e._rangeInitial&&!e.autorange){i="reset";break}if("autosize"===i)for(n=0;n<o.length;n++)(e=o[n]).fixedrange||(s[e._name+".autorange"]=!0);else if("reset"===i)for((W||Y)&&(o=o.concat($)),G&&!Y&&(o=o.concat(J)),Y&&(W?G||(o=o.concat(H)):o=o.concat(F)),n=0;n<o.length;n++)(e=o[n])._rangeInitial?(r=e._rangeInitial,s[e._name+".range[0]"]=r[0],s[e._name+".range[1]"]=r[1]):s[e._name+".autorange"]=!0;t.emit("plotly_doubleclick",null),a.relayout(t,s)}}(),tt)h.click(t,i,e.id);else if(1===n&&et){var o=T?H[0]:F[0],s="s"===T||"w"===M?0:1,l=o._name+".range["+s+"]",u=(g=s,v=(p=o).range[g],y=Math.abs(v-p.range[1-g]),"date"===p.type?v:"log"===p.type?(m=Math.ceil(Math.max(0,-Math.log(y)/Math.LN10))+3,r.format("."+m+"g")(Math.pow(10,v))):(m=Math.floor(Math.log(Math.abs(v))/Math.LN10)-Math.floor(Math.log(y)/Math.LN10)+4,r.format("."+String(m)+"g")(v))),d="left",f="middle";if(o.fixedrange)return;T?(f="n"===T?"top":"bottom","right"===o.side&&(d="right")):"e"===M&&(d="right"),t._context.showAxisRangeEntryBoxes&&r.select(rt).call(c.makeEditable,{gd:t,immediate:!0,background:Q.paper_bgcolor,text:String(u),fill:o.tickfont?o.tickfont.color:"#444",horizontalAlign:d,verticalAlign:f}).on("edit",function(e){var n=o.d2r(e);void 0!==n&&a.relayout(t,l,n)})}var p,g,m,v,y}};p.init(pt);var gt={};function mt(e,n){if(t._transitioningWithDuration)return!1;var r,i,o,a,s=Math.max(0,Math.min(V,e+ot)),l=Math.max(0,Math.min(U,n+at)),c=Math.abs(s-ot),u=Math.abs(l-at);function d(){dt="",st.r=st.l,st.t=st.b,ft.attr("d","M0,0Z")}st.l=Math.min(ot,s),st.r=Math.max(ot,s),st.t=Math.min(at,l),st.b=Math.max(at,l),Y?c>k||u>k?(dt="xy",c/V>u/U?(u=c*U/V,at>l?st.t=at-u:st.b=at+u):(c=u*V/U,ot>s?st.l=ot-c:st.r=ot+c),ft.attr("d",R(st))):d():!G||u<Math.min(Math.max(.6*c,w),k)?c<w?d():(st.t=0,st.b=U,dt="x",ft.attr("d",(a=at,"M"+((o=st).l-.5)+","+(a-k-.5)+"h-3v"+(2*k+1)+"h3ZM"+(o.r+.5)+","+(a-k-.5)+"h3v"+(2*k+1)+"h-3Z"))):!W||c<Math.min(.6*u,k)?(st.l=0,st.r=V,dt="y",ft.attr("d","M"+((i=ot)-k-.5)+","+((r=st).t-.5)+"v-3h"+(2*k+1)+"v3ZM"+(i-k-.5)+","+(r.b+.5)+"v3h"+(2*k+1)+"v-3Z")):(dt="xy",ft.attr("d",R(st))),st.w=st.r-st.l,st.h=st.b-st.t,E(ht,ft,st,ct,ut,lt),ut=!0}function vt(){if(Math.min(st.h,st.w)<2*w)return I(t);"xy"!==dt&&"x"!==dt||S(F,st.l/V,st.r/V,gt,$),"xy"!==dt&&"y"!==dt||S(H,(U-st.b)/U,(U-st.t)/U,gt,J),I(t),Tt(),j(t)}var yt=[0,0,V,U],_t=null,xt=b.REDRAWDELAY,bt=e.mainplot?Q._plots[e.mainplot]:e;function wt(e,n){if(!t._transitioningWithDuration){if(nt(),"ew"===W||"ns"===G)return W&&C(F,e),G&&C(H,n),Mt([W?-e:0,G?-n:0,V,U]),void kt(G,W);if(Y&&W&&G){var r="w"===W==("n"===G)?1:-1,i=(e/V+r*n/U)/2;e=i*V,n=r*i*U}"w"===W?e=l(F,0,e):"e"===W?e=l(F,1,-e):W||(e=0),"n"===G?n=l(H,1,n):"s"===G?n=l(H,0,-n):G||(n=0);var o="w"===W?e:0,a="n"===G?n:0;if(Y){var s;if(!W&&1===G.length){for(s=0;s<F.length;s++)F[s].range=F[s]._r.slice(),x(F[s],1-n/U);o=(e=n*V/U)/2}if(!G&&1===W.length){for(s=0;s<H.length;s++)H[s].range=H[s]._r.slice(),x(H[s],1-e/V);a=(n=e*U/V)/2}}Mt([o,a,V-e,U-n]),kt(G,W)}function l(t,e,n){for(var r,i,o,a=1-e,s=0;s<t.length;s++){var l=t[s];if(!l.fixedrange){r=l,i=l._rl[a]+(l._rl[e]-l._rl[a])/(1-((o=n/l._length)>=0?Math.min(o,.9):1/(1/Math.max(o,-.3)+3.222)));var c=l.l2r(i);!1!==c&&void 0!==c&&(l.range[e]=c)}}return r._length*(r._rl[e]-i)/(r._rl[e]-r._rl[a])}}function kt(e,n){var r,i=[];function o(t){for(r=0;r<t.length;r++)t[r].fixedrange||i.push(t[r]._id)}for((n||Y)&&(o(F),o($)),(e||Y)&&(o(H),o(J)),gt={},r=0;r<i.length;r++){var a=i[r];v(t,a,!0);var l=y(t,a);gt[l._name+".range[0]"]=l.range[0],gt[l._name+".range[1]"]=l.range[1]}function c(o,a,s){for(r=0;r<o.length;r++){var l=o[r];if((n&&-1!==i.indexOf(l.xref)||e&&-1!==i.indexOf(l.yref))&&(a(t,r),s))return}}c(Q.annotations||[],s.getComponentMethod("annotations","drawOne")),c(Q.shapes||[],s.getComponentMethod("shapes","drawOne")),c(Q.images||[],s.getComponentMethod("images","draw"),!0)}function Tt(){Mt([0,0,V,U]),l.syncOrAsync([m.previousPromises,function(){a.relayout(t,gt)}],t)}function Mt(t){var e,n,r,i,o,a=Q._plots,s=Object.keys(a),c=t[2]/F[0]._length,u=t[3]/H[0]._length,h=M||Y,f=T||Y;function p(t){return t.fixedrange?0:h&&-1!==$.indexOf(t)?c:f&&-1!==(Y?$:J).indexOf(t)?u:0}function m(t,e){return e?(t.range=t._r.slice(),x(t,e),v(t,e)):0}function v(t,e){return t._length*(1-e)*g[t.constraintoward||"middle"]}for(Q._glcanvas&&Q._glcanvas.size()&&Q._glcanvas.each(function(t){t.regl&&t.regl.clear({color:!0})}),e=0;e<s.length;e++){var y=a[s[e]],_=y.xaxis,b=y.yaxis,w=h&&!_.fixedrange&&-1!==F.indexOf(_),k=f&&!b.fixedrange&&-1!==H.indexOf(b);if(y._scene&&y._scene.update){var A=l.simpleMap(_.range,_.r2l),L=l.simpleMap(b.range,b.r2l);y._scene.update({range:[A[0],L[0],A[1],L[1]]})}if(w?(n=c,i=M?t[0]:v(_,n)):i=m(_,n=p(_)),k?(r=u,o=T?t[1]:v(b,r)):o=m(b,r=p(b)),n||r){n||(n=1),r||(r=1);var S=_._offset-i/n,C=b._offset-o/r;Q._defs.select("#"+y.clipId+"> rect").call(d.setTranslate,i,o).call(d.setScale,n,r);var P=y.plot.selectAll(".scatterlayer .trace, .boxlayer .trace, .violinlayer .trace");y.plot.call(d.setTranslate,S,C).call(d.setScale,1/n,1/r),P.selectAll(".point").call(d.setPointGroupScale,n,r),P.selectAll(".textpoint").call(d.setTextPointsScale,n,r),P.call(d.hideOutsideRangePoints,y)}}}return T.length*M.length!=1&&B(rt,function(e){if(t._context.scrollZoom||Q._enablescrollzoom){if(t._transitioningWithDuration)return e.preventDefault(),void e.stopPropagation();var n=t.querySelector(".plotly");if(nt(),!(n.scrollHeight-n.clientHeight>10||n.scrollWidth-n.clientWidth>10)){clearTimeout(_t);var r=-e.deltaY;if(isFinite(r)||(r=e.wheelDelta/10),isFinite(r)){var i,o=Math.exp(-Math.min(Math.max(r,-20),20)/200),a=bt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),s=(e.clientX-a.left)/a.width,c=(a.bottom-e.clientY)/a.height;if(M||Y){for(M||(s=.5),i=0;i<F.length;i++)u(F[i],s,o);yt[2]*=o,yt[0]+=yt[2]*s*(1/o-1)}if(T||Y){for(T||(c=.5),i=0;i<H.length;i++)u(H[i],c,o);yt[3]*=o,yt[1]+=yt[3]*(1-c)*(1/o-1)}Mt(yt),kt(T,M),_t=setTimeout(function(){yt=[0,0,V,U],Tt()},xt),e.preventDefault()}else l.log("Did not find wheel motion attributes: ",e)}}function u(t,e,n){if(!t.fixedrange){var r=l.simpleMap(t.range,t.r2l),i=r[0]+(r[1]-r[0])*e;t.range=r.map(function(e){return t.l2r(i+(e-i)*n)})}}}),rt},makeDragger:M,makeRectDragger:A,makeZoombox:P,makeCorners:z,updateZoombox:E,xyCorners:R,transitionZoombox:O,removeZoombox:I,clearSelect:D,showDoubleClickNotifier:j,attachWheelEventHandler:B}},{"../../components/color":34,"../../components/dragelement":56,"../../components/drawing":59,"../../components/fx":76,"../../constants/alignment":132,"../../lib":151,"../../lib/setcursor":170,"../../lib/svg_text_utils":172,"../../plotly":189,"../../registry":233,"../plots":226,"./axes":194,"./axis_ids":197,"./constants":199,"./scale_zoom":211,"./select":212,d3:1,"has-passive-events":7,tinycolor2:293}],203:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../components/fx"),o=t("../../components/dragelement"),a=t("./constants"),s=t("./dragbox").makeDragBox;e.exports=function(t){var e=t._fullLayout;if(t._context.staticPlot)r.select(t).selectAll(".drag").remove();else if(e._has("cartesian")||e._has("gl2d")){Object.keys(e._plots||{}).sort(function(t,n){if((e._plots[t].mainplot&&!0)===(e._plots[n].mainplot&&!0)){var r=t.split("y"),i=n.split("y");return r[0]===i[0]?Number(r[1]||1)-Number(i[1]||1):Number(r[0]||1)-Number(i[0]||1)}return e._plots[t].mainplot?1:-1}).forEach(function(n){var r=e._plots[n],l=r.xaxis,c=r.yaxis,u=a.DRAGGERSIZE;if(!r.mainplot){var d=s(t,r,l._offset,c._offset,l._length,c._length,"ns","ew");d.onmousemove=function(e){t._fullLayout._rehover=function(){t._fullLayout._hoversubplot===n&&i.hover(t,e,n)},i.hover(t,e,n),t._fullLayout._lasthover=d,t._fullLayout._hoversubplot=n},d.onmouseout=function(e){t._dragging||(t._fullLayout._hoversubplot=null,o.unhover(t,e))},t._context.showAxisDragHandles&&(s(t,r,l._offset-u,c._offset-u,u,u,"n","w"),s(t,r,l._offset+l._length,c._offset-u,u,u,"n","e"),s(t,r,l._offset-u,c._offset+c._length,u,u,"s","w"),s(t,r,l._offset+l._length,c._offset+c._length,u,u,"s","e"))}if(t._context.showAxisDragHandles){if(n===l._mainSubplot){var h=l._mainLinePosition;"top"===l.side&&(h-=u),s(t,r,l._offset+.1*l._length,h,.8*l._length,u,"","ew"),s(t,r,l._offset,h,.1*l._length,u,"","w"),s(t,r,l._offset+.9*l._length,h,.1*l._length,u,"","e")}if(n===c._mainSubplot){var f=c._mainLinePosition;"right"!==c.side&&(f-=u),s(t,r,f,c._offset+.1*c._length,u,.8*c._length,"ns",""),s(t,r,f,c._offset+.9*c._length,u,.1*c._length,"s",""),s(t,r,f,c._offset,u,.1*c._length,"n","")}}});var n=e._hoverlayer.node();n.onmousemove=function(n){n.target=e._lasthover,i.hover(t,n,e._hoversubplot)},n.onclick=function(n){n.target=e._lasthover,i.click(t,n)},n.onmousedown=function(t){e._lasthover.onmousedown(t)}}}},{"../../components/dragelement":56,"../../components/fx":76,"./constants":199,"./dragbox":202,d3:1}],204:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("../../lib");e.exports=function(t){return function(e,n){var o=e[t];if(Array.isArray(o))for(var a=r.subplotsRegistry.cartesian,s=a.idRegex,l=n._subplots,c=l.xaxis,u=l.yaxis,d=l.cartesian,h=n._has("cartesian")||n._has("gl2d"),f=0;f<o.length;f++){var p=o[f];if(i.isPlainObject(p)){var g=p.xref,m=p.yref,v=s.x.test(g),y=s.y.test(m);if(v||y){h||i.pushUnique(n._basePlotModules,a);var _=!1;v&&-1===c.indexOf(g)&&(c.push(g),_=!0),y&&-1===u.indexOf(m)&&(u.push(m),_=!0),_&&v&&y&&d.push(g+m)}}}}}},{"../../lib":151,"../../registry":233}],205:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../lib"),o=t("../plots"),a=t("../get_data").getModuleCalcData,s=t("./axis_ids"),l=t("./constants"),c=t("../../constants/xmlns_namespaces");function u(t,e,n,r,i){var o=t._fullLayout._modules;e.plot&&e.plot.selectAll("g:not(.scatterlayer)").selectAll("g.trace").remove();for(var s=0;s<o.length;s++){var l=o[s];if("cartesian"===l.basePlotModule.name){var c=a(n,l);l.plot&&l.plot(t,e,c,r,i)}}}function d(t){var e=t.plotgroup,n=t.id,r=l.layerValue2layerClass[t.xaxis.layer],i=l.layerValue2layerClass[t.yaxis.layer];if(t.mainplot){var o=t.mainplotinfo,a=o.plotgroup,c=n+"-x",u=n+"-y";t.gridlayer=o.gridlayer,t.zerolinelayer=o.zerolinelayer,f(o.overlinesBelow,"path",c),f(o.overlinesBelow,"path",u),f(o.overaxesBelow,"g",c),f(o.overaxesBelow,"g",u),t.plot=f(o.overplot,"g",n),f(o.overlinesAbove,"path",c),f(o.overlinesAbove,"path",u),f(o.overaxesAbove,"g",c),f(o.overaxesAbove,"g",u),t.xlines=a.select(".overlines-"+r).select("."+c),t.ylines=a.select(".overlines-"+i).select("."+u),t.xaxislayer=a.select(".overaxes-"+r).select("."+c),t.yaxislayer=a.select(".overaxes-"+i).select("."+u)}else{var d=f(e,"g","layer-subplot");t.shapelayer=f(d,"g","shapelayer"),t.imagelayer=f(d,"g","imagelayer"),t.gridlayer=f(e,"g","gridlayer"),t.zerolinelayer=f(e,"g","zerolinelayer"),f(e,"path","xlines-below"),f(e,"path","ylines-below"),t.overlinesBelow=f(e,"g","overlines-below"),f(e,"g","xaxislayer-below"),f(e,"g","yaxislayer-below"),t.overaxesBelow=f(e,"g","overaxes-below"),t.plot=f(e,"g","plot"),t.overplot=f(e,"g","overplot"),f(e,"path","xlines-above"),f(e,"path","ylines-above"),t.overlinesAbove=f(e,"g","overlines-above"),f(e,"g","xaxislayer-above"),f(e,"g","yaxislayer-above"),t.overaxesAbove=f(e,"g","overaxes-above"),t.xlines=e.select(".xlines-"+r),t.ylines=e.select(".ylines-"+i),t.xaxislayer=e.select(".xaxislayer-"+r),t.yaxislayer=e.select(".yaxislayer-"+i)}f(t.gridlayer,"g",t.xaxis._id,t.xaxis._id),f(t.gridlayer,"g",t.yaxis._id,t.yaxis._id),t.gridlayer.selectAll("g").sort(s.idSort);for(var h=0;h<l.traceLayerClasses.length;h++)f(t.plot,"g",l.traceLayerClasses[h]);t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0)}function h(t,e){if(t){var n={};t.each(function(t){var i=r.select(this),o="clip"+e._uid+t+"plot";i.remove(),e._draggers.selectAll("g."+t).remove(),e._defs.select("#"+o).remove(),n[t]=!0});for(var i=e._plots,o=Object.keys(i),a=0;a<o.length;a++)for(var s=i[o[a]].overlays||[],l=0;l<s.length;l++){var c=s[l];n[c.id]&&c.plot.selectAll(".trace").remove()}}}function f(t,e,n,r){var i=t.selectAll("."+n).data([r||0]);return i.enter().append(e).classed(n,!0),i}n.name="cartesian",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex=l.idRegex,n.attrRegex=l.attrRegex,n.attributes=t("./attributes"),n.layoutAttributes=t("./layout_attributes"),n.supplyLayoutDefaults=t("./layout_defaults"),n.transitionAxes=t("./transition_axes"),n.finalizeSubplots=function(t,e){var n,r,o,a=e._subplots,c=a.xaxis,u=a.yaxis,d=a.cartesian,h=d.concat(a.gl2d||[]),f={},p={};for(n=0;n<h.length;n++){var g=h[n].split("y");f[g[0]]=1,p["y"+g[1]]=1}for(n=0;n<c.length;n++)f[r=c[n]]||(o=(t[s.id2name(r)]||{}).anchor,l.idRegex.y.test(o)||(o="y"),d.push(r+o),h.push(r+o),p[o]||(p[o]=1,i.pushUnique(u,o)));for(n=0;n<u.length;n++)p[o=u[n]]||(r=(t[s.id2name(o)]||{}).anchor,l.idRegex.x.test(r)||(r="x"),d.push(r+o),h.push(r+o),f[r]||(f[r]=1,i.pushUnique(c,r)));if(!h.length){var m=Object.keys(t);for(r="",o="",n=0;n<m.length;n++){var v=m[n];if(l.attrRegex.test(v))"x"===v.charAt(0)?(!r||+v.substr(5)<+r.substr(5))&&(r=v):(!o||+v.substr(5)<+o.substr(5))&&(o=v)}r=r?s.name2id(r):"x",o=o?s.name2id(o):"y",c.push(r),u.push(o),d.push(r+o)}},n.plot=function(t,e,n,r){var i,o=t._fullLayout,a=o._subplots.cartesian,s=t.calcdata;if(!Array.isArray(e))for(e=[],i=0;i<s.length;i++)e.push(i);for(o._glcanvas&&o._glcanvas.size()&&o._glcanvas.each(function(t){t.regl&&t.regl.clear({color:!0})}),i=0;i<a.length;i++){for(var l,c=a[i],d=o._plots[c],h=[],f=0;f<s.length;f++){var p=s[f],g=p[0].trace;g.xaxis+g.yaxis===c&&((-1!==e.indexOf(g.index)||g.carpet)&&(l&&l[0].trace.xaxis+l[0].trace.yaxis===c&&-1!==["tonextx","tonexty","tonext"].indexOf(g.fill)&&-1===h.indexOf(l)&&h.push(l),h.push(p)),l=p)}u(t,d,h,n,r)}},n.clean=function(t,e,n,r){var i,o,a,s,l,c,u,d,f=r._modules||[],p=e._modules||[];for(l=0;l<f.length;l++){"scatter"===f[l].name&&(i=!0);break}for(l=0;l<p.length;l++)if("scatter"===p[l].name){o=!0;break}for(l=0;l<f.length;l++){"scattergl"===f[l].name&&(a=!0);break}for(l=0;l<p.length;l++)if("scattergl"===p[l].name){s=!0;break}if(i&&!o){for(c=r._plots,u=Object.keys(c||{}),l=0;l<u.length;l++)(d=c[u[l]]).plot&&d.plot.select("g.scatterlayer").selectAll("g.trace").remove();r._infolayer.selectAll("g.rangeslider-container").select("g.scatterlayer").selectAll("g.trace").remove()}if(a&&!s)for(c=r._plots,u=Object.keys(c||{}),l=0;l<u.length;l++)(d=c[u[l]])._scene&&d._scene.destroy();var g=r._subplots||{},m=e._subplots||{xaxis:[],yaxis:[]};if(g.xaxis&&g.yaxis){var v=g.xaxis.concat(g.yaxis),y=m.xaxis.concat(m.yaxis);for(l=0;l<v.length;l++)-1===y.indexOf(v[l])&&r._infolayer.selectAll(".g-"+v[l]+"title").remove()}var _=r._has&&r._has("cartesian"),x=e._has&&e._has("cartesian");_&&!x&&(h(r._cartesianlayer.selectAll(".subplot"),r),r._defs.selectAll(".axesclip").remove())},n.drawFramework=function(t){var e=t._fullLayout,n=function(t){for(var e=t._fullLayout,n=Object.keys(e._plots),r=[],i=[],o=0;o<n.length;o++){var a=n[o],s=e._plots[a],l=s.xaxis,c=s.yaxis,u=l._mainAxis,d=c._mainAxis,h=u._id+d._id;h!==a&&-1!==n.indexOf(h)?(s.mainplot=h,s.mainplotinfo=e._plots[h],i.push(a)):r.push(a)}return r=r.concat(i)}(t),o=e._cartesianlayer.selectAll(".subplot").data(n,i.identity);o.enter().append("g").attr("class",function(t){return"subplot "+t}),o.order(),o.exit().call(h,e),o.each(function(t){var n=e._plots[t];(n.plotgroup=r.select(this),n.overlays=[],d(n),n.mainplot)&&e._plots[n.mainplot].overlays.push(n);n.draglayer=f(e._draggers,"g",t)})},n.rangePlot=function(t,e,n){d(e),u(t,e,n),o.style(t)},n.toSVG=function(t){var e=t._fullLayout._glimages,n=r.select(t).selectAll(".svg-container");n.filter(function(t,e){return e===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this.toDataURL("image/png");e.append("svg:image").attr({xmlns:c.svg,"xlink:href":t,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})}},{"../../constants/xmlns_namespaces":136,"../../lib":151,"../get_data":222,"../plots":226,"./attributes":193,"./axis_ids":197,"./constants":199,"./layout_attributes":206,"./layout_defaults":207,"./transition_axes":217,d3:1}],206:[function(t,e,n){"use strict";var r=t("../font_attributes"),i=t("../../components/color/attributes"),o=t("../../components/drawing/attributes").dash,a=t("../../lib/extend").extendFlat,s=t("./constants");e.exports={visible:{valType:"boolean",role:"info",editType:"plot",description:["A single toggle to hide the axis while preserving interaction like dragging.","Default is true when a cheater plot is present on the axis, otherwise","false"].join(" ")},color:{valType:"color",dflt:i.defaultLine,role:"style",editType:"ticks",description:["Sets default for all colors associated with this axis","all at once: line, font, tick, and grid colors.","Grid color is lightened by blending this with the plot background","Individual pieces can override this."].join(" ")},title:{valType:"string",role:"info",editType:"ticks",description:"Sets the title of this axis."},titlefont:r({editType:"ticks",description:["Sets this axis' title font."].join(" ")}),type:{valType:"enumerated",values:["-","linear","log","date","category"],dflt:"-",role:"info",editType:"calc",description:["Sets the axis type.","By default, plotly attempts to determined the axis type","by looking into the data of the traces that referenced","the axis in question."].join(" ")},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,role:"style",editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range of this axis is","computed in relation to the input data.","See `rangemode` for more info.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",role:"style",editType:"calc",description:["If *normal*, the range is computed in relation to the extrema","of the input data.","If *tozero*`, the range extends to 0,","regardless of the input data","If *nonnegative*, the range is non-negative,","regardless of the input data."].join(" ")},range:{valType:"info_array",role:"info",items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot",impliedEdits:{autorange:!1},description:["Sets the range of this axis.","If the axis `type` is *log*, then you must take the log of your","desired range (e.g. to set the range from 1 to 100,","set the range from 0 to 2).","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},fixedrange:{valType:"boolean",dflt:!1,role:"info",editType:"calc",description:["Determines whether or not this axis is zoom-able.","If true, then zoom is disabled."].join(" ")},scaleanchor:{valType:"enumerated",values:[s.idRegex.x.toString(),s.idRegex.y.toString()],role:"info",editType:"calc",description:["If set to another axis id (e.g. `x2`, `y`), the range of this axis","changes together with the range of the corresponding axis","such that the scale of pixels per unit is in a constant ratio.","Both axes are still zoomable, but when you zoom one, the other will","zoom the same amount, keeping a fixed midpoint.","`constrain` and `constraintoward` determine how we enforce the constraint.","You can chain these, ie `yaxis: {scaleanchor: *x*}, xaxis2: {scaleanchor: *y*}`","but you can only link axes of the same `type`.","The linked axis can have the opposite letter (to constrain the aspect ratio)","or the same letter (to match scales across subplots).","Loops (`yaxis: {scaleanchor: *x*}, xaxis: {scaleanchor: *y*}` or longer) are redundant","and the last constraint encountered will be ignored to avoid possible","inconsistent constraints via `scaleratio`."].join(" ")},scaleratio:{valType:"number",min:0,dflt:1,role:"info",editType:"calc",description:["If this axis is linked to another by `scaleanchor`, this determines the pixel","to unit scale ratio. For example, if this value is 10, then every unit on","this axis spans 10 times the number of pixels as a unit on the linked axis.","Use this for example to create an elevation profile where the vertical scale","is exaggerated a fixed amount with respect to the horizontal."].join(" ")},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",role:"info",editType:"calc",description:["If this axis needs to be compressed (either due to its own `scaleanchor` and","`scaleratio` or those of the other axis), determines how that happens:","by increasing the *range* (default), or by decreasing the *domain*."].join(" ")},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],role:"info",editType:"calc",description:["If this axis needs to be compressed (either due to its own `scaleanchor` and","`scaleratio` or those of the other axis), determines which direction we push","the originally specified plot area. Options are *left*, *center* (default),","and *right* for x axes, and *top*, *middle* (default), and *bottom* for y axes."].join(" ")},tickmode:{valType:"enumerated",values:["auto","linear","array"],role:"info",editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0},description:["Sets the tick mode for this axis.","If *auto*, the number of ticks is set via `nticks`.","If *linear*, the placement of the ticks is determined by","a starting position `tick0` and a tick step `dtick`","(*linear* is the default value if `tick0` and `dtick` are provided).","If *array*, the placement of the ticks is set via `tickvals`","and the tick text is `ticktext`.","(*array* is the default value if `tickvals` is provided)."].join(" ")},nticks:{valType:"integer",min:0,dflt:0,role:"style",editType:"ticks",description:["Specifies the maximum number of ticks for the particular axis.","The actual number of ticks will be chosen automatically to be","less than or equal to `nticks`.","Has an effect only if `tickmode` is set to *auto*."].join(" ")},tick0:{valType:"any",role:"style",editType:"ticks",impliedEdits:{tickmode:"linear"},description:["Sets the placement of the first tick on this axis.","Use with `dtick`.","If the axis `type` is *log*, then you must take the log of your starting tick","(e.g. to set the starting tick to 100, set the `tick0` to 2)","except when `dtick`=*L<f>* (see `dtick` for more info).","If the axis `type` is *date*, it should be a date string, like date data.","If the axis `type` is *category*, it should be a number, using the scale where","each category is assigned a serial number from zero in the order it appears."].join(" ")},dtick:{valType:"any",role:"style",editType:"ticks",impliedEdits:{tickmode:"linear"},description:["Sets the step in-between ticks on this axis. Use with `tick0`.","Must be a positive number, or special strings available to *log* and *date* axes.","If the axis `type` is *log*, then ticks are set every 10^(n*dtick) where n","is the tick number. For example,","to set a tick mark at 1, 10, 100, 1000, ... set dtick to 1.","To set tick marks at 1, 100, 10000, ... set dtick to 2.","To set tick marks at 1, 5, 25, 125, 625, 3125, ... set dtick to log_10(5), or 0.69897000433.","*log* has several special values; *L<f>*, where `f` is a positive number,","gives ticks linearly spaced in value (but not position).","For example `tick0` = 0.1, `dtick` = *L0.5* will put ticks at 0.1, 0.6, 1.1, 1.6 etc.","To show powers of 10 plus small digits between, use *D1* (all digits) or *D2* (only 2 and 5).","`tick0` is ignored for *D1* and *D2*.","If the axis `type` is *date*, then you must convert the time to milliseconds.","For example, to set the interval between ticks to one day,","set `dtick` to 86400000.0.","*date* also has special values *M<n>* gives ticks spaced by a number of months.","`n` must be a positive integer.","To set ticks on the 15th of every third month, set `tick0` to *2000-01-15* and `dtick` to *M3*.","To set ticks every 4 years, set `dtick` to *M48*"].join(" ")},tickvals:{valType:"data_array",editType:"ticks",description:["Sets the values at which ticks on this axis appear.","Only has an effect if `tickmode` is set to *array*.","Used with `ticktext`."].join(" ")},ticktext:{valType:"data_array",editType:"ticks",description:["Sets the text displayed at the ticks position via `tickvals`.","Only has an effect if `tickmode` is set to *array*.","Used with `tickvals`."].join(" ")},ticks:{valType:"enumerated",values:["outside","inside",""],role:"style",editType:"ticks",description:["Determines whether ticks are drawn or not.","If **, this axis' ticks are not drawn.","If *outside* (*inside*), this axis' are drawn outside (inside)","the axis lines."].join(" ")},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,role:"style",editType:"ticks+layoutstyle",description:["Determines if the axis lines or/and ticks are mirrored to","the opposite side of the plotting area.","If *true*, the axis lines are mirrored.","If *ticks*, the axis lines and ticks are mirrored.","If *false*, mirroring is disable.","If *all*, axis lines are mirrored on all shared-axes subplots.","If *allticks*, axis lines and ticks are mirrored","on all shared-axes subplots."].join(" ")},ticklen:{valType:"number",min:0,dflt:5,role:"style",editType:"ticks",description:"Sets the tick length (in px)."},tickwidth:{valType:"number",min:0,dflt:1,role:"style",editType:"ticks",description:"Sets the tick width (in px)."},tickcolor:{valType:"color",dflt:i.defaultLine,role:"style",editType:"ticks",description:"Sets the tick color."},showticklabels:{valType:"boolean",dflt:!0,role:"style",editType:"ticks",description:"Determines whether or not the tick labels are drawn."},showspikes:{valType:"boolean",dflt:!1,role:"style",editType:"modebar",description:["Determines whether or not spikes (aka droplines) are drawn for this axis.","Note: This only takes affect when hovermode = closest"].join(" ")},spikecolor:{valType:"color",dflt:null,role:"style",editType:"none",description:"Sets the spike color. If undefined, will use the series color"},spikethickness:{valType:"number",dflt:3,role:"style",editType:"none",description:"Sets the width (in px) of the zero line."},spikedash:a({},o,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],role:"style",dflt:"toaxis",editType:"none",description:["Determines the drawing mode for the spike line","If *toaxis*, the line is drawn from the data point to the axis the ","series is plotted on.","If *across*, the line is drawn across the entire plot area, and","supercedes *toaxis*.","If *marker*, then a marker dot is drawn on the axis the series is","plotted on"].join(" ")},spikesnap:{valType:"enumerated",values:["data","cursor"],dflt:"data",role:"style",editType:"none",description:"Determines whether spikelines are stuck to the cursor or to the closest datapoints."},tickfont:r({editType:"ticks",description:"Sets the tick font."}),tickangle:{valType:"angle",dflt:"auto",role:"style",editType:"ticks",description:["Sets the angle of the tick labels with respect to the horizontal.","For example, a `tickangle` of -90 draws the tick labels","vertically."].join(" ")},tickprefix:{valType:"string",dflt:"",role:"style",editType:"ticks",description:"Sets a tick label prefix."},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",role:"style",editType:"ticks",description:["If *all*, all tick labels are displayed with a prefix.","If *first*, only the first tick is displayed with a prefix.","If *last*, only the last tick is displayed with a suffix.","If *none*, tick prefixes are hidden."].join(" ")},ticksuffix:{valType:"string",dflt:"",role:"style",editType:"ticks",description:"Sets a tick label suffix."},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",role:"style",editType:"ticks",description:"Same as `showtickprefix` but for tick suffixes."},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",role:"style",editType:"ticks",description:["If *all*, all exponents are shown besides their significands.","If *first*, only the exponent of the first tick is shown.","If *last*, only the exponent of the last tick is shown.","If *none*, no exponents appear."].join(" ")},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",role:"style",editType:"ticks",description:["Determines a formatting rule for the tick exponents.","For example, consider the number 1,000,000,000.","If *none*, it appears as 1,000,000,000.","If *e*, 1e+9.","If *E*, 1E+9.","If *power*, 1x10^9 (with 9 in a super script).","If *SI*, 1G.","If *B*, 1B."].join(" ")},separatethousands:{valType:"boolean",dflt:!1,role:"style",editType:"ticks",description:['If "true", even 4-digit integers are separated'].join(" ")},tickformat:{valType:"string",dflt:"",role:"style",editType:"ticks",description:["Sets the tick label formatting rule using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see:","https://github.com/d3/d3-format/blob/master/README.md#locale_format","And for dates see:","https://github.com/d3/d3-time-format/blob/master/README.md#locale_format","We add one item to d3's date formatter: *%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")},tickformatstops:{_isLinkedToArray:"tickformatstop",dtickrange:{valType:"info_array",role:"info",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks",description:["range [*min*, *max*], where *min*, *max* - dtick values","which describe some zoom level, it is possible to omit *min*","or *max* value by passing *null*"].join(" ")},value:{valType:"string",dflt:"",role:"style",editType:"ticks",description:["string - dtickformat for described zoom level, the same as *tickformat*"].join(" ")},editType:"ticks"},hoverformat:{valType:"string",dflt:"",role:"style",editType:"none",description:["Sets the hover text formatting rule using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see:","https://github.com/d3/d3-format/blob/master/README.md#locale_format","And for dates see:","https://github.com/d3/d3-time-format/blob/master/README.md#locale_format","We add one item to d3's date formatter: *%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")},showline:{valType:"boolean",dflt:!1,role:"style",editType:"layoutstyle",description:["Determines whether or not a line bounding this axis is drawn."].join(" ")},linecolor:{valType:"color",dflt:i.defaultLine,role:"style",editType:"layoutstyle",description:"Sets the axis line color."},linewidth:{valType:"number",min:0,dflt:1,role:"style",editType:"ticks+layoutstyle",description:"Sets the width (in px) of the axis line."},showgrid:{valType:"boolean",role:"style",editType:"ticks",description:["Determines whether or not grid lines are drawn.","If *true*, the grid lines are drawn at every tick mark."].join(" ")},gridcolor:{valType:"color",dflt:i.lightLine,role:"style",editType:"ticks",description:"Sets the color of the grid lines."},gridwidth:{valType:"number",min:0,dflt:1,role:"style",editType:"ticks",description:"Sets the width (in px) of the grid lines."},zeroline:{valType:"boolean",role:"style",editType:"ticks",description:["Determines whether or not a line is drawn at along the 0 value","of this axis.","If *true*, the zero line is drawn on top of the grid lines."].join(" ")},zerolinecolor:{valType:"color",dflt:i.defaultLine,role:"style",editType:"ticks",description:"Sets the line color of the zero line."},zerolinewidth:{valType:"number",dflt:1,role:"style",editType:"ticks",description:"Sets the width (in px) of the zero line."},anchor:{valType:"enumerated",values:["free",s.idRegex.x.toString(),s.idRegex.y.toString()],role:"info",editType:"plot",description:["If set to an opposite-letter axis id (e.g. `x2`, `y`), this axis is bound to","the corresponding opposite-letter axis.","If set to *free*, this axis' position is determined by `position`."].join(" ")},side:{valType:"enumerated",values:["top","bottom","left","right"],role:"info",editType:"plot",description:["Determines whether a x (y) axis is positioned","at the *bottom* (*left*) or *top* (*right*)","of the plotting area."].join(" ")},overlaying:{valType:"enumerated",values:["free",s.idRegex.x.toString(),s.idRegex.y.toString()],role:"info",editType:"calc",description:["If set a same-letter axis id, this axis is overlaid on top of","the corresponding same-letter axis.","If *false*, this axis does not overlay any same-letter axes."].join(" ")},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",role:"info",editType:"plot",description:["Sets the layer on which this axis is displayed.","If *above traces*, this axis is displayed above all the subplot's traces","If *below traces*, this axis is displayed below all the subplot's traces,","but above the grid lines.","Useful when used together with scatter-like traces with `cliponaxis`","set to *false* to show markers and/or text nodes above this axis."].join(" ")},domain:{valType:"info_array",role:"info",items:[{valType:"number",min:0,max:1,editType:"calc"},{valType:"number",min:0,max:1,editType:"calc"}],dflt:[0,1],editType:"calc",description:["Sets the domain of this axis (in plot fraction)."].join(" ")},position:{valType:"number",min:0,max:1,dflt:0,role:"style",editType:"plot",description:["Sets the position of this axis in the plotting space","(in normalized coordinates).","Only has an effect if `anchor` is set to *free*."].join(" ")},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",role:"info",editType:"calc",description:["Specifies the ordering logic for the case of categorical variables.","By default, plotly uses *trace*, which specifies the order that is present in the data supplied.","Set `categoryorder` to *category ascending* or *category descending* if order should be determined by","the alphanumerical order of the category names.","Set `categoryorder` to *array* to derive the ordering from the attribute `categoryarray`. If a category","is not found in the `categoryarray` array, the sorting behavior for that attribute will be identical to","the *trace* mode. The unspecified categories will follow the categories in `categoryarray`."].join(" ")},categoryarray:{valType:"data_array",role:"info",editType:"calc",description:["Sets the order in which categories on this axis appear.","Only has an effect if `categoryorder` is set to *array*.","Used with `categoryorder`."].join(" ")},editType:"calc",_deprecated:{autotick:{valType:"boolean",role:"info",editType:"ticks",description:["Obsolete.","Set `tickmode` to *auto* for old `autotick` *true* behavior.","Set `tickmode` to *linear* for `autotick` *false*."].join(" ")}}}},{"../../components/color/attributes":33,"../../components/drawing/attributes":58,"../../lib/extend":145,"../font_attributes":220,"./constants":199}],207:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("../../lib"),o=t("../../components/color"),a=t("../layout_attributes"),s=t("./layout_attributes"),l=t("./type_defaults"),c=t("./axis_defaults"),u=t("./constraint_defaults"),d=t("./position_defaults"),h=t("./axis_ids");e.exports=function(t,e,n){var f,p={},g={},m={},v={};for(f=0;f<n.length;f++){var y=n[f];if(r.traceIs(y,"cartesian")||r.traceIs(y,"gl2d")){var _=h.id2name(y.xaxis),x=h.id2name(y.yaxis);if(r.traceIs(y,"carpet")&&("carpet"!==y.type||y._cheater)||_&&(g[_]=1),"carpet"===y.type&&y._cheater&&_&&(p[_]=1),r.traceIs(y,"2dMap")&&(m[_]=!0,m[x]=!0),r.traceIs(y,"oriented"))v["h"===y.orientation?x:_]=!0}}var b=e._subplots,w=b.xaxis,k=b.yaxis,T=i.simpleMap(w,h.id2name),M=i.simpleMap(k,h.id2name),A=T.concat(M),L=o.background;w.length&&k.length&&(L=i.coerce(t,e,a,"plot_bgcolor"));var S,C,P,z,D=o.combine(L,e.paper_bgcolor);function E(t,e){return i.coerce(P,z,s,t,e)}function O(t,e){return i.coerce2(P,z,s,t,e)}function I(t){return"x"===t?k:w}var j={x:I("x"),y:I("y")};function N(e,n){for(var r="x"===e?T:M,i=[],o=0;o<r.length;o++){var a=r[o];a===n||(t[a]||{}).overlaying||i.push(h.name2id(a))}return i}for(f=0;f<A.length;f++){S=A[f],i.isPlainObject(t[S])||(t[S]={}),P=t[S],z=e[S]={},l(P,z,E,n,S);var R=N(C=S.charAt(0),S),B={letter:C,font:e.font,outerTicks:m[S],showGrid:!v[S],data:n,bgColor:D,calendar:e.calendar,cheateronly:"x"===C&&p[S]&&!g[S]};c(P,z,E,B,e);var F=O("spikecolor"),H=O("spikethickness"),q=O("spikedash"),Z=O("spikemode"),V=O("spikesnap");E("showspikes",!!(F||H||q||Z||V))||(delete z.spikecolor,delete z.spikethickness,delete z.spikedash,delete z.spikemode,delete z.spikesnap);var U={letter:C,counterAxes:j[C],overlayableAxes:R};d(P,z,E,U),z._input=P}var W=r.getComponentMethod("rangeslider","handleDefaults"),G=r.getComponentMethod("rangeselector","handleDefaults");for(f=0;f<T.length;f++)S=T[f],P=t[S],z=e[S],W(t,e,S),"date"===z.type&&G(P,z,e,M,z.calendar),E("fixedrange");for(f=0;f<M.length;f++){S=M[f],P=t[S],z=e[S];var X=e[h.id2name(z.anchor)];E("fixedrange",X&&X.rangeslider&&X.rangeslider.visible)}e._axisConstraintGroups=[];var Y=j.x.concat(j.y);for(f=0;f<A.length;f++)C=(S=A[f]).charAt(0),P=t[S],z=e[S],u(P,z,E,Y,e)}},{"../../components/color":34,"../../lib":151,"../../registry":233,"../layout_attributes":224,"./axis_defaults":196,"./axis_ids":197,"./constraint_defaults":200,"./layout_attributes":206,"./position_defaults":210,"./type_defaults":218}],208:[function(t,e,n){"use strict";var r=t("tinycolor2").mix,i=t("../../components/color/attributes").lightFraction,o=t("../../lib");e.exports=function(t,e,n,a){var s=(a=a||{}).dfltColor;function l(n,r){return o.coerce2(t,e,a.attributes,n,r)}var c=l("linecolor",s),u=l("linewidth");n("showline",a.showLine||!!c||!!u)||(delete e.linecolor,delete e.linewidth);var d=l("gridcolor",r(s,a.bgColor,a.blend||i).toRgbString()),h=l("gridwidth");if(n("showgrid",a.showGrid||!!d||!!h)||(delete e.gridcolor,delete e.gridwidth),!a.noZeroLine){var f=l("zerolinecolor",s),p=l("zerolinewidth");n("zeroline",a.showGrid||!!f||!!p)||(delete e.zerolinecolor,delete e.zerolinewidth)}}},{"../../components/color/attributes":33,"../../lib":151,tinycolor2:293}],209:[function(t,e,n){"use strict";var r=t("d3");function i(t,e,n){var i,o,a,s,l,c=[],u=n.map(function(e){return e[t]}),d=r.bisector(e).left;for(i=0;i<u.length;i++)for(a=u[i],o=0;o<a.length;o++)null!=(s=a[o])&&((l=d(c,s))<c.length&&c[l]===s||c.splice(l,0,s));return c}e.exports=function(t,e,n,o){switch(e){case"array":return Array.isArray(n)?n.slice():[];case"category ascending":return i(t,r.ascending,o);case"category descending":return i(t,r.descending,o);case"trace":default:return[]}}},{d3:1}],210:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib");e.exports=function(t,e,n,o){var a=o.counterAxes||[],s=o.overlayableAxes||[],l=o.letter;"free"===i.coerce(t,e,{anchor:{valType:"enumerated",values:["free"].concat(a),dflt:r(t.position)?"free":a[0]||"free"}},"anchor")&&n("position"),i.coerce(t,e,{side:{valType:"enumerated",values:"x"===l?["bottom","top"]:["left","right"],dflt:"x"===l?"bottom":"left"}},"side");var c=!1;if(s.length&&(c=i.coerce(t,e,{overlaying:{valType:"enumerated",values:[!1].concat(s),dflt:!1}},"overlaying")),!c){var u=n("domain");u[0]>u[1]-.01&&(e.domain=[0,1]),i.noneOrAll(t.domain,e.domain,[0,1])}return n("layer"),e}},{"../../lib":151,"fast-isnumeric":4}],211:[function(t,e,n){"use strict";var r=t("../../constants/alignment").FROM_BL;e.exports=function(t,e,n){void 0===n&&(n=r[t.constraintoward||"center"]);var i=[t.r2l(t.range[0]),t.r2l(t.range[1])],o=i[0]+(i[1]-i[0])*n;t.range=t._input.range=[t.l2r(o+(i[0]-o)*e),t.l2r(o+(i[1]-o)*e)]}},{"../../constants/alignment":132}],212:[function(t,e,n){"use strict";var r=t("polybooljs"),i=t("../../lib/polygon"),o=t("../../lib/throttle"),a=t("../../components/color"),s=t("../../components/fx/helpers").makeEventData,l=t("../../components/fx"),c=t("./axes"),u=t("./constants"),d=i.filter,h=i.tester,f=i.multitester,p=u.MINSELECT;function g(t){return t._id}function m(t,e,n){var r,i,o;if(n){var a=n.points||[];for(r=0;r<e.length;r++)(o=e[r].cd[0].trace).selectedpoints=[],o._input.selectedpoints=[];for(r=0;r<a.length;r++){var s=a[r],l=s.data,c=s.fullData;s.pointIndices?([].push.apply(l.selectedpoints,s.pointIndices),[].push.apply(c.selectedpoints,s.pointIndices)):(l.selectedpoints.push(s.pointIndex),c.selectedpoints.push(s.pointIndex))}}else for(r=0;r<e.length;r++)delete(o=e[r].cd[0].trace).selectedpoints,delete o._input.selectedpoints,e[r].cd[0].t&&e[r].cd[0].t.scene&&e[r].cd[0].t.scene.clearSelect();for(r=0;r<e.length;r++)(i=e[r]).style&&i.style(t,i.cd)}function v(t,e){if(Array.isArray(t))for(var n=e.cd,r=e.cd[0].trace,i=0;i<t.length;i++)t[i]=s(t[i],r,n);return t}e.exports=function(t,e,n,i,s){var y,_,x,b,w=i.gd,k=w._fullLayout,T=k._zoomlayer,M=i.element.getBoundingClientRect(),A=i.plotinfo,L=A.xaxis._offset,S=A.yaxis._offset,C=e-M.left,P=n-M.top,z=C,D=P,E="M"+C+","+P,O=i.xaxes[0]._length,I=i.yaxes[0]._length,j=i.xaxes.map(g),N=i.yaxes.map(g),R=i.xaxes.concat(i.yaxes),B=t.altKey;(t.shiftKey||t.altKey)&&A.selection&&A.selection.polygons&&!i.polygons?(i.polygons=A.selection.polygons,i.mergedPolygons=A.selection.mergedPolygons):(!t.shiftKey&&!t.altKey||(t.shiftKey||t.altKey)&&!A.selection)&&(A.selection={},A.selection.polygons=i.polygons=[],A.selection.mergedPolygons=i.mergedPolygons=[]),"lasso"===s&&(y=d([[C,P]],u.BENDPX));var F=T.selectAll("path.select-outline-"+A.id).data([1,2]);F.enter().append("path").attr("class",function(t){return"select-outline select-outline-"+t+" select-outline-"+A.id}).attr("transform","translate("+L+", "+S+")").attr("d",E+"Z");var H,q,Z,V,U,W,G=T.append("path").attr("class","zoombox-corners").style({fill:a.background,stroke:a.defaultLine,"stroke-width":1}).attr("transform","translate("+L+", "+S+")").attr("d","M0,0Z"),X=[],Y=k._uid+u.SELECTID,$=[];for(H=0;H<w.calcdata.length;H++)if(!0===(Z=(q=w.calcdata[H])[0].trace).visible&&Z._module&&Z._module.selectPoints)if(i.subplot)Z.subplot!==i.subplot&&Z.geo!==i.subplot||X.push({selectPoints:Z._module.selectPoints,style:Z._module.style,cd:q,xaxis:i.xaxes[0],yaxis:i.yaxes[0]});else{if(-1===j.indexOf(Z.xaxis))continue;if(-1===N.indexOf(Z.yaxis))continue;X.push({selectPoints:Z._module.selectPoints,style:Z._module.style,cd:q,xaxis:c.getFromId(w,Z.xaxis),yaxis:c.getFromId(w,Z.yaxis)})}function J(t){var e="y"===t._id.charAt(0)?1:0;return function(n){return t.p2d(n[e])}}function Q(t,e){return t-e}W=A.fillRangeItems?A.fillRangeItems:"select"===s?function(t,e){var n=t.range={};for(H=0;H<R.length;H++){var r=R[H],i=r._id.charAt(0);n[r._id]=[r.p2d(e[i+"min"]),r.p2d(e[i+"max"])].sort(Q)}}:function(t,e,n){var r=t.lassoPoints={};for(H=0;H<R.length;H++){var i=R[H];r[i._id]=n.filtered.map(J(i))}},i.moveFn=function(t,e){z=Math.max(0,Math.min(O,t+C)),D=Math.max(0,Math.min(I,e+P));var n=Math.abs(z-C),a=Math.abs(D-P);"select"===s?a<Math.min(.6*n,p)?((b=[[C,0],[C,I],[z,I],[z,0]]).xmin=Math.min(C,z),b.xmax=Math.max(C,z),b.ymin=Math.min(0,I),b.ymax=Math.max(0,I),G.attr("d","M"+b.xmin+","+(P-p)+"h-4v"+2*p+"h4ZM"+(b.xmax-1)+","+(P-p)+"h4v"+2*p+"h-4Z")):n<Math.min(.6*a,p)?((b=[[0,P],[0,D],[O,D],[O,P]]).xmin=Math.min(0,O),b.xmax=Math.max(0,O),b.ymin=Math.min(P,D),b.ymax=Math.max(P,D),G.attr("d","M"+(C-p)+","+b.ymin+"v-4h"+2*p+"v4ZM"+(C-p)+","+(b.ymax-1)+"v4h"+2*p+"v-4Z")):((b=[[C,P],[C,D],[z,D],[z,P]]).xmin=Math.min(C,z),b.xmax=Math.max(C,z),b.ymin=Math.min(P,D),b.ymax=Math.max(P,D),G.attr("d","M0,0Z")):"lasso"===s&&(y.addPt([z,D]),b=y.filtered),i.polygons&&i.polygons.length?(x=function(t,e,n){if(n)return r.difference({regions:t,inverted:!1},{regions:[e],inverted:!1}).regions;return r.union({regions:t,inverted:!1},{regions:[e],inverted:!1}).regions}(i.mergedPolygons,b,B),b.subtract=B,_=f(i.polygons.concat([b]))):(x=[b],_=h(b));var l=[];for(H=0;H<x.length;H++){var c=x[H];l.push(c.join("L")+"L"+c[0])}F.attr("d","M"+l.join("M")+"Z"),o.throttle(Y,u.SELECTDELAY,function(){$=[];var t,e,n=[];for(H=0;H<X.length;H++)if(e=(V=X[H]).selectPoints(V,_),n.push(e),t=v(e,V),$.length)for(var r=0;r<t.length;r++)$.push(t[r]);else $=t;m(w,X,U={points:$}),W(U,b,y),i.gd.emit("plotly_selecting",U)})},i.clickFn=function(t,e){G.remove(),o.done(Y).then(function(){if(o.clear(Y),2===t){for(F.remove(),H=0;H<X.length;H++)(V=X[H]).selectPoints(V,!1);m(w,X),w.emit("plotly_deselect",null)}else w.emit("plotly_selected",void 0);l.click(w,e)})},i.doneFn=function(){G.remove(),o.done(Y).then(function(){o.clear(Y),i.gd.emit("plotly_selected",U),b&&i.polygons&&(b.subtract=B,i.polygons.push(b),i.mergedPolygons.length=0,[].push.apply(i.mergedPolygons,x))})}}},{"../../components/color":34,"../../components/fx":76,"../../components/fx/helpers":73,"../../lib/polygon":163,"../../lib/throttle":173,"./axes":194,"./constants":199,polybooljs:284}],213:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),o=t("../../lib"),a=o.cleanNumber,s=o.ms2DateTime,l=o.dateTime2ms,c=o.ensureNumber,u=t("../../constants/numerical"),d=u.FP_SAFE,h=u.BADNUM,f=t("./constants"),p=t("./axis_ids");function g(t){return Math.pow(10,t)}e.exports=function(t,e){e=e||{};var n=(t._id||"x").charAt(0),u=10;function m(e,n){if(e>0)return Math.log(e)/Math.LN10;if(e<=0&&n&&t.range&&2===t.range.length){var r=t.range[0],i=t.range[1];return.5*(r+i-3*u*Math.abs(r-i))}return h}function v(e,n,r){var o=l(e,r||t.calendar);if(o===h){if(!i(e))return h;o=l(new Date(+e))}return o}function y(e,n,r){return s(e,n,r||t.calendar)}function _(e){return t._categories[Math.round(e)]}function x(e){if(t._categoriesMap){var n=t._categoriesMap[e];if(void 0!==n)return n}if(i(e))return+e}function b(e){return i(e)?r.round(t._b+t._m*e,2):h}function w(e){return(e-t._b)/t._m}t.c2l="log"===t.type?m:c,t.l2c="log"===t.type?g:c,t.l2p=b,t.p2l=w,t.c2p="log"===t.type?function(t,e){return b(m(t,e))}:b,t.p2c="log"===t.type?function(t){return g(w(t))}:w,-1!==["linear","-"].indexOf(t.type)?(t.d2r=t.r2d=t.d2c=t.r2c=t.d2l=t.r2l=a,t.c2d=t.c2r=t.l2d=t.l2r=c,t.d2p=t.r2p=function(e){return t.l2p(a(e))},t.p2d=t.p2r=w,t.cleanPos=c):"log"===t.type?(t.d2r=t.d2l=function(t,e){return m(a(t),e)},t.r2d=t.r2c=function(t){return g(a(t))},t.d2c=t.r2l=a,t.c2d=t.l2r=c,t.c2r=m,t.l2d=g,t.d2p=function(e,n){return t.l2p(t.d2r(e,n))},t.p2d=function(t){return g(w(t))},t.r2p=function(e){return t.l2p(a(e))},t.p2r=w,t.cleanPos=c):"date"===t.type?(t.d2r=t.r2d=o.identity,t.d2c=t.r2c=t.d2l=t.r2l=v,t.c2d=t.c2r=t.l2d=t.l2r=y,t.d2p=t.r2p=function(e,n,r){return t.l2p(v(e,0,r))},t.p2d=t.p2r=function(t,e,n){return y(w(t),e,n)},t.cleanPos=function(e){return o.cleanDate(e,h,t.calendar)}):"category"===t.type&&(t.d2c=t.d2l=function(e){if(null!=e){if(void 0===t._categoriesMap&&(t._categoriesMap={}),void 0!==t._categoriesMap[e])return t._categoriesMap[e];t._categories.push(e);var n=t._categories.length-1;return t._categoriesMap[e]=n,n}return h},t.r2d=t.c2d=t.l2d=_,t.d2r=t.d2l_noadd=x,t.r2c=function(e){var n=x(e);return void 0!==n?n:t.fraction2r(.5)},t.l2r=t.c2r=c,t.r2l=x,t.d2p=function(e){return t.l2p(t.r2c(e))},t.p2d=function(t){return _(w(t))},t.r2p=t.d2p,t.p2r=w,t.cleanPos=function(t){return"string"==typeof t&&""!==t?t:c(t)}),t.fraction2r=function(e){var n=t.r2l(t.range[0]),r=t.r2l(t.range[1]);return t.l2r(n+e*(r-n))},t.r2fraction=function(e){var n=t.r2l(t.range[0]),r=t.r2l(t.range[1]);return(t.r2l(e)-n)/(r-n)},t.cleanRange=function(e,r){r||(r={}),e||(e="range");var a,s,l=o.nestedProperty(t,e).get();if(s=(s="date"===t.type?o.dfltRange(t.calendar):"y"===n?f.DFLTRANGEY:r.dfltRange||f.DFLTRANGEX).slice(),l&&2===l.length)for("date"===t.type&&(l[0]=o.cleanDate(l[0],h,t.calendar),l[1]=o.cleanDate(l[1],h,t.calendar)),a=0;a<2;a++)if("date"===t.type){if(!o.isDateTime(l[a],t.calendar)){t[e]=s;break}if(t.r2l(l[0])===t.r2l(l[1])){var c=o.constrain(t.r2l(l[0]),o.MIN_MS+1e3,o.MAX_MS-1e3);l[0]=t.l2r(c-1e3),l[1]=t.l2r(c+1e3);break}}else{if(!i(l[a])){if(!i(l[1-a])){t[e]=s;break}l[a]=l[1-a]*(a?10:.1)}if(l[a]<-d?l[a]=-d:l[a]>d&&(l[a]=d),l[0]===l[1]){var u=Math.max(1,Math.abs(1e-6*l[0]));l[0]-=u,l[1]+=u}}else o.nestedProperty(t,e).set(s)},t.setScale=function(r){var i=e._size;if(t._categories||(t._categories=[]),t._categoriesMap||(t._categoriesMap={}),t.overlaying){var o=p.getFromId({_fullLayout:e},t.overlaying);t.domain=o.domain}var a=r&&t._r?"_r":"range",s=t.calendar;t.cleanRange(a);var l=t.r2l(t[a][0],s),c=t.r2l(t[a][1],s);if("y"===n?(t._offset=i.t+(1-t.domain[1])*i.h,t._length=i.h*(t.domain[1]-t.domain[0]),t._m=t._length/(l-c),t._b=-t._m*c):(t._offset=i.l+t.domain[0]*i.w,t._length=i.w*(t.domain[1]-t.domain[0]),t._m=t._length/(c-l),t._b=-t._m*l),!isFinite(t._m)||!isFinite(t._b))throw e._replotting=!1,new Error("Something went wrong with axis scaling")},t.makeCalcdata=function(e,n){var r,i,o,a,s="date"===t.type&&e[n+"calendar"];if(n in e)for(r=e[n],a=e._length||r.length,i=new Array(a),o=0;o<a;o++)i[o]=t.d2c(r[o],0,s);else{var l=n+"0"in e?t.d2c(e[n+"0"],0,s):0,c=e["d"+n]?Number(e["d"+n]):1;for(r=e[{x:"y",y:"x"}[n]],a=e._length||r.length,i=new Array(a),o=0;o<a;o++)i[o]=l+o*c}return i},t.isValidRange=function(e){return Array.isArray(e)&&2===e.length&&i(t.r2l(e[0]))&&i(t.r2l(e[1]))},t.isPtWithinRange=function(e,r){var i=t.c2l(e[n],null,r);return i>=t.r2l(t.range[0])&&i<=t.r2l(t.range[1])},t._min=[],t._max=[];var k=e._d3locale;"date"===t.type&&(t._dateFormat=k?k.timeFormat.utc:r.time.format.utc,t._extraFormat=e._extraFormat),t._separators=e.separators,t._numFormat=k?k.numberFormat:r.format,delete t._minDtick,delete t._forceTick0}},{"../../constants/numerical":134,"../../lib":151,"./axis_ids":197,"./constants":199,d3:1,"fast-isnumeric":4}],214:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./layout_attributes");e.exports=function(t,e,n,o,a){var s=function(t){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(e){return void 0!==t[e]});if(e.every(function(n){return t[n]===t[e[0]]})||1===e.length)return t[e[0]]}(t);if(n("tickprefix")&&n("showtickprefix",s),n("ticksuffix",a.tickSuffixDflt)&&n("showticksuffix",s),n("showticklabels")){var l=a.font||{},c=e.color===t.color?e.color:l.color;if(r.coerceFont(n,"tickfont",{family:l.family,size:l.size,color:c}),n("tickangle"),"category"!==o){var u=n("tickformat");!function(t,e){var n,o,a=t.tickformatstops,s=e.tickformatstops=[];if(!Array.isArray(a))return;function l(t,e){return r.coerce(n,o,i.tickformatstops,t,e)}for(var c=0;c<a.length;c++)n=a[c],o={},l("dtickrange"),l("value"),s.push(o)}(t,e),u||"date"===o||(n("showexponent",s),n("exponentformat"),n("separatethousands"))}}}},{"../../lib":151,"./layout_attributes":206}],215:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./layout_attributes");e.exports=function(t,e,n,o){var a=r.coerce2(t,e,i,"ticklen"),s=r.coerce2(t,e,i,"tickwidth"),l=r.coerce2(t,e,i,"tickcolor",e.color);n("ticks",o.outerTicks||a||s||l?"outside":"")||(delete e.ticklen,delete e.tickwidth,delete e.tickcolor)}},{"../../lib":151,"./layout_attributes":206}],216:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib"),o=t("../../constants/numerical").ONEDAY;e.exports=function(t,e,n,a){var s="auto";"array"!==t.tickmode||"log"!==a&&"date"!==a||(t.tickmode="auto"),Array.isArray(t.tickvals)?s="array":t.dtick&&(s="linear");var l=n("tickmode",s);if("auto"===l)n("nticks");else if("linear"===l){var c="date"===a?o:1,u=n("dtick",c);if(r(u))e.dtick=u>0?Number(u):c;else if("string"!=typeof u)e.dtick=c;else{var d=u.charAt(0),h=u.substr(1);((h=r(h)?Number(h):0)<=0||!("date"===a&&"M"===d&&h===Math.round(h)||"log"===a&&"L"===d||"log"===a&&"D"===d&&(1===h||2===h)))&&(e.dtick=c)}var f="date"===a?i.dateTick0(e.calendar):0,p=n("tick0",f);"date"===a?e.tick0=i.cleanDate(p,f):r(p)&&"D1"!==u&&"D2"!==u?e.tick0=Number(p):e.tick0=f}else{void 0===n("tickvals")?e.tickmode="auto":n("ticktext")}}},{"../../constants/numerical":134,"../../lib":151,"fast-isnumeric":4}],217:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../plotly"),o=t("../../registry"),a=t("../../components/drawing"),s=t("./axes"),l=t("./constants").attrRegex;e.exports=function(t,e,n,c){var u=t._fullLayout,d=[];var h,f,p,g,m=function(t){var e,n,r,i,o={};for(e in t)if((n=e.split("."))[0].match(l)){var a=e.charAt(0),s=n[0];if(r=u[s],i={},Array.isArray(t[e])?i.to=t[e].slice(0):Array.isArray(t[e].range)&&(i.to=t[e].range.slice(0)),!i.to)continue;i.axisName=s,i.length=r._length,d.push(a),o[a]=i}return o}(e),v=Object.keys(m),y=function(t,e,n){var r,i,o,a=t._plots,s=[];for(r in a){var l=a[r];if(-1===s.indexOf(l)){var c=l.xaxis._id,u=l.yaxis._id,d=l.xaxis.range,h=l.yaxis.range;l.xaxis._r=l.xaxis.range.slice(),l.yaxis._r=l.yaxis.range.slice(),i=n[c]?n[c].to:d,o=n[u]?n[u].to:h,d[0]===i[0]&&d[1]===i[1]&&h[0]===o[0]&&h[1]===o[1]||-1===e.indexOf(c)&&-1===e.indexOf(u)||s.push(l)}}return s}(u,v,m);if(!y.length)return function(){function e(e,n,r){for(var i=0;i<e.length;i++)if(n(t,i),r)return}e(u.annotations||[],o.getComponentMethod("annotations","drawOne")),e(u.shapes||[],o.getComponentMethod("shapes","drawOne")),e(u.images||[],o.getComponentMethod("images","draw"),!0)}(),!1;function _(t){var e=t.xaxis,n=t.yaxis;u._defs.select("#"+t.clipId+"> rect").call(a.setTranslate,0,0).call(a.setScale,1,1),t.plot.call(a.setTranslate,e._offset,n._offset).call(a.setScale,1,1);var r=t.plot.selectAll(".scatterlayer .trace");r.selectAll(".point").call(a.setPointGroupScale,1,1),r.selectAll(".textpoint").call(a.setTextPointsScale,1,1),r.call(a.hideOutsideRangePoints,t)}function x(e,n){var r,i,l,c=m[e.xaxis._id],d=m[e.yaxis._id],h=[];if(c){i=(r=t._fullLayout[c.axisName])._r,l=c.to,h[0]=(i[0]*(1-n)+n*l[0]-i[0])/(i[1]-i[0])*e.xaxis._length;var f=i[1]-i[0],p=l[1]-l[0];r.range[0]=i[0]*(1-n)+n*l[0],r.range[1]=i[1]*(1-n)+n*l[1],h[2]=e.xaxis._length*(1-n+n*p/f)}else h[0]=0,h[2]=e.xaxis._length;if(d){i=(r=t._fullLayout[d.axisName])._r,l=d.to,h[1]=(i[1]*(1-n)+n*l[1]-i[1])/(i[0]-i[1])*e.yaxis._length;var g=i[1]-i[0],v=l[1]-l[0];r.range[0]=i[0]*(1-n)+n*l[0],r.range[1]=i[1]*(1-n)+n*l[1],h[3]=e.yaxis._length*(1-n+n*v/g)}else h[1]=0,h[3]=e.yaxis._length;!function(e,n){var r,i=[];for(i=[e._id,n._id],r=0;r<i.length;r++)s.doTicks(t,i[r],!0);function a(e,n,o){for(r=0;r<e.length;r++){var a=e[r];if(-1===i.indexOf(a.xref)&&-1===i.indexOf(a.yref)||n(t,r),o)return}}a(u.annotations||[],o.getComponentMethod("annotations","drawOne")),a(u.shapes||[],o.getComponentMethod("shapes","drawOne")),a(u.images||[],o.getComponentMethod("images","draw"),!0)}(e.xaxis,e.yaxis);var y=e.xaxis,_=e.yaxis,x=!!c,b=!!d,w=x?y._length/h[2]:1,k=b?_._length/h[3]:1,T=x?h[0]:0,M=b?h[1]:0,A=x?h[0]/h[2]*y._length:0,L=b?h[1]/h[3]*_._length:0,S=y._offset-A,C=_._offset-L;u._defs.select("#"+e.clipId+"> rect").call(a.setTranslate,T,M).call(a.setScale,1/w,1/k),e.plot.call(a.setTranslate,S,C).call(a.setScale,w,k).selectAll(".points").selectAll(".point").call(a.setPointGroupScale,1/w,1/k),e.plot.selectAll(".points").selectAll(".textpoint").call(a.setTextPointsScale,1/w,1/k)}c&&(h=c());var b=r.ease(n.easing);return t._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(g),g=null,function(){for(var e={},n=0;n<v.length;n++){var r=t._fullLayout[v[n]+"axis"];e[r._name+".range[0]"]=r.range[0],e[r._name+".range[1]"]=r.range[1],r.range=r._r.slice()}return i.relayout(t,e).then(function(){for(var t=0;t<y.length;t++)_(y[t])})}()}),f=Date.now(),g=window.requestAnimationFrame(function e(){p=Date.now();for(var r=Math.min(1,(p-f)/n.duration),o=b(r),a=0;a<y.length;a++)x(y[a],o);p-f>n.duration?(function(){for(var e={},n=0;n<v.length;n++){var r=t._fullLayout[m[v[n]].axisName],o=m[v[n]].to;e[r._name+".range[0]"]=o[0],e[r._name+".range[1]"]=o[1],r.range=o.slice()}h&&h(),i.relayout(t,e).then(function(){for(var t=0;t<y.length;t++)_(y[t])})}(),g=window.cancelAnimationFrame(e)):g=window.requestAnimationFrame(e)}),Promise.resolve()}},{"../../components/drawing":59,"../../plotly":189,"../../registry":233,"./axes":194,"./constants":199,d3:1}],218:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("./axis_autotype"),o=t("./axis_ids").name2id;function a(t){return{v:"x",h:"y"}[t.orientation||"v"]}function s(t,e){var n=a(t),i=r.traceIs(t,"box-violin"),o=r.traceIs(t._fullInput||{},"candlestick");return i&&!o&&e===n&&void 0===t[n]&&void 0===t[n+"0"]}e.exports=function(t,e,n,l,c){c&&(e._name=c,e._id=o(c)),"-"===n("type")&&(!function(t,e){if("-"!==t.type)return;var n=t._id,o=n.charAt(0);-1!==n.indexOf("scene")&&(n=o);var l=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if((i[n+"axis"]||n)===e){if(s(i,n))return i;if((i[n]||[]).length||i[n+"0"])return i}}}(e,n,o);if(!l)return;if("histogram"===l.type&&o==={v:"y",h:"x"}[l.orientation||"v"])return void(t.type="linear");var c=o+"calendar",u=l[c];if(s(l,o)){for(var d,h=a(l),f=[],p=0;p<e.length;p++)d=e[p],r.traceIs(d,"box-violin")&&(d[o+"axis"]||o)===n&&(void 0!==d[h]?f.push(d[h][0]):void 0!==d.name?f.push(d.name):f.push("text"),d[c]!==u&&(u=void 0));t.type=i(f,u)}else t.type=i(l[o]||[l[o+"0"]],u)}(e,l),"-"===e.type?e.type="linear":t.type=e.type)}},{"../../registry":233,"./axis_autotype":195,"./axis_ids":197}],219:[function(t,e,n){"use strict";var r=t("../plotly"),i=t("../lib");function o(t,e,n){var r,o,a,s=!1;if("data"===e.type)r=t._fullData[null!==e.traces?e.traces[0]:0];else{if("layout"!==e.type)return!1;r=t._fullLayout}return o=i.nestedProperty(r,e.prop).get(),(a=n[e.type]=n[e.type]||{}).hasOwnProperty(e.prop)&&a[e.prop]!==o&&(s=!0),a[e.prop]=o,{changed:s,value:o}}function a(t,e){var n=[],r=e[0],o={};if("string"==typeof r)o[r]=e[1];else{if(!i.isPlainObject(r))return n;o=r}return l(o,function(t,e,r){n.push({type:"layout",prop:t,value:r})},"",0),n}function s(t,e){var n,r,o,a,s=[];if(r=e[0],o=e[1],n=e[2],a={},"string"==typeof r)a[r]=o;else{if(!i.isPlainObject(r))return s;a=r,void 0===n&&(n=o)}return void 0===n&&(n=null),l(a,function(e,r,i){var o;if(Array.isArray(i)){var a=Math.min(i.length,t.data.length);n&&(a=Math.min(a,n.length)),o=[];for(var l=0;l<a;l++)o[l]=n?n[l]:l}else o=n?n.slice(0):null;if(null===o)Array.isArray(i)&&(i=i[0]);else if(Array.isArray(o)){if(!Array.isArray(i)){var c=i;i=[];for(var u=0;u<o.length;u++)i[u]=c}i.length=Math.min(o.length,i.length)}s.push({type:"data",prop:e,traces:o,value:i})},"",0),s}function l(t,e,n,r){Object.keys(t).forEach(function(o){var a=t[o];if("_"!==o[0]){var s=n+(r>0?".":"")+o;i.isPlainObject(a)?l(a,e,s,r+1):e(s,o,a)}})}n.manageCommandObserver=function(t,e,r,a){var s={},l=!0;e&&e._commandObserver&&(s=e._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var c=n.hasSimpleAPICommandBindings(t,r,s.lookupTable);if(e&&e._commandObserver){if(c)return s;if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=null,s}if(c){o(t,c,s.cache),s.check=function(){if(l){var e=o(t,c,s.cache);return e.changed&&a&&void 0!==s.lookupTable[e.value]&&(s.disable(),Promise.resolve(a({value:e.value,type:c.type,prop:c.prop,traces:c.traces,index:s.lookupTable[e.value]})).then(s.enable,s.enable)),e.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],d=0;d<u.length;d++)t._internalOn(u[d],s.check);s.remove=function(){for(var e=0;e<u.length;e++)t._removeInternalListener(u[e],s.check)}}else i.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){l=!1},s.enable=function(){l=!0},e&&(e._commandObserver=s),s},n.hasSimpleAPICommandBindings=function(t,e,r){var i,o,a=e.length;for(i=0;i<a;i++){var s,l=e[i],c=l.method,u=l.args;if(Array.isArray(u)||(u=[]),!c)return!1;var d=n.computeAPICommandBindings(t,c,u);if(1!==d.length)return!1;if(o){if((s=d[0]).type!==o.type)return!1;if(s.prop!==o.prop)return!1;if(Array.isArray(o.traces)){if(!Array.isArray(s.traces))return!1;s.traces.sort();for(var h=0;h<o.traces.length;h++)if(o.traces[h]!==s.traces[h])return!1}else if(s.prop!==o.prop)return!1}else o=d[0],Array.isArray(o.traces)&&o.traces.sort();var f=(s=d[0]).value;if(Array.isArray(f)){if(1!==f.length)return!1;f=f[0]}r&&(r[f]=i)}return o},n.executeAPICommand=function(t,e,n){if("skip"===e)return Promise.resolve();var o=r[e],a=[t];Array.isArray(n)||(n=[]);for(var s=0;s<n.length;s++)a.push(n[s]);return o.apply(null,a).catch(function(t){return i.warn("API call to Plotly."+e+" rejected.",t),Promise.reject(t)})},n.computeAPICommandBindings=function(t,e,n){var r,i;switch(Array.isArray(n)||(n=[]),e){case"restyle":r=s(t,n);break;case"relayout":r=a(t,n);break;case"update":r=s(t,[n[0],n[2]]).concat(a(t,[n[1]]));break;case"animate":i=n,r=Array.isArray(i[0])&&1===i[0].length&&-1!==["string","number"].indexOf(typeof i[0][0])?[{type:"layout",prop:"_currentFrame",value:i[0][0].toString()}]:[];break;default:r=[]}return r}},{"../lib":151,"../plotly":189}],220:[function(t,e,n){"use strict";e.exports=function(t){var e=t.editType,n=t.colorEditType;void 0===n&&(n=e);var r={family:{valType:"string",role:"style",noBlank:!0,strict:!0,editType:e,description:["HTML font family - the typeface that will be applied by the web browser.","The web browser will only be able to apply a font if it is available on the system","which it operates. Provide multiple font families, separated by commas, to indicate","the preference in which to apply fonts if they aren't available on the system.","The plotly service (at https://plot.ly or on-premise) generates images on a server,","where only a select number of","fonts are installed and supported.","These include *Arial*, *Balto*, *Courier New*, *Droid Sans*,, *Droid Serif*,","*Droid Sans Mono*, *Gravitas One*, *Old Standard TT*, *Open Sans*, *Overpass*,","*PT Sans Narrow*, *Raleway*, *Times New Roman*."].join(" ")},size:{valType:"number",role:"style",min:1,editType:e},color:{valType:"color",role:"style",editType:n},editType:e,description:""+(t.description||"")};return t.arrayOk&&(r.family.arrayOk=!0,r.size.arrayOk=!0,r.color.arrayOk=!0),r}},{}],221:[function(t,e,n){"use strict";e.exports={_isLinkedToArray:"frames_entry",group:{valType:"string",role:"info",description:["An identifier that specifies the group to which the frame belongs,","used by animate to select a subset of frames."].join(" ")},name:{valType:"string",role:"info",description:"A label by which to identify the frame"},traces:{valType:"any",role:"info",description:["A list of trace indices that identify the respective traces in the","data attribute"].join(" ")},baseframe:{valType:"string",role:"info",description:["The name of the frame into which this frame's properties are merged","before applying. This is used to unify properties and avoid needing","to specify the same values for the same properties in multiple frames."].join(" ")},data:{valType:"any",role:"object",description:["A list of traces this frame modifies. The format is identical to the","normal trace definition."].join(" ")},layout:{valType:"any",role:"object",description:["Layout properties which this frame modifies. The format is identical","to the normal layout definition."].join(" ")}}},{}],222:[function(t,e,n){"use strict";var r=t("../registry"),i=t("./cartesian/constants").SUBPLOT_PATTERN;n.getSubplotCalcData=function(t,e,n){var i=r.subplotsRegistry[e];if(!i)return[];for(var o=i.attr,a=[],s=0;s<t.length;s++){var l=t[s];l[0].trace[o]===n&&a.push(l)}return a},n.getModuleCalcData=function(t,e){var n=[],i="string"==typeof e?r.getModule(e):e;if(!i)return n;for(var o=0;o<t.length;o++){var a=t[o],s=a[0].trace;s._module===i&&!0===s.visible&&n.push(a)}return n},n.getSubplotData=function(t,e,n){if(!r.subplotsRegistry[e])return[];var o,a,s,l=r.subplotsRegistry[e].attr,c=[];if("gl2d"===e){var u=n.match(i);a="x"+u[1],s="y"+u[2]}for(var d=0;d<t.length;d++)o=t[d],"gl2d"===e&&r.traceIs(o,"gl2d")?o[l[0]]===a&&o[l[1]]===s&&c.push(o):o[l]===n&&c.push(o);return c}},{"../registry":233,"./cartesian/constants":199}],223:[function(t,e,n){"use strict";function r(t,e){var n,r,i=[0,0,0,0];for(n=0;n<4;++n)for(r=0;r<4;++r)i[r]+=t[4*n+r]*e[n];return i}e.exports=function(t,e){return r(t.projection,r(t.view,r(t.model,[e[0],e[1],e[2],1])))}},{}],224:[function(t,e,n){"use strict";var r=t("./font_attributes"),i=t("../components/color/attributes"),o=r({editType:"calc",description:["Sets the global font.","Note that fonts used in traces and other","layout components inherit from the global font."].join(" ")});o.family.dflt='"Open Sans", verdana, arial, sans-serif',o.size.dflt=12,o.color.dflt=i.defaultLine,e.exports={font:o,title:{valType:"string",role:"info",editType:"layoutstyle",description:["Sets the plot's title."].join(" ")},titlefont:r({editType:"layoutstyle",description:"Sets the title font."}),autosize:{valType:"boolean",role:"info",dflt:!1,editType:"none",description:["Determines whether or not a layout width or height","that has been left undefined by the user","is initialized on each relayout.","Note that, regardless of this attribute,","an undefined layout width or height","is always initialized on the first call to plot."].join(" ")},width:{valType:"number",role:"info",min:10,dflt:700,editType:"none",description:["Sets the plot's width (in px)."].join(" ")},height:{valType:"number",role:"info",min:10,dflt:450,editType:"none",description:["Sets the plot's height (in px)."].join(" ")},margin:{l:{valType:"number",role:"info",min:0,dflt:80,editType:"calc",description:"Sets the left margin (in px)."},r:{valType:"number",role:"info",min:0,dflt:80,editType:"calc",description:"Sets the right margin (in px)."},t:{valType:"number",role:"info",min:0,dflt:100,editType:"calc",description:"Sets the top margin (in px)."},b:{valType:"number",role:"info",min:0,dflt:80,editType:"calc",description:"Sets the bottom margin (in px)."},pad:{valType:"number",role:"info",min:0,dflt:0,editType:"calc",description:["Sets the amount of padding (in px)","between the plotting area and the axis lines"].join(" ")},autoexpand:{valType:"boolean",role:"info",dflt:!0,editType:"calc"},editType:"calc"},paper_bgcolor:{valType:"color",role:"style",dflt:i.background,editType:"plot",description:"Sets the color of paper where the graph is drawn."},plot_bgcolor:{valType:"color",role:"style",dflt:i.background,editType:"layoutstyle",description:["Sets the color of plotting area in-between x and y axes."].join(" ")},separators:{valType:"string",role:"style",editType:"plot",description:["Sets the decimal and thousand separators.","For example, *. * puts a '.' before decimals and a space","between thousands. In English locales, dflt is *.,* but","other locales may alter this default."].join(" ")},hidesources:{valType:"boolean",role:"info",dflt:!1,editType:"plot",description:["Determines whether or not a text link citing the data source is","placed at the bottom-right cored of the figure.","Has only an effect only on graphs that have been generated via","forked graphs from the plotly service (at https://plot.ly or on-premise)."].join(" ")},showlegend:{valType:"boolean",role:"info",editType:"legend",description:"Determines whether or not a legend is drawn."},colorway:{valType:"colorlist",dflt:i.defaults,role:"style",editType:"calc",description:"Sets the default trace colors."},datarevision:{valType:"any",role:"info",editType:"calc",description:["If provided, a changed value tells `Plotly.react` that","one or more data arrays has changed. This way you can modify","arrays in-place rather than making a complete new copy for an","incremental change.","If NOT provided, `Plotly.react` assumes that data arrays are","being treated as immutable, thus any data array with a","different identity from its predecessor contains new data."].join(" ")}}},{"../components/color/attributes":33,"./font_attributes":220}],225:[function(t,e,n){"use strict";e.exports={t:{valType:"number",dflt:0,role:"style",editType:"arraydraw",description:"The amount of padding (in px) along the top of the component."},r:{valType:"number",dflt:0,role:"style",editType:"arraydraw",description:"The amount of padding (in px) on the right side of the component."},b:{valType:"number",dflt:0,role:"style",editType:"arraydraw",description:"The amount of padding (in px) along the bottom of the component."},l:{valType:"number",dflt:0,role:"style",editType:"arraydraw",description:"The amount of padding (in px) on the left side of the component."},editType:"arraydraw"}},{}],226:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),o=t("../plotly"),a=t("../plot_api/plot_schema"),s=t("../registry"),l=t("../plots/cartesian/axis_ids"),c=t("../lib"),u=c._,d=t("../components/color"),h=t("../constants/numerical").BADNUM,f=e.exports={},p=t("./animation_attributes"),g=t("./frame_attributes"),m=c.relinkPrivateKeys;c.extendFlat(f,s),f.attributes=t("./attributes"),f.attributes.type.values=f.allTypes,f.fontAttrs=t("./font_attributes"),f.layoutAttributes=t("./layout_attributes"),f.fontWeight="normal";var v=f.transformsRegistry,y=t("../components/errorbars"),_=t("./command");f.executeAPICommand=_.executeAPICommand,f.computeAPICommandBindings=_.computeAPICommandBindings,f.manageCommandObserver=_.manageCommandObserver,f.hasSimpleAPICommandBindings=_.hasSimpleAPICommandBindings,f.redrawText=function(t){if(!((t=c.getGraphDiv(t)).data&&t.data[0]&&t.data[0].r))return new Promise(function(e){setTimeout(function(){s.getComponentMethod("annotations","draw")(t),s.getComponentMethod("legend","draw")(t),(t.calcdata||[]).forEach(function(t){t[0]&&t[0].t&&t[0].t.cb&&t[0].t.cb()}),e(f.previousPromises(t))},300)})},f.resize=function(t){return t=c.getGraphDiv(t),new Promise(function(e,n){var r,i;t&&(r=t,(i=window.getComputedStyle(r).display)&&"none"!==i)||n(new Error("Resize must be passed a displayed plot div element.")),t._redrawTimer&&clearTimeout(t._redrawTimer),t._redrawTimer=setTimeout(function(){if(t.layout.width&&t.layout.height)e(t);else{delete t.layout.width,delete t.layout.height;var n=t.changed;t.autoplay=!0,o.relayout(t,{autosize:!0}).then(function(){t.changed=n,e(t)})}},100)})},f.previousPromises=function(t){if((t._promises||[]).length)return Promise.all(t._promises).then(function(){t._promises=[]})},f.addLinks=function(t){if(t._context.showLink||t._context.showSources){var e=t._fullLayout,n=e._paper.selectAll("text.js-plot-link-container").data([0]);n.enter().append("text").classed("js-plot-link-container",!0).style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:d.defaultLine,"pointer-events":"all"}).each(function(){var t=r.select(this);t.append("tspan").classed("js-link-to-tool",!0),t.append("tspan").classed("js-link-spacer",!0),t.append("tspan").classed("js-sourcelinks",!0)});var i=n.node(),o={y:e._paper.attr("height")-9};document.body.contains(i)&&i.getComputedTextLength()>=e.width-20?(o["text-anchor"]="start",o.x=5):(o["text-anchor"]="end",o.x=e._paper.attr("width")-7),n.attr(o);var a=n.select(".js-link-to-tool"),s=n.select(".js-link-spacer"),l=n.select(".js-sourcelinks");t._context.showSources&&t._context.showSources(t),t._context.showLink&&function(t,e){e.text("");var n=e.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(t._context.linkText+" "+String.fromCharCode(187));if(t._context.sendData)n.on("click",function(){f.sendDataToCloud(t)});else{var r=window.location.pathname.split("/"),i=window.location.search;n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+r[2].split(".")[0]+"/"+r[1]+i})}}(t,a),s.text(a.text()&&l.text()?" - ":"")}},f.sendDataToCloud=function(t){t.emit("plotly_beforeexport");var e=window.PLOTLYENV&&window.PLOTLYENV.BASE_URL||"https://plot.ly",n=r.select(t).append("div").attr("id","hiddenform").style("display","none"),i=n.append("form").attr({action:e+"/external",method:"post",target:"_blank"});return i.append("input").attr({type:"text",name:"data"}).node().value=f.graphJson(t,!1,"keepdata"),i.node().submit(),n.remove(),t.emit("plotly_afterexport"),!1};var x,b=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],w=["year","month","dayMonth","dayMonthYear"];function k(t,e){var n,r,i=t.trace,o=i._arrayAttrs,a={};for(n=0;n<o.length;n++)a[r=o[n]]=c.nestedProperty(i,r).get().slice();for(t.trace=e,n=0;n<o.length;n++)r=o[n],c.nestedProperty(t.trace,r).set(a[r])}function T(t,e){var n=t._context.locale,r=!1,i={};function o(t){for(var n=!0,o=0;o<e.length;o++){var a=e[o];i[a]||(t[a]?i[a]=t[a]:n=!1)}n&&(r=!0)}for(var a=0;a<2;a++){for(var l=t._context.locales,c=0;c<2;c++){var u=(l[n]||{}).format;if(u&&(o(u),r))break;l=s.localeRegistry}var d=n.split("-")[0];if(r||d===n)break;n=d}return r||o(s.localeRegistry.en.format),i}function M(t,e,n,r){for(var i=t.transforms,o=[t],a=0;a<i.length;a++){var s=i[a],l=v[s.type];l&&l.transform&&(o=l.transform(o,{transform:s,fullTrace:t,fullData:e,layout:n,fullLayout:r,transformIndex:a}))}return o}function A(t){for(var e=0;e<t.length;e++){t[e]._categories=t[e]._initialCategories.slice(),t[e]._categoriesMap={};for(var n=0;n<t[e]._categories.length;n++)t[e]._categoriesMap[t[e]._categories[n]]=n}}f.supplyDefaults=function(t){var e=t._fullLayout||{};if(e._skipDefaults)delete e._skipDefaults;else{var n,i=t._fullLayout={},o=t.layout||{},a=t._fullData||[],d=t._fullData=[],h=t.data||[],p=t._context||{};t._transitionData||f.createTransitionData(t),i._dfltTitle={plot:u(t,"Click to enter Plot title"),x:u(t,"Click to enter X axis title"),y:u(t,"Click to enter Y axis title"),colorbar:u(t,"Click to enter Colorscale title"),annotation:u(t,"new text")},i._traceWord=u(t,"trace");var g,v,y=T(t,b);if(i._mapboxAccessToken=p.mapboxAccessToken,e._initialAutoSizeIsDone){var _=e.width,M=e.height;f.supplyLayoutGlobalDefaults(o,i,y),o.width||(i.width=_),o.height||(i.height=M)}else{f.supplyLayoutGlobalDefaults(o,i,y);var A=!o.width||!o.height,L=i.autosize,S=p.autosizable;A&&(L||S)?f.plotAutoSize(t,o,i):A&&f.sanitizeMargins(t),!L&&A&&(o.width=i.width,o.height=i.height)}i._d3locale=(g=y,v=i.separators,g.decimal=v.charAt(0),g.thousands=v.charAt(1),r.locale(g)),i._extraFormat=T(t,w),i._initialAutoSizeIsDone=!0,i._dataLength=h.length,i._modules=[],i._basePlotModules=[],i._subplots=function(){var t,e,n={};if(!x){x=[];var r=s.subplotsRegistry;for(var i in r){var o=r[i],a=o.attr;if(a&&(x.push(i),Array.isArray(a)))for(e=0;e<a.length;e++)c.pushUnique(x,a[e])}}for(t=0;t<x.length;t++)n[x[t]]=[];return n}(),i._globalTransforms=(t._context||{}).globalTransforms,f.supplyDataDefaults(h,d,o,i),i._has=f._hasPlotType.bind(i);var C=i._modules;for(n=0;n<C.length;n++){var P=C[n];P.cleanData&&P.cleanData(d)}if(a.length===h.length)for(n=0;n<d.length;n++)m(d[n],a[n]);f.supplyLayoutModuleDefaults(o,i,d,t._transitionData),i._hasCartesian=i._has("cartesian"),i._hasGeo=i._has("geo"),i._hasGL3D=i._has("gl3d"),i._hasGL2D=i._has("gl2d"),i._hasTernary=i._has("ternary"),i._hasPie=i._has("pie"),f.cleanPlot(d,i,a,e),f.linkSubplots(d,i,a,e),m(i,e),f.doAutoMargin(t);var z=l.list(t);for(n=0;n<z.length;n++){z[n].setScale()}if((t.calcdata||[]).length===d.length)for(n=0;n<d.length;n++){var D=d[n],E=t.calcdata[n][0];E&&E.trace&&(E.trace._hasCalcTransform?k(E,D):E.trace=D)}}},f.createTransitionData=function(t){t._transitionData||(t._transitionData={}),t._transitionData._frames||(t._transitionData._frames=[]),t._transitionData._frameHash||(t._transitionData._frameHash={}),t._transitionData._counter||(t._transitionData._counter=0),t._transitionData._interruptCallbacks||(t._transitionData._interruptCallbacks=[])},f._hasPlotType=function(t){var e,n=this._basePlotModules||[];for(e=0;e<n.length;e++){if(n[e].name===t)return!0}var r=this._modules||[];for(e=0;e<r.length;e++){var i=r[e];if(i.categories&&i.categories.indexOf(t)>=0)return!0}return!1},f.cleanPlot=function(t,e,n,r){var i,o,a=r._basePlotModules||[];for(i=0;i<a.length;i++){var s=a[i];s.clean&&s.clean(t,e,n,r)}var l=!!r._paper,c=!!r._infolayer,u=r._has&&r._has("gl"),d=e._has&&e._has("gl");u&&!d&&void 0!==r._glcontainer&&(r._glcontainer.selectAll(".gl-canvas").remove(),r._glcanvas=null);t:for(i=0;i<n.length;i++){var h=n[i].uid;for(o=0;o<t.length;o++){if(h===t[o].uid)continue t}var f=".hm"+h+",.contour"+h+",.carpet"+h+",#clip"+h+",.trace"+h;l&&r._paper.selectAll(f).remove(),c&&(r._infolayer.selectAll(".cb"+h).remove(),r._infolayer.selectAll("g.rangeslider-container").selectAll(f).remove())}r._zoomlayer&&r._zoomlayer.selectAll(".select-outline").remove()},f.linkSubplots=function(t,e,n,r){var i,o,a,s,u=r._plots||{},d=e._plots={},h=e._subplots,f={_fullData:t,_fullLayout:e},p=h.cartesian.concat(h.gl2d||[]);for(var g in h)h[g].sort(c.subplotSort);for(i=0;i<p.length;i++){var m,v=u[a=p[i]],y=l.getFromId(f,a,"x"),_=l.getFromId(f,a,"y");for(v?((m=d[a]=v).xaxis.layer!==y.layer&&(m.xlines.attr("d",null),m.xaxislayer.selectAll("*").remove()),m.yaxis.layer!==_.layer&&(m.ylines.attr("d",null),m.yaxislayer.selectAll("*").remove())):(m=d[a]={}).id=a,m.xaxis=y,m.yaxis=_,m._hasClipOnAxisFalse=!1,o=0;o<t.length;o++){var x=t[o];if(x.xaxis===m.xaxis._id&&x.yaxis===m.yaxis._id&&!1===x.cliponaxis){m._hasClipOnAxisFalse=!0;break}}}var b=l.list(f,null,!0);for(i=0;i<b.length;i++){var w=null;(s=b[i]).overlaying&&(w=l.getFromId(f,s.overlaying))&&w.overlaying&&(s.overlaying=!1,w=null),s._mainAxis=w||s,w&&(s.domain=w.domain.slice()),s._anchorAxis="free"===s.anchor?null:l.getFromId(f,s.anchor)}for(i=0;i<b.length;i++){var k="x"===(s=b[i])._id.charAt(0),T=s._mainAxis._anchorAxis,M="",A="",L="";if(T&&(L=T._mainAxis._id,M=k?s._id+L:L+s._id),!M||-1===p.indexOf(M))for(M="",o=0;o<p.length;o++){var S=(a=p[o]).indexOf("y"),C=k?a.substr(0,S):a.substr(S),P=k?a.substr(S):a.substr(0,S);if(C===s._id){A||(A=a);var z=l.getFromId(f,P);if(L&&z.overlaying===L){M=a;break}}}s._mainSubplot=M||A}},f.clearExpandedTraceDefaultColors=function(t){var e,n,r;for(n=[],(e=t._module._colorAttrs)||(t._module._colorAttrs=e=[],a.crawl(t._module.attributes,function(t,r,i,o){n[o]=r,n.length=o+1,"color"===t.valType&&void 0===t.dflt&&e.push(n.join("."))})),r=0;r<e.length;r++){c.nestedProperty(t,"_input."+e[r]).get()||c.nestedProperty(t,e[r]).set(null)}},f.supplyDataDefaults=function(t,e,n,r){var i,o,a,l=r._modules,u=r._basePlotModules,d=0,h=0;function p(t){e.push(t);var n=t._module;n&&(!0===t.visible&&c.pushUnique(l,n),c.pushUnique(u,t._module.basePlotModule),d++,!1!==t._input.visible&&h++)}r._transformModules=[];var g={},v=[];for(i=0;i<t.length;i++){if(a=t[i],(o=f.supplyTraceDefaults(a,h,r,i)).index=i,o._input=a,o._expandedIndex=d,o.transforms&&o.transforms.length)for(var y=M(o,e,n,r),_=0;_<y.length;_++){var x=y[_],b=f.supplyTraceDefaults(x,d,r,i);m(b,x),x.uid=b.uid=o.uid+_,b.index=i,b._input=a,b._fullInput=o,b._expandedIndex=d,b._expandedInput=x,p(b)}else o._fullInput=o,o._expandedInput=o,p(o);s.traceIs(o,"carpetAxis")&&(g[o.carpet]=o),s.traceIs(o,"carpetDependent")&&v.push(i)}for(i=0;i<v.length;i++)if((o=e[v[i]]).visible){var w=g[o.carpet];o._carpet=w,w&&w.visible?(o.xaxis=w.xaxis,o.yaxis=w.yaxis):o.visible=!1}},f.supplyAnimationDefaults=function(t){var e;t=t||{};var n={};function r(e,r){return c.coerce(t||{},n,p,e,r)}if(r("mode"),r("direction"),r("fromcurrent"),Array.isArray(t.frame))for(n.frame=[],e=0;e<t.frame.length;e++)n.frame[e]=f.supplyAnimationFrameDefaults(t.frame[e]||{});else n.frame=f.supplyAnimationFrameDefaults(t.frame||{});if(Array.isArray(t.transition))for(n.transition=[],e=0;e<t.transition.length;e++)n.transition[e]=f.supplyAnimationTransitionDefaults(t.transition[e]||{});else n.transition=f.supplyAnimationTransitionDefaults(t.transition||{});return n},f.supplyAnimationFrameDefaults=function(t){var e={};function n(n,r){return c.coerce(t||{},e,p.frame,n,r)}return n("duration"),n("redraw"),e},f.supplyAnimationTransitionDefaults=function(t){var e={};function n(n,r){return c.coerce(t||{},e,p.transition,n,r)}return n("duration"),n("easing"),e},f.supplyFrameDefaults=function(t){var e={};function n(n,r){return c.coerce(t,e,g,n,r)}return n("group"),n("name"),n("traces"),n("baseframe"),n("data"),n("layout"),e},f.supplyTraceDefaults=function(t,e,n,r){var i,o=n.colorway||d.defaults,a={},l=o[e%o.length];function u(e,n){return c.coerce(t,a,f.attributes,e,n)}var h=u("visible");u("type"),u("uid"),u("name",n._traceWord+" "+r);var p=f.getModule(a);if(a._module=p,p){var g=p.basePlotModule,m=g.attr;if(m){var v=n._subplots,y=g.attributes,_="";if("gl2d"!==g.name||h){if(Array.isArray(m))for(i=0;i<m.length;i++){var x=m[i],b=c.coerce(t,a,y,x);v[x]&&c.pushUnique(v[x],b),_+=b}else _=c.coerce(t,a,y,m);v[g.name]&&c.pushUnique(v[g.name],_)}}}return h&&(u("customdata"),u("ids"),f.traceIs(a,"showLegend")&&(u("showlegend"),u("legendgroup")),s.getComponentMethod("fx","supplyDefaults")(t,a,l,n),p&&(p.supplyDefaults(t,a,l,n),c.coerceHoverinfo(t,a,n)),f.traceIs(a,"noOpacity")||u("opacity"),f.traceIs(a,"notLegendIsolatable")&&(a.visible=!!a.visible),p&&p.selectPoints&&u("selectedpoints"),f.supplyTransformDefaults(t,a,n)),a},f.supplyTransformDefaults=function(t,e,n){var r=n._globalTransforms||[],i=n._transformModules||[];if(Array.isArray(t.transforms)||0!==r.length)for(var o=t.transforms||[],a=r.concat(o),s=e.transforms=[],l=0;l<a.length;l++){var u,d=a[l],h=d.type,f=v[h],p=!(d._module&&d._module===f),g=f&&"function"==typeof f.transform;f||c.warn("Unrecognized transform type "+h+"."),f&&f.supplyDefaults&&(p||g)?((u=f.supplyDefaults(d,e,n,t)).type=h,u._module=f,c.pushUnique(i,f)):u=c.extendFlat({},d),s.push(u)}},f.supplyLayoutGlobalDefaults=function(t,e,n){function r(n,r){return c.coerce(t,e,f.layoutAttributes,n,r)}var i=c.coerceFont(r,"font");r("title",e._dfltTitle.plot),c.coerceFont(r,"titlefont",{family:i.family,size:Math.round(1.4*i.size),color:i.color}),r("autosize",!(t.width&&t.height)),r("width"),r("height"),r("margin.l"),r("margin.r"),r("margin.t"),r("margin.b"),r("margin.pad"),r("margin.autoexpand"),t.width&&t.height&&f.sanitizeMargins(e),r("paper_bgcolor"),r("separators",n.decimal+n.thousands),r("hidesources"),r("colorway"),r("datarevision"),s.getComponentMethod("calendars","handleDefaults")(t,e,"calendar"),s.getComponentMethod("fx","supplyLayoutGlobalDefaults")(t,e,r)},f.plotAutoSize=function(t,e,n){var r,o,a=t._context||{},s=a.frameMargins,l=c.isPlotDiv(t);if(l&&t.emit("plotly_autosize"),a.fillFrame)r=window.innerWidth,o=window.innerHeight,document.body.style.overflow="hidden";else if(i(s)&&s>0){var u=function(t){var e,n={left:0,right:0,bottom:0,top:0};if(t)for(e in t)t.hasOwnProperty(e)&&(n.left+=t[e].left||0,n.right+=t[e].right||0,n.bottom+=t[e].bottom||0,n.top+=t[e].top||0);return n}(t._boundingBoxMargins),d=u.left+u.right,h=u.bottom+u.top,p=1-2*s,g=n._container&&n._container.node?n._container.node().getBoundingClientRect():{width:n.width,height:n.height};r=Math.round(p*(g.width-d)),o=Math.round(p*(g.height-h))}else{var m=l?window.getComputedStyle(t):{};r=parseFloat(m.width)||n.width,o=parseFloat(m.height)||n.height}var v=f.layoutAttributes.width.min,y=f.layoutAttributes.height.min;r<v&&(r=v),o<y&&(o=y);var _=!e.width&&Math.abs(n.width-r)>1,x=!e.height&&Math.abs(n.height-o)>1;(x||_)&&(_&&(n.width=r),x&&(n.height=o)),t._initialAutoSize||(t._initialAutoSize={width:r,height:o}),f.sanitizeMargins(n)},f.supplyLayoutModuleDefaults=function(t,e,n,r){var i,o,a,l=s.componentsRegistry,c=e._basePlotModules,u=s.subplotsRegistry.cartesian;for(i in l)(a=l[i]).includeBasePlot&&a.includeBasePlot(t,e);for(c.length||c.push(u),e._has("cartesian")&&u.finalizeSubplots(t,e),o=0;o<c.length;o++)(a=c[o]).supplyLayoutDefaults&&a.supplyLayoutDefaults(t,e,n);var d=e._modules;for(o=0;o<d.length;o++)(a=d[o]).supplyLayoutDefaults&&a.supplyLayoutDefaults(t,e,n);var h=e._transformModules;for(o=0;o<h.length;o++)(a=h[o]).supplyLayoutDefaults&&a.supplyLayoutDefaults(t,e,n,r);for(i in l)(a=l[i]).supplyLayoutDefaults&&a.supplyLayoutDefaults(t,e,n)},f.purge=function(t){var e=t._fullLayout||{};void 0!==e._glcontainer&&(e._glcontainer.selectAll(".gl-canvas").remove(),e._glcontainer.remove(),e._glcanvas=null),void 0!==e._geocontainer&&e._geocontainer.remove(),e._modeBar&&e._modeBar.destroy(),t._transitionData&&(t._transitionData._interruptCallbacks&&(t._transitionData._interruptCallbacks.length=0),t._transitionData._animationRaf&&window.cancelAnimationFrame(t._transitionData._animationRaf)),c.clearThrottle(),delete t.data,delete t.layout,delete t._fullData,delete t._fullLayout,delete t.calcdata,delete t.framework,delete t.empty,delete t.fid,delete t.undoqueue,delete t.undonum,delete t.autoplay,delete t.changed,delete t._promises,delete t._redrawTimer,delete t.firstscatter,delete t._hmlumcount,delete t._hmpixcount,delete t._transitionData,delete t._transitioning,delete t._initialAutoSize,delete t._transitioningWithDuration,delete t._dragging,delete t._dragged,delete t._hoverdata,delete t._snapshotInProgress,delete t._editing,delete t._replotPending,delete t._mouseDownTime,delete t._legendMouseDownTime,t.removeAllListeners&&t.removeAllListeners()},f.style=function(t){var e,n=t._fullLayout._modules,r=[];for(e=0;e<n.length;e++){var i=n[e];i.style&&c.pushUnique(r,i.style)}for(e=0;e<r.length;e++)r[e](t)},f.sanitizeMargins=function(t){if(t&&t.margin){var e,n=t.width,r=t.height,i=t.margin,o=n-(i.l+i.r),a=r-(i.t+i.b);o<0&&(e=(n-1)/(i.l+i.r),i.l=Math.floor(e*i.l),i.r=Math.floor(e*i.r)),a<0&&(e=(r-1)/(i.t+i.b),i.t=Math.floor(e*i.t),i.b=Math.floor(e*i.b))}},f.autoMargin=function(t,e,n){var r=t._fullLayout;if(r._pushmargin||(r._pushmargin={}),!1!==r.margin.autoexpand){if(n){var i=void 0===n.pad?12:n.pad;n.l+n.r>.5*r.width&&(n.l=n.r=0),n.b+n.t>.5*r.height&&(n.b=n.t=0),r._pushmargin[e]={l:{val:n.x,size:n.l+i},r:{val:n.x,size:n.r+i},b:{val:n.y,size:n.b+i},t:{val:n.y,size:n.t+i}}}else delete r._pushmargin[e];r._replotting||f.doAutoMargin(t)}},f.doAutoMargin=function(t){var e=t._fullLayout;e._size||(e._size={}),e._pushmargin||(e._pushmargin={});var n=e._size,r=JSON.stringify(n),a=Math.max(e.margin.l||0,0),s=Math.max(e.margin.r||0,0),l=Math.max(e.margin.t||0,0),c=Math.max(e.margin.b||0,0),u=e._pushmargin;if(!1!==e.margin.autoexpand)for(var d in u.base={l:{val:0,size:a},r:{val:1,size:s},t:{val:1,size:l},b:{val:0,size:c}},u){var h=u[d].l||{},f=u[d].b||{},p=h.val,g=h.size,m=f.val,v=f.size;for(var y in u){if(i(g)&&u[y].r){var _=u[y].r.val,x=u[y].r.size;if(_>p){var b=(g*_+(x-e.width)*p)/(_-p),w=(x*(1-p)+(g-e.width)*(1-_))/(_-p);b>=0&&w>=0&&b+w>a+s&&(a=b,s=w)}}if(i(v)&&u[y].t){var k=u[y].t.val,T=u[y].t.size;if(k>m){var M=(v*k+(T-e.height)*m)/(k-m),A=(T*(1-m)+(v-e.height)*(1-k))/(k-m);M>=0&&A>=0&&M+A>c+l&&(c=M,l=A)}}}}if(n.l=Math.round(a),n.r=Math.round(s),n.t=Math.round(l),n.b=Math.round(c),n.p=Math.round(e.margin.pad),n.w=Math.round(e.width)-n.l-n.r,n.h=Math.round(e.height)-n.t-n.b,!e._replotting&&"{}"!==r&&r!==JSON.stringify(e._size))return o.plot(t)},f.graphJson=function(t,e,n,r,i){(i&&e&&!t._fullData||i&&!e&&!t._fullLayout)&&f.supplyDefaults(t);var o=i?t._fullData:t.data,a=i?t._fullLayout:t.layout,s=(t._transitionData||{})._frames;function l(t){if("function"==typeof t)return null;if(c.isPlainObject(t)){var e,r,i={};for(e in t)if("function"!=typeof t[e]&&-1===["_","["].indexOf(e.charAt(0))){if("keepdata"===n){if("src"===e.substr(e.length-3))continue}else if("keepstream"===n){if("string"==typeof(r=t[e+"src"])&&r.indexOf(":")>0&&!c.isPlainObject(t.stream))continue}else if("keepall"!==n&&"string"==typeof(r=t[e+"src"])&&r.indexOf(":")>0)continue;i[e]=l(t[e])}return i}return Array.isArray(t)?t.map(l):c.isJSDate(t)?c.ms2DateTimeLocal(+t):t}var u={data:(o||[]).map(function(t){var n=l(t);return e&&delete n.fit,n})};return e||(u.layout=l(a)),t.framework&&t.framework.isPolar&&(u=t.framework.getConfig()),s&&(u.frames=l(s)),"object"===r?u:JSON.stringify(u)},f.modifyFrames=function(t,e){var n,r,i,o=t._transitionData._frames,a=t._transitionData._frameHash;for(n=0;n<e.length;n++)switch((r=e[n]).type){case"replace":i=r.value;var s=(o[r.index]||{}).name,l=i.name;o[r.index]=a[l]=i,l!==s&&(delete a[s],a[l]=i);break;case"insert":a[(i=r.value).name]=i,o.splice(r.index,0,i);break;case"delete":delete a[(i=o[r.index]).name],o.splice(r.index,1)}return Promise.resolve()},f.computeFrame=function(t,e){var n,r,i,o,a=t._transitionData._frameHash;if(!e)throw new Error("computeFrame must be given a string frame name");var s=a[e.toString()];if(!s)return!1;for(var l=[s],c=[s.name];s.baseframe&&(s=a[s.baseframe.toString()])&&-1===c.indexOf(s.name);)l.push(s),c.push(s.name);for(var u={};s=l.pop();)if(s.layout&&(u.layout=f.extendLayout(u.layout,s.layout)),s.data){if(u.data||(u.data=[]),!(r=s.traces))for(r=[],n=0;n<s.data.length;n++)r[n]=n;for(u.traces||(u.traces=[]),n=0;n<s.data.length;n++)null!=(i=r[n])&&(-1===(o=u.traces.indexOf(i))&&(o=u.data.length,u.traces[o]=i),u.data[o]=f.extendTrace(u.data[o],s.data[n]))}return u},f.recomputeFrameHash=function(t){for(var e=t._transitionData._frameHash={},n=t._transitionData._frames,r=0;r<n.length;r++){var i=n[r];i&&i.name&&(e[i.name]=i)}},f.extendObjectWithContainers=function(t,e,n){var r,i,o,a,s,l,u,d=c.extendDeepNoArrays({},e||{}),h=c.expandObjectPaths(d),p={};if(n&&n.length)for(o=0;o<n.length;o++)void 0===(i=(r=c.nestedProperty(h,n[o])).get())?c.nestedProperty(p,n[o]).set(null):(r.set(null),c.nestedProperty(p,n[o]).set(i));if(t=c.extendDeepNoArrays(t||{},h),n&&n.length)for(o=0;o<n.length;o++)if(l=c.nestedProperty(p,n[o]).get()){for(u=(s=c.nestedProperty(t,n[o])).get(),Array.isArray(u)||(u=[],s.set(u)),a=0;a<l.length;a++){var g=l[a];u[a]=null===g?null:f.extendObjectWithContainers(u[a],g)}s.set(u)}return t},f.dataArrayContainers=["transforms","dimensions"],f.layoutArrayContainers=s.layoutArrayContainers,f.extendTrace=function(t,e){return f.extendObjectWithContainers(t,e,f.dataArrayContainers)},f.extendLayout=function(t,e){return f.extendObjectWithContainers(t,e,f.layoutArrayContainers)},f.transition=function(t,e,n,r,i,a){var s,l,u=Array.isArray(e)?e.length:0,d=r.slice(0,u),h=[];var p=!1;for(s=0;s<d.length;s++){l=d[s];t._fullData[l]._module}var g=[f.previousPromises,function(){if(t._transitionData)return t._transitioning=!1,function(t){var e=Promise.resolve();if(!t)return e;for(;t.length;)e=e.then(t.shift());return e}(t._transitionData._interruptCallbacks)},function(){var r;for(r=0;r<d.length;r++){var i=d[r],o=t._fullData[i]._module;o&&(o.animatable&&h.push(i),t.data[d[r]]=f.extendTrace(t.data[d[r]],e[r]))}var a=c.expandObjectPaths(c.extendDeepNoArrays({},n)),s=/^[xy]axis[0-9]*$/;for(var l in a)s.test(l)&&delete a[l].range;return f.extendLayout(t.layout,a),delete t.calcdata,f.supplyDefaults(t),f.doCalcdata(t),y.calc(t),Promise.resolve()},f.rehover,function(){return t.emit("plotly_transitioning",[]),new Promise(function(e){t._transitioning=!0,a.duration>0&&(t._transitioningWithDuration=!0),t._transitionData._interruptCallbacks.push(function(){p=!0}),i.redraw&&t._transitionData._interruptCallbacks.push(function(){return o.redraw(t)}),t._transitionData._interruptCallbacks.push(function(){t.emit("plotly_transitioninterrupted",[])});var r,s,l=0,u=0;function d(){return l++,function(){var n;u++,p||u!==l||(n=e,t._transitionData&&(function(t){if(t)for(;t.length;)t.shift()}(t._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(i.redraw)return o.redraw(t)}).then(function(){t._transitioning=!1,t._transitioningWithDuration=!1,t.emit("plotly_transitioned",[])}).then(n)))}}var f=t._fullLayout._basePlotModules,g=!1;if(n)for(s=0;s<f.length;s++)if(f[s].transitionAxes){var m=c.expandObjectPaths(n);g=f[s].transitionAxes(t,m,a,d)||g}for(g?(r=c.extendFlat({},a)).duration=0:r=a,s=0;s<f.length;s++)f[s].plot(t,h,r,d);setTimeout(d())})}],m=c.syncOrAsync(g,t);return m&&m.then||(m=Promise.resolve()),m.then(function(){return t})},f.doCalcdata=function(t,e){var n,r,i,o,c=l.list(t),u=t._fullData,d=t._fullLayout,f=new Array(u.length),p=(t.calcdata||[]).slice(0);for(t.calcdata=f,t.firstscatter=!0,d._numBoxes=0,d._numViolins=0,d._violinScaleGroupStats={},t._hmpixcount=0,t._hmlumcount=0,d._piecolormap={},d._piecolorway=null,d._piedefaultcolorcount=0,i=0;i<u.length;i++)Array.isArray(e)&&-1===e.indexOf(i)&&(f[i]=p[i]);for(i=0;i<u.length;i++)(n=u[i])._arrayAttrs=a.findArrayAttributes(n);var g=d._subplots.polar||[];for(i=0;i<g.length;i++)c.push(d[g[i]].radialaxis,d[g[i]].angularaxis);A(c);var m=!1;for(i=0;i<u.length;i++)if(!0===(n=u[i]).visible&&n.transforms)for((r=n._module)&&r.calc&&r.calc(t,n),o=0;o<n.transforms.length;o++){var y=n.transforms[o];(r=v[y.type])&&r.calcTransform&&(n._hasCalcTransform=!0,m=!0,r.calcTransform(t,n,y))}if(m){for(i=0;i<c.length;i++)c[i]._min=[],c[i]._max=[],c[i]._categories=[],c[i]._categoriesMap={};A(c)}for(i=0;i<u.length;i++){var _=[];if(!0===(n=u[i]).visible){r=n._module;var x=n.transforms||[];for(o=x.length-1;o>=0;o--)if(x[o].enabled){n._indexToPoints=x[o]._indexToPoints;break}r&&r.calc&&(_=r.calc(t,n))}Array.isArray(_)&&_[0]||(_=[{x:h,y:h}]),_[0].t||(_[0].t={}),_[0].trace=n,f[i]=_}s.getComponentMethod("fx","calc")(t)},f.rehover=function(t){t._fullLayout._rehover&&t._fullLayout._rehover()},f.generalUpdatePerTraceModule=function(t,e,n,r){var i,o=e.traceHash,a={};for(i=0;i<n.length;i++){var s=n[i],l=s[0].trace;l.visible&&(a[l.type]=a[l.type]||[],a[l.type].push(s))}for(var u in o)if(!a[u]){var d=o[u][0];d[0].trace.visible=!1,a[u]=[d]}for(var h in a){var f=a[h];f[0][0].trace._module.plot(t,e,c.filterVisible(f),r)}e.traceHash=a}},{"../components/color":34,"../components/errorbars":65,"../constants/numerical":134,"../lib":151,"../plot_api/plot_schema":183,"../plotly":189,"../plots/cartesian/axis_ids":197,"../registry":233,"./animation_attributes":190,"./attributes":192,"./command":219,"./font_attributes":220,"./frame_attributes":221,"./layout_attributes":224,d3:1,"fast-isnumeric":4}],227:[function(t,e,n){"use strict";var r=t("../../../traces/scatter/attributes"),i=r.marker;e.exports={r:r.r,t:r.t,marker:{color:i.color,size:i.size,symbol:i.symbol,opacity:i.opacity,editType:"calc"}}},{"../../../traces/scatter/attributes":259}],228:[function(t,e,n){"use strict";var r=t("../../cartesian/layout_attributes"),i=t("../../../lib/extend").extendFlat,o=t("../../../plot_api/edit_types").overrideAll,a=i({},r.domain,{description:["Polar chart subplots are not supported yet.","This key has currently no effect."].join(" ")});function s(t,e){var n={showline:{valType:"boolean",role:"style",description:["Determines whether or not the line bounding this",t,"axis","will be shown on the figure."].join(" ")},showticklabels:{valType:"boolean",role:"style",description:["Determines whether or not the",t,"axis ticks","will feature tick labels."].join(" ")},tickorientation:{valType:"enumerated",values:["horizontal","vertical"],role:"style",description:["Sets the orientation (from the paper perspective)","of the",t,"axis tick labels."].join(" ")},ticklen:{valType:"number",min:0,role:"style",description:["Sets the length of the tick lines on this",t,"axis."].join(" ")},tickcolor:{valType:"color",role:"style",description:["Sets the color of the tick lines on this",t,"axis."].join(" ")},ticksuffix:{valType:"string",role:"style",description:["Sets the length of the tick lines on this",t,"axis."].join(" ")},endpadding:{valType:"number",role:"style"},visible:{valType:"boolean",role:"info",description:["Determines whether or not this axis will be visible."].join(" ")}};return i({},e,n)}e.exports=o({radialaxis:s("radial",{range:{valType:"info_array",role:"info",items:[{valType:"number"},{valType:"number"}],description:["Defines the start and end point of this radial axis."].join(" ")},domain:a,orientation:{valType:"number",role:"style",description:["Sets the orientation (an angle with respect to the origin)","of the radial axis."].join(" ")}}),angularaxis:s("angular",{range:{valType:"info_array",role:"info",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}],description:["Defines the start and end point of this angular axis."].join(" ")},domain:a}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"],role:"info",description:["For polar plots only.","Sets the direction corresponding to positive angles."].join(" ")},orientation:{valType:"angle",role:"info",description:["For polar plots only.","Rotates the entire polar by the given angle."].join(" ")}}},"plot","nested")},{"../../../lib/extend":145,"../../../plot_api/edit_types":178,"../../cartesian/layout_attributes":206}],229:[function(t,e,n){"use strict";(e.exports=t("./micropolar")).manager=t("./micropolar_manager")},{"./micropolar":230,"./micropolar_manager":231}],230:[function(t,e,n){var r=t("d3"),i=t("../../../lib").extendDeepAll,o=t("../../../constants/alignment").MID_SHIFT,a=e.exports={version:"0.2.2"};a.Axis=function(){var t,e,n,s,l={data:[],layout:{}},c={},u={},d=r.dispatch("hover"),h={};return h.render=function(c){return function(c){e=c||e;var d=l.data,h=l.layout;("string"==typeof e||e.nodeName)&&(e=r.select(e)),e.datum(d).each(function(e,l){var c=e.slice();u={data:a.util.cloneJson(c),layout:a.util.cloneJson(h)};var d=0;c.forEach(function(t,e){t.color||(t.color=h.defaultColorRange[d],d=(d+1)%h.defaultColorRange.length),t.strokeColor||(t.strokeColor="LinePlot"===t.geometry?t.color:r.rgb(t.color).darker().toString()),u.data[e].color=t.color,u.data[e].strokeColor=t.strokeColor,u.data[e].strokeDash=t.strokeDash,u.data[e].strokeSize=t.strokeSize});var f=c.filter(function(t,e){var n=t.visible;return void 0===n||!0===n}),p=!1,g=f.map(function(t,e){return p=p||void 0!==t.groupId,t});if(p){var m=r.nest().key(function(t,e){return void 0!==t.groupId?t.groupId:"unstacked"}).entries(g),v=[],y=m.map(function(t,e){if("unstacked"===t.key)return t.values;var n=t.values[0].r.map(function(t,e){return 0});return t.values.forEach(function(t,e,r){t.yStack=[n],v.push(n),n=a.util.sumArrays(t.r,n)}),t.values});f=r.merge(y)}f.forEach(function(t,e){t.t=Array.isArray(t.t[0])?t.t:[t.t],t.r=Array.isArray(t.r[0])?t.r:[t.r]});var _=Math.min(h.width-h.margin.left-h.margin.right,h.height-h.margin.top-h.margin.bottom)/2;_=Math.max(10,_);var x,b=[h.margin.left+_,h.margin.top+_];x=p?[0,r.max(a.util.sumArrays(a.util.arrayLast(f).r[0],a.util.arrayLast(v)))]:r.extent(a.util.flattenArray(f.map(function(t,e){return t.r}))),h.radialAxis.domain!=a.DATAEXTENT&&(x[0]=0),n=r.scale.linear().domain(h.radialAxis.domain!=a.DATAEXTENT&&h.radialAxis.domain?h.radialAxis.domain:x).range([0,_]),u.layout.radialAxis.domain=n.domain();var w,k=a.util.flattenArray(f.map(function(t,e){return t.t})),T="string"==typeof k[0];T&&(k=a.util.deduplicate(k),w=k.slice(),k=r.range(k.length),f=f.map(function(t,e){var n=t;return t.t=[k],p&&(n.yStack=t.yStack),n}));var M=f.filter(function(t,e){return"LinePlot"===t.geometry||"DotPlot"===t.geometry}).length===f.length,A=null===h.needsEndSpacing?T||!M:h.needsEndSpacing,L=h.angularAxis.domain&&h.angularAxis.domain!=a.DATAEXTENT&&!T&&h.angularAxis.domain[0]>=0?h.angularAxis.domain:r.extent(k),S=Math.abs(k[1]-k[0]);M&&!T&&(S=0);var C=L.slice();A&&T&&(C[1]+=S);var P=h.angularAxis.ticksCount||4;P>8&&(P=P/(P/8)+P%8),h.angularAxis.ticksStep&&(P=(C[1]-C[0])/P);var z=h.angularAxis.ticksStep||(C[1]-C[0])/(P*(h.minorTicks+1));w&&(z=Math.max(Math.round(z),1)),C[2]||(C[2]=z);var D=r.range.apply(this,C);if(D=D.map(function(t,e){return parseFloat(t.toPrecision(12))}),s=r.scale.linear().domain(C.slice(0,2)).range("clockwise"===h.direction?[0,360]:[360,0]),u.layout.angularAxis.domain=s.domain(),u.layout.angularAxis.endPadding=A?S:0,void 0===(t=r.select(this).select("svg.chart-root"))||t.empty()){var E=(new DOMParser).parseFromString("<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>","application/xml"),O=this.appendChild(this.ownerDocument.importNode(E.documentElement,!0));t=r.select(O)}t.select(".guides-group").style({"pointer-events":"none"}),t.select(".angular.axis-group").style({"pointer-events":"none"}),t.select(".radial.axis-group").style({"pointer-events":"none"});var I,j=t.select(".chart-group"),N={fill:"none",stroke:h.tickColor},R={"font-size":h.font.size,"font-family":h.font.family,fill:h.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(t,e){return" "+t+" 0 "+h.font.outlineColor}).join(",")};if(h.showLegend){I=t.select(".legend-group").attr({transform:"translate("+[_,h.margin.top]+")"}).style({display:"block"});var B=f.map(function(t,e){var n=a.util.cloneJson(t);return n.symbol="DotPlot"===t.geometry?t.dotType||"circle":"LinePlot"!=t.geometry?"square":"line",n.visibleInLegend=void 0===t.visibleInLegend||t.visibleInLegend,n.color="LinePlot"===t.geometry?t.strokeColor:t.color,n});a.Legend().config({data:f.map(function(t,e){return t.name||"Element"+e}),legendConfig:i({},a.Legend.defaultConfig().legendConfig,{container:I,elements:B,reverseOrder:h.legend.reverseOrder})})();var F=I.node().getBBox();_=Math.min(h.width-F.width-h.margin.left-h.margin.right,h.height-h.margin.top-h.margin.bottom)/2,_=Math.max(10,_),b=[h.margin.left+_,h.margin.top+_],n.range([0,_]),u.layout.radialAxis.domain=n.domain(),I.attr("transform","translate("+[b[0]+_,b[1]-_]+")")}else I=t.select(".legend-group").style({display:"none"});t.attr({width:h.width,height:h.height}).style({opacity:h.opacity}),j.attr("transform","translate("+b+")").style({cursor:"crosshair"});var H=[(h.width-(h.margin.left+h.margin.right+2*_+(F?F.width:0)))/2,(h.height-(h.margin.top+h.margin.bottom+2*_))/2];if(H[0]=Math.max(0,H[0]),H[1]=Math.max(0,H[1]),t.select(".outer-group").attr("transform","translate("+H+")"),h.title){var q=t.select("g.title-group text").style(R).text(h.title),Z=q.node().getBBox();q.attr({x:b[0]-Z.width/2,y:b[1]-_-20})}var V=t.select(".radial.axis-group");if(h.radialAxis.gridLinesVisible){var U=V.selectAll("circle.grid-circle").data(n.ticks(5));U.enter().append("circle").attr({class:"grid-circle"}).style(N),U.attr("r",n),U.exit().remove()}V.select("circle.outside-circle").attr({r:_}).style(N);var W=t.select("circle.background-circle").attr({r:_}).style({fill:h.backgroundColor,stroke:h.stroke});function G(t,e){return s(t)%360+h.orientation}if(h.radialAxis.visible){var X=r.svg.axis().scale(n).ticks(5).tickSize(5);V.call(X).attr({transform:"rotate("+h.radialAxis.orientation+")"}),V.selectAll(".domain").style(N),V.selectAll("g>text").text(function(t,e){return this.textContent+h.radialAxis.ticksSuffix}).style(R).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(t,e){return"horizontal"===h.radialAxis.tickOrientation?"rotate("+-h.radialAxis.orientation+") translate("+[0,R["font-size"]]+")":"translate("+[0,R["font-size"]]+")"}}),V.selectAll("g>line").style({stroke:"black"})}var Y=t.select(".angular.axis-group").selectAll("g.angular-tick").data(D),$=Y.enter().append("g").classed("angular-tick",!0);Y.attr({transform:function(t,e){return"rotate("+G(t)+")"}}).style({display:h.angularAxis.visible?"block":"none"}),Y.exit().remove(),$.append("line").classed("grid-line",!0).classed("major",function(t,e){return e%(h.minorTicks+1)==0}).classed("minor",function(t,e){return!(e%(h.minorTicks+1)==0)}).style(N),$.selectAll(".minor").style({stroke:h.minorTickColor}),Y.select("line.grid-line").attr({x1:h.tickLength?_-h.tickLength:0,x2:_}).style({display:h.angularAxis.gridLinesVisible?"block":"none"}),$.append("text").classed("axis-text",!0).style(R);var J=Y.select("text.axis-text").attr({x:_+h.labelOffset,dy:o+"em",transform:function(t,e){var n=G(t),r=_+h.labelOffset,i=h.angularAxis.tickOrientation;return"horizontal"==i?"rotate("+-n+" "+r+" 0)":"radial"==i?n<270&&n>90?"rotate(180 "+r+" 0)":null:"rotate("+(n<=180&&n>0?-90:90)+" "+r+" 0)"}}).style({"text-anchor":"middle",display:h.angularAxis.labelsVisible?"block":"none"}).text(function(t,e){return e%(h.minorTicks+1)!=0?"":w?w[t]+h.angularAxis.ticksSuffix:t+h.angularAxis.ticksSuffix}).style(R);h.angularAxis.rewriteTicks&&J.text(function(t,e){return e%(h.minorTicks+1)!=0?"":h.angularAxis.rewriteTicks(this.textContent,e)});var Q=r.max(j.selectAll(".angular-tick text")[0].map(function(t,e){return t.getCTM().e+t.getBBox().width}));I.attr({transform:"translate("+[_+Q,h.margin.top]+")"});var K=t.select("g.geometry-group").selectAll("g").size()>0,tt=t.select("g.geometry-group").selectAll("g.geometry").data(f);if(tt.enter().append("g").attr({class:function(t,e){return"geometry geometry"+e}}),tt.exit().remove(),f[0]||K){var et=[];f.forEach(function(t,e){var r={};r.radialScale=n,r.angularScale=s,r.container=tt.filter(function(t,n){return n==e}),r.geometry=t.geometry,r.orientation=h.orientation,r.direction=h.direction,r.index=e,et.push({data:t,geometryConfig:r})});var nt=r.nest().key(function(t,e){return void 0!==t.data.groupId||"unstacked"}).entries(et),rt=[];nt.forEach(function(t,e){"unstacked"===t.key?rt=rt.concat(t.values.map(function(t,e){return[t]})):rt.push(t.values)}),rt.forEach(function(t,e){var n;n=Array.isArray(t)?t[0].geometryConfig.geometry:t.geometryConfig.geometry;var r=t.map(function(t,e){return i(a[n].defaultConfig(),t)});a[n]().config(r)()})}var it,ot,at=t.select(".guides-group"),st=t.select(".tooltips-group"),lt=a.tooltipPanel().config({container:st,fontSize:8})(),ct=a.tooltipPanel().config({container:st,fontSize:8})(),ut=a.tooltipPanel().config({container:st,hasTick:!0})();if(!T){var dt=at.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});j.on("mousemove.angular-guide",function(t,e){var n=a.util.getMousePos(W).angle;dt.attr({x2:-_,transform:"rotate("+n+")"}).style({opacity:.5});var r=(n+180+360-h.orientation)%360;it=s.invert(r);var i=a.util.convertToCartesian(_+12,n+180);lt.text(a.util.round(it)).move([i[0]+b[0],i[1]+b[1]])}).on("mouseout.angular-guide",function(t,e){at.select("line").style({opacity:0})})}var ht=at.select("circle").style({stroke:"grey",fill:"none"});j.on("mousemove.radial-guide",function(t,e){var r=a.util.getMousePos(W).radius;ht.attr({r:r}).style({opacity:.5}),ot=n.invert(a.util.getMousePos(W).radius);var i=a.util.convertToCartesian(r,h.radialAxis.orientation);ct.text(a.util.round(ot)).move([i[0]+b[0],i[1]+b[1]])}).on("mouseout.radial-guide",function(t,e){ht.style({opacity:0}),ut.hide(),lt.hide(),ct.hide()}),t.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(e,n){var i=r.select(this),o=this.style.fill,s="black",l=this.style.opacity||1;if(i.attr({"data-opacity":l}),o&&"none"!==o){i.attr({"data-fill":o}),s=r.hsl(o).darker().toString(),i.style({fill:s,opacity:1});var c={t:a.util.round(e[0]),r:a.util.round(e[1])};T&&(c.t=w[e[0]]);var u="t: "+c.t+", r: "+c.r,d=this.getBoundingClientRect(),h=t.node().getBoundingClientRect(),f=[d.left+d.width/2-H[0]-h.left,d.top+d.height/2-H[1]-h.top];ut.config({color:s}).text(u),ut.move(f)}else o=this.style.stroke||"black",i.attr({"data-stroke":o}),s=r.hsl(o).darker().toString(),i.style({stroke:s,opacity:1})}).on("mousemove.tooltip",function(t,e){if(0!=r.event.which)return!1;r.select(this).attr("data-fill")&&ut.show()}).on("mouseout.tooltip",function(t,e){ut.hide();var n=r.select(this),i=n.attr("data-fill");i?n.style({fill:i,opacity:n.attr("data-opacity")}):n.style({stroke:n.attr("data-stroke"),opacity:n.attr("data-opacity")})})})}(c),this},h.config=function(t){if(!arguments.length)return l;var e=a.util.cloneJson(t);return e.data.forEach(function(t,e){l.data[e]||(l.data[e]={}),i(l.data[e],a.Axis.defaultConfig().data[0]),i(l.data[e],t)}),i(l.layout,a.Axis.defaultConfig().layout),i(l.layout,e.layout),this},h.getLiveConfig=function(){return u},h.getinputConfig=function(){return c},h.radialScale=function(t){return n},h.angularScale=function(t){return s},h.svg=function(){return t},r.rebind(h,d,"on"),h},a.Axis.defaultConfig=function(t,e){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:r.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}},a.util={},a.DATAEXTENT="dataExtent",a.AREA="AreaChart",a.LINE="LinePlot",a.DOT="DotPlot",a.BAR="BarChart",a.util._override=function(t,e){for(var n in t)n in e&&(e[n]=t[n])},a.util._extend=function(t,e){for(var n in t)e[n]=t[n]},a.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)},a.util.dataFromEquation2=function(t,e){var n=e||6;return r.range(0,360+n,n).map(function(e,n){var r=e*Math.PI/180;return[e,t(r)]})},a.util.dataFromEquation=function(t,e,n){var i=e||6,o=[],a=[];r.range(0,360+i,i).forEach(function(e,n){var r=e*Math.PI/180,i=t(r);o.push(e),a.push(i)});var s={t:o,r:a};return n&&(s.name=n),s},a.util.ensureArray=function(t,e){if(void 0===t)return null;var n=[].concat(t);return r.range(e).map(function(t,e){return n[e]||n[0]})},a.util.fillArrays=function(t,e,n){return e.forEach(function(e,r){t[e]=a.util.ensureArray(t[e],n)}),t},a.util.cloneJson=function(t){return JSON.parse(JSON.stringify(t))},a.util.validateKeys=function(t,e){"string"==typeof e&&(e=e.split("."));var n=e.shift();return t[n]&&(!e.length||objHasKeys(t[n],e))},a.util.sumArrays=function(t,e){return r.zip(t,e).map(function(t,e){return r.sum(t)})},a.util.arrayLast=function(t){return t[t.length-1]},a.util.arrayEqual=function(t,e){for(var n=Math.max(t.length,e.length,1);n-- >=0&&t[n]===e[n];);return-2===n},a.util.flattenArray=function(t){for(var e=[];!a.util.arrayEqual(e,t);)e=t,t=[].concat.apply([],t);return t},a.util.deduplicate=function(t){return t.filter(function(t,e,n){return n.indexOf(t)==e})},a.util.convertToCartesian=function(t,e){var n=e*Math.PI/180;return[t*Math.cos(n),t*Math.sin(n)]},a.util.round=function(t,e){var n=e||2,r=Math.pow(10,n);return Math.round(t*r)/r},a.util.getMousePos=function(t){var e=r.mouse(t.node()),n=e[0],i=e[1],o={};return o.x=n,o.y=i,o.pos=e,o.angle=180*(Math.atan2(i,n)+Math.PI)/Math.PI,o.radius=Math.sqrt(n*n+i*i),o},a.util.duplicatesCount=function(t){for(var e,n={},r={},i=0,o=t.length;i<o;i++)(e=t[i])in n?(n[e]++,r[e]=n[e]):n[e]=1;return r},a.util.duplicates=function(t){return Object.keys(a.util.duplicatesCount(t))},a.util.translator=function(t,e,n,r){if(r){var i=n.slice();n=e,e=i}var o=e.reduce(function(t,e){if(void 0!==t)return t[e]},t);void 0!==o&&(e.reduce(function(t,n,r){if(void 0!==t)return r===e.length-1&&delete t[n],t[n]},t),n.reduce(function(t,e,r){return void 0===t[e]&&(t[e]={}),r===n.length-1&&(t[e]=o),t[e]},t))},a.PolyChart=function(){var t=[a.PolyChart.defaultConfig()],e=r.dispatch("hover"),n={solid:"none",dash:[5,2],dot:[2,5]};function o(){var e=t[0].geometryConfig,i=e.container;"string"==typeof i&&(i=r.select(i)),i.datum(t).each(function(t,i){var o=!!t[0].data.yStack,a=t.map(function(t,e){return o?r.zip(t.data.t[0],t.data.r[0],t.data.yStack[0]):r.zip(t.data.t[0],t.data.r[0])}),s=e.angularScale,l=e.radialScale.domain()[0],c={bar:function(n,i,o){var a=t[o].data,l=e.radialScale(n[1])-e.radialScale(0),c=e.radialScale(n[2]||0),u=a.barWidth;r.select(this).attr({class:"mark bar",d:"M"+[[l+c,-u/2],[l+c,u/2],[c,u/2],[c,-u/2]].join("L")+"Z",transform:function(t,n){return"rotate("+(e.orientation+s(t[0]))+")"}})}};c.dot=function(n,i,o){var a=n[2]?[n[0],n[1]+n[2]]:n,s=r.svg.symbol().size(t[o].data.dotSize).type(t[o].data.dotType)(n,i);r.select(this).attr({class:"mark dot",d:s,transform:function(t,n){var r,i,o,s,l,c,u=(s=a,l=e.radialScale(s[1]),c=(e.angularScale(s[0])+e.orientation)*Math.PI/180,i=(r={r:l,t:c}).r*Math.cos(r.t),o=r.r*Math.sin(r.t),{x:i,y:o});return"translate("+[u.x,u.y]+")"}})};var u=r.svg.line.radial().interpolate(t[0].data.lineInterpolation).radius(function(t){return e.radialScale(t[1])}).angle(function(t){return e.angularScale(t[0])*Math.PI/180});c.line=function(n,i,o){var s=n[2]?a[o].map(function(t,e){return[t[0],t[1]+t[2]]}):a[o];if(r.select(this).each(c.dot).style({opacity:function(e,n){return+t[o].data.dotVisible},fill:p.stroke(n,i,o)}).attr({class:"mark dot"}),!(i>0)){var l=r.select(this.parentNode).selectAll("path.line").data([0]);l.enter().insert("path"),l.attr({class:"line",d:u(s),transform:function(t,n){return"rotate("+(e.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(t,e){return p.fill(n,i,o)},"fill-opacity":0,stroke:function(t,e){return p.stroke(n,i,o)},"stroke-width":function(t,e){return p["stroke-width"](n,i,o)},"stroke-dasharray":function(t,e){return p["stroke-dasharray"](n,i,o)},opacity:function(t,e){return p.opacity(n,i,o)},display:function(t,e){return p.display(n,i,o)}})}};var d=e.angularScale.range(),h=Math.abs(d[1]-d[0])/a[0].length*Math.PI/180,f=r.svg.arc().startAngle(function(t){return-h/2}).endAngle(function(t){return h/2}).innerRadius(function(t){return e.radialScale(l+(t[2]||0))}).outerRadius(function(t){return e.radialScale(l+(t[2]||0))+e.radialScale(t[1])});c.arc=function(t,n,i){r.select(this).attr({class:"mark arc",d:f,transform:function(t,n){return"rotate("+(e.orientation+s(t[0])+90)+")"}})};var p={fill:function(e,n,r){return t[r].data.color},stroke:function(e,n,r){return t[r].data.strokeColor},"stroke-width":function(e,n,r){return t[r].data.strokeSize+"px"},"stroke-dasharray":function(e,r,i){return n[t[i].data.strokeDash]},opacity:function(e,n,r){return t[r].data.opacity},display:function(e,n,r){return void 0===t[r].data.visible||t[r].data.visible?"block":"none"}},g=r.select(this).selectAll("g.layer").data(a);g.enter().append("g").attr({class:"layer"});var m=g.selectAll("path.mark").data(function(t,e){return t});m.enter().append("path").attr({class:"mark"}),m.style(p).each(c[e.geometryType]),m.exit().remove(),g.exit().remove()})}return o.config=function(e){return arguments.length?(e.forEach(function(e,n){t[n]||(t[n]={}),i(t[n],a.PolyChart.defaultConfig()),i(t[n],e)}),this):t},o.getColorScale=function(){},r.rebind(o,e,"on"),o},a.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:r.scale.category20()}}},a.BarChart=function(){return a.PolyChart()},a.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}},a.AreaChart=function(){return a.PolyChart()},a.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}},a.DotPlot=function(){return a.PolyChart()},a.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}},a.LinePlot=function(){return a.PolyChart()},a.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}},a.Legend=function(){var t=a.Legend.defaultConfig(),e=r.dispatch("hover");function n(){var e=t.legendConfig,o=t.data.map(function(t,n){return[].concat(t).map(function(t,r){var o=i({},e.elements[n]);return o.name=t,o.color=[].concat(e.elements[n].color)[r],o})}),a=r.merge(o);a=a.filter(function(t,n){return e.elements[n]&&(e.elements[n].visibleInLegend||void 0===e.elements[n].visibleInLegend)}),e.reverseOrder&&(a=a.reverse());var s=e.container;("string"==typeof s||s.nodeName)&&(s=r.select(s));var l=a.map(function(t,e){return t.color}),c=e.fontSize,u=null==e.isContinuous?"number"==typeof a[0]:e.isContinuous,d=u?e.height:c*a.length,h=s.classed("legend-group",!0).selectAll("svg").data([0]),f=h.enter().append("svg").attr({width:300,height:d+c,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});f.append("g").classed("legend-axis",!0),f.append("g").classed("legend-marks",!0);var p=r.range(a.length),g=r.scale[u?"linear":"ordinal"]().domain(p).range(l),m=r.scale[u?"linear":"ordinal"]().domain(p)[u?"range":"rangePoints"]([0,d]);if(u){var v=h.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(l);v.enter().append("stop"),v.attr({offset:function(t,e){return e/(l.length-1)*100+"%"}}).style({"stop-color":function(t,e){return t}}),h.append("rect").classed("legend-mark",!0).attr({height:e.height,width:e.colorBandWidth,fill:"url(#grad1)"})}else{var y=h.select(".legend-marks").selectAll("path.legend-mark").data(a);y.enter().append("path").classed("legend-mark",!0),y.attr({transform:function(t,e){return"translate("+[c/2,m(e)+c/2]+")"},d:function(t,e){var n,i,o,a=t.symbol;return o=3*(i=c),"line"===(n=a)?"M"+[[-i/2,-i/12],[i/2,-i/12],[i/2,i/12],[-i/2,i/12]]+"Z":-1!=r.svg.symbolTypes.indexOf(n)?r.svg.symbol().type(n).size(o)():r.svg.symbol().type("square").size(o)()},fill:function(t,e){return g(e)}}),y.exit().remove()}var _=r.svg.axis().scale(m).orient("right"),x=h.select("g.legend-axis").attr({transform:"translate("+[u?e.colorBandWidth:c,c/2]+")"}).call(_);return x.selectAll(".domain").style({fill:"none",stroke:"none"}),x.selectAll("line").style({fill:"none",stroke:u?e.textColor:"none"}),x.selectAll("text").style({fill:e.textColor,"font-size":e.fontSize}).text(function(t,e){return a[e].name}),n}return n.config=function(e){return arguments.length?(i(t,e),this):t},r.rebind(n,e,"on"),n},a.Legend.defaultConfig=function(t,e){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}},a.tooltipPanel=function(){var t,e,n,o={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},s="tooltip-"+a.tooltipPanel.uid++,l=10,c=function(){var r=(t=o.container.selectAll("g."+s).data([0])).enter().append("g").classed(s,!0).style({"pointer-events":"none",display:"none"});return n=r.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),e=r.append("text").attr({dx:o.padding+l,dy:.3*+o.fontSize}),c};return c.text=function(i){var a=r.hsl(o.color).l,s=a>=.5?"#aaa":"white",u=a>=.5?"black":"white",d=i||"";e.style({fill:u,"font-size":o.fontSize+"px"}).text(d);var h=o.padding,f=e.node().getBBox(),p={fill:o.color,stroke:s,"stroke-width":"2px"},g=f.width+2*h+l,m=f.height+2*h;return n.attr({d:"M"+[[l,-m/2],[l,-m/4],[o.hasTick?0:l,0],[l,m/4],[l,m/2],[g,m/2],[g,-m/2]].join("L")+"Z"}).style(p),t.attr({transform:"translate("+[l,-m/2+2*h]+")"}),t.style({display:"block"}),c},c.move=function(e){if(t)return t.attr({transform:"translate("+[e[0],e[1]]+")"}).style({display:"block"}),c},c.hide=function(){if(t)return t.style({display:"none"}),c},c.show=function(){if(t)return t.style({display:"block"}),c},c.config=function(t){return i(o,t),c},c},a.tooltipPanel.uid=1,a.adapter={},a.adapter.plotly=function(){var t={convert:function(t,e){var n={};if(t.data&&(n.data=t.data.map(function(t,n){var r=i({},t);return[[r,["marker","color"],["color"]],[r,["marker","opacity"],["opacity"]],[r,["marker","line","color"],["strokeColor"]],[r,["marker","line","dash"],["strokeDash"]],[r,["marker","line","width"],["strokeSize"]],[r,["marker","symbol"],["dotType"]],[r,["marker","size"],["dotSize"]],[r,["marker","barWidth"],["barWidth"]],[r,["line","interpolation"],["lineInterpolation"]],[r,["showlegend"],["visibleInLegend"]]].forEach(function(t,n){a.util.translator.apply(null,t.concat(e))}),e||delete r.marker,e&&delete r.groupId,e?("LinePlot"===r.geometry?(r.type="scatter",!0===r.dotVisible?(delete r.dotVisible,r.mode="lines+markers"):r.mode="lines"):"DotPlot"===r.geometry?(r.type="scatter",r.mode="markers"):"AreaChart"===r.geometry?r.type="area":"BarChart"===r.geometry&&(r.type="bar"),delete r.geometry):("scatter"===r.type?"lines"===r.mode?r.geometry="LinePlot":"markers"===r.mode?r.geometry="DotPlot":"lines+markers"===r.mode&&(r.geometry="LinePlot",r.dotVisible=!0):"area"===r.type?r.geometry="AreaChart":"bar"===r.type&&(r.geometry="BarChart"),delete r.mode,delete r.type),r}),!e&&t.layout&&"stack"===t.layout.barmode)){var o=a.util.duplicates(n.data.map(function(t,e){return t.geometry}));n.data.forEach(function(t,e){var r=o.indexOf(t.geometry);-1!=r&&(n.data[e].groupId=r)})}if(t.layout){var s=i({},t.layout);if([[s,["plot_bgcolor"],["backgroundColor"]],[s,["showlegend"],["showLegend"]],[s,["radialaxis"],["radialAxis"]],[s,["angularaxis"],["angularAxis"]],[s.angularaxis,["showline"],["gridLinesVisible"]],[s.angularaxis,["showticklabels"],["labelsVisible"]],[s.angularaxis,["nticks"],["ticksCount"]],[s.angularaxis,["tickorientation"],["tickOrientation"]],[s.angularaxis,["ticksuffix"],["ticksSuffix"]],[s.angularaxis,["range"],["domain"]],[s.angularaxis,["endpadding"],["endPadding"]],[s.radialaxis,["showline"],["gridLinesVisible"]],[s.radialaxis,["tickorientation"],["tickOrientation"]],[s.radialaxis,["ticksuffix"],["ticksSuffix"]],[s.radialaxis,["range"],["domain"]],[s.angularAxis,["showline"],["gridLinesVisible"]],[s.angularAxis,["showticklabels"],["labelsVisible"]],[s.angularAxis,["nticks"],["ticksCount"]],[s.angularAxis,["tickorientation"],["tickOrientation"]],[s.angularAxis,["ticksuffix"],["ticksSuffix"]],[s.angularAxis,["range"],["domain"]],[s.angularAxis,["endpadding"],["endPadding"]],[s.radialAxis,["showline"],["gridLinesVisible"]],[s.radialAxis,["tickorientation"],["tickOrientation"]],[s.radialAxis,["ticksuffix"],["ticksSuffix"]],[s.radialAxis,["range"],["domain"]],[s.font,["outlinecolor"],["outlineColor"]],[s.legend,["traceorder"],["reverseOrder"]],[s,["labeloffset"],["labelOffset"]],[s,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(t,n){a.util.translator.apply(null,t.concat(e))}),e?(void 0!==s.tickLength&&(s.angularaxis.ticklen=s.tickLength,delete s.tickLength),s.tickColor&&(s.angularaxis.tickcolor=s.tickColor,delete s.tickColor)):(s.angularAxis&&void 0!==s.angularAxis.ticklen&&(s.tickLength=s.angularAxis.ticklen),s.angularAxis&&void 0!==s.angularAxis.tickcolor&&(s.tickColor=s.angularAxis.tickcolor)),s.legend&&"boolean"!=typeof s.legend.reverseOrder&&(s.legend.reverseOrder="normal"!=s.legend.reverseOrder),s.legend&&"boolean"==typeof s.legend.traceorder&&(s.legend.traceorder=s.legend.traceorder?"reversed":"normal",delete s.legend.reverseOrder),s.margin&&void 0!==s.margin.t){var l=["t","r","b","l","pad"],c=["top","right","bottom","left","pad"],u={};r.entries(s.margin).forEach(function(t,e){u[c[l.indexOf(t.key)]]=t.value}),s.margin=u}e&&(delete s.needsEndSpacing,delete s.minorTickColor,delete s.minorTicks,delete s.angularaxis.ticksCount,delete s.angularaxis.ticksCount,delete s.angularaxis.ticksStep,delete s.angularaxis.rewriteTicks,delete s.angularaxis.nticks,delete s.radialaxis.ticksCount,delete s.radialaxis.ticksCount,delete s.radialaxis.ticksStep,delete s.radialaxis.rewriteTicks,delete s.radialaxis.nticks),n.layout=s}return n}};return t}},{"../../../constants/alignment":132,"../../../lib":151,d3:1}],231:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../../lib"),o=t("../../../components/color"),a=t("./micropolar"),s=t("./undo_manager"),l=i.extendDeepAll,c=e.exports={};c.framework=function(t){var e,n,i,o,u,d=new s;function h(n,s){return s&&(u=s),r.select(r.select(u).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),e=e?l(e,n):n,i||(i=a.Axis()),o=a.adapter.plotly().convert(e),i.config(o).render(u),t.data=e.data,t.layout=e.layout,c.fillLayout(t),e}return h.isPolar=!0,h.svg=function(){return i.svg()},h.getConfig=function(){return e},h.getLiveConfig=function(){return a.adapter.plotly().convert(i.getLiveConfig(),!0)},h.getLiveScales=function(){return{t:i.angularScale(),r:i.radialScale()}},h.setUndoPoint=function(){var t,r,i=this,o=a.util.cloneJson(e);t=o,r=n,d.add({undo:function(){r&&i(r)},redo:function(){i(t)}}),n=a.util.cloneJson(o)},h.undo=function(){d.undo()},h.redo=function(){d.redo()},h},c.fillLayout=function(t){var e=r.select(t).selectAll(".plot-container"),n=e.selectAll(".svg-container"),i=t.framework&&t.framework.svg&&t.framework.svg(),a={width:800,height:600,paper_bgcolor:o.background,_container:e,_paperdiv:n,_paper:i};t._fullLayout=l(a,t.layout)}},{"../../../components/color":34,"../../../lib":151,"./micropolar":230,"./undo_manager":232,d3:1}],232:[function(t,e,n){"use strict";e.exports=function(){var t,e=[],n=-1,r=!1;function i(t,e){return t?(r=!0,t[e](),r=!1,this):this}return{add:function(t){return r?this:(e.splice(n+1,e.length-n),e.push(t),n=e.length-1,this)},setCallback:function(e){t=e},undo:function(){var r=e[n];return r?(i(r,"undo"),n-=1,t&&t(r.undo),this):this},redo:function(){var r=e[n+1];return r?(i(r,"redo"),n+=1,t&&t(r.redo),this):this},clear:function(){e=[],n=-1},hasUndo:function(){return-1!==n},hasRedo:function(){return n<e.length-1},getCommands:function(){return e},getPreviousCommand:function(){return e[n-1]},getIndex:function(){return n}}}},{}],233:[function(t,e,n){"use strict";var r=t("./lib/loggers"),i=t("./lib/noop"),o=t("./lib/push_unique"),a=t("./lib/extend"),s=a.extendFlat,l=a.extendDeepAll,c=t("./plots/attributes"),u=t("./plots/layout_attributes");function d(t){if(t.layoutAttributes){var e=t.layoutAttributes._arrayAttrRegexps;if(e)for(var r=0;r<e.length;r++)o(n.layoutArrayRegexes,e[r])}}function h(t,e){var r=n.componentsRegistry[t].schema;if(r&&r.traces){var i=r.traces[e];i&&l(n.modules[e]._module.attributes,i)}}function f(t,e){var r=n.componentsRegistry[t].schema;if(r&&r.transforms){var i=r.transforms[e];i&&l(n.transformsRegistry[e].attributes,i)}}function p(t,e){var r=n.componentsRegistry[t].schema;if(r&&r.subplots){var i=n.subplotsRegistry[e],o=i.layoutAttributes,a="subplot"===i.attr?i.name:i.attr;Array.isArray(a)&&(a=a[0]);var s=r.subplots[a];o&&s&&l(o,s)}}function g(t){return"object"==typeof t&&(t=t.type),t}n.modules={},n.allCategories={},n.allTypes=[],n.subplotsRegistry={},n.transformsRegistry={},n.componentsRegistry={},n.layoutArrayContainers=[],n.layoutArrayRegexes=[],n.traceLayoutAttributes={},n.localeRegistry={},n.register=function(t,e,i,o){if(n.modules[e])r.log("Type "+e+" already registered");else{for(var a={},l=0;l<i.length;l++)a[i[l]]=!0,n.allCategories[i[l]]=!0;for(var c in n.modules[e]={_module:t,categories:a},o&&Object.keys(o).length&&(n.modules[e].meta=o),n.allTypes.push(e),n.componentsRegistry)h(c,e);t.layoutAttributes&&s(n.traceLayoutAttributes,t.layoutAttributes)}},n.registerSubplot=function(t){var e=t.name;if(n.subplotsRegistry[e])r.log("Plot type "+e+" already registered.");else for(var i in d(t),n.subplotsRegistry[e]=t,n.componentsRegistry)p(i,t.name)},n.registerComponent=function(t){var e=t.name;for(var r in n.componentsRegistry[e]=t,t.layoutAttributes&&(t.layoutAttributes._isLinkedToArray&&o(n.layoutArrayContainers,e),d(t)),n.modules)h(e,r);for(var i in n.subplotsRegistry)p(e,i);for(var a in n.transformsRegistry)f(e,a);t.schema&&t.schema.layout&&l(u,t.schema.layout)},n.registerTransform=function(t){for(var e in n.transformsRegistry[t.name]=t,n.componentsRegistry)f(e,t.name)},n.getModule=function(t){var e=n.modules[g(t)];return!!e&&e._module},n.traceIs=function(t,e){if("various"===(t=g(t)))return!1;var i=n.modules[t];return i||(t&&"area"!==t&&r.log("Unrecognized trace type "+t+"."),i=n.modules[c.type.dflt]),!!i.categories[e]},n.getTransformIndices=function(t,e){for(var n=[],r=t.transforms||[],i=0;i<r.length;i++)r[i].type===e&&n.push(i);return n},n.hasTransform=function(t,e){for(var n=t.transforms||[],r=0;r<n.length;r++)if(n[r].type===e)return!0;return!1},n.getComponentMethod=function(t,e){var r=n.componentsRegistry[t];return r&&r[e]||i},n.registerLocale=function(t){var e=t.name,r=e.split("-")[0],i=t.dictionary,o=t.format,a=i&&Object.keys(i).length,s=o&&Object.keys(o).length,l=n.localeRegistry,c=l[e];if(c||(l[e]=c={}),r!==e){var u=l[r];u||(l[r]=u={}),a&&u.dictionary===c.dictionary&&(u.dictionary=i),s&&u.format===c.format&&(u.format=o)}a&&(c.dictionary=i),s&&(c.format=o)}},{"./lib/extend":145,"./lib/loggers":156,"./lib/noop":160,"./lib/push_unique":164,"./plots/attributes":192,"./plots/layout_attributes":224}],234:[function(t,e,n){"use strict";var r=t("../lib"),i=r.extendFlat,o=r.extendDeep;function a(t){var e;switch(t){case"themes__thumb":e={autosize:!0,width:150,height:150,title:"",showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":e={title:"",hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:e={}}return e}e.exports=function(t,e){var n;t.framework&&t.framework.isPolar&&(t=t.framework.getConfig());var r,s=t.data,l=t.layout,c=o([],s),u=o({},l,a(e.tileClass)),d=t._context||{};if(e.width&&(u.width=e.width),e.height&&(u.height=e.height),"thumbnail"===e.tileClass||"themes__thumb"===e.tileClass){u.annotations=[];var h=Object.keys(u);for(n=0;n<h.length;n++)r=h[n],["xaxis","yaxis","zaxis"].indexOf(r.slice(0,5))>-1&&(u[h[n]].title="");for(n=0;n<c.length;n++){var f=c[n];f.showscale=!1,f.marker&&(f.marker.showscale=!1),"pie"===f.type&&(f.textposition="none")}}if(Array.isArray(e.annotations))for(n=0;n<e.annotations.length;n++)u.annotations.push(e.annotations[n]);var p=Object.keys(u).filter(function(t){return t.match(/^scene\d*$/)});if(p.length){var g={};for("thumbnail"===e.tileClass&&(g={title:"",showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),n=0;n<p.length;n++){var m=u[p[n]];m.xaxis||(m.xaxis={}),m.yaxis||(m.yaxis={}),m.zaxis||(m.zaxis={}),i(m.xaxis,g),i(m.yaxis,g),i(m.zaxis,g),m._scene=null}}var v=document.createElement("div");e.tileClass&&(v.className=e.tileClass);var y={gd:v,td:v,layout:u,data:c,config:{staticPlot:void 0===e.staticPlot||e.staticPlot,plotGlPixelRatio:void 0===e.plotGlPixelRatio?2:e.plotGlPixelRatio,displaylogo:e.displaylogo||!1,showLink:e.showLink||!1,showTips:e.showTips||!1,mapboxAccessToken:d.mapboxAccessToken}};return"transparent"!==e.setBackground&&(y.config.setBackground=e.setBackground||"opaque"),y.gd.defaultLayout=a(e.tileClass),y}},{"../lib":151}],235:[function(t,e,n){"use strict";var r=t("../plot_api/to_image"),i=t("../lib"),o=t("./filesaver");e.exports=function(t,e){return(e=e||{}).format=e.format||"png",new Promise(function(n,a){t._snapshotInProgress&&a(new Error("Snapshotting already in progress.")),i.isIE()&&"svg"!==e.format&&a(new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.")),t._snapshotInProgress=!0;var s=r(t,e),l=e.filename||t.fn||"newplot";l+="."+e.format,s.then(function(e){return t._snapshotInProgress=!1,o(e,l)}).then(function(t){n(t)}).catch(function(e){t._snapshotInProgress=!1,a(e)})})}},{"../lib":151,"../plot_api/to_image":187,"./filesaver":236}],236:[function(t,e,n){"use strict";e.exports=function(t,e){var n=document.createElement("a"),r="download"in n,i=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);return new Promise(function(o,a){if("undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent)&&a(new Error("IE < 10 unsupported")),i&&(document.location.href="data:application/octet-stream"+t.slice(t.search(/[,;]/)),o(e)),e||(e="download"),r&&(n.href=t,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),o(e)),"undefined"!=typeof navigator&&navigator.msSaveBlob){var s=t.split(/^data:image\/svg\+xml,/)[1],l=decodeURIComponent(s);navigator.msSaveBlob(new Blob([l]),e),o(e)}a(new Error("download error"))})}},{}],237:[function(t,e,n){"use strict";n.getDelay=function(t){return t._has&&(t._has("gl3d")||t._has("gl2d"))?500:0},n.getRedrawFunc=function(t){var e=t._fullLayout||{};if(!(!(e._has&&e._has("polar"))&&t.data&&t.data[0]&&t.data[0].r))return function(){(t.calcdata||[]).forEach(function(t){t[0]&&t[0].t&&t[0].t.cb&&t[0].t.cb()})}}},{}],238:[function(t,e,n){"use strict";var r=t("./helpers"),i={getDelay:r.getDelay,getRedrawFunc:r.getRedrawFunc,clone:t("./cloneplot"),toSVG:t("./tosvg"),svgToImg:t("./svgtoimg"),toImage:t("./toimage"),downloadImage:t("./download")};e.exports=i},{"./cloneplot":234,"./download":235,"./helpers":237,"./svgtoimg":239,"./toimage":240,"./tosvg":241}],239:[function(t,e,n){"use strict";var r=t("../lib"),i=t("events").EventEmitter;e.exports=function(t){var e=t.emitter||new i,n=new Promise(function(i,o){var a=window.Image,s=t.svg,l=t.format||"png";if(r.isIE()&&"svg"!==l){var c=new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.");return o(c),t.promise?n:e.emit("error",c)}var u=t.canvas,d=t.scale||1,h=t.width||300,f=t.height||150,p=d*h,g=d*f,m=u.getContext("2d"),v=new a,y="data:image/svg+xml,"+encodeURIComponent(s);u.width=p,u.height=g,v.onload=function(){var n;switch("svg"!==l&&m.drawImage(v,0,0,p,g),l){case"jpeg":n=u.toDataURL("image/jpeg");break;case"png":n=u.toDataURL("image/png");break;case"webp":n=u.toDataURL("image/webp");break;case"svg":n=y;break;default:var r="Image format is not jpeg, png, svg or webp.";if(o(new Error(r)),!t.promise)return e.emit("error",r)}i(n),t.promise||e.emit("success",n)},v.onerror=function(n){if(o(n),!t.promise)return e.emit("error",n)},v.src=y});return t.promise?n:e}},{"../lib":151,events:3}],240:[function(t,e,n){"use strict";var r=t("events").EventEmitter,i=t("../plotly"),o=t("../lib"),a=t("./helpers"),s=t("./cloneplot"),l=t("./tosvg"),c=t("./svgtoimg");e.exports=function(t,e){var n=new r,u=s(t,{format:"png"}),d=u.gd;d.style.position="absolute",d.style.left="-5000px",document.body.appendChild(d);var h=a.getRedrawFunc(d);return i.plot(d,u.data,u.layout,u.config).then(h).then(function(){var t=a.getDelay(d._fullLayout);setTimeout(function(){var t=l(d),r=document.createElement("canvas");r.id=o.randstr(),(n=c({format:e.format,width:d._fullLayout.width,height:d._fullLayout.height,canvas:r,emitter:n,svg:t})).clean=function(){d&&document.body.removeChild(d)}},t)}).catch(function(t){n.emit("error",t)}),n}},{"../lib":151,"../plotly":189,"./cloneplot":234,"./helpers":237,"./svgtoimg":239,"./tosvg":241,events:3}],241:[function(t,e,n){"use strict";var r=t("d3"),i=t("../lib"),o=t("../components/drawing"),a=t("../components/color"),s=t("../constants/xmlns_namespaces"),l=/"/g,c="TOBESTRIPPED",u=new RegExp('("'+c+")|("+c+'")',"g");e.exports=function(t,e,n){var d,h=t._fullLayout,f=h._paper,p=h._toppaper,g=h.width,m=h.height;f.insert("rect",":first-child").call(o.setRect,0,0,g,m).call(a.fill,h.paper_bgcolor);var v=h._basePlotModules||[];for(d=0;d<v.length;d++){var y=v[d];y.toSVG&&y.toSVG(t)}if(p){var _=p.node().childNodes,x=Array.prototype.slice.call(_);for(d=0;d<x.length;d++){var b=x[d];b.childNodes.length&&f.node().appendChild(b)}}h._draggers&&h._draggers.remove(),f.node().style.background="",f.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var t=r.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){t.style({visibility:null,display:null});var e=this.style.fontFamily;e&&-1!==e.indexOf('"')&&t.style("font-family",e.replace(l,c))}else t.remove()}),f.selectAll(".point,.scatterpts").each(function(){var t=r.select(this),e=this.style.fill;e&&-1!==e.indexOf("url(")&&t.style("fill",e.replace(l,c))}),"pdf"!==e&&"eps"!==e||f.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),f.node().setAttributeNS(s.xmlns,"xmlns",s.svg),f.node().setAttributeNS(s.xmlns,"xmlns:xlink",s.xlink),"svg"===e&&n&&(f.attr("width",n*g),f.attr("height",n*m),f.attr("viewBox","0 0 "+g+" "+m));var w,k,T,M=(new window.XMLSerializer).serializeToString(f.node());return w=M,k=r.select("body").append("div").style({display:"none"}).html(""),T=w.replace(/(&[^;]*;)/gi,function(t){return"&lt;"===t?"&#60;":"&rt;"===t?"&#62;":-1!==t.indexOf("<")||-1!==t.indexOf(">")?"":k.html(t).text()}),k.remove(),M=(M=(M=T).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(u,"'"),i.isIE()&&(M=(M=(M=M.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),M}},{"../components/color":34,"../components/drawing":59,"../constants/xmlns_namespaces":136,"../lib":151,d3:1}],242:[function(t,e,n){"use strict";var r=t("../../lib").mergeArray;e.exports=function(t,e){for(var n=0;n<t.length;n++)t[n].i=n;r(e.text,t,"tx"),r(e.hovertext,t,"htx");var i=e.marker;if(i){r(i.opacity,t,"mo"),r(i.color,t,"mc");var o=i.line;o&&(r(o.color,t,"mlc"),r(o.width,t,"mlw"))}}},{"../../lib":151}],243:[function(t,e,n){"use strict";var r=t("../scatter/attributes"),i=t("../../components/colorscale/color_attributes"),o=t("../../components/errorbars/attributes"),a=t("../../components/colorbar/attributes"),s=t("../../plots/font_attributes"),l=t("../../lib/extend").extendFlat,c=s({editType:"calc",arrayOk:!0,description:""}),u=r.marker,d=l({line:l({width:l({},u.line.width,{dflt:0}),editType:"calc"},i("marker.line")),editType:"calc"},i("marker"),{showscale:u.showscale,colorbar:a,opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,role:"style",editType:"style",description:"Sets the opacity of the bars."}});e.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,text:r.text,hovertext:r.hovertext,textposition:{valType:"enumerated",role:"info",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc",description:["Specifies the location of the `text`.","*inside* positions `text` inside, next to the bar end","(rotated and scaled if needed).","*outside* positions `text` outside, next to the bar end","(scaled if needed).","*auto* positions `text` inside or outside","so that `text` size is maximized."].join(" ")},textfont:l({},c,{description:"Sets the font used for `text`."}),insidetextfont:l({},c,{description:"Sets the font used for `text` lying inside the bar."}),outsidetextfont:l({},c,{description:"Sets the font used for `text` lying outside the bar."}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],role:"info",dflt:"both",editType:"calc",description:["Constrain the size of text inside or outside a bar to be no","larger than the bar itself."].join(" ")},orientation:{valType:"enumerated",role:"info",values:["v","h"],editType:"calc+clearAxisTypes",description:["Sets the orientation of the bars.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal)."].join(" ")},base:{valType:"any",dflt:null,arrayOk:!0,role:"info",editType:"calc",description:["Sets where the bar base is drawn (in position axis units).","In *stack* or *relative* barmode,","traces that set *base* will be excluded","and drawn in *overlay* mode instead."].join(" ")},offset:{valType:"number",dflt:null,arrayOk:!0,role:"info",editType:"calc",description:["Shifts the position where the bar is drawn","(in position axis units).","In *group* barmode,","traces that set *offset* will be excluded","and drawn in *overlay* mode instead."].join(" ")},width:{valType:"number",dflt:null,min:0,arrayOk:!0,role:"info",editType:"calc",description:["Sets the bar width (in position axis units)."].join(" ")},marker:d,selected:{marker:{opacity:r.selected.marker.opacity,color:r.selected.marker.color,editType:"style"},textfont:r.selected.textfont,editType:"style"},unselected:{marker:{opacity:r.unselected.marker.opacity,color:r.unselected.marker.color,editType:"style"},textfont:r.unselected.textfont,editType:"style"},r:r.r,t:r.t,error_y:o,error_x:o,_deprecated:{bardir:{valType:"enumerated",role:"info",editType:"calc",values:["v","h"],description:"Renamed to `orientation`."}}}},{"../../components/colorbar/attributes":35,"../../components/colorscale/color_attributes":42,"../../components/errorbars/attributes":61,"../../lib/extend":145,"../../plots/font_attributes":220,"../scatter/attributes":259}],244:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../plots/cartesian/axes"),o=t("../../components/colorscale/has_colorscale"),a=t("../../components/colorscale/calc"),s=t("./arrays_to_calcdata"),l=t("../scatter/calc_selection");e.exports=function(t,e){var n,c,u,d,h,f=i.getFromId(t,e.xaxis||"x"),p=i.getFromId(t,e.yaxis||"y");"h"===(e.orientation||(e.x&&!e.y?"h":"v"))?(n=f,u=f.makeCalcdata(e,"x"),c=p.makeCalcdata(e,"y"),h=e.xcalendar):(n=p,u=p.makeCalcdata(e,"y"),c=f.makeCalcdata(e,"x"),h=e.ycalendar);var g=Math.min(c.length,u.length),m=new Array(g);for(d=0;d<g;d++)m[d]={p:c[d],s:u[d]},e.ids&&(m[d].id=String(e.ids[d]));var v,y=e.base;if(Array.isArray(y)){for(d=0;d<Math.min(y.length,m.length);d++)v=n.d2c(y[d],0,h),r(v)?(m[d].b=+v,m[d].hasB=1):m[d].b=0;for(;d<m.length;d++)m[d].b=0}else{v=n.d2c(y,0,h);var _=r(v);for(v=_?v:0,d=0;d<m.length;d++)m[d].b=v,_&&(m[d].hasB=1)}return o(e,"marker")&&a(e,e.marker.color,"marker","c"),o(e,"marker.line")&&a(e,e.marker.line.color,"marker.line","c"),s(m,e),l(m,e),m}},{"../../components/colorscale/calc":41,"../../components/colorscale/has_colorscale":48,"../../plots/cartesian/axes":194,"../scatter/calc_selection":261,"./arrays_to_calcdata":242,"fast-isnumeric":4}],245:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../components/color"),o=t("../scatter/xy_defaults"),a=t("../bar/style_defaults"),s=t("../../components/errorbars/defaults"),l=t("./attributes");e.exports=function(t,e,n,c){function u(n,i){return r.coerce(t,e,l,n,i)}var d=r.coerceFont;if(o(t,e,c,u)){u("orientation",e.x&&!e.y?"h":"v"),u("base"),u("offset"),u("width"),u("text"),u("hovertext");var h=u("textposition"),f=Array.isArray(h)||"auto"===h,p=f||"inside"===h,g=f||"outside"===h;if(p||g){var m=d(u,"textfont",c.font);p&&d(u,"insidetextfont",m),g&&d(u,"outsidetextfont",m),u("constraintext"),u("selected.textfont.color"),u("unselected.textfont.color")}a(t,e,u,n,c),s(t,e,i.defaultLine,{axis:"y"}),s(t,e,i.defaultLine,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(e,u)}else e.visible=!1}},{"../../components/color":34,"../../components/errorbars/defaults":64,"../../lib":151,"../bar/style_defaults":255,"../scatter/xy_defaults":283,"./attributes":243}],246:[function(t,e,n){"use strict";var r=t("../../components/fx"),i=t("../../components/errorbars"),o=t("../../components/color"),a=t("../scatter/fill_hover_text");e.exports=function(t,e,n,s){var l,c,u,d,h,f,p=t.cd,g=p[0].trace,m=p[0].t,v="closest"===s;function y(t){return t[u]-t.w/2}function _(t){return t[u]+t.w/2}var x=v?y:function(t){return Math.min(y(t),t.p-m.bardelta/2)},b=v?_:function(t){return Math.max(_(t),t.p+m.bardelta/2)};function w(t){return r.inbox(x(t)-l,b(t)-l)}function k(t){return r.inbox(t.b-c,t[d]-c)+(t[d]-c)/(t[d]-t.b)}"h"===g.orientation?(l=n,c=e,u="y",d="x",h=k,f=w):(l=e,c=n,u="x",d="y",f=k,h=w);var T=t[u+"a"],M=t[d+"a"],A=r.getDistanceFunction(s,h,f);if(r.getClosest(p,A,t),!1!==t.index){v||(x=function(t){return Math.min(y(t),t.p-m.bargroupwidth/2)},b=function(t){return Math.max(_(t),t.p+m.bargroupwidth/2)});var L=p[t.index],S=L.mcc||g.marker.color,C=L.mlcc||g.marker.line.color,P=L.mlw||g.marker.line.width;o.opacity(S)?t.color=S:o.opacity(C)&&P&&(t.color=C);var z=g.base?L.b+L.s:L.s;return t[d+"0"]=t[d+"1"]=M.c2p(L[d],!0),t[d+"LabelVal"]=z,t[u+"0"]=T.c2p(x(L),!0),t[u+"1"]=T.c2p(b(L),!0),t[u+"LabelVal"]=L.p,a(L,g,t),i.hoverInfo(L,g,t),[t]}}},{"../../components/color":34,"../../components/errorbars":65,"../../components/fx":76,"../scatter/fill_hover_text":267}],247:[function(t,e,n){"use strict";var r={};r.attributes=t("./attributes"),r.layoutAttributes=t("./layout_attributes"),r.supplyDefaults=t("./defaults"),r.supplyLayoutDefaults=t("./layout_defaults"),r.calc=t("./calc"),r.setPositions=t("./set_positions"),r.colorbar=t("../scatter/colorbar"),r.arraysToCalcdata=t("./arrays_to_calcdata"),r.plot=t("./plot"),r.style=t("./style"),r.hoverPoints=t("./hover"),r.selectPoints=t("./select"),r.moduleType="trace",r.name="bar",r.basePlotModule=t("../../plots/cartesian"),r.categories=["cartesian","bar","oriented","markerColorscale","errorBarsOK","showLegend"],r.meta={description:["The data visualized by the span of the bars is set in `y`","if `orientation` is set th *v* (the default)","and the labels are set in `x`.","By setting `orientation` to *h*, the roles are interchanged."].join(" ")},e.exports=r},{"../../plots/cartesian":205,"../scatter/colorbar":263,"./arrays_to_calcdata":242,"./attributes":243,"./calc":244,"./defaults":245,"./hover":246,"./layout_attributes":248,"./layout_defaults":249,"./plot":250,"./select":251,"./set_positions":252,"./style":254}],248:[function(t,e,n){"use strict";e.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",role:"info",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *relative*, the bars are stacked on top of one another,","with negative values below the axis, positive values above","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to an *opacity* to see multiple bars."].join(" ")},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",role:"info",editType:"calc",description:["Sets the normalization for bar traces on the graph.","With *fraction*, the value of each bar is divide by the sum of the","values at the location coordinate.","With *percent*, the results form *fraction* are presented in percents."].join(" ")},bargap:{valType:"number",min:0,max:1,role:"style",editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},bargroupgap:{valType:"number",min:0,max:1,dflt:0,role:"style",editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}}},{}],249:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("../../plots/cartesian/axes"),o=t("../../lib"),a=t("./layout_attributes");e.exports=function(t,e,n){function s(n,r){return o.coerce(t,e,a,n,r)}for(var l=!1,c=!1,u=!1,d={},h=0;h<n.length;h++){var f=n[h];if(r.traceIs(f,"bar")){if(l=!0,"overlay"!==t.barmode&&"stack"!==t.barmode){var p=f.xaxis+f.yaxis;d[p]&&(u=!0),d[p]=!0}if(f.visible&&"histogram"===f.type)"category"!==i.getFromId({_fullLayout:e},f["v"===f.orientation?"xaxis":"yaxis"]).type&&(c=!0)}}l&&("overlay"!==s("barmode")&&s("barnorm"),s("bargap",c&&!u?0:.2),s("bargroupgap"))}},{"../../lib":151,"../../plots/cartesian/axes":194,"../../registry":233,"./layout_attributes":248}],250:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),o=t("tinycolor2"),a=t("../../lib"),s=t("../../lib/svg_text_utils"),l=t("../../components/color"),c=t("../../components/drawing"),u=t("../../components/errorbars"),d=t("./attributes"),h=d.text,f=d.textposition,p=d.textfont,g=d.insidetextfont,m=d.outsidetextfont,v=3;function y(t,e,n,r,i,o){var a;return i<1?a="scale("+i+") ":(i=1,a=""),"translate("+(n-i*t)+" "+(r-i*e)+")"+a+(o?"rotate("+o+" "+t+" "+e+") ":"")}function _(t,e,n,r){var a,s,l,c=x((e=e||{}).family,n),u=x(e.size,n),d=x(e.color,n);return{family:b(t.family,c,r.family),size:function(t,e,n){if(i(e)){e=+e;var r=t.min,o=t.max,a=void 0!==r&&e<r||void 0!==o&&e>o;if(!a)return e}return void 0!==n?n:t.dflt}(t.size,u,r.size),color:(a=t.color,s=d,l=r.color,o(s).isValid()?s:void 0!==l?l:a.dflt)}}function x(t,e){var n;return Array.isArray(t)?e<t.length&&(n=t[e]):n=t,n}function b(t,e,n){if("string"==typeof e){if(e||!t.noBlank)return e}else if("number"==typeof e&&!t.strict)return String(e);return void 0!==n?n:t.dflt}e.exports=function(t,e,n){var o=e.xaxis,d=e.yaxis,w=t._fullLayout,k=e.plot.select(".barlayer").selectAll("g.trace.bars").data(n);k.enter().append("g").attr("class","trace bars"),k.each(function(t){t[0].node3=r.select(this)}),k.append("g").attr("class","points").each(function(e){var n=r.select(this),u=e[0].t,k=e[0].trace,T=u.poffset,M=Array.isArray(T);n.selectAll("g.point").data(a.identity).enter().append("g").classed("point",!0).each(function(n,a){var u,A,L,S,C=n.p+(M?T[a]:T),P=C+n.w,z=n.b,D=z+n.s;if("h"===k.orientation?(L=d.c2p(C,!0),S=d.c2p(P,!0),u=o.c2p(z,!0),A=o.c2p(D,!0),n.ct=[A,(L+S)/2]):(u=o.c2p(C,!0),A=o.c2p(P,!0),L=d.c2p(z,!0),S=d.c2p(D,!0),n.ct=[(u+A)/2,S]),i(u)&&i(A)&&i(L)&&i(S)&&u!==A&&L!==S){var E=(n.mlw+1||k.marker.line.width+1||(n.trace?n.trace.marker.line.width:0)+1)-1,O=r.round(E/2%1,2);if(!t._context.staticPlot){var I=l.opacity(n.mc||k.marker.color)<1||E>.01?N:function(t,e){return Math.abs(t-e)>=2?N(t):t>e?Math.ceil(t):Math.floor(t)};A=I(A,u=I(u,A)),S=I(S,L=I(L,S))}var j=r.select(this);j.append("path").style("vector-effect","non-scaling-stroke").attr("d","M"+u+","+L+"V"+S+"H"+A+"V"+L+"Z"),function(t,e,n,r,i,o,a,l){var u;function d(e,n,r){var i=e.append("text").text(n).attr({class:"bartext bartext-"+u,transform:"","text-anchor":"middle","data-notex":1}).call(c.font,r).call(s.convertToTspans,t);return i}var w=n[0].trace,k=w.orientation,T=(M=w,A=r,L=x(M.text,A),b(h,L));var M,A,L;if(!T)return;if("none"===(S=w,C=r,E=x(S.textposition,C),z=E,(P=f).coerceNumber&&(z=+z),u=-1!==P.values.indexOf(z)?z:void 0!==D?D:P.dflt))return;var S,C,P,z,D,E;var O,I,j,N,R,B,F=(nt=w,rt=r,it=t._fullLayout.font,_(p,nt.textfont,rt,it)),H=(K=w,tt=r,et=F,_(g,K.insidetextfont,tt,et)),q=($=w,J=r,Q=F,_(m,$.outsidetextfont,J,Q)),Z=t._fullLayout.barmode,V="relative"===Z,U="stack"===Z||V,W=n[r],G=!U||W._outmost,X=Math.abs(o-i)-2*v,Y=Math.abs(l-a)-2*v;var $,J,Q;var K,tt,et;var nt,rt,it;"outside"===u&&(G||(u="inside"));if("auto"===u)if(G){u="inside",O=d(e,T,H),I=c.bBox(O.node()),j=I.width,N=I.height;var ot=j>0&&N>0,at=j<=X&&N<=Y,st=j<=Y&&N<=X,lt="h"===k?X>=j*(Y/N):Y>=N*(X/j);ot&&(at||st||lt)?u="inside":(u="outside",O.remove(),O=null)}else u="inside";if(!O&&(O=d(e,T,"outside"===u?q:H),I=c.bBox(O.node()),j=I.width,N=I.height,j<=0||N<=0))return void O.remove();"outside"===u?(B="both"===w.constraintext||"outside"===w.constraintext,R=function(t,e,n,r,i,o,a){var s,l="h"===o?Math.abs(r-n):Math.abs(e-t);l>2*v&&(s=v);var c=1;a&&(c="h"===o?Math.min(1,l/i.height):Math.min(1,l/i.width));var u,d,h,f,p=(i.left+i.right)/2,g=(i.top+i.bottom)/2;u=c*i.width,d=c*i.height,"h"===o?e<t?(h=e-s-u/2,f=(n+r)/2):(h=e+s+u/2,f=(n+r)/2):r>n?(h=(t+e)/2,f=r+s+d/2):(h=(t+e)/2,f=r-s-d/2);return y(p,g,h,f,c,!1)}(i,o,a,l,I,k,B)):(B="both"===w.constraintext||"inside"===w.constraintext,R=function(t,e,n,r,i,o,a){var s,l,c,u,d,h,f,p=i.width,g=i.height,m=(i.left+i.right)/2,_=(i.top+i.bottom)/2,x=Math.abs(e-t),b=Math.abs(r-n);x>2*v&&b>2*v?(x-=2*(d=v),b-=2*d):d=0;p<=x&&g<=b?(h=!1,f=1):p<=b&&g<=x?(h=!0,f=1):p<g==x<b?(h=!1,f=a?Math.min(x/p,b/g):1):(h=!0,f=a?Math.min(b/p,x/g):1);h&&(h=90);h?(s=f*g,l=f*p):(s=f*p,l=f*g);"h"===o?e<t?(c=e+d+s/2,u=(n+r)/2):(c=e-d-s/2,u=(n+r)/2):r>n?(c=(t+e)/2,u=r-d-l/2):(c=(t+e)/2,u=r+d+l/2);return y(m,_,c,u,f,h)}(i,o,a,l,I,k,B));O.attr("transform",R)}(t,j,e,a,u,A,L,S)}else r.select(this).remove();function N(t){return 0===w.bargap&&0===w.bargroupgap?r.round(Math.round(t)-O,2):t}})}),k.call(u.plot,e)}},{"../../components/color":34,"../../components/drawing":59,"../../components/errorbars":65,"../../lib":151,"../../lib/svg_text_utils":172,"./attributes":243,d3:1,"fast-isnumeric":4,tinycolor2:293}],251:[function(t,e,n){"use strict";e.exports=function(t,e){var n,r=t.cd,i=t.xaxis,o=t.yaxis,a=[];if(!1===e)for(n=0;n<r.length;n++)r[n].selected=0;else for(n=0;n<r.length;n++){var s=r[n];e.contains(s.ct)?(a.push({pointNumber:n,x:i.c2d(s.x),y:o.c2d(s.y)}),s.selected=1):s.selected=0}return a}},{}],252:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../constants/numerical").BADNUM,o=t("../../registry"),a=t("../../plots/cartesian/axes"),s=t("./sieve.js");function l(t,e,n,o){if(o.length){var l,_,x,b,w,k,T,M,A,L,S=t._fullLayout.barmode,C="group"===S;if("overlay"===S)c(t,e,n,o);else if(C){for(l=[],_=[],x=0;x<o.length;x++)void 0===(b=o[x])[0].trace.offset?_.push(b):l.push(b);_.length&&(k=e,T=n,M=_,A=(w=t)._fullLayout.barnorm,L=new s(M,!1,!A),function(t,e,n){var r,i,o,a,s=t._fullLayout,l=s.bargap,c=s.bargroupgap,u=n.positions,p=n.distinctPositions,g=n.minDiff,m=n.traces,v=u.length!==p.length,y=m.length,_=g*(1-l),x=v?_/y:_,b=x*(1-c);for(r=0;r<y;r++){i=m[r],o=i[0];var w=v?((2*r+1-y)*x-b)/2:-b/2;(a=o.t).barwidth=b,a.poffset=w,a.bargroupwidth=_,a.bardelta=g}n.binWidth=m[0][0].t.barwidth/100,d(n),h(t,e,n),f(t,e,n,v)}(w,k,L),A?(m(w,T,L),v(w,T,L)):g(w,T,L)),l.length&&c(t,e,n,l)}else{for(l=[],_=[],x=0;x<o.length;x++)void 0===(b=o[x])[0].trace.base?_.push(b):l.push(b);_.length&&function(t,e,n,o){var l=t._fullLayout.barmode,c="stack"===l,d="relative"===l,h=t._fullLayout.barnorm,f=new s(o,d,!(h||c||d));u(t,e,f),function(t,e,n){var o,s,l,c,u=t._fullLayout.barnorm,d=y(e),h=n.traces,f=[null,null];for(o=0;o<h.length;o++)for(s=h[o],l=0;l<s.length;l++)if((c=s[l]).s!==i){var g=n.put(c.p,c.b+c.s),m=g+c.b+c.s;c.b=g,c[d]=m,u||(r(e.c2l(m))&&p(f,m),c.hasB&&r(e.c2l(g))&&p(f,g))}u||a.expand(e,f,{tozero:!0,padded:!0})}(t,n,f);for(var g=0;g<o.length;g++)for(var m=o[g],_=0;_<m.length;_++){var x=m[_];if(x.s!==i){var b=x.b+x.s===f.get(x.p,x.s);b&&(x._outmost=!0)}}h&&v(t,n,f)}(t,e,n,_),l.length&&c(t,e,n,l)}}}function c(t,e,n,r){for(var i=t._fullLayout.barnorm,o=!i,a=0;a<r.length;a++){var l=r[a],c=new s([l],!1,o);u(t,e,c),i?(m(t,n,c),v(t,n,c)):g(t,n,c)}}function u(t,e,n){var r,i,o=t._fullLayout,a=o.bargap,s=o.bargroupgap,l=n.minDiff,c=n.traces,u=l*(1-a),p=u*(1-s),g=-p/2;for(r=0;r<c.length;r++)(i=c[r][0].t).barwidth=p,i.poffset=g,i.bargroupwidth=u,i.bardelta=l;n.binWidth=c[0][0].t.barwidth/100,d(n),h(t,e,n),f(t,e,n)}function d(t){var e,n,i,o,a,s,l=t.traces;for(e=0;e<l.length;e++){o=(i=(n=l[e])[0]).trace,s=i.t;var c,u=o.offset,d=s.poffset;if(Array.isArray(u)){for(c=u.slice(0,n.length),a=0;a<c.length;a++)r(c[a])||(c[a]=d);for(a=c.length;a<n.length;a++)c.push(d);s.poffset=c}else void 0!==u&&(s.poffset=u);var h=o.width,f=s.barwidth;if(Array.isArray(h)){var p=h.slice(0,n.length);for(a=0;a<p.length;a++)r(p[a])||(p[a]=f);for(a=p.length;a<n.length;a++)p.push(f);if(s.barwidth=p,void 0===u){for(c=[],a=0;a<n.length;a++)c.push(d+(f-p[a])/2);s.poffset=c}}else void 0!==h&&(s.barwidth=h,void 0===u&&(s.poffset=d+(f-h)/2))}}function h(t,e,n){for(var r=n.traces,i=y(e),o=0;o<r.length;o++)for(var a=r[o],s=a[0].t,l=s.poffset,c=Array.isArray(l),u=s.barwidth,d=Array.isArray(u),h=0;h<a.length;h++){var f=a[h],p=f.w=d?u[h]:u;f[i]=f.p+(c?l[h]:l)+p/2}}function f(t,e,n,r){var i=n.traces,o=n.distinctPositions,s=o[0],l=n.minDiff,c=l/2;a.minDtick(e,l,s,r);for(var u=Math.min.apply(Math,o)-c,d=Math.max.apply(Math,o)+c,h=0;h<i.length;h++){var f=i[h],p=f[0],g=p.trace;if(void 0!==g.width||void 0!==g.offset)for(var m=p.t,v=m.poffset,y=m.barwidth,_=Array.isArray(v),x=Array.isArray(y),b=0;b<f.length;b++){var w=f[b],k=_?v[b]:v,T=x?y[b]:y,M=w.p+k,A=M+T;u=Math.min(u,M),d=Math.max(d,A)}}a.expand(e,[u,d],{padded:!1})}function p(t,e){r(t[0])?t[0]=Math.min(t[0],e):t[0]=e,r(t[1])?t[1]=Math.max(t[1],e):t[1]=e}function g(t,e,n){for(var i=n.traces,o=y(e),s=[null,null],l=0;l<i.length;l++)for(var c=i[l],u=0;u<c.length;u++){var d=c[u],h=d.b,f=h+d.s;d[o]=f,r(e.c2l(f))&&p(s,f),d.hasB&&r(e.c2l(h))&&p(s,h)}a.expand(e,s,{tozero:!0,padded:!0})}function m(t,e,n){for(var r=n.traces,o=0;o<r.length;o++)for(var a=r[o],s=0;s<a.length;s++){var l=a[s];l.s!==i&&n.put(l.p,l.b+l.s)}}function v(t,e,n){var o=n.traces,s=y(e),l="fraction"===t._fullLayout.barnorm?1:100,c=l/1e9,u=e.l2c(e.c2l(0)),d="stack"===t._fullLayout.barmode?l:u,h=[u,d],f=!1;function g(t){r(e.c2l(t))&&(t<u-c||t>d+c||!r(u))&&(f=!0,p(h,t))}for(var m=0;m<o.length;m++)for(var v=o[m],_=0;_<v.length;_++){var x=v[_];if(x.s!==i){var b=Math.abs(l/n.get(x.p,x.s));x.b*=b,x.s*=b;var w=x.b,k=w+x.s;x[s]=k,g(k),x.hasB&&g(w)}}a.expand(e,h,{tozero:!0,padded:f})}function y(t){return t._id.charAt(0)}e.exports=function(t,e){var n,r=e.xaxis,i=e.yaxis,a=t._fullData,s=t.calcdata,c=[],u=[];for(n=0;n<a.length;n++){var d=a[n];!0===d.visible&&o.traceIs(d,"bar")&&d.xaxis===r._id&&d.yaxis===i._id&&("h"===d.orientation?c.push(s[n]):u.push(s[n]))}l(t,r,i,u),l(t,i,r,c)}},{"../../constants/numerical":134,"../../plots/cartesian/axes":194,"../../registry":233,"./sieve.js":253,"fast-isnumeric":4}],253:[function(t,e,n){"use strict";e.exports=o;var r=t("../../lib"),i=t("../../constants/numerical").BADNUM;function o(t,e,n){this.traces=t,this.separateNegativeValues=e,this.dontMergeOverlappingData=n;for(var o=1/0,a=[],s=0;s<t.length;s++){for(var l=t[s],c=0;c<l.length;c++){var u=l[c];u.p!==i&&a.push(u.p)}l[0]&&l[0].width1&&(o=Math.min(l[0].width1,o))}this.positions=a;var d=r.distinctVals(a);this.distinctPositions=d.vals,1===d.vals.length&&o!==1/0?this.minDiff=o:this.minDiff=Math.min(d.minDiff,o),this.binWidth=this.minDiff,this.bins={}}o.prototype.put=function(t,e){var n=this.getLabel(t,e),r=this.bins[n]||0;return this.bins[n]=r+e,r},o.prototype.get=function(t,e){var n=this.getLabel(t,e);return this.bins[n]||0},o.prototype.getLabel=function(t,e){return(e<0&&this.separateNegativeValues?"v":"^")+(this.dontMergeOverlappingData?t:Math.round(t/this.binWidth))}},{"../../constants/numerical":134,"../../lib":151}],254:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../components/drawing"),o=t("../../components/errorbars");e.exports=function(t,e){var n=e?e[0].node3:r.select(t).selectAll("g.trace.bars"),a=n.size(),s=t._fullLayout;n.style("opacity",function(t){return t[0].trace.opacity}).each(function(t){("stack"===s.barmode&&a>1||0===s.bargap&&0===s.bargroupgap&&!t[0].trace.marker.line.width)&&r.select(this).attr("shape-rendering","crispEdges")}),n.selectAll("g.points").each(function(e){var n=r.select(this),o=n.selectAll("path"),a=n.selectAll("text"),s=e[0].trace;i.pointStyle(o,s,t),i.selectedPointStyle(o,s),a.each(function(t){var e,n=r.select(this);function o(n){var r=e[n];return Array.isArray(r)?r[t.i]:r}n.classed("bartext-inside")?e=s.insidetextfont:n.classed("bartext-outside")&&(e=s.outsidetextfont),e||(e=s.textfont),i.font(n,o("family"),o("size"),o("color"))}),i.selectedTextStyle(a,s)}),o.style(n)}},{"../../components/drawing":59,"../../components/errorbars":65,d3:1}],255:[function(t,e,n){"use strict";var r=t("../../components/color"),i=t("../../components/colorscale/has_colorscale"),o=t("../../components/colorscale/defaults");e.exports=function(t,e,n,a,s){n("marker.color",a),i(t,"marker")&&o(t,e,s,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",r.defaultLine),i(t,"marker.line")&&o(t,e,s,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":34,"../../components/colorscale/defaults":44,"../../components/colorscale/has_colorscale":48}],256:[function(t,e,n){"use strict";var r=t("../../lib");n.formatPiePercent=function(t,e){var n=(100*t).toPrecision(3);return-1!==n.lastIndexOf(".")&&(n=n.replace(/[.]?0+$/,"")),r.numSeparate(n,e)+"%"},n.formatPieValue=function(t,e){var n=t.toPrecision(10);return-1!==n.lastIndexOf(".")&&(n=n.replace(/[.]?0+$/,"")),r.numSeparate(n,e)},n.getFirstFilled=function(t,e){if(Array.isArray(t))for(var n=0;n<e.length;n++){var r=t[e[n]];if(r||0===r)return r}},n.castOption=function(t,e){return Array.isArray(t)?n.getFirstFilled(t,e):t||void 0}},{"../../lib":151}],257:[function(t,e,n){"use strict";var r=t("../../components/color"),i=t("./helpers").castOption;e.exports=function(t,e,n){var o=n.marker.line,a=i(o.color,e.pts)||r.defaultLine,s=i(o.width,e.pts)||0;t.style({"stroke-width":s}).call(r.fill,e.color).call(r.stroke,a)}},{"../../components/color":34,"./helpers":256}],258:[function(t,e,n){"use strict";var r=t("../../lib");e.exports=function(t,e){for(var n=0;n<t.length;n++)t[n].i=n;r.mergeArray(e.text,t,"tx"),r.mergeArray(e.hovertext,t,"htx"),r.mergeArray(e.customdata,t,"data"),r.mergeArray(e.textposition,t,"tp"),e.textfont&&(r.mergeArray(e.textfont.size,t,"ts"),r.mergeArray(e.textfont.color,t,"tc"),r.mergeArray(e.textfont.family,t,"tf"));var i=e.marker;if(i){r.mergeArray(i.size,t,"ms"),r.mergeArray(i.opacity,t,"mo"),r.mergeArray(i.symbol,t,"mx"),r.mergeArray(i.color,t,"mc");var o=i.line;i.line&&(r.mergeArray(o.color,t,"mlc"),r.mergeArray(o.width,t,"mlw"));var a=i.gradient;a&&"none"!==a.type&&(r.mergeArray(a.type,t,"mgt"),r.mergeArray(a.color,t,"mgc"))}}},{"../../lib":151}],259:[function(t,e,n){"use strict";var r=t("../../components/colorscale/color_attributes"),i=t("../../components/errorbars/attributes"),o=t("../../components/colorbar/attributes"),a=t("../../plots/font_attributes"),s=t("../../components/drawing/attributes").dash,l=t("../../components/drawing"),c=t("./constants"),u=t("../../lib/extend").extendFlat;e.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the x coordinates."},x0:{valType:"any",dflt:0,role:"info",editType:"calc+clearAxisTypes",description:["Alternate to `x`.","Builds a linear space of x coordinates.","Use with `dx`","where `x0` is the starting coordinate and `dx` the step."].join(" ")},dx:{valType:"number",dflt:1,role:"info",editType:"calc",description:["Sets the x coordinate step.","See `x0` for more info."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the y coordinates."},y0:{valType:"any",dflt:0,role:"info",editType:"calc+clearAxisTypes",description:["Alternate to `y`.","Builds a linear space of y coordinates.","Use with `dy`","where `y0` is the starting coordinate and `dy` the step."].join(" ")},dy:{valType:"number",dflt:1,role:"info",editType:"calc",description:["Sets the y coordinate step.","See `y0` for more info."].join(" ")},text:{valType:"string",role:"info",dflt:"",arrayOk:!0,editType:"calc",description:["Sets text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",role:"info",dflt:"",arrayOk:!0,editType:"style",description:["Sets hover text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],role:"info",editType:"calc",description:["Determines the drawing mode for this scatter trace.","If the provided `mode` includes *text* then the `text` elements","appear at the coordinates. Otherwise, the `text` elements","appear on hover.","If there are less than "+c.PTS_LINESONLY+" points,","then the default is *lines+markers*. Otherwise, *lines*."].join(" ")},hoveron:{valType:"flaglist",flags:["points","fills"],role:"info",editType:"style",description:["Do the hover effects highlight individual points (markers or","line points) or do they highlight filled regions?","If the fill is *toself* or *tonext* and there are no markers","or text, then the default is *fills*, otherwise it is *points*."].join(" ")},line:{color:{valType:"color",role:"style",editType:"style",description:"Sets the line color."},width:{valType:"number",min:0,dflt:2,role:"style",editType:"style",description:"Sets the line width (in px)."},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",role:"style",editType:"plot",description:["Determines the line shape.","With *spline* the lines are drawn using spline interpolation.","The other available values correspond to step-wise line shapes."].join(" ")},smoothing:{valType:"number",min:0,max:1.3,dflt:1,role:"style",editType:"plot",description:["Has an effect only if `shape` is set to *spline*","Sets the amount of smoothing.","*0* corresponds to no smoothing (equivalent to a *linear* shape)."].join(" ")},dash:u({},s,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,role:"info",editType:"plot",description:["Simplifies lines by removing nearly-collinear points. When transitioning","lines, it may be desirable to disable this so that the number of points","along the resulting SVG path is unaffected."].join(" ")},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,role:"info",editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the provided data arrays are connected."].join(" ")},cliponaxis:{valType:"boolean",dflt:!0,role:"info",editType:"plot",description:["Determines whether or not markers and text nodes","are clipped about the subplot axes.","To show markers and text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],dflt:"none",role:"style",editType:"calc",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","*tozerox* and *tozeroy* fill to x=0 and y=0 respectively.","*tonextx* and *tonexty* fill between the endpoints of this","trace and the endpoints of the trace before it, connecting those","endpoints with straight lines (to make a stacked area graph);","if there is no trace before it, they behave like *tozerox* and","*tozeroy*.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other."].join(" ")},fillcolor:{valType:"color",role:"style",editType:"style",description:["Sets the fill color.","Defaults to a half-transparent variant of the line color,","marker color, or marker line color, whichever is available."].join(" ")},marker:u({symbol:{valType:"enumerated",values:l.symbolList,dflt:"circle",arrayOk:!0,role:"style",editType:"style",description:["Sets the marker symbol type.","Adding 100 is equivalent to appending *-open* to a symbol name.","Adding 200 is equivalent to appending *-dot* to a symbol name.","Adding 300 is equivalent to appending *-open-dot*","or *dot-open* to a symbol name."].join(" ")},opacity:{valType:"number",min:0,max:1,arrayOk:!0,role:"style",editType:"style",description:"Sets the marker opacity."},size:{valType:"number",min:0,dflt:6,arrayOk:!0,role:"style",editType:"calcIfAutorange",description:"Sets the marker size (in px)."},maxdisplayed:{valType:"number",min:0,dflt:0,role:"style",editType:"plot",description:["Sets a maximum number of points to be drawn on the graph.","*0* corresponds to no limit."].join(" ")},sizeref:{valType:"number",dflt:1,role:"style",editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the scale factor used to determine the rendered size of","marker points. Use with `sizemin` and `sizemode`."].join(" ")},sizemin:{valType:"number",min:0,dflt:0,role:"style",editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the minimum size (in px) of the rendered marker points."].join(" ")},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",role:"info",editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the rule for which the data in `size` is converted","to pixels."].join(" ")},showscale:{valType:"boolean",role:"info",dflt:!1,editType:"calc",description:["Has an effect only if `marker.color` is set to a numerical array.","Determines whether or not a colorbar is displayed."].join(" ")},colorbar:o,line:u({width:{valType:"number",min:0,arrayOk:!0,role:"style",editType:"style",description:"Sets the width (in px) of the lines bounding the marker points."},editType:"calc"},r("marker.line")),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",role:"style",editType:"calc",description:["Sets the type of gradient used to fill the markers"].join(" ")},color:{valType:"color",arrayOk:!0,role:"style",editType:"calc",description:["Sets the final color of the gradient fill:","the center color for radial, the right for horizontal,","or the bottom for vertical."].join(" ")},editType:"calc"},editType:"calc"},r("marker")),selected:{marker:{opacity:{valType:"number",min:0,max:1,role:"style",editType:"style",description:"Sets the marker opacity of selected points."},color:{valType:"color",role:"style",editType:"style",description:"Sets the marker color of selected points."},size:{valType:"number",min:0,role:"style",editType:"style",description:"Sets the marker size of selected points."},editType:"style"},textfont:{color:{valType:"color",role:"style",editType:"style",description:"Sets the text font color of selected points."},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,role:"style",editType:"style",description:"Sets the marker opacity of unselected points, applied only when a selection exists."},color:{valType:"color",role:"style",editType:"style",description:"Sets the marker color of unselected points, applied only when a selection exists."},size:{valType:"number",min:0,role:"style",editType:"style",description:"Sets the marker size of unselected points, applied only when a selection exists."},editType:"style"},textfont:{color:{valType:"color",role:"style",editType:"style",description:"Sets the text font color of unselected points, applied only when a selection exists."},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,role:"style",editType:"calc",description:["Sets the positions of the `text` elements","with respects to the (x,y) coordinates."].join(" ")},textfont:a({editType:"calc",colorEditType:"style",arrayOk:!0,description:"Sets the text font."}),r:{valType:"data_array",editType:"calc",description:["For legacy polar chart only.","Please switch to *scatterpolar* trace type.","Sets the radial coordinates."].join("")},t:{valType:"data_array",editType:"calc",description:["For legacy polar chart only.","Please switch to *scatterpolar* trace type.","Sets the angular coordinates."].join("")},error_y:i,error_x:i}},{"../../components/colorbar/attributes":35,"../../components/colorscale/color_attributes":42,"../../components/drawing":59,"../../components/drawing/attributes":58,"../../components/errorbars/attributes":61,"../../lib/extend":145,"../../plots/font_attributes":220,"./constants":265}],260:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../plots/cartesian/axes"),o=t("../../constants/numerical").BADNUM,a=t("./subtypes"),s=t("./colorscale_calc"),l=t("./arrays_to_calcdata"),c=t("./calc_selection");function u(t,e){if(a.hasMarkers(t)){var n,r=t.marker,o=1.6*(t.marker.sizeref||1);if(n="area"===t.marker.sizemode?function(t){return Math.max(Math.sqrt((t||0)/o),3)}:function(t){return Math.max((t||0)/o,3)},Array.isArray(r.size)){var s={type:"linear"};i.setConvert(s);for(var l=s.makeCalcdata(t.marker,"size"),c=new Array(e),u=0;u<e;u++)c[u]=n(l[u]);return c}return n(r.size)}}e.exports={calc:function(t,e){var n=i.getFromId(t,e.xaxis||"x"),d=i.getFromId(t,e.yaxis||"y"),h=n.makeCalcdata(e,"x"),f=d.makeCalcdata(e,"y"),p=e._length;n._minDtick=0,d._minDtick=0;var g={padded:!0},m={padded:!0},v=u(e,p);v&&(g.ppad=m.ppad=v),!("tozerox"===e.fill||"tonextx"===e.fill&&t.firstscatter)||h[0]===h[p-1]&&f[0]===f[p-1]?e.error_y.visible||-1===["tonexty","tozeroy"].indexOf(e.fill)&&(a.hasMarkers(e)||a.hasText(e))||(g.padded=!1,g.ppad=0):g.tozero=!0,!("tozeroy"===e.fill||"tonexty"===e.fill&&t.firstscatter)||h[0]===h[p-1]&&f[0]===f[p-1]?-1!==["tonextx","tozerox"].indexOf(e.fill)&&(m.padded=!1):m.tozero=!0,i.expand(n,h,g),i.expand(d,f,m);for(var y=new Array(p),_=0;_<p;_++)y[_]=r(h[_])&&r(f[_])?{x:h[_],y:f[_]}:{x:o,y:o},e.ids&&(y[_].id=String(e.ids[_]));return l(y,e),s(e),c(y,e),t.firstscatter=!1,y},calcMarkerSize:u}},{"../../constants/numerical":134,"../../plots/cartesian/axes":194,"./arrays_to_calcdata":258,"./calc_selection":261,"./colorscale_calc":264,"./subtypes":281,"fast-isnumeric":4}],261:[function(t,e,n){"use strict";var r=t("../../lib");e.exports=function(t,e){Array.isArray(e.selectedpoints)&&r.tagSelected(t,e)}},{"../../lib":151}],262:[function(t,e,n){"use strict";e.exports=function(t){for(var e=0;e<t.length;e++){var n=t[e];if("scatter"===n.type){var r=n.fill;if("none"!==r&&"toself"!==r&&(n.opacity=void 0,"tonexty"===r||"tonextx"===r))for(var i=e-1;i>=0;i--){var o=t[i];if("scatter"===o.type&&o.xaxis===n.xaxis&&o.yaxis===n.yaxis){o.opacity=void 0;break}}}}}},{}],263:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib"),o=t("../../plots/plots"),a=t("../../components/colorscale"),s=t("../../components/colorbar/draw");e.exports=function(t,e){var n=e[0].trace,l=n.marker,c="cb"+n.uid;if(t._fullLayout._infolayer.selectAll("."+c).remove(),void 0!==l&&l.showscale){var u=l.color,d=l.cmin,h=l.cmax;r(d)||(d=i.aggNums(Math.min,null,u)),r(h)||(h=i.aggNums(Math.max,null,u));var f=e[0].t.cb=s(t,c),p=a.makeColorScaleFunc(a.extractScale(l.colorscale,d,h),{noNumericCheck:!0});f.fillcolor(p).filllevels({start:d,end:h,size:(h-d)/254}).options(l.colorbar)()}else o.autoMargin(t,c)}},{"../../components/colorbar/draw":38,"../../components/colorscale":49,"../../lib":151,"../../plots/plots":226,"fast-isnumeric":4}],264:[function(t,e,n){"use strict";var r=t("../../components/colorscale/has_colorscale"),i=t("../../components/colorscale/calc"),o=t("./subtypes");e.exports=function(t){o.hasLines(t)&&r(t,"line")&&i(t,t.line.color,"line","c"),o.hasMarkers(t)&&(r(t,"marker")&&i(t,t.marker.color,"marker","c"),r(t,"marker.line")&&i(t,t.marker.line.color,"marker.line","c"))}},{"../../components/colorscale/calc":41,"../../components/colorscale/has_colorscale":48,"./subtypes":281}],265:[function(t,e,n){"use strict";e.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20}},{}],266:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./attributes"),o=t("./constants"),a=t("./subtypes"),s=t("./xy_defaults"),l=t("./marker_defaults"),c=t("./line_defaults"),u=t("./line_shape_defaults"),d=t("./text_defaults"),h=t("./fillcolor_defaults"),f=t("../../components/errorbars/defaults");e.exports=function(t,e,n,p){function g(n,o){return r.coerce(t,e,i,n,o)}var m=s(t,e,p,g),v=m<o.PTS_LINESONLY?"lines+markers":"lines";if(m){g("text"),g("hovertext"),g("mode",v),a.hasLines(e)&&(c(t,e,n,p,g),u(t,e,g),g("connectgaps"),g("line.simplify")),a.hasMarkers(e)&&l(t,e,n,p,g,{gradient:!0}),a.hasText(e)&&d(t,e,p,g);var y=[];(a.hasMarkers(e)||a.hasText(e))&&(g("cliponaxis"),g("marker.maxdisplayed"),y.push("points")),g("fill"),"none"!==e.fill&&(h(t,e,n,g),a.hasLines(e)||u(t,e,g)),"tonext"!==e.fill&&"toself"!==e.fill||y.push("fills"),g("hoveron",y.join("+")||"points"),f(t,e,n,{axis:"y"}),f(t,e,n,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(e,g)}else e.visible=!1}},{"../../components/errorbars/defaults":64,"../../lib":151,"./attributes":259,"./constants":265,"./fillcolor_defaults":268,"./line_defaults":272,"./line_shape_defaults":274,"./marker_defaults":277,"./subtypes":281,"./text_defaults":282,"./xy_defaults":283}],267:[function(t,e,n){"use strict";var r=t("../../lib");function i(t){return t||0===t}e.exports=function(t,e,n){var o=Array.isArray(n)?function(t){n.push(t)}:function(t){n.text=t},a=r.extractOption(t,e,"htx","hovertext");if(i(a))return o(a);var s=r.extractOption(t,e,"tx","text");return i(s)?o(s):void 0}},{"../../lib":151}],268:[function(t,e,n){"use strict";var r=t("../../components/color");e.exports=function(t,e,n,i){var o=!1;if(e.marker){var a=e.marker.color,s=(e.marker.line||{}).color;a&&!Array.isArray(a)?o=a:s&&!Array.isArray(s)&&(o=s)}i("fillcolor",r.addOpacity((e.line||{}).color||o||n,.5))}},{"../../components/color":34}],269:[function(t,e,n){"use strict";var r=t("../../components/color"),i=t("./subtypes");e.exports=function(t,e){var n,o;if("lines"===t.mode)return(n=t.line.color)&&r.opacity(n)?n:t.fillcolor;if("none"===t.mode)return t.fill?t.fillcolor:"";var a=e.mcc||(t.marker||{}).color,s=e.mlcc||((t.marker||{}).line||{}).color;return(o=a&&r.opacity(a)?a:s&&r.opacity(s)&&(e.mlw||((t.marker||{}).line||{}).width)?s:"")?r.opacity(o)<.3?r.addOpacity(o,.3):o:(n=(t.line||{}).color)&&r.opacity(n)&&i.hasLines(t)&&t.line.width?n:t.fillcolor}},{"../../components/color":34,"./subtypes":281}],270:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../components/fx"),o=t("../../components/errorbars"),a=t("./get_trace_color"),s=t("../../components/color"),l=t("./fill_hover_text"),c=i.constants.MAXDIST;e.exports=function(t,e,n,u){var d=t.cd,h=d[0].trace,f=t.xa,p=t.ya,g=f.c2p(e),m=p.c2p(n),v=[g,m],y=h.hoveron||"",_=-1!==h.mode.indexOf("markers")?3:.5;if(-1!==y.indexOf("points")){var x=i.getDistanceFunction(u,function(t){var e=Math.max(3,t.mrc||0),n=1-1/e,r=Math.abs(f.c2p(t.x)-g);return r<e?n*r/e:r-e+n},function(t){var e=Math.max(3,t.mrc||0),n=1-1/e,r=Math.abs(p.c2p(t.y)-m);return r<e?n*r/e:r-e+n},function(t){var e=Math.max(_,t.mrc||0),n=f.c2p(t.x)-g,r=p.c2p(t.y)-m;return Math.max(Math.sqrt(n*n+r*r)-e,1-_/e)});if(i.getClosest(d,x,t),!1!==t.index){var b=d[t.index],w=f.c2p(b.x,!0),k=p.c2p(b.y,!0),T=b.mrc||1;return r.extendFlat(t,{color:a(h,b),x0:w-T,x1:w+T,xLabelVal:b.x,y0:k-T,y1:k+T,yLabelVal:b.y,kink:Math.max(_,b.mrc||0)}),l(b,h,t),o.hoverInfo(b,h,t),[t]}}if(-1!==y.indexOf("fills")&&h._polygons){var M,A,L,S,C,P,z,D,E,O=h._polygons,I=[],j=!1,N=1/0,R=-1/0,B=1/0,F=-1/0;for(M=0;M<O.length;M++)(L=O[M]).contains(v)&&(j=!j,I.push(L),B=Math.min(B,L.ymin),F=Math.max(F,L.ymax));if(j){var H=((B=Math.max(B,0))+(F=Math.min(F,p._length)))/2;for(M=0;M<I.length;M++)for(S=I[M].pts,A=1;A<S.length;A++)(D=S[A-1][1])>H!=(E=S[A][1])>=H&&(P=S[A-1][0],z=S[A][0],E-D&&(C=P+(z-P)*(H-D)/(E-D),N=Math.min(N,C),R=Math.max(R,C)));N=Math.max(N,0),R=Math.min(R,f._length);var q=s.defaultLine;return s.opacity(h.fillcolor)?q=h.fillcolor:s.opacity((h.line||{}).color)&&(q=h.line.color),r.extendFlat(t,{distance:c+10,x0:N,x1:R,y0:H,y1:H,color:q}),delete t.index,h.text&&!Array.isArray(h.text)?t.text=String(h.text):t.text=h.name,[t]}}}},{"../../components/color":34,"../../components/errorbars":65,"../../components/fx":76,"../../lib":151,"./fill_hover_text":267,"./get_trace_color":269}],271:[function(t,e,n){"use strict";var r={},i=t("./subtypes");r.hasLines=i.hasLines,r.hasMarkers=i.hasMarkers,r.hasText=i.hasText,r.isBubble=i.isBubble,r.attributes=t("./attributes"),r.supplyDefaults=t("./defaults"),r.cleanData=t("./clean_data"),r.calc=t("./calc").calc,r.arraysToCalcdata=t("./arrays_to_calcdata"),r.plot=t("./plot"),r.colorbar=t("./colorbar"),r.style=t("./style").style,r.hoverPoints=t("./hover"),r.selectPoints=t("./select"),r.animatable=!0,r.moduleType="trace",r.name="scatter",r.basePlotModule=t("../../plots/cartesian"),r.categories=["cartesian","symbols","markerColorscale","errorBarsOK","showLegend","scatter-like"],r.meta={description:["The scatter trace type encompasses line charts, scatter charts, text charts, and bubble charts.","The data visualized as scatter point or lines is set in `x` and `y`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")},e.exports=r},{"../../plots/cartesian":205,"./arrays_to_calcdata":258,"./attributes":259,"./calc":260,"./clean_data":262,"./colorbar":263,"./defaults":266,"./hover":270,"./plot":278,"./select":279,"./style":280,"./subtypes":281}],272:[function(t,e,n){"use strict";var r=t("../../components/colorscale/has_colorscale"),i=t("../../components/colorscale/defaults");e.exports=function(t,e,n,o,a,s){var l=(t.marker||{}).color;(a("line.color",n),r(t,"line"))?i(t,e,o,a,{prefix:"line.",cLetter:"c"}):a("line.color",!Array.isArray(l)&&l||n);a("line.width"),(s||{}).noDash||a("line.dash")}},{"../../components/colorscale/defaults":44,"../../components/colorscale/has_colorscale":48}],273:[function(t,e,n){"use strict";var r=t("../../constants/numerical").BADNUM,i=t("../../lib"),o=i.segmentsIntersect,a=i.constrain,s=t("./constants");e.exports=function(t,e){var n,l,c,u,d,h,f,p,g,m,v,y,_,x,b,w,k=e.xaxis,T=e.yaxis,M=e.simplify,A=e.connectGaps,L=e.baseTolerance,S=e.shape,C="linear"===S,P=[],z=s.minTolerance,D=new Array(t.length),E=0;function O(e){var n=t[e],i=k.c2p(n.x),o=T.c2p(n.y);return i===r||o===r?n.intoCenter||!1:[i,o]}function I(t){var e=t[0]/k._length,n=t[1]/T._length;return(1+s.toleranceGrowth*Math.max(0,-e,e-1,-n,n-1))*L}function j(t,e){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}M||(L=z=-1);var N,R,B,F,H,q,Z,V=s.maxScreensAway,U=-k._length*V,W=k._length*(1+V),G=-T._length*V,X=T._length*(1+V),Y=[[U,G,W,G],[W,G,W,X],[W,X,U,X],[U,X,U,G]];function $(t){if(t[0]<U||t[0]>W||t[1]<G||t[1]>X)return[a(t[0],U,W),a(t[1],G,X)]}function J(t,e){return t[0]===e[0]&&(t[0]===U||t[0]===W)||(t[1]===e[1]&&(t[1]===G||t[1]===X)||void 0)}function Q(t,e,n){return function(r,o){var a=$(r),s=$(o),l=[];if(a&&s&&J(a,s))return l;a&&l.push(a),s&&l.push(s);var c=2*i.constrain((r[t]+o[t])/2,e,n)-((a||r)[t]+(s||o)[t]);c&&((a&&s?c>0==a[t]>s[t]?a:s:a||s)[t]+=c);return l}}function K(t){var e=t[0],n=t[1],r=e===D[E-1][0],i=n===D[E-1][1];if(!r||!i)if(E>1){var o=e===D[E-2][0],a=n===D[E-2][1];r&&(e===U||e===W)&&o?a?E--:D[E-1]=t:i&&(n===G||n===X)&&a?o?E--:D[E-1]=t:D[E++]=t}else D[E++]=t}function tt(t){D[E-1][0]!==t[0]&&D[E-1][1]!==t[1]&&K([B,F]),K(t),H=null,B=F=0}function et(t){if(N=t[0]<U?U:t[0]>W?W:0,R=t[1]<G?G:t[1]>X?X:0,N||R){if(E)if(H){var e=Z(H,t);e.length>1&&(tt(e[0]),D[E++]=e[1])}else q=Z(D[E-1],t)[0],D[E++]=q;else D[E++]=[N||t[0],R||t[1]];var n=D[E-1];N&&R&&(n[0]!==N||n[1]!==R)?(H&&(B!==N&&F!==R?K(B&&F?(r=H,o=(i=t)[0]-r[0],a=(i[1]-r[1])/o,(r[1]*i[0]-i[1]*r[0])/o>0?[a>0?U:W,X]:[a>0?W:U,G]):[B||N,F||R]):B&&F&&K([B,F])),K([N,R])):B-N&&F-R&&K([N||B,R||F]),H=t,B=N,F=R}else H&&tt(Z(H,t)[0]),D[E++]=t;var r,i,o,a}for("linear"===S||"spline"===S?Z=function(t,e){for(var n=[],r=0,i=0;i<4;i++){var a=Y[i],s=o(t[0],t[1],e[0],e[1],a[0],a[1],a[2],a[3]);s&&(!r||Math.abs(s.x-n[0][0])>1||Math.abs(s.y-n[0][1])>1)&&(s=[s.x,s.y],r&&j(s,t)<j(n[0],t)?n.unshift(s):n.push(s),r++)}return n}:"hv"===S||"vh"===S?Z=function(t,e){var n=[],r=$(t),i=$(e);return r&&i&&J(r,i)?n:(r&&n.push(r),i&&n.push(i),n)}:"hvh"===S?Z=Q(0,U,W):"vhv"===S&&(Z=Q(1,G,X)),n=0;n<t.length;n++)if(l=O(n)){for(E=0,H=null,et(l),n++;n<t.length;n++){if(!(u=O(n))){if(A)continue;break}if(C){if(!((m=j(u,l))<I(u)*z)){for(p=[(u[0]-l[0])/m,(u[1]-l[1])/m],d=l,v=m,y=x=b=0,f=!1,c=u,n++;n<t.length;n++){if(!(h=O(n))){if(A)continue;break}if(w=(g=[h[0]-l[0],h[1]-l[1]])[0]*p[1]-g[1]*p[0],x=Math.min(x,w),(b=Math.max(b,w))-x>I(h))break;c=h,(_=g[0]*p[0]+g[1]*p[1])>v?(v=_,u=h,f=!1):_<y&&(y=_,d=h,f=!0)}if(f?(et(u),c!==d&&et(d)):(d!==l&&et(d),c!==u&&et(u)),et(c),n>=t.length||!h)break;et(h),l=h}}else et(u)}H&&K([B||H[0],F||H[1]]),P.push(D.slice(0,E))}return P}},{"../../constants/numerical":134,"../../lib":151,"./constants":265}],274:[function(t,e,n){"use strict";e.exports=function(t,e,n){"spline"===n("line.shape")&&n("line.smoothing")}},{}],275:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r,i,o=null;for(i=0;i<n.length;++i)!0===(r=n[i][0].trace).visible?(r._nexttrace=null,-1!==["tonextx","tonexty","tonext"].indexOf(r.fill)&&(r._prevtrace=o,o&&(o._nexttrace=r)),o=r):r._prevtrace=r._nexttrace=null}},{}],276:[function(t,e,n){"use strict";var r=t("fast-isnumeric");e.exports=function(t){var e=t.marker,n=e.sizeref||1,i=e.sizemin||0,o="area"===e.sizemode?function(t){return Math.sqrt(t/n)}:function(t){return t/n};return function(t){var e=o(t/2);return r(e)&&e>0?Math.max(e,i):0}}},{"fast-isnumeric":4}],277:[function(t,e,n){"use strict";var r=t("../../components/color"),i=t("../../components/colorscale/has_colorscale"),o=t("../../components/colorscale/defaults"),a=t("./subtypes");e.exports=function(t,e,n,s,l,c){var u=a.isBubble(t),d=(t.line||{}).color;(c=c||{},d&&(n=d),l("marker.symbol"),l("marker.opacity",u?.7:1),l("marker.size"),l("marker.color",n),i(t,"marker")&&o(t,e,s,l,{prefix:"marker.",cLetter:"c"}),c.noSelect||(l("selected.marker.color"),l("unselected.marker.color"),l("selected.marker.size"),l("unselected.marker.size")),c.noLine||(l("marker.line.color",d&&!Array.isArray(d)&&e.marker.color!==d?d:u?r.background:r.defaultLine),i(t,"marker.line")&&o(t,e,s,l,{prefix:"marker.line.",cLetter:"c"}),l("marker.line.width",u?1:0)),u&&(l("marker.sizeref"),l("marker.sizemin"),l("marker.sizemode")),c.gradient)&&("none"!==l("marker.gradient.type")&&l("marker.gradient.color"))}},{"../../components/color":34,"../../components/colorscale/defaults":44,"../../components/colorscale/has_colorscale":48,"./subtypes":281}],278:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../lib"),o=t("../../components/drawing"),a=t("../../components/errorbars"),s=t("./subtypes"),l=t("./line_points"),c=t("./link_traces"),u=t("../../lib/polygon").tester;function d(t,e,n,c,d,h,f){var p,g;!function(t,e,n,o,a){var l=n.xaxis,c=n.yaxis,u=r.extent(i.simpleMap(l.range,l.r2c)),d=r.extent(i.simpleMap(c.range,c.r2c)),h=o[0].trace;if(!s.hasMarkers(h))return;var f=h.marker.maxdisplayed;if(0===f)return;var p=o.filter(function(t){return t.x>=u[0]&&t.x<=u[1]&&t.y>=d[0]&&t.y<=d[1]}),g=Math.ceil(p.length/f),m=0;a.forEach(function(t,n){var r=t[0].trace;s.hasMarkers(r)&&r.marker.maxdisplayed>0&&n<e&&m++});var v=Math.round(m*g/3+Math.floor(m/3)*g/7.1);o.forEach(function(t){delete t.vis}),p.forEach(function(t,e){0===Math.round((e+v)%g)&&(t.vis=!0)})}(0,e,n,c,d);var m=!!f&&f.duration>0;function v(t){return m?t.transition():t}var y=n.xaxis,_=n.yaxis,x=c[0].trace,b=x.line,w=r.select(h);if(w.call(a.plot,n,f),!0===x.visible){var k,T;v(w).style("opacity",x.opacity);var M=x.fill.charAt(x.fill.length-1);"x"!==M&&"y"!==M&&(M=""),c[0].node3=w;var A="",L=[],S=x._prevtrace;S&&(A=S._prevRevpath||"",T=S._nextFill,L=S._polygons);var C,P,z,D,E,O,I,j,N,R="",B="",F=[],H=i.noop;if(k=x._ownFill,s.hasLines(x)||"none"!==x.fill){for(T&&T.datum(c),-1!==["hv","vh","hvh","vhv"].indexOf(b.shape)?(z=o.steps(b.shape),D=o.steps(b.shape.split("").reverse().join(""))):z=D="spline"===b.shape?function(t){var e=t[t.length-1];return t.length>1&&t[0][0]===e[0]&&t[0][1]===e[1]?o.smoothclosed(t.slice(1),b.smoothing):o.smoothopen(t,b.smoothing)}:function(t){return"M"+t.join("L")},E=function(t){return D(t.reverse())},F=l(c,{xaxis:y,yaxis:_,connectGaps:x.connectgaps,baseTolerance:Math.max(b.width||1,3)/4,shape:b.shape,simplify:b.simplify}),N=x._polygons=new Array(F.length),g=0;g<F.length;g++)x._polygons[g]=u(F[g]);F.length&&(O=F[0][0],j=(I=F[F.length-1])[I.length-1]),H=function(t){return function(e){if(C=z(e),P=E(e),R?M?(R+="L"+C.substr(1),B=P+"L"+B.substr(1)):(R+="Z"+C,B=P+"Z"+B):(R=C,B=P),s.hasLines(x)&&e.length>1){var n=r.select(this);if(n.datum(c),t)v(n.style("opacity",0).attr("d",C).call(o.lineGroupStyle)).style("opacity",1);else{var i=v(n);i.attr("d",C),o.singleLineStyle(c,i)}}}}}var q=w.selectAll(".js-line").data(F);v(q.exit()).style("opacity",0).remove(),q.each(H(!1)),q.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(o.lineGroupStyle).each(H(!0)),o.setClipUrl(q,n.layerClipId),F.length?(k?O&&j&&(M?("y"===M?O[1]=j[1]=_.c2p(0,!0):"x"===M&&(O[0]=j[0]=y.c2p(0,!0)),v(k).attr("d","M"+j+"L"+O+"L"+R.substr(1)).call(o.singleFillStyle)):v(k).attr("d",R+"Z").call(o.singleFillStyle)):T&&("tonext"===x.fill.substr(0,6)&&R&&A?("tonext"===x.fill?v(T).attr("d",R+"Z"+A+"Z").call(o.singleFillStyle):v(T).attr("d",R+"L"+A.substr(1)+"Z").call(o.singleFillStyle),x._polygons=x._polygons.concat(L)):(V(T),x._polygons=null)),x._prevRevpath=B,x._prevPolygons=N):(k?V(k):T&&V(T),x._polygons=x._prevRevpath=x._prevPolygons=null);var Z=w.selectAll(".points");p=Z.data([c]),Z.each(X),p.enter().append("g").classed("points",!0).each(X),p.exit().remove(),p.each(function(t){var e=!1===t[0].trace.cliponaxis;o.setClipUrl(r.select(this),e?null:n.layerClipId)})}function V(t){v(t).attr("d","M0,0Z")}function U(t){return t.filter(function(t){return t.vis})}function W(t){return t.id}function G(){return!1}function X(e){var a,l=e[0].trace,c=r.select(this),u=s.hasMarkers(l),d=s.hasText(l),h=function(t){if(t.ids)return W}(l),f=G,p=G;u&&(f=l.marker.maxdisplayed||l._needsCull?U:i.identity),d&&(p=l.marker.maxdisplayed||l._needsCull?U:i.identity);var g=(a=c.selectAll("path.point").data(f,h)).enter().append("path").classed("point",!0);m&&g.call(o.pointStyle,l,t).call(o.translatePoints,y,_).style("opacity",0).transition().style("opacity",1);var x=u&&o.tryColorscale(l.marker,""),b=u&&o.tryColorscale(l.marker,"line");a.order(),a.each(function(e){var i=r.select(this),a=v(i);o.translatePoint(e,a,y,_)?(o.singlePointStyle(e,a,l,x,b,t),n.layerClipId&&o.hideOutsideRangePoint(e,a,y,_,l.xcalendar,l.ycalendar),l.customdata&&i.classed("plotly-customdata",null!==e.data&&void 0!==e.data)):a.remove()}),m?a.exit().transition().style("opacity",0).remove():a.exit().remove(),(a=c.selectAll("g").data(p,h)).enter().append("g").classed("textpoint",!0).append("text"),a.order(),a.each(function(t){var e=r.select(this),i=v(e.select("text"));o.translatePoint(t,i,y,_)?n.layerClipId&&o.hideOutsideRangePoint(t,e,y,_,l.xcalendar,l.ycalendar):e.remove()}),a.selectAll("text").call(o.textPointStyle,l,t).each(function(t){var e=y.c2p(t.x),n=_.c2p(t.y);r.select(this).selectAll("tspan.line").each(function(){v(r.select(this)).attr({x:e,y:n})})}),a.exit().remove()}}e.exports=function(t,e,n,i,a){var s,l,u,h,f,p,g=e.plot.select("g.scatterlayer"),m=!i,v=!!i&&i.duration>0;for((u=g.selectAll("g.trace").data(n,function(t){return t[0].trace.uid})).enter().append("g").attr("class",function(t){return"trace scatter trace"+t[0].trace.uid}).style("stroke-miterlimit",2),c(t,e,n),f=e,g.selectAll("g.trace").each(function(t){var e=r.select(this);if((p=t[0].trace)._nexttrace){if(p._nextFill=e.select(".js-fill.js-tonext"),!p._nextFill.size()){var n=":first-child";e.select(".js-fill.js-tozero").size()&&(n+=" + *"),p._nextFill=e.insert("path",n).attr("class","js-fill js-tonext")}}else e.selectAll(".js-fill.js-tonext").remove(),p._nextFill=null;p.fill&&("tozero"===p.fill.substr(0,6)||"toself"===p.fill||"to"===p.fill.substr(0,2)&&!p._prevtrace)?(p._ownFill=e.select(".js-fill.js-tozero"),p._ownFill.size()||(p._ownFill=e.insert("path",":first-child").attr("class","js-fill js-tozero"))):(e.selectAll(".js-fill.js-tozero").remove(),p._ownFill=null),e.selectAll(".js-fill").call(o.setClipUrl,f.layerClipId)}),s=0,l={};s<n.length;s++)l[n[s][0].trace.uid]=s;(g.selectAll("g.trace").sort(function(t,e){return l[t[0].trace.uid]>l[e[0].trace.uid]?1:-1}),v)?(a&&(h=a()),r.transition().duration(i.duration).ease(i.easing).each("end",function(){h&&h()}).each("interrupt",function(){h&&h()}).each(function(){g.selectAll("g.trace").each(function(r,o){d(t,o,e,r,n,this,i)})})):g.selectAll("g.trace").each(function(r,o){d(t,o,e,r,n,this,i)});m&&u.exit().remove(),g.selectAll("path:not([d])").remove()}},{"../../components/drawing":59,"../../components/errorbars":65,"../../lib":151,"../../lib/polygon":163,"./line_points":273,"./link_traces":275,"./subtypes":281,d3:1}],279:[function(t,e,n){"use strict";var r=t("./subtypes");e.exports=function(t,e){var n,i,o,a,s=t.cd,l=t.xaxis,c=t.yaxis,u=[],d=s[0].trace;if(!r.hasMarkers(d)&&!r.hasText(d))return[];if(!1===e)for(n=0;n<s.length;n++)s[n].selected=0;else for(n=0;n<s.length;n++)i=s[n],o=l.c2p(i.x),a=c.c2p(i.y),e.contains([o,a])?(u.push({pointNumber:n,x:l.c2d(i.x),y:c.c2d(i.y)}),i.selected=1):i.selected=0;return u}},{"./subtypes":281}],280:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../components/drawing"),o=t("../../components/errorbars");function a(t,e,n){var r=t.selectAll("path.point"),o=t.selectAll("text");i.pointStyle(r,e,n),i.textPointStyle(o,e,n),i.selectedPointStyle(r,e),i.selectedTextStyle(o,e)}e.exports={style:function(t,e){var n=e?e[0].node3:r.select(t).selectAll("g.trace.scatter");n.style("opacity",function(t){return t[0].trace.opacity}),n.selectAll("g.points").each(function(e){a(r.select(this),e.trace||e[0].trace,t)}),n.selectAll("g.trace path.js-line").call(i.lineGroupStyle),n.selectAll("g.trace path.js-fill").call(i.fillGroupStyle),n.call(o.style)},stylePoints:a}},{"../../components/drawing":59,"../../components/errorbars":65,d3:1}],281:[function(t,e,n){"use strict";var r=t("../../lib");e.exports={hasLines:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("lines")},hasMarkers:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("markers")},hasText:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("text")},isBubble:function(t){return r.isPlainObject(t.marker)&&Array.isArray(t.marker.size)}}},{"../../lib":151}],282:[function(t,e,n){"use strict";var r=t("../../lib");e.exports=function(t,e,n,i,o){o=o||{},i("textposition"),r.coerceFont(i,"textfont",n.font),o.noSelect||(i("selected.textfont.color"),i("unselected.textfont.color"))}},{"../../lib":151}],283:[function(t,e,n){"use strict";var r=t("../../registry");e.exports=function(t,e,n,i){var o,a=i("x"),s=i("y");if(r.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y"],n),a)s?o=Math.min(a.length,s.length):(o=a.length,i("y0"),i("dy"));else{if(!s)return 0;o=e.y.length,i("x0"),i("dx")}return e._length=o,o}},{"../../registry":233}],284:[function(t,e,n){var r,i=t("./lib/build-log"),o=t("./lib/epsilon"),a=t("./lib/intersecter"),s=t("./lib/segment-chainer"),l=t("./lib/segment-selector"),c=t("./lib/geojson"),u=!1,d=o();function h(t,e,n){var i=r.segments(t),o=r.segments(e),a=n(r.combine(i,o));return r.polygon(a)}r={buildLog:function(t){return!0===t?u=i():!1===t&&(u=!1),!1!==u&&u.list},epsilon:function(t){return d.epsilon(t)},segments:function(t){var e=a(!0,d,u);return t.regions.forEach(e.addRegion),{segments:e.calculate(t.inverted),inverted:t.inverted}},combine:function(t,e){return{combined:a(!1,d,u).calculate(t.segments,t.inverted,e.segments,e.inverted),inverted1:t.inverted,inverted2:e.inverted}},selectUnion:function(t){return{segments:l.union(t.combined,u),inverted:t.inverted1||t.inverted2}},selectIntersect:function(t){return{segments:l.intersect(t.combined,u),inverted:t.inverted1&&t.inverted2}},selectDifference:function(t){return{segments:l.difference(t.combined,u),inverted:t.inverted1&&!t.inverted2}},selectDifferenceRev:function(t){return{segments:l.differenceRev(t.combined,u),inverted:!t.inverted1&&t.inverted2}},selectXor:function(t){return{segments:l.xor(t.combined,u),inverted:t.inverted1!==t.inverted2}},polygon:function(t){return{regions:s(t.segments,d,u),inverted:t.inverted}},polygonFromGeoJSON:function(t){return c.toPolygon(r,t)},polygonToGeoJSON:function(t){return c.fromPolygon(r,d,t)},union:function(t,e){return h(t,e,r.selectUnion)},intersect:function(t,e){return h(t,e,r.selectIntersect)},difference:function(t,e){return h(t,e,r.selectDifference)},differenceRev:function(t,e){return h(t,e,r.selectDifferenceRev)},xor:function(t,e){return h(t,e,r.selectXor)}},"object"==typeof window&&(window.PolyBool=r),e.exports=r},{"./lib/build-log":285,"./lib/epsilon":286,"./lib/geojson":287,"./lib/intersecter":288,"./lib/segment-chainer":290,"./lib/segment-selector":291}],285:[function(t,e,n){e.exports=function(){var t,e=0,n=!1;function r(e,n){return t.list.push({type:e,data:n?JSON.parse(JSON.stringify(n)):void 0}),t}return t={list:[],segmentId:function(){return e++},checkIntersection:function(t,e){return r("check",{seg1:t,seg2:e})},segmentChop:function(t,e){return r("div_seg",{seg:t,pt:e}),r("chop",{seg:t,pt:e})},statusRemove:function(t){return r("pop_seg",{seg:t})},segmentUpdate:function(t){return r("seg_update",{seg:t})},segmentNew:function(t,e){return r("new_seg",{seg:t,primary:e})},segmentRemove:function(t){return r("rem_seg",{seg:t})},tempStatus:function(t,e,n){return r("temp_status",{seg:t,above:e,below:n})},rewind:function(t){return r("rewind",{seg:t})},status:function(t,e,n){return r("status",{seg:t,above:e,below:n})},vert:function(e){return e===n?t:(n=e,r("vert",{x:e}))},log:function(t){return"string"!=typeof t&&(t=JSON.stringify(t,!1,"  ")),r("log",{txt:t})},reset:function(){return r("reset")},selected:function(t){return r("selected",{segs:t})},chainStart:function(t){return r("chain_start",{seg:t})},chainRemoveHead:function(t,e){return r("chain_rem_head",{index:t,pt:e})},chainRemoveTail:function(t,e){return r("chain_rem_tail",{index:t,pt:e})},chainNew:function(t,e){return r("chain_new",{pt1:t,pt2:e})},chainMatch:function(t){return r("chain_match",{index:t})},chainClose:function(t){return r("chain_close",{index:t})},chainAddHead:function(t,e){return r("chain_add_head",{index:t,pt:e})},chainAddTail:function(t,e){return r("chain_add_tail",{index:t,pt:e})},chainConnect:function(t,e){return r("chain_con",{index1:t,index2:e})},chainReverse:function(t){return r("chain_rev",{index:t})},chainJoin:function(t,e){return r("chain_join",{index1:t,index2:e})},done:function(){return r("done")}}}},{}],286:[function(t,e,n){e.exports=function(t){"number"!=typeof t&&(t=1e-10);var e={epsilon:function(e){return"number"==typeof e&&(t=e),t},pointAboveOrOnLine:function(e,n,r){var i=n[0],o=n[1],a=r[0],s=r[1],l=e[0];return(a-i)*(e[1]-o)-(s-o)*(l-i)>=-t},pointBetween:function(e,n,r){var i=e[1]-n[1],o=r[0]-n[0],a=e[0]-n[0],s=r[1]-n[1],l=a*o+i*s;return!(l<t||l-(o*o+s*s)>-t)},pointsSameX:function(e,n){return Math.abs(e[0]-n[0])<t},pointsSameY:function(e,n){return Math.abs(e[1]-n[1])<t},pointsSame:function(t,n){return e.pointsSameX(t,n)&&e.pointsSameY(t,n)},pointsCompare:function(t,n){return e.pointsSameX(t,n)?e.pointsSameY(t,n)?0:t[1]<n[1]?-1:1:t[0]<n[0]?-1:1},pointsCollinear:function(e,n,r){var i=e[0]-n[0],o=e[1]-n[1],a=n[0]-r[0],s=n[1]-r[1];return Math.abs(i*s-a*o)<t},linesIntersect:function(e,n,r,i){var o=n[0]-e[0],a=n[1]-e[1],s=i[0]-r[0],l=i[1]-r[1],c=o*l-a*s;if(Math.abs(c)<t)return!1;var u=e[0]-r[0],d=e[1]-r[1],h=(s*d-l*u)/c,f=(o*d-a*u)/c,p={alongA:0,alongB:0,pt:[e[0]+h*o,e[1]+h*a]};return p.alongA=h<=-t?-2:h<t?-1:h-1<=-t?0:h-1<t?1:2,p.alongB=f<=-t?-2:f<t?-1:f-1<=-t?0:f-1<t?1:2,p},pointInsideRegion:function(e,n){for(var r=e[0],i=e[1],o=n[n.length-1][0],a=n[n.length-1][1],s=!1,l=0;l<n.length;l++){var c=n[l][0],u=n[l][1];u-i>t!=a-i>t&&(o-c)*(i-u)/(a-u)+c-r>t&&(s=!s),o=c,a=u}return s}};return e}},{}],287:[function(t,e,n){var r={toPolygon:function(t,e){function n(e){if(e.length<=0)return t.segments({inverted:!1,regions:[]});function n(e){var n=e.slice(0,e.length-1);return t.segments({inverted:!1,regions:[n]})}for(var r=n(e[0]),i=1;i<e.length;i++)r=t.selectDifference(t.combine(r,n(e[i])));return r}if("Polygon"===e.type)return t.polygon(n(e.coordinates));if("MultiPolygon"===e.type){for(var r=t.segments({inverted:!1,regions:[]}),i=0;i<e.coordinates.length;i++)r=t.selectUnion(t.combine(r,n(e.coordinates[i])));return t.polygon(r)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(t,e,n){function r(t,n){return e.pointInsideRegion([.5*(t[0][0]+t[1][0]),.5*(t[0][1]+t[1][1])],n)}function i(t){return{region:t,children:[]}}n=t.polygon(t.segments(n));var o=i(null);function a(t,e){for(var n=0;n<t.children.length;n++){if(r(e,(s=t.children[n]).region))return void a(s,e)}var o=i(e);for(n=0;n<t.children.length;n++){var s;r((s=t.children[n]).region,e)&&(o.children.push(s),t.children.splice(n,1),n--)}t.children.push(o)}for(var s=0;s<n.regions.length;s++){var l=n.regions[s];l.length<3||a(o,l)}function c(t,e){for(var n=0,r=t[t.length-1][0],i=t[t.length-1][1],o=[],a=0;a<t.length;a++){var s=t[a][0],l=t[a][1];o.push([s,l]),n+=l*r-s*i,r=s,i=l}return n<0!==e&&o.reverse(),o.push([o[0][0],o[0][1]]),o}var u=[];function d(t){var e=[c(t.region,!1)];u.push(e);for(var n=0;n<t.children.length;n++)e.push(h(t.children[n]))}function h(t){for(var e=0;e<t.children.length;e++)d(t.children[e]);return c(t.region,!0)}for(s=0;s<o.children.length;s++)d(o.children[s]);return u.length<=0?{type:"Polygon",coordinates:[]}:1==u.length?{type:"Polygon",coordinates:u[0]}:{type:"MultiPolygon",coordinates:u}}};e.exports=r},{}],288:[function(t,e,n){var r=t("./linked-list");e.exports=function(t,e,n){function i(t,e,r){return{id:n?n.segmentId():-1,start:t,end:e,myFill:{above:r.myFill.above,below:r.myFill.below},otherFill:null}}var o=r.create();function a(t,n){o.insertBefore(t,function(r){var i,o,a,s,l,c,u;return i=t.isStart,o=t.pt,a=n,s=r.isStart,l=r.pt,c=r.other.pt,(0!==(u=e.pointsCompare(o,l))?u:e.pointsSame(a,c)?0:i!==s?i?1:-1:e.pointAboveOrOnLine(a,s?l:c,s?c:l)?1:-1)<0})}function s(t,e){var n,i,o,s,l,c,u,d=(n=t,i=e,a(o=r.node({isStart:!0,pt:n.start,seg:n,primary:i,other:null,status:null}),n.end),o);return s=d,l=t,c=e,u=r.node({isStart:!1,pt:l.end,seg:l,primary:c,other:s,status:null}),s.other=u,a(u,s.pt),d}function l(t,e){var r,o,l=i(e,t.seg.end,t.seg);return r=t,o=e,n&&n.segmentChop(r.seg,o),r.other.remove(),r.seg.end=o,r.other.pt=o,a(r.other,r.pt),s(l,t.primary)}function c(i,a){var s=r.create();function c(t){return s.findTransition(function(n){var r,i,o,a,s,l;return r=t,i=n.ev,o=r.seg.start,a=r.seg.end,s=i.seg.start,l=i.seg.end,(e.pointsCollinear(o,s,l)?e.pointsCollinear(a,s,l)?1:e.pointAboveOrOnLine(a,s,l)?1:-1:e.pointAboveOrOnLine(o,s,l)?1:-1)>0})}function u(t,r){var i=t.seg,o=r.seg,a=i.start,s=i.end,c=o.start,u=o.end;n&&n.checkIntersection(i,o);var d=e.linesIntersect(a,s,c,u);if(!1===d){if(!e.pointsCollinear(a,s,c))return!1;if(e.pointsSame(a,u)||e.pointsSame(s,c))return!1;var h=e.pointsSame(a,c),f=e.pointsSame(s,u);if(h&&f)return r;var p=!h&&e.pointBetween(a,c,u),g=!f&&e.pointBetween(s,c,u);if(h)return g?l(r,s):l(t,u),r;p&&(f||(g?l(r,s):l(t,u)),l(r,a))}else 0===d.alongA&&(-1===d.alongB?l(t,c):0===d.alongB?l(t,d.pt):1===d.alongB&&l(t,u)),0===d.alongB&&(-1===d.alongA?l(r,a):0===d.alongA?l(r,d.pt):1===d.alongA&&l(r,s));return!1}for(var d=[];!o.isEmpty();){var h=o.getHead();if(n&&n.vert(h.pt[0]),h.isStart){n&&n.segmentNew(h.seg,h.primary);var f=c(h),p=f.before?f.before.ev:null,g=f.after?f.after.ev:null;function m(){if(p){var t=u(h,p);if(t)return t}return!!g&&u(h,g)}n&&n.tempStatus(h.seg,!!p&&p.seg,!!g&&g.seg);var v,y,_=m();if(_)t?(y=null===h.seg.myFill.below||h.seg.myFill.above!==h.seg.myFill.below)&&(_.seg.myFill.above=!_.seg.myFill.above):_.seg.otherFill=h.seg.myFill,n&&n.segmentUpdate(_.seg),h.other.remove(),h.remove();if(o.getHead()!==h){n&&n.rewind(h.seg);continue}t?(y=null===h.seg.myFill.below||h.seg.myFill.above!==h.seg.myFill.below,h.seg.myFill.below=g?g.seg.myFill.above:i,h.seg.myFill.above=y?!h.seg.myFill.below:h.seg.myFill.below):null===h.seg.otherFill&&(v=g?h.primary===g.primary?g.seg.otherFill.above:g.seg.myFill.above:h.primary?a:i,h.seg.otherFill={above:v,below:v}),n&&n.status(h.seg,!!p&&p.seg,!!g&&g.seg),h.other.status=f.insert(r.node({ev:h}))}else{var x=h.status;if(null===x)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(s.exists(x.prev)&&s.exists(x.next)&&u(x.prev.ev,x.next.ev),n&&n.statusRemove(x.ev.seg),x.remove(),!h.primary){var b=h.seg.myFill;h.seg.myFill=h.seg.otherFill,h.seg.otherFill=b}d.push(h.seg)}o.getHead().remove()}return n&&n.done(),d}return t?{addRegion:function(t){for(var r,i,o,a=t[t.length-1],l=0;l<t.length;l++){r=a,a=t[l];var c=e.pointsCompare(r,a);0!==c&&s((i=c<0?r:a,o=c<0?a:r,{id:n?n.segmentId():-1,start:i,end:o,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(t){return c(t,!1)}}:{calculate:function(t,e,n,r){return t.forEach(function(t){s(i(t.start,t.end,t),!0)}),n.forEach(function(t){s(i(t.start,t.end,t),!1)}),c(e,r)}}}},{"./linked-list":289}],289:[function(t,e,n){e.exports={create:function(){var t={root:{root:!0,next:null},exists:function(e){return null!==e&&e!==t.root},isEmpty:function(){return null===t.root.next},getHead:function(){return t.root.next},insertBefore:function(e,n){for(var r=t.root,i=t.root.next;null!==i;){if(n(i))return e.prev=i.prev,e.next=i,i.prev.next=e,void(i.prev=e);r=i,i=i.next}r.next=e,e.prev=r,e.next=null},findTransition:function(e){for(var n=t.root,r=t.root.next;null!==r&&!e(r);)n=r,r=r.next;return{before:n===t.root?null:n,after:r,insert:function(t){return t.prev=n,t.next=r,n.next=t,null!==r&&(r.prev=t),t}}}};return t},node:function(t){return t.prev=null,t.next=null,t.remove=function(){t.prev.next=t.next,t.next&&(t.next.prev=t.prev),t.prev=null,t.next=null},t}}},{}],290:[function(t,e,n){e.exports=function(t,e,n){var r=[],i=[];return t.forEach(function(t){var o=t.start,a=t.end;if(e.pointsSame(o,a))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{n&&n.chainStart(t);for(var s={index:0,matches_head:!1,matches_pt1:!1},l={index:0,matches_head:!1,matches_pt1:!1},c=s,u=0;u<r.length;u++){var d=(m=r[u])[0],h=(m[1],m[m.length-1]);if(m[m.length-2],e.pointsSame(d,o)){if(T(u,!0,!0))break}else if(e.pointsSame(d,a)){if(T(u,!0,!1))break}else if(e.pointsSame(h,o)){if(T(u,!1,!0))break}else if(e.pointsSame(h,a)&&T(u,!1,!1))break}if(c===s)return r.push([o,a]),void(n&&n.chainNew(o,a));if(c===l){n&&n.chainMatch(s.index);var f=s.index,p=s.matches_pt1?a:o,g=s.matches_head,m=r[f],v=g?m[0]:m[m.length-1],y=g?m[1]:m[m.length-2],_=g?m[m.length-1]:m[0],x=g?m[m.length-2]:m[1];return e.pointsCollinear(y,v,p)&&(g?(n&&n.chainRemoveHead(s.index,p),m.shift()):(n&&n.chainRemoveTail(s.index,p),m.pop()),v=y),e.pointsSame(_,p)?(r.splice(f,1),e.pointsCollinear(x,_,v)&&(g?(n&&n.chainRemoveTail(s.index,v),m.pop()):(n&&n.chainRemoveHead(s.index,v),m.shift())),n&&n.chainClose(s.index),void i.push(m)):void(g?(n&&n.chainAddHead(s.index,p),m.unshift(p)):(n&&n.chainAddTail(s.index,p),m.push(p)))}var b=s.index,w=l.index;n&&n.chainConnect(b,w);var k=r[b].length<r[w].length;s.matches_head?l.matches_head?k?(M(b),A(b,w)):(M(w),A(w,b)):A(w,b):l.matches_head?A(b,w):k?(M(b),A(w,b)):(M(w),A(b,w))}function T(t,e,n){return c.index=t,c.matches_head=e,c.matches_pt1=n,c===s?(c=l,!1):(c=null,!0)}function M(t){n&&n.chainReverse(t),r[t].reverse()}function A(t,i){var o=r[t],a=r[i],s=o[o.length-1],l=o[o.length-2],c=a[0],u=a[1];e.pointsCollinear(l,s,c)&&(n&&n.chainRemoveTail(t,s),o.pop(),s=l),e.pointsCollinear(s,c,u)&&(n&&n.chainRemoveHead(i,c),a.shift()),n&&n.chainJoin(t,i),r[t]=o.concat(a),r.splice(i,1)}}),i}},{}],291:[function(t,e,n){function r(t,e,n){var r=[];return t.forEach(function(t){var i=(t.myFill.above?8:0)+(t.myFill.below?4:0)+(t.otherFill&&t.otherFill.above?2:0)+(t.otherFill&&t.otherFill.below?1:0);0!==e[i]&&r.push({id:n?n.segmentId():-1,start:t.start,end:t.end,myFill:{above:1===e[i],below:2===e[i]},otherFill:null})}),n&&n.selected(r),r}var i={union:function(t,e){return r(t,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],e)},intersect:function(t,e){return r(t,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],e)},difference:function(t,e){return r(t,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],e)},differenceRev:function(t,e){return r(t,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],e)},xor:function(t,e){return r(t,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],e)}};e.exports=i},{}],292:[function(t,e,n){var r,i,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var c,u=[],d=!1,h=-1;function f(){d&&c&&(d=!1,c.length?u=c.concat(u):h=-1,u.length&&p())}function p(){if(!d){var t=l(f);d=!0;for(var e=u.length;e;){for(c=u,u=[];++h<e;)c&&c[h].run();h=-1,e=u.length}c=null,d=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function m(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new g(t,e)),1!==u.length||d||l(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],293:[function(t,e,n){!function(t){var n=/^\s+/,r=/\s+$/,i=0,o=t.round,a=t.min,s=t.max,l=t.random;function c(e,l){if(l=l||{},(e=e||"")instanceof c)return e;if(!(this instanceof c))return new c(e,l);var u=function(e){var i={r:0,g:0,b:0},o=1,l=null,c=null,u=null,d=!1,h=!1;"string"==typeof e&&(e=function(t){t=t.replace(n,"").replace(r,"").toLowerCase();var e,i=!1;if(L[t])t=L[t],i=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=F.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=F.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=F.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=F.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=F.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=F.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=F.hex8.exec(t))return{r:D(e[1]),g:D(e[2]),b:D(e[3]),a:j(e[4]),format:i?"name":"hex8"};if(e=F.hex6.exec(t))return{r:D(e[1]),g:D(e[2]),b:D(e[3]),format:i?"name":"hex"};if(e=F.hex4.exec(t))return{r:D(e[1]+""+e[1]),g:D(e[2]+""+e[2]),b:D(e[3]+""+e[3]),a:j(e[4]+""+e[4]),format:i?"name":"hex8"};if(e=F.hex3.exec(t))return{r:D(e[1]+""+e[1]),g:D(e[2]+""+e[2]),b:D(e[3]+""+e[3]),format:i?"name":"hex"};return!1}(e));"object"==typeof e&&(H(e.r)&&H(e.g)&&H(e.b)?(f=e.r,p=e.g,g=e.b,i={r:255*P(f,255),g:255*P(p,255),b:255*P(g,255)},d=!0,h="%"===String(e.r).substr(-1)?"prgb":"rgb"):H(e.h)&&H(e.s)&&H(e.v)?(l=O(e.s),c=O(e.v),i=function(e,n,r){e=6*P(e,360),n=P(n,100),r=P(r,100);var i=t.floor(e),o=e-i,a=r*(1-n),s=r*(1-o*n),l=r*(1-(1-o)*n),c=i%6;return{r:255*[r,s,a,a,l,r][c],g:255*[l,r,r,s,a,a][c],b:255*[a,a,l,r,r,s][c]}}(e.h,l,c),d=!0,h="hsv"):H(e.h)&&H(e.s)&&H(e.l)&&(l=O(e.s),u=O(e.l),i=function(t,e,n){var r,i,o;function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=P(t,360),e=P(e,100),n=P(n,100),0===e)r=i=o=n;else{var s=n<.5?n*(1+e):n+e-n*e,l=2*n-s;r=a(l,s,t+1/3),i=a(l,s,t),o=a(l,s,t-1/3)}return{r:255*r,g:255*i,b:255*o}}(e.h,l,u),d=!0,h="hsl"),e.hasOwnProperty("a")&&(o=e.a));var f,p,g;return o=C(o),{ok:d,format:e.format||h,r:a(255,s(i.r,0)),g:a(255,s(i.g,0)),b:a(255,s(i.b,0)),a:o}}(e);this._originalInput=e,this._r=u.r,this._g=u.g,this._b=u.b,this._a=u.a,this._roundA=o(100*this._a)/100,this._format=l.format||u.format,this._gradientType=l.gradientType,this._r<1&&(this._r=o(this._r)),this._g<1&&(this._g=o(this._g)),this._b<1&&(this._b=o(this._b)),this._ok=u.ok,this._tc_id=i++}function u(t,e,n){t=P(t,255),e=P(e,255),n=P(n,255);var r,i,o=s(t,e,n),l=a(t,e,n),c=(o+l)/2;if(o==l)r=i=0;else{var u=o-l;switch(i=c>.5?u/(2-o-l):u/(o+l),o){case t:r=(e-n)/u+(e<n?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return{h:r,s:i,l:c}}function d(t,e,n){t=P(t,255),e=P(e,255),n=P(n,255);var r,i,o=s(t,e,n),l=a(t,e,n),c=o,u=o-l;if(i=0===o?0:u/o,o==l)r=0;else{switch(o){case t:r=(e-n)/u+(e<n?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return{h:r,s:i,v:c}}function h(t,e,n,r){var i=[E(o(t).toString(16)),E(o(e).toString(16)),E(o(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function f(t,e,n,r){return[E(I(r)),E(o(t).toString(16)),E(o(e).toString(16)),E(o(n).toString(16))].join("")}function p(t,e){e=0===e?0:e||10;var n=c(t).toHsl();return n.s-=e/100,n.s=z(n.s),c(n)}function g(t,e){e=0===e?0:e||10;var n=c(t).toHsl();return n.s+=e/100,n.s=z(n.s),c(n)}function m(t){return c(t).desaturate(100)}function v(t,e){e=0===e?0:e||10;var n=c(t).toHsl();return n.l+=e/100,n.l=z(n.l),c(n)}function y(t,e){e=0===e?0:e||10;var n=c(t).toRgb();return n.r=s(0,a(255,n.r-o(-e/100*255))),n.g=s(0,a(255,n.g-o(-e/100*255))),n.b=s(0,a(255,n.b-o(-e/100*255))),c(n)}function _(t,e){e=0===e?0:e||10;var n=c(t).toHsl();return n.l-=e/100,n.l=z(n.l),c(n)}function x(t,e){var n=c(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,c(n)}function b(t){var e=c(t).toHsl();return e.h=(e.h+180)%360,c(e)}function w(t){var e=c(t).toHsl(),n=e.h;return[c(t),c({h:(n+120)%360,s:e.s,l:e.l}),c({h:(n+240)%360,s:e.s,l:e.l})]}function k(t){var e=c(t).toHsl(),n=e.h;return[c(t),c({h:(n+90)%360,s:e.s,l:e.l}),c({h:(n+180)%360,s:e.s,l:e.l}),c({h:(n+270)%360,s:e.s,l:e.l})]}function T(t){var e=c(t).toHsl(),n=e.h;return[c(t),c({h:(n+72)%360,s:e.s,l:e.l}),c({h:(n+216)%360,s:e.s,l:e.l})]}function M(t,e,n){e=e||6,n=n||30;var r=c(t).toHsl(),i=360/n,o=[c(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(c(r));return o}function A(t,e){e=e||6;for(var n=c(t).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/e;e--;)a.push(c({h:r,s:i,v:o})),o=(o+s)%1;return a}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var e,n,r,i=this.toRgb();return e=i.r/255,n=i.g/255,r=i.b/255,.2126*(e<=.03928?e/12.92:t.pow((e+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:t.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:t.pow((r+.055)/1.055,2.4))},setAlpha:function(t){return this._a=C(t),this._roundA=o(100*this._a)/100,this},toHsv:function(){var t=d(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=d(this._r,this._g,this._b),e=o(360*t.h),n=o(100*t.s),r=o(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=u(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=u(this._r,this._g,this._b),e=o(360*t.h),n=o(100*t.s),r=o(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return h(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,r,i){var a=[E(o(t).toString(16)),E(o(e).toString(16)),E(o(n).toString(16)),E(I(r))];if(i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1))return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0);return a.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(100*P(this._r,255))+"%",g:o(100*P(this._g,255))+"%",b:o(100*P(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+o(100*P(this._r,255))+"%, "+o(100*P(this._g,255))+"%, "+o(100*P(this._b,255))+"%)":"rgba("+o(100*P(this._r,255))+"%, "+o(100*P(this._g,255))+"%, "+o(100*P(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(S[h(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+f(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var i=c(t);n="#"+f(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0;return e||!r||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return c(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(v,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(_,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(g,arguments)},greyscale:function(){return this._applyModification(m,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(M,arguments)},complement:function(){return this._applyCombination(b,arguments)},monochromatic:function(){return this._applyCombination(A,arguments)},splitcomplement:function(){return this._applyCombination(T,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},c.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:O(t[r]));t=n}return c(t,e)},c.equals=function(t,e){return!(!t||!e)&&c(t).toRgbString()==c(e).toRgbString()},c.random=function(){return c.fromRatio({r:l(),g:l(),b:l()})},c.mix=function(t,e,n){n=0===n?0:n||50;var r=c(t).toRgb(),i=c(e).toRgb(),o=n/100;return c({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},c.readability=function(e,n){var r=c(e),i=c(n);return(t.max(r.getLuminance(),i.getLuminance())+.05)/(t.min(r.getLuminance(),i.getLuminance())+.05)},c.isReadable=function(t,e,n){var r,i,o=c.readability(t,e);switch(i=!1,(r=function(t){var e,n;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==n&&"large"!==n&&(n="small");return{level:e,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7}return i},c.mostReadable=function(t,e,n){var r,i,o,a,s=null,l=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var u=0;u<e.length;u++)(r=c.readability(t,e[u]))>l&&(l=r,s=c(e[u]));return c.isReadable(t,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,c.mostReadable(t,["#fff","#000"],n))};var L=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},S=c.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(L);function C(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function P(e,n){var r;"string"==typeof(r=e)&&-1!=r.indexOf(".")&&1===parseFloat(r)&&(e="100%");var i,o="string"==typeof(i=e)&&-1!=i.indexOf("%");return e=a(n,s(0,parseFloat(e))),o&&(e=parseInt(e*n,10)/100),t.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function z(t){return a(1,s(0,t))}function D(t){return parseInt(t,16)}function E(t){return 1==t.length?"0"+t:""+t}function O(t){return t<=1&&(t=100*t+"%"),t}function I(e){return t.round(255*parseFloat(e)).toString(16)}function j(t){return D(t)/255}var N,R,B,F=(R="[\\s|\\(]+("+(N="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",B="[\\s|\\(]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",{CSS_UNIT:new RegExp(N),rgb:new RegExp("rgb"+R),rgba:new RegExp("rgba"+B),hsl:new RegExp("hsl"+R),hsla:new RegExp("hsla"+B),hsv:new RegExp("hsv"+R),hsva:new RegExp("hsva"+B),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function H(t){return!!F.CSS_UNIT.exec(t)}void 0!==e&&e.exports?e.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):window.tinycolor=c}(Math)},{}],294:[function(t,e,n){"use strict";e.exports=function(){this.name="Link",console.log("%s module",this.name)}},{}],295:[function(t,e,n){"use strict";var r=t("plotly.js/lib/core"),i=t("plotly.js/lib/bar");r.register(i);var o=annualTotals.map(function(t){return t.homicides_total}),a=annualTotals.map(function(t){return t.homicides_harvard_park}),s=annualTotals.map(function(t){return t.year});function l(t,e,n,i){var o=[{x:t,y:e,type:"bar",marker:{color:"#86c7df"},hoverinfo:"y",hoverlabel:{bgcolor:"#777777"}}],a={title:i,xaxis:{title:"Year",fixedrange:!0},yaxis:{fixedrange:!0},margin:{l:30,r:15,t:45,b:30},height:250};r.newPlot(n,o,a,{displayModeBar:!1})}var c="<b>Homicides in L.A. County</b>",u="<b>Homicides in Harvard Park neighborhood</b>";l(s,o,"county-homicides",c),l(s,a,"harvard-park-homicides",u),l(s,o,"county-homicides",c),l(s,a,"harvard-park-homicides",u)},{"plotly.js/lib/bar":15,"plotly.js/lib/core":16}],296:[function(t,e,n){"use strict";var r=L.map("map");L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{scrollWheelZoom:!1,minZoom:9}).addTo(r),r.setView([33.983265,-118.306799],18),homicides.forEach(function(t){L.circleMarker([t.latitude,t.longitude]).addTo(r).bindTooltip(t.first_name+" "+t.last_name,{permanent:!0})});var i=L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:9});new L.Control.MiniMap(i,{toggleDisplay:!0}).addTo(r)},{}],297:[function(t,e,n){"use strict";var r=t("jquery"),i=t("../_modules/link/link"),o=t("leaflet");t("leaflet-minimap");r(function(){new i,console.log("Welcome to Yeogurt!")});t("./_charts.js"),t("./_map.js");o.Icon.Default.imagePath="https://unpkg.com/leaflet@1.3.1/dist/images/"},{"../_modules/link/link":294,"./_charts.js":295,"./_map.js":296,jquery:9,leaflet:11,"leaflet-minimap":10}]},{},[297]);
//# sourceMappingURL=main.js.map
